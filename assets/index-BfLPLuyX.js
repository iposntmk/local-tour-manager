const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exceljs.min-gP670MR2.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js","assets/jszip.min-YIA1-66z.js"])))=>i.map(i=>d[i]);
var t2=Object.defineProperty;var _x=e=>{throw TypeError(e)};var n2=(e,t,n)=>t in e?t2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lu=(e,t,n)=>n2(e,typeof t!="symbol"?t+"":t,n),Hf=(e,t,n)=>t.has(e)||_x("Cannot "+n);var B=(e,t,n)=>(Hf(e,t,"read from private field"),n?n.call(e):t.get(e)),Oe=(e,t,n)=>t.has(e)?_x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Se=(e,t,n,r)=>(Hf(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ge=(e,t,n)=>(Hf(e,t,"access private method"),n);var Bu=(e,t,n,r)=>({set _(s){Se(e,t,s,n)},get _(){return B(e,t,r)}});function r2(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s2(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Gb={exports:{}},Fh={},Kb={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),a2=Symbol.for("react.portal"),o2=Symbol.for("react.fragment"),i2=Symbol.for("react.strict_mode"),l2=Symbol.for("react.profiler"),c2=Symbol.for("react.provider"),u2=Symbol.for("react.context"),d2=Symbol.for("react.forward_ref"),h2=Symbol.for("react.suspense"),f2=Symbol.for("react.memo"),m2=Symbol.for("react.lazy"),kx=Symbol.iterator;function p2(e){return e===null||typeof e!="object"?null:(e=kx&&e[kx]||e["@@iterator"],typeof e=="function"?e:null)}var Yb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qb=Object.assign,Jb={};function wl(e,t,n){this.props=e,this.context=t,this.refs=Jb,this.updater=n||Yb}wl.prototype.isReactComponent={};wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xb(){}Xb.prototype=wl.prototype;function lv(e,t,n){this.props=e,this.context=t,this.refs=Jb,this.updater=n||Yb}var cv=lv.prototype=new Xb;cv.constructor=lv;Qb(cv,wl.prototype);cv.isPureReactComponent=!0;var Ex=Array.isArray,Zb=Object.prototype.hasOwnProperty,uv={current:null},e1={key:!0,ref:!0,__self:!0,__source:!0};function t1(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Zb.call(t,r)&&!e1.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:fu,type:e,key:o,ref:i,props:s,_owner:uv.current}}function g2(e,t){return{$$typeof:fu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dv(e){return typeof e=="object"&&e!==null&&e.$$typeof===fu}function v2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Tx=/\/+/g;function qf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?v2(""+e.key):t.toString(36)}function vd(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case fu:case a2:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+qf(i,0):r,Ex(s)?(n="",e!=null&&(n=e.replace(Tx,"$&/")+"/"),vd(s,t,n,"",function(u){return u})):s!=null&&(dv(s)&&(s=g2(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Tx,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Ex(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+qf(o,l);i+=vd(o,t,n,c,s)}else if(c=p2(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+qf(o,l++),i+=vd(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Uu(e,t,n){if(e==null)return e;var r=[],s=0;return vd(e,r,"","",function(o){return t.call(n,o,s++)}),r}function y2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qn={current:null},yd={transition:null},x2={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:yd,ReactCurrentOwner:uv};function n1(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Uu,forEach:function(e,t,n){Uu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Uu(e,function(){t++}),t},toArray:function(e){return Uu(e,function(t){return t})||[]},only:function(e){if(!dv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Je.Component=wl;Je.Fragment=o2;Je.Profiler=l2;Je.PureComponent=lv;Je.StrictMode=i2;Je.Suspense=h2;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x2;Je.act=n1;Je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qb({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=uv.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Zb.call(t,c)&&!e1.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:fu,type:e.type,key:s,ref:o,props:r,_owner:i}};Je.createContext=function(e){return e={$$typeof:u2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:c2,_context:e},e.Consumer=e};Je.createElement=t1;Je.createFactory=function(e){var t=t1.bind(null,e);return t.type=e,t};Je.createRef=function(){return{current:null}};Je.forwardRef=function(e){return{$$typeof:d2,render:e}};Je.isValidElement=dv;Je.lazy=function(e){return{$$typeof:m2,_payload:{_status:-1,_result:e},_init:y2}};Je.memo=function(e,t){return{$$typeof:f2,type:e,compare:t===void 0?null:t}};Je.startTransition=function(e){var t=yd.transition;yd.transition={};try{e()}finally{yd.transition=t}};Je.unstable_act=n1;Je.useCallback=function(e,t){return qn.current.useCallback(e,t)};Je.useContext=function(e){return qn.current.useContext(e)};Je.useDebugValue=function(){};Je.useDeferredValue=function(e){return qn.current.useDeferredValue(e)};Je.useEffect=function(e,t){return qn.current.useEffect(e,t)};Je.useId=function(){return qn.current.useId()};Je.useImperativeHandle=function(e,t,n){return qn.current.useImperativeHandle(e,t,n)};Je.useInsertionEffect=function(e,t){return qn.current.useInsertionEffect(e,t)};Je.useLayoutEffect=function(e,t){return qn.current.useLayoutEffect(e,t)};Je.useMemo=function(e,t){return qn.current.useMemo(e,t)};Je.useReducer=function(e,t,n){return qn.current.useReducer(e,t,n)};Je.useRef=function(e){return qn.current.useRef(e)};Je.useState=function(e){return qn.current.useState(e)};Je.useSyncExternalStore=function(e,t,n){return qn.current.useSyncExternalStore(e,t,n)};Je.useTransition=function(){return qn.current.useTransition()};Je.version="18.3.1";Kb.exports=Je;var f=Kb.exports;const re=qb(f),hv=r2({__proto__:null,default:re},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2=f,b2=Symbol.for("react.element"),j2=Symbol.for("react.fragment"),N2=Object.prototype.hasOwnProperty,C2=w2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S2={key:!0,ref:!0,__self:!0,__source:!0};function r1(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)N2.call(t,r)&&!S2.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:b2,type:e,key:o,ref:i,props:s,_owner:C2.current}}Fh.Fragment=j2;Fh.jsx=r1;Fh.jsxs=r1;Gb.exports=Fh;var a=Gb.exports,s1={exports:{}},Sr={},a1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,S){var P=j.length;j.push(S);e:for(;0<P;){var H=P-1>>>1,R=j[H];if(0<s(R,S))j[H]=S,j[P]=R,P=H;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var S=j[0],P=j.pop();if(P!==S){j[0]=P;e:for(var H=0,R=j.length,L=R>>>1;H<L;){var J=2*(H+1)-1,Q=j[J],G=J+1,q=j[G];if(0>s(Q,P))G<R&&0>s(q,Q)?(j[H]=q,j[G]=P,H=G):(j[H]=Q,j[J]=P,H=J);else if(G<R&&0>s(q,P))j[H]=q,j[G]=P,H=G;else break e}}return S}function s(j,S){var P=j.sortIndex-S.sortIndex;return P!==0?P:j.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,N=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var S=n(u);S!==null;){if(S.callback===null)r(u);else if(S.startTime<=j)r(u),S.sortIndex=S.expirationTime,t(c,S);else break;S=n(u)}}function x(j){if(g=!1,b(j),!N)if(n(c)!==null)N=!0,F(_);else{var S=n(u);S!==null&&C(x,S.startTime-j)}}function _(j,S){N=!1,g&&(g=!1,w(D),D=-1),p=!0;var P=m;try{for(b(S),h=n(c);h!==null&&(!(h.expirationTime>S)||j&&!Y());){var H=h.callback;if(typeof H=="function"){h.callback=null,m=h.priorityLevel;var R=H(h.expirationTime<=S);S=e.unstable_now(),typeof R=="function"?h.callback=R:h===n(c)&&r(c),b(S)}else r(c);h=n(c)}if(h!==null)var L=!0;else{var J=n(u);J!==null&&C(x,J.startTime-S),L=!1}return L}finally{h=null,m=P,p=!1}}var k=!1,E=null,D=-1,$=5,O=-1;function Y(){return!(e.unstable_now()-O<$)}function T(){if(E!==null){var j=e.unstable_now();O=j;var S=!0;try{S=E(!0,j)}finally{S?M():(k=!1,E=null)}}else k=!1}var M;if(typeof v=="function")M=function(){v(T)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,A=U.port2;U.port1.onmessage=T,M=function(){A.postMessage(null)}}else M=function(){y(T,0)};function F(j){E=j,k||(k=!0,M())}function C(j,S){D=y(function(){j(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){N||p||(N=!0,F(_))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var S=3;break;default:S=m}var P=m;m=S;try{return j()}finally{m=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,S){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var P=m;m=j;try{return S()}finally{m=P}},e.unstable_scheduleCallback=function(j,S,P){var H=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?H+P:H):P=H,j){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=P+R,j={id:d++,callback:S,priorityLevel:j,startTime:P,expirationTime:R,sortIndex:-1},P>H?(j.sortIndex=P,t(u,j),n(c)===null&&j===n(u)&&(g?(w(D),D=-1):g=!0,C(x,P-H))):(j.sortIndex=R,t(c,j),N||p||(N=!0,F(_))),j},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(j){var S=m;return function(){var P=m;m=S;try{return j.apply(this,arguments)}finally{m=P}}}})(o1);a1.exports=o1;var _2=a1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2=f,jr=_2;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i1=new Set,Rc={};function Zo(e,t){ol(e,t),ol(e+"Capture",t)}function ol(e,t){for(Rc[e]=t,e=0;e<t.length;e++)i1.add(t[e])}var Js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dp=Object.prototype.hasOwnProperty,E2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Px={},Ax={};function T2(e){return dp.call(Ax,e)?!0:dp.call(Px,e)?!1:E2.test(e)?Ax[e]=!0:(Px[e]=!0,!1)}function P2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A2(e,t,n,r){if(t===null||typeof t>"u"||P2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gn(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jn[e]=new Gn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jn[t]=new Gn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jn[e]=new Gn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jn[e]=new Gn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jn[e]=new Gn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jn[e]=new Gn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jn[e]=new Gn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jn[e]=new Gn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jn[e]=new Gn(e,5,!1,e.toLowerCase(),null,!1,!1)});var fv=/[\-:]([a-z])/g;function mv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fv,mv);jn[t]=new Gn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fv,mv);jn[t]=new Gn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fv,mv);jn[t]=new Gn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jn[e]=new Gn(e,1,!1,e.toLowerCase(),null,!1,!1)});jn.xlinkHref=new Gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jn[e]=new Gn(e,1,!1,e.toLowerCase(),null,!0,!0)});function pv(e,t,n,r){var s=jn.hasOwnProperty(t)?jn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A2(t,n,s,r)&&(n=null),r||s===null?T2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var oa=k2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zu=Symbol.for("react.element"),Si=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),gv=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),vv=Symbol.for("react.forward_ref"),fp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),yv=Symbol.for("react.memo"),ya=Symbol.for("react.lazy"),u1=Symbol.for("react.offscreen"),Dx=Symbol.iterator;function Dl(e){return e===null||typeof e!="object"?null:(e=Dx&&e[Dx]||e["@@iterator"],typeof e=="function"?e:null)}var At=Object.assign,Gf;function nc(e){if(Gf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gf=t&&t[1]||""}return`
`+Gf+e}var Kf=!1;function Yf(e,t){if(!e||Kf)return"";Kf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Kf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?nc(e):""}function D2(e){switch(e.tag){case 5:return nc(e.type);case 16:return nc("Lazy");case 13:return nc("Suspense");case 19:return nc("SuspenseList");case 0:case 2:case 15:return e=Yf(e.type,!1),e;case 11:return e=Yf(e.type.render,!1),e;case 1:return e=Yf(e.type,!0),e;default:return""}}function pp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _i:return"Fragment";case Si:return"Portal";case hp:return"Profiler";case gv:return"StrictMode";case fp:return"Suspense";case mp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case c1:return(e.displayName||"Context")+".Consumer";case l1:return(e._context.displayName||"Context")+".Provider";case vv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yv:return t=e.displayName||null,t!==null?t:pp(e.type)||"Memo";case ya:t=e._payload,e=e._init;try{return pp(e(t))}catch{}}return null}function R2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pp(t);case 8:return t===gv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ka(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function d1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M2(e){var t=d1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wu(e){e._valueTracker||(e._valueTracker=M2(e))}function h1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=d1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gp(e,t){var n=t.checked;return At({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Rx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ka(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function f1(e,t){t=t.checked,t!=null&&pv(e,"checked",t,!1)}function vp(e,t){f1(e,t);var n=Ka(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yp(e,t.type,n):t.hasOwnProperty("defaultValue")&&yp(e,t.type,Ka(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yp(e,t,n){(t!=="number"||Bd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rc=Array.isArray;function $i(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ka(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function xp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return At({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ox(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(rc(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ka(n)}}function m1(e,t){var n=Ka(t.value),r=Ka(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ix(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function p1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?p1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vu,g1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O2=["Webkit","ms","Moz","O"];Object.keys(dc).forEach(function(e){O2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dc[t]=dc[e]})});function v1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||dc.hasOwnProperty(e)&&dc[e]?(""+t).trim():t+"px"}function y1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=v1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var I2=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bp(e,t){if(t){if(I2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function jp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Np=null;function xv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cp=null,Li=null,Bi=null;function Fx(e){if(e=gu(e)){if(typeof Cp!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=zh(t),Cp(e.stateNode,e.type,t))}}function x1(e){Li?Bi?Bi.push(e):Bi=[e]:Li=e}function w1(){if(Li){var e=Li,t=Bi;if(Bi=Li=null,Fx(e),t)for(e=0;e<t.length;e++)Fx(t[e])}}function b1(e,t){return e(t)}function j1(){}var Qf=!1;function N1(e,t,n){if(Qf)return e(t,n);Qf=!0;try{return b1(e,t,n)}finally{Qf=!1,(Li!==null||Bi!==null)&&(j1(),w1())}}function Oc(e,t){var n=e.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var Sp=!1;if(Js)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){Sp=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{Sp=!1}function F2(e,t,n,r,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var hc=!1,Ud=null,zd=!1,_p=null,$2={onError:function(e){hc=!0,Ud=e}};function L2(e,t,n,r,s,o,i,l,c){hc=!1,Ud=null,F2.apply($2,arguments)}function B2(e,t,n,r,s,o,i,l,c){if(L2.apply(this,arguments),hc){if(hc){var u=Ud;hc=!1,Ud=null}else throw Error(ie(198));zd||(zd=!0,_p=u)}}function ei(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function C1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $x(e){if(ei(e)!==e)throw Error(ie(188))}function U2(e){var t=e.alternate;if(!t){if(t=ei(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return $x(s),e;if(o===r)return $x(s),t;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function S1(e){return e=U2(e),e!==null?_1(e):null}function _1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_1(e);if(t!==null)return t;e=e.sibling}return null}var k1=jr.unstable_scheduleCallback,Lx=jr.unstable_cancelCallback,z2=jr.unstable_shouldYield,W2=jr.unstable_requestPaint,$t=jr.unstable_now,V2=jr.unstable_getCurrentPriorityLevel,wv=jr.unstable_ImmediatePriority,E1=jr.unstable_UserBlockingPriority,Wd=jr.unstable_NormalPriority,H2=jr.unstable_LowPriority,T1=jr.unstable_IdlePriority,$h=null,Es=null;function q2(e){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot($h,e,void 0,(e.current.flags&128)===128)}catch{}}var ss=Math.clz32?Math.clz32:Y2,G2=Math.log,K2=Math.LN2;function Y2(e){return e>>>=0,e===0?32:31-(G2(e)/K2|0)|0}var Hu=64,qu=4194304;function sc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=sc(l):(o&=i,o!==0&&(r=sc(o)))}else i=n&~s,i!==0?r=sc(i):o!==0&&(r=sc(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ss(t),s=1<<n,r|=e[n],t&=~s;return r}function Q2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J2(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-ss(o),l=1<<i,c=s[i];c===-1?(!(l&n)||l&r)&&(s[i]=Q2(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function kp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function P1(){var e=Hu;return Hu<<=1,!(Hu&4194240)&&(Hu=64),e}function Jf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ss(t),e[t]=n}function X2(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ss(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function bv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ss(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ft=0;function A1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var D1,jv,R1,M1,O1,Ep=!1,Gu=[],Fa=null,$a=null,La=null,Ic=new Map,Fc=new Map,wa=[],Z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bx(e,t){switch(e){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Ic.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(t.pointerId)}}function Ml(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=gu(t),t!==null&&jv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function eP(e,t,n,r,s){switch(t){case"focusin":return Fa=Ml(Fa,e,t,n,r,s),!0;case"dragenter":return $a=Ml($a,e,t,n,r,s),!0;case"mouseover":return La=Ml(La,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Ic.set(o,Ml(Ic.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Fc.set(o,Ml(Fc.get(o)||null,e,t,n,r,s)),!0}return!1}function I1(e){var t=So(e.target);if(t!==null){var n=ei(t);if(n!==null){if(t=n.tag,t===13){if(t=C1(n),t!==null){e.blockedOn=t,O1(e.priority,function(){R1(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Np=r,n.target.dispatchEvent(r),Np=null}else return t=gu(n),t!==null&&jv(t),e.blockedOn=n,!1;t.shift()}return!0}function Ux(e,t,n){xd(e)&&n.delete(t)}function tP(){Ep=!1,Fa!==null&&xd(Fa)&&(Fa=null),$a!==null&&xd($a)&&($a=null),La!==null&&xd(La)&&(La=null),Ic.forEach(Ux),Fc.forEach(Ux)}function Ol(e,t){e.blockedOn===t&&(e.blockedOn=null,Ep||(Ep=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,tP)))}function $c(e){function t(s){return Ol(s,e)}if(0<Gu.length){Ol(Gu[0],e);for(var n=1;n<Gu.length;n++){var r=Gu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fa!==null&&Ol(Fa,e),$a!==null&&Ol($a,e),La!==null&&Ol(La,e),Ic.forEach(t),Fc.forEach(t),n=0;n<wa.length;n++)r=wa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<wa.length&&(n=wa[0],n.blockedOn===null);)I1(n),n.blockedOn===null&&wa.shift()}var Ui=oa.ReactCurrentBatchConfig,Hd=!0;function nP(e,t,n,r){var s=ft,o=Ui.transition;Ui.transition=null;try{ft=1,Nv(e,t,n,r)}finally{ft=s,Ui.transition=o}}function rP(e,t,n,r){var s=ft,o=Ui.transition;Ui.transition=null;try{ft=4,Nv(e,t,n,r)}finally{ft=s,Ui.transition=o}}function Nv(e,t,n,r){if(Hd){var s=Tp(e,t,n,r);if(s===null)im(e,t,r,qd,n),Bx(e,r);else if(eP(s,e,t,n,r))r.stopPropagation();else if(Bx(e,r),t&4&&-1<Z2.indexOf(e)){for(;s!==null;){var o=gu(s);if(o!==null&&D1(o),o=Tp(e,t,n,r),o===null&&im(e,t,r,qd,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else im(e,t,r,null,n)}}var qd=null;function Tp(e,t,n,r){if(qd=null,e=xv(r),e=So(e),e!==null)if(t=ei(e),t===null)e=null;else if(n=t.tag,n===13){if(e=C1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qd=e,null}function F1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V2()){case wv:return 1;case E1:return 4;case Wd:case H2:return 16;case T1:return 536870912;default:return 16}default:return 16}}var Ma=null,Cv=null,wd=null;function $1(){if(wd)return wd;var e,t=Cv,n=t.length,r,s="value"in Ma?Ma.value:Ma.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return wd=s.slice(e,1<r?1-r:void 0)}function bd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ku(){return!0}function zx(){return!1}function _r(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ku:zx,this.isPropagationStopped=zx,this}return At(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ku)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ku)},persist:function(){},isPersistent:Ku}),t}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sv=_r(bl),pu=At({},bl,{view:0,detail:0}),sP=_r(pu),Xf,Zf,Il,Lh=At({},pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Il&&(Il&&e.type==="mousemove"?(Xf=e.screenX-Il.screenX,Zf=e.screenY-Il.screenY):Zf=Xf=0,Il=e),Xf)},movementY:function(e){return"movementY"in e?e.movementY:Zf}}),Wx=_r(Lh),aP=At({},Lh,{dataTransfer:0}),oP=_r(aP),iP=At({},pu,{relatedTarget:0}),em=_r(iP),lP=At({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),cP=_r(lP),uP=At({},bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dP=_r(uP),hP=At({},bl,{data:0}),Vx=_r(hP),fP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pP[e])?!!t[e]:!1}function _v(){return gP}var vP=At({},pu,{key:function(e){if(e.key){var t=fP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(e){return e.type==="keypress"?bd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yP=_r(vP),xP=At({},Lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hx=_r(xP),wP=At({},pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),bP=_r(wP),jP=At({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),NP=_r(jP),CP=At({},Lh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SP=_r(CP),_P=[9,13,27,32],kv=Js&&"CompositionEvent"in window,fc=null;Js&&"documentMode"in document&&(fc=document.documentMode);var kP=Js&&"TextEvent"in window&&!fc,L1=Js&&(!kv||fc&&8<fc&&11>=fc),qx=" ",Gx=!1;function B1(e,t){switch(e){case"keyup":return _P.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ki=!1;function EP(e,t){switch(e){case"compositionend":return U1(t);case"keypress":return t.which!==32?null:(Gx=!0,qx);case"textInput":return e=t.data,e===qx&&Gx?null:e;default:return null}}function TP(e,t){if(ki)return e==="compositionend"||!kv&&B1(e,t)?(e=$1(),wd=Cv=Ma=null,ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return L1&&t.locale!=="ko"?null:t.data;default:return null}}var PP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PP[e.type]:t==="textarea"}function z1(e,t,n,r){x1(r),t=Gd(t,"onChange"),0<t.length&&(n=new Sv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var mc=null,Lc=null;function AP(e){Z1(e,0)}function Bh(e){var t=Pi(e);if(h1(t))return e}function DP(e,t){if(e==="change")return t}var W1=!1;if(Js){var tm;if(Js){var nm="oninput"in document;if(!nm){var Yx=document.createElement("div");Yx.setAttribute("oninput","return;"),nm=typeof Yx.oninput=="function"}tm=nm}else tm=!1;W1=tm&&(!document.documentMode||9<document.documentMode)}function Qx(){mc&&(mc.detachEvent("onpropertychange",V1),Lc=mc=null)}function V1(e){if(e.propertyName==="value"&&Bh(Lc)){var t=[];z1(t,Lc,e,xv(e)),N1(AP,t)}}function RP(e,t,n){e==="focusin"?(Qx(),mc=t,Lc=n,mc.attachEvent("onpropertychange",V1)):e==="focusout"&&Qx()}function MP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bh(Lc)}function OP(e,t){if(e==="click")return Bh(t)}function IP(e,t){if(e==="input"||e==="change")return Bh(t)}function FP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var os=typeof Object.is=="function"?Object.is:FP;function Bc(e,t){if(os(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!dp.call(t,s)||!os(e[s],t[s]))return!1}return!0}function Jx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xx(e,t){var n=Jx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jx(n)}}function H1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?H1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function q1(){for(var e=window,t=Bd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bd(e.document)}return t}function Ev(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $P(e){var t=q1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&H1(n.ownerDocument.documentElement,n)){if(r!==null&&Ev(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Xx(n,o);var i=Xx(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LP=Js&&"documentMode"in document&&11>=document.documentMode,Ei=null,Pp=null,pc=null,Ap=!1;function Zx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ap||Ei==null||Ei!==Bd(r)||(r=Ei,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pc&&Bc(pc,r)||(pc=r,r=Gd(Pp,"onSelect"),0<r.length&&(t=new Sv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ei)))}function Yu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ti={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},rm={},G1={};Js&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Uh(e){if(rm[e])return rm[e];if(!Ti[e])return e;var t=Ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in G1)return rm[e]=t[n];return e}var K1=Uh("animationend"),Y1=Uh("animationiteration"),Q1=Uh("animationstart"),J1=Uh("transitionend"),X1=new Map,e0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(e,t){X1.set(e,t),Zo(t,[e])}for(var sm=0;sm<e0.length;sm++){var am=e0[sm],BP=am.toLowerCase(),UP=am[0].toUpperCase()+am.slice(1);no(BP,"on"+UP)}no(K1,"onAnimationEnd");no(Y1,"onAnimationIteration");no(Q1,"onAnimationStart");no("dblclick","onDoubleClick");no("focusin","onFocus");no("focusout","onBlur");no(J1,"onTransitionEnd");ol("onMouseEnter",["mouseout","mouseover"]);ol("onMouseLeave",["mouseout","mouseover"]);ol("onPointerEnter",["pointerout","pointerover"]);ol("onPointerLeave",["pointerout","pointerover"]);Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function t0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,B2(r,t,void 0,e),e.currentTarget=null}function Z1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;t0(s,l,u),o=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;t0(s,l,u),o=c}}}if(zd)throw e=_p,zd=!1,_p=null,e}function bt(e,t){var n=t[Ip];n===void 0&&(n=t[Ip]=new Set);var r=e+"__bubble";n.has(r)||(ej(t,e,2,!1),n.add(r))}function om(e,t,n){var r=0;t&&(r|=4),ej(n,e,r,t)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function Uc(e){if(!e[Qu]){e[Qu]=!0,i1.forEach(function(n){n!=="selectionchange"&&(zP.has(n)||om(n,!1,e),om(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qu]||(t[Qu]=!0,om("selectionchange",!1,t))}}function ej(e,t,n,r){switch(F1(t)){case 1:var s=nP;break;case 4:s=rP;break;default:s=Nv}n=s.bind(null,t,n,e),s=void 0,!Sp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function im(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=So(l),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}l=l.parentNode}}r=r.return}N1(function(){var u=o,d=xv(n),h=[];e:{var m=X1.get(e);if(m!==void 0){var p=Sv,N=e;switch(e){case"keypress":if(bd(n)===0)break e;case"keydown":case"keyup":p=yP;break;case"focusin":N="focus",p=em;break;case"focusout":N="blur",p=em;break;case"beforeblur":case"afterblur":p=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=oP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=bP;break;case K1:case Y1:case Q1:p=cP;break;case J1:p=NP;break;case"scroll":p=sP;break;case"wheel":p=SP;break;case"copy":case"cut":case"paste":p=dP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Hx}var g=(t&4)!==0,y=!g&&e==="scroll",w=g?m!==null?m+"Capture":null:m;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,w!==null&&(x=Oc(v,w),x!=null&&g.push(zc(v,x,b)))),y)break;v=v.return}0<g.length&&(m=new p(m,N,null,n,d),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==Np&&(N=n.relatedTarget||n.fromElement)&&(So(N)||N[Xs]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(N=n.relatedTarget||n.toElement,p=u,N=N?So(N):null,N!==null&&(y=ei(N),N!==y||N.tag!==5&&N.tag!==6)&&(N=null)):(p=null,N=u),p!==N)){if(g=Wx,x="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=Hx,x="onPointerLeave",w="onPointerEnter",v="pointer"),y=p==null?m:Pi(p),b=N==null?m:Pi(N),m=new g(x,v+"leave",p,n,d),m.target=y,m.relatedTarget=b,x=null,So(d)===u&&(g=new g(w,v+"enter",N,n,d),g.target=b,g.relatedTarget=y,x=g),y=x,p&&N)t:{for(g=p,w=N,v=0,b=g;b;b=ci(b))v++;for(b=0,x=w;x;x=ci(x))b++;for(;0<v-b;)g=ci(g),v--;for(;0<b-v;)w=ci(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=ci(g),w=ci(w)}g=null}else g=null;p!==null&&n0(h,m,p,g,!1),N!==null&&y!==null&&n0(h,y,N,g,!0)}}e:{if(m=u?Pi(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var _=DP;else if(Kx(m))if(W1)_=IP;else{_=MP;var k=RP}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=OP);if(_&&(_=_(e,u))){z1(h,_,n,d);break e}k&&k(e,m,u),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&yp(m,"number",m.value)}switch(k=u?Pi(u):window,e){case"focusin":(Kx(k)||k.contentEditable==="true")&&(Ei=k,Pp=u,pc=null);break;case"focusout":pc=Pp=Ei=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,Zx(h,n,d);break;case"selectionchange":if(LP)break;case"keydown":case"keyup":Zx(h,n,d)}var E;if(kv)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else ki?B1(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(L1&&n.locale!=="ko"&&(ki||D!=="onCompositionStart"?D==="onCompositionEnd"&&ki&&(E=$1()):(Ma=d,Cv="value"in Ma?Ma.value:Ma.textContent,ki=!0)),k=Gd(u,D),0<k.length&&(D=new Vx(D,e,null,n,d),h.push({event:D,listeners:k}),E?D.data=E:(E=U1(n),E!==null&&(D.data=E)))),(E=kP?EP(e,n):TP(e,n))&&(u=Gd(u,"onBeforeInput"),0<u.length&&(d=new Vx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}Z1(h,t)})}function zc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gd(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Oc(e,n),o!=null&&r.unshift(zc(e,o,s)),o=Oc(e,t),o!=null&&r.push(zc(e,o,s))),e=e.return}return r}function ci(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function n0(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Oc(n,o),c!=null&&i.unshift(zc(n,c,l))):s||(c=Oc(n,o),c!=null&&i.push(zc(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var WP=/\r\n?/g,VP=/\u0000|\uFFFD/g;function r0(e){return(typeof e=="string"?e:""+e).replace(WP,`
`).replace(VP,"")}function Ju(e,t,n){if(t=r0(t),r0(e)!==t&&n)throw Error(ie(425))}function Kd(){}var Dp=null,Rp=null;function Mp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,HP=typeof clearTimeout=="function"?clearTimeout:void 0,s0=typeof Promise=="function"?Promise:void 0,qP=typeof queueMicrotask=="function"?queueMicrotask:typeof s0<"u"?function(e){return s0.resolve(null).then(e).catch(GP)}:Op;function GP(e){setTimeout(function(){throw e})}function lm(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$c(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$c(t)}function Ba(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function a0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jl=Math.random().toString(36).slice(2),Ns="__reactFiber$"+jl,Wc="__reactProps$"+jl,Xs="__reactContainer$"+jl,Ip="__reactEvents$"+jl,KP="__reactListeners$"+jl,YP="__reactHandles$"+jl;function So(e){var t=e[Ns];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xs]||n[Ns]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=a0(e);e!==null;){if(n=e[Ns])return n;e=a0(e)}return t}e=n,n=e.parentNode}return null}function gu(e){return e=e[Ns]||e[Xs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function zh(e){return e[Wc]||null}var Fp=[],Ai=-1;function ro(e){return{current:e}}function jt(e){0>Ai||(e.current=Fp[Ai],Fp[Ai]=null,Ai--)}function gt(e,t){Ai++,Fp[Ai]=e.current,e.current=t}var Ya={},Tn=ro(Ya),ur=ro(!1),Bo=Ya;function il(e,t){var n=e.type.contextTypes;if(!n)return Ya;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dr(e){return e=e.childContextTypes,e!=null}function Yd(){jt(ur),jt(Tn)}function o0(e,t,n){if(Tn.current!==Ya)throw Error(ie(168));gt(Tn,t),gt(ur,n)}function tj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ie(108,R2(e)||"Unknown",s));return At({},n,r)}function Qd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ya,Bo=Tn.current,gt(Tn,e),gt(ur,ur.current),!0}function i0(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=tj(e,t,Bo),r.__reactInternalMemoizedMergedChildContext=e,jt(ur),jt(Tn),gt(Tn,e)):jt(ur),gt(ur,n)}var Vs=null,Wh=!1,cm=!1;function nj(e){Vs===null?Vs=[e]:Vs.push(e)}function QP(e){Wh=!0,nj(e)}function so(){if(!cm&&Vs!==null){cm=!0;var e=0,t=ft;try{var n=Vs;for(ft=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vs=null,Wh=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(e+1)),k1(wv,so),s}finally{ft=t,cm=!1}}return null}var Di=[],Ri=0,Jd=null,Xd=0,Pr=[],Ar=0,Uo=null,Gs=1,Ks="";function yo(e,t){Di[Ri++]=Xd,Di[Ri++]=Jd,Jd=e,Xd=t}function rj(e,t,n){Pr[Ar++]=Gs,Pr[Ar++]=Ks,Pr[Ar++]=Uo,Uo=e;var r=Gs;e=Ks;var s=32-ss(r)-1;r&=~(1<<s),n+=1;var o=32-ss(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Gs=1<<32-ss(t)+s|n<<s|r,Ks=o+e}else Gs=1<<o|n<<s|r,Ks=e}function Tv(e){e.return!==null&&(yo(e,1),rj(e,1,0))}function Pv(e){for(;e===Jd;)Jd=Di[--Ri],Di[Ri]=null,Xd=Di[--Ri],Di[Ri]=null;for(;e===Uo;)Uo=Pr[--Ar],Pr[Ar]=null,Ks=Pr[--Ar],Pr[Ar]=null,Gs=Pr[--Ar],Pr[Ar]=null}var wr=null,xr=null,kt=!1,Xr=null;function sj(e,t){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function l0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wr=e,xr=Ba(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wr=e,xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Uo!==null?{id:Gs,overflow:Ks}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wr=e,xr=null,!0):!1;default:return!1}}function $p(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lp(e){if(kt){var t=xr;if(t){var n=t;if(!l0(e,t)){if($p(e))throw Error(ie(418));t=Ba(n.nextSibling);var r=wr;t&&l0(e,t)?sj(r,n):(e.flags=e.flags&-4097|2,kt=!1,wr=e)}}else{if($p(e))throw Error(ie(418));e.flags=e.flags&-4097|2,kt=!1,wr=e}}}function c0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wr=e}function Xu(e){if(e!==wr)return!1;if(!kt)return c0(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mp(e.type,e.memoizedProps)),t&&(t=xr)){if($p(e))throw aj(),Error(ie(418));for(;t;)sj(e,t),t=Ba(t.nextSibling)}if(c0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xr=Ba(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xr=null}}else xr=wr?Ba(e.stateNode.nextSibling):null;return!0}function aj(){for(var e=xr;e;)e=Ba(e.nextSibling)}function ll(){xr=wr=null,kt=!1}function Av(e){Xr===null?Xr=[e]:Xr.push(e)}var JP=oa.ReactCurrentBatchConfig;function Fl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function Zu(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function u0(e){var t=e._init;return t(e._payload)}function oj(e){function t(w,v){if(e){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Va(w,v),w.index=0,w.sibling=null,w}function o(w,v,b){return w.index=b,e?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,v,b,x){return v===null||v.tag!==6?(v=gm(b,w.mode,x),v.return=w,v):(v=s(v,b),v.return=w,v)}function c(w,v,b,x){var _=b.type;return _===_i?d(w,v,b.props.children,x,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ya&&u0(_)===v.type)?(x=s(v,b.props),x.ref=Fl(w,v,b),x.return=w,x):(x=Ed(b.type,b.key,b.props,null,w.mode,x),x.ref=Fl(w,v,b),x.return=w,x)}function u(w,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=vm(b,w.mode,x),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function d(w,v,b,x,_){return v===null||v.tag!==7?(v=Lo(b,w.mode,x,_),v.return=w,v):(v=s(v,b),v.return=w,v)}function h(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=gm(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zu:return b=Ed(v.type,v.key,v.props,null,w.mode,b),b.ref=Fl(w,null,v),b.return=w,b;case Si:return v=vm(v,w.mode,b),v.return=w,v;case ya:var x=v._init;return h(w,x(v._payload),b)}if(rc(v)||Dl(v))return v=Lo(v,w.mode,b,null),v.return=w,v;Zu(w,v)}return null}function m(w,v,b,x){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(w,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zu:return b.key===_?c(w,v,b,x):null;case Si:return b.key===_?u(w,v,b,x):null;case ya:return _=b._init,m(w,v,_(b._payload),x)}if(rc(b)||Dl(b))return _!==null?null:d(w,v,b,x,null);Zu(w,b)}return null}function p(w,v,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(b)||null,l(v,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zu:return w=w.get(x.key===null?b:x.key)||null,c(v,w,x,_);case Si:return w=w.get(x.key===null?b:x.key)||null,u(v,w,x,_);case ya:var k=x._init;return p(w,v,b,k(x._payload),_)}if(rc(x)||Dl(x))return w=w.get(b)||null,d(v,w,x,_,null);Zu(v,x)}return null}function N(w,v,b,x){for(var _=null,k=null,E=v,D=v=0,$=null;E!==null&&D<b.length;D++){E.index>D?($=E,E=null):$=E.sibling;var O=m(w,E,b[D],x);if(O===null){E===null&&(E=$);break}e&&E&&O.alternate===null&&t(w,E),v=o(O,v,D),k===null?_=O:k.sibling=O,k=O,E=$}if(D===b.length)return n(w,E),kt&&yo(w,D),_;if(E===null){for(;D<b.length;D++)E=h(w,b[D],x),E!==null&&(v=o(E,v,D),k===null?_=E:k.sibling=E,k=E);return kt&&yo(w,D),_}for(E=r(w,E);D<b.length;D++)$=p(E,w,D,b[D],x),$!==null&&(e&&$.alternate!==null&&E.delete($.key===null?D:$.key),v=o($,v,D),k===null?_=$:k.sibling=$,k=$);return e&&E.forEach(function(Y){return t(w,Y)}),kt&&yo(w,D),_}function g(w,v,b,x){var _=Dl(b);if(typeof _!="function")throw Error(ie(150));if(b=_.call(b),b==null)throw Error(ie(151));for(var k=_=null,E=v,D=v=0,$=null,O=b.next();E!==null&&!O.done;D++,O=b.next()){E.index>D?($=E,E=null):$=E.sibling;var Y=m(w,E,O.value,x);if(Y===null){E===null&&(E=$);break}e&&E&&Y.alternate===null&&t(w,E),v=o(Y,v,D),k===null?_=Y:k.sibling=Y,k=Y,E=$}if(O.done)return n(w,E),kt&&yo(w,D),_;if(E===null){for(;!O.done;D++,O=b.next())O=h(w,O.value,x),O!==null&&(v=o(O,v,D),k===null?_=O:k.sibling=O,k=O);return kt&&yo(w,D),_}for(E=r(w,E);!O.done;D++,O=b.next())O=p(E,w,D,O.value,x),O!==null&&(e&&O.alternate!==null&&E.delete(O.key===null?D:O.key),v=o(O,v,D),k===null?_=O:k.sibling=O,k=O);return e&&E.forEach(function(T){return t(w,T)}),kt&&yo(w,D),_}function y(w,v,b,x){if(typeof b=="object"&&b!==null&&b.type===_i&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zu:e:{for(var _=b.key,k=v;k!==null;){if(k.key===_){if(_=b.type,_===_i){if(k.tag===7){n(w,k.sibling),v=s(k,b.props.children),v.return=w,w=v;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ya&&u0(_)===k.type){n(w,k.sibling),v=s(k,b.props),v.ref=Fl(w,k,b),v.return=w,w=v;break e}n(w,k);break}else t(w,k);k=k.sibling}b.type===_i?(v=Lo(b.props.children,w.mode,x,b.key),v.return=w,w=v):(x=Ed(b.type,b.key,b.props,null,w.mode,x),x.ref=Fl(w,v,b),x.return=w,w=x)}return i(w);case Si:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else t(w,v);v=v.sibling}v=vm(b,w.mode,x),v.return=w,w=v}return i(w);case ya:return k=b._init,y(w,v,k(b._payload),x)}if(rc(b))return N(w,v,b,x);if(Dl(b))return g(w,v,b,x);Zu(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=gm(b,w.mode,x),v.return=w,w=v),i(w)):n(w,v)}return y}var cl=oj(!0),ij=oj(!1),Zd=ro(null),eh=null,Mi=null,Dv=null;function Rv(){Dv=Mi=eh=null}function Mv(e){var t=Zd.current;jt(Zd),e._currentValue=t}function Bp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zi(e,t){eh=e,Dv=Mi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ar=!0),e.firstContext=null)}function Br(e){var t=e._currentValue;if(Dv!==e)if(e={context:e,memoizedValue:t,next:null},Mi===null){if(eh===null)throw Error(ie(308));Mi=e,eh.dependencies={lanes:0,firstContext:e}}else Mi=Mi.next=e;return t}var _o=null;function Ov(e){_o===null?_o=[e]:_o.push(e)}function lj(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ov(t)):(n.next=s.next,s.next=n),t.interleaved=n,Zs(e,r)}function Zs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xa=!1;function Iv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ys(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Zs(e,n)}return s=r.interleaved,s===null?(t.next=t,Ov(r)):(t.next=s.next,s.next=t),r.interleaved=t,Zs(e,n)}function jd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bv(e,n)}}function d0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function th(e,t,n,r){var s=e.updateQueue;xa=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;i=0,d=u=c=null,l=o;do{var m=l.lane,p=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,g=l;switch(m=t,p=n,g.tag){case 1:if(N=g.payload,typeof N=="function"){h=N.call(p,h,m);break e}h=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=g.payload,m=typeof N=="function"?N.call(p,h,m):N,m==null)break e;h=At({},h,m);break e;case 2:xa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Wo|=i,e.lanes=i,e.memoizedState=h}}function h0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var vu={},Ts=ro(vu),Vc=ro(vu),Hc=ro(vu);function ko(e){if(e===vu)throw Error(ie(174));return e}function Fv(e,t){switch(gt(Hc,t),gt(Vc,e),gt(Ts,vu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wp(t,e)}jt(Ts),gt(Ts,t)}function ul(){jt(Ts),jt(Vc),jt(Hc)}function uj(e){ko(Hc.current);var t=ko(Ts.current),n=wp(t,e.type);t!==n&&(gt(Vc,e),gt(Ts,n))}function $v(e){Vc.current===e&&(jt(Ts),jt(Vc))}var Et=ro(0);function nh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var um=[];function Lv(){for(var e=0;e<um.length;e++)um[e]._workInProgressVersionPrimary=null;um.length=0}var Nd=oa.ReactCurrentDispatcher,dm=oa.ReactCurrentBatchConfig,zo=0,Pt=null,Jt=null,an=null,rh=!1,gc=!1,qc=0,XP=0;function Nn(){throw Error(ie(321))}function Bv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function Uv(e,t,n,r,s,o){if(zo=o,Pt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nd.current=e===null||e.memoizedState===null?nA:rA,e=n(r,s),gc){o=0;do{if(gc=!1,qc=0,25<=o)throw Error(ie(301));o+=1,an=Jt=null,t.updateQueue=null,Nd.current=sA,e=n(r,s)}while(gc)}if(Nd.current=sh,t=Jt!==null&&Jt.next!==null,zo=0,an=Jt=Pt=null,rh=!1,t)throw Error(ie(300));return e}function zv(){var e=qc!==0;return qc=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Pt.memoizedState=an=e:an=an.next=e,an}function Ur(){if(Jt===null){var e=Pt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var t=an===null?Pt.memoizedState:an.next;if(t!==null)an=t,Jt=e;else{if(e===null)throw Error(ie(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},an===null?Pt.memoizedState=an=e:an=an.next=e}return an}function Gc(e,t){return typeof t=="function"?t(e):t}function hm(e){var t=Ur(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=Jt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((zo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=r):c=c.next=h,Pt.lanes|=d,Wo|=d}u=u.next}while(u!==null&&u!==o);c===null?i=r:c.next=l,os(r,t.memoizedState)||(ar=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Pt.lanes|=o,Wo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fm(e){var t=Ur(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);os(o,t.memoizedState)||(ar=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function dj(){}function hj(e,t){var n=Pt,r=Ur(),s=t(),o=!os(r.memoizedState,s);if(o&&(r.memoizedState=s,ar=!0),r=r.queue,Wv(pj.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,Kc(9,mj.bind(null,n,r,s,t),void 0,null),on===null)throw Error(ie(349));zo&30||fj(n,t,s)}return s}function fj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pt.updateQueue,t===null?(t={lastEffect:null,stores:null},Pt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mj(e,t,n,r){t.value=n,t.getSnapshot=r,gj(t)&&vj(e)}function pj(e,t,n){return n(function(){gj(t)&&vj(e)})}function gj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch{return!0}}function vj(e){var t=Zs(e,1);t!==null&&as(t,e,1,-1)}function f0(e){var t=vs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:e},t.queue=e,e=e.dispatch=tA.bind(null,Pt,e),[t.memoizedState,e]}function Kc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pt.updateQueue,t===null?(t={lastEffect:null,stores:null},Pt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function yj(){return Ur().memoizedState}function Cd(e,t,n,r){var s=vs();Pt.flags|=e,s.memoizedState=Kc(1|t,n,void 0,r===void 0?null:r)}function Vh(e,t,n,r){var s=Ur();r=r===void 0?null:r;var o=void 0;if(Jt!==null){var i=Jt.memoizedState;if(o=i.destroy,r!==null&&Bv(r,i.deps)){s.memoizedState=Kc(t,n,o,r);return}}Pt.flags|=e,s.memoizedState=Kc(1|t,n,o,r)}function m0(e,t){return Cd(8390656,8,e,t)}function Wv(e,t){return Vh(2048,8,e,t)}function xj(e,t){return Vh(4,2,e,t)}function wj(e,t){return Vh(4,4,e,t)}function bj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jj(e,t,n){return n=n!=null?n.concat([e]):null,Vh(4,4,bj.bind(null,t,e),n)}function Vv(){}function Nj(e,t){var n=Ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cj(e,t){var n=Ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Sj(e,t,n){return zo&21?(os(n,t)||(n=P1(),Pt.lanes|=n,Wo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ar=!0),e.memoizedState=n)}function ZP(e,t){var n=ft;ft=n!==0&&4>n?n:4,e(!0);var r=dm.transition;dm.transition={};try{e(!1),t()}finally{ft=n,dm.transition=r}}function _j(){return Ur().memoizedState}function eA(e,t,n){var r=Wa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kj(e))Ej(t,n);else if(n=lj(e,t,n,r),n!==null){var s=Hn();as(n,e,r,s),Tj(n,t,r)}}function tA(e,t,n){var r=Wa(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kj(e))Ej(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(s.hasEagerState=!0,s.eagerState=l,os(l,i)){var c=t.interleaved;c===null?(s.next=s,Ov(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=lj(e,t,s,r),n!==null&&(s=Hn(),as(n,e,r,s),Tj(n,t,r))}}function kj(e){var t=e.alternate;return e===Pt||t!==null&&t===Pt}function Ej(e,t){gc=rh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tj(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bv(e,n)}}var sh={readContext:Br,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},nA={readContext:Br,useCallback:function(e,t){return vs().memoizedState=[e,t===void 0?null:t],e},useContext:Br,useEffect:m0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cd(4194308,4,bj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cd(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eA.bind(null,Pt,e),[r.memoizedState,e]},useRef:function(e){var t=vs();return e={current:e},t.memoizedState=e},useState:f0,useDebugValue:Vv,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=f0(!1),t=e[0];return e=ZP.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pt,s=vs();if(kt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),on===null)throw Error(ie(349));zo&30||fj(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,m0(pj.bind(null,r,o,e),[e]),r.flags|=2048,Kc(9,mj.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vs(),t=on.identifierPrefix;if(kt){var n=Ks,r=Gs;n=(r&~(1<<32-ss(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=XP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rA={readContext:Br,useCallback:Nj,useContext:Br,useEffect:Wv,useImperativeHandle:jj,useInsertionEffect:xj,useLayoutEffect:wj,useMemo:Cj,useReducer:hm,useRef:yj,useState:function(){return hm(Gc)},useDebugValue:Vv,useDeferredValue:function(e){var t=Ur();return Sj(t,Jt.memoizedState,e)},useTransition:function(){var e=hm(Gc)[0],t=Ur().memoizedState;return[e,t]},useMutableSource:dj,useSyncExternalStore:hj,useId:_j,unstable_isNewReconciler:!1},sA={readContext:Br,useCallback:Nj,useContext:Br,useEffect:Wv,useImperativeHandle:jj,useInsertionEffect:xj,useLayoutEffect:wj,useMemo:Cj,useReducer:fm,useRef:yj,useState:function(){return fm(Gc)},useDebugValue:Vv,useDeferredValue:function(e){var t=Ur();return Jt===null?t.memoizedState=e:Sj(t,Jt.memoizedState,e)},useTransition:function(){var e=fm(Gc)[0],t=Ur().memoizedState;return[e,t]},useMutableSource:dj,useSyncExternalStore:hj,useId:_j,unstable_isNewReconciler:!1};function Gr(e,t){if(e&&e.defaultProps){t=At({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Up(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:At({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hh={isMounted:function(e){return(e=e._reactInternals)?ei(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Hn(),s=Wa(e),o=Ys(r,s);o.payload=t,n!=null&&(o.callback=n),t=Ua(e,o,s),t!==null&&(as(t,e,s,r),jd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Hn(),s=Wa(e),o=Ys(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ua(e,o,s),t!==null&&(as(t,e,s,r),jd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hn(),r=Wa(e),s=Ys(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ua(e,s,r),t!==null&&(as(t,e,r,n),jd(t,e,r))}};function p0(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Bc(n,r)||!Bc(s,o):!0}function Pj(e,t,n){var r=!1,s=Ya,o=t.contextType;return typeof o=="object"&&o!==null?o=Br(o):(s=dr(t)?Bo:Tn.current,r=t.contextTypes,o=(r=r!=null)?il(e,s):Ya),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function g0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hh.enqueueReplaceState(t,t.state,null)}function zp(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Iv(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Br(o):(o=dr(t)?Bo:Tn.current,s.context=il(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Up(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hh.enqueueReplaceState(s,s.state,null),th(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function dl(e,t){try{var n="",r=t;do n+=D2(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function mm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var aA=typeof WeakMap=="function"?WeakMap:Map;function Aj(e,t,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){oh||(oh=!0,Zp=r),Wp(e,t)},n}function Dj(e,t,n){n=Ys(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Wp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Wp(e,t),typeof r!="function"&&(za===null?za=new Set([this]):za.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function v0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new aA;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=xA.bind(null,e,t,n),t.then(e,e))}function y0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function x0(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ys(-1,1),t.tag=2,Ua(n,t,1))),n.lanes|=1),e)}var oA=oa.ReactCurrentOwner,ar=!1;function $n(e,t,n,r){t.child=e===null?ij(t,null,n,r):cl(t,e.child,n,r)}function w0(e,t,n,r,s){n=n.render;var o=t.ref;return zi(t,s),r=Uv(e,t,n,r,o,s),n=zv(),e!==null&&!ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ea(e,t,s)):(kt&&n&&Tv(t),t.flags|=1,$n(e,t,r,s),t.child)}function b0(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Xv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Rj(e,t,o,r,s)):(e=Ed(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Bc,n(i,r)&&e.ref===t.ref)return ea(e,t,s)}return t.flags|=1,e=Va(o,r),e.ref=t.ref,e.return=t,t.child=e}function Rj(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Bc(o,r)&&e.ref===t.ref)if(ar=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(ar=!0);else return t.lanes=e.lanes,ea(e,t,s)}return Vp(e,t,n,r,s)}function Mj(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Ii,gr),gr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gt(Ii,gr),gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,gt(Ii,gr),gr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,gt(Ii,gr),gr|=r;return $n(e,t,s,n),t.child}function Oj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vp(e,t,n,r,s){var o=dr(n)?Bo:Tn.current;return o=il(t,o),zi(t,s),n=Uv(e,t,n,r,o,s),r=zv(),e!==null&&!ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ea(e,t,s)):(kt&&r&&Tv(t),t.flags|=1,$n(e,t,n,s),t.child)}function j0(e,t,n,r,s){if(dr(n)){var o=!0;Qd(t)}else o=!1;if(zi(t,s),t.stateNode===null)Sd(e,t),Pj(t,n,r),zp(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Br(u):(u=dr(n)?Bo:Tn.current,u=il(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&g0(t,i,r,u),xa=!1;var m=t.memoizedState;i.state=m,th(t,r,i,s),c=t.memoizedState,l!==r||m!==c||ur.current||xa?(typeof d=="function"&&(Up(t,n,d,r),c=t.memoizedState),(l=xa||p0(t,n,l,r,m,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,cj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gr(t.type,l),i.props=u,h=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Br(c):(c=dr(n)?Bo:Tn.current,c=il(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||m!==c)&&g0(t,i,r,c),xa=!1,m=t.memoizedState,i.state=m,th(t,r,i,s);var N=t.memoizedState;l!==h||m!==N||ur.current||xa?(typeof p=="function"&&(Up(t,n,p,r),N=t.memoizedState),(u=xa||p0(t,n,u,r,m,N,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,N,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,N,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),i.props=r,i.state=N,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Hp(e,t,n,r,o,s)}function Hp(e,t,n,r,s,o){Oj(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&i0(t,n,!1),ea(e,t,o);r=t.stateNode,oA.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=cl(t,e.child,null,o),t.child=cl(t,null,l,o)):$n(e,t,l,o),t.memoizedState=r.state,s&&i0(t,n,!0),t.child}function Ij(e){var t=e.stateNode;t.pendingContext?o0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&o0(e,t.context,!1),Fv(e,t.containerInfo)}function N0(e,t,n,r,s){return ll(),Av(s),t.flags|=256,$n(e,t,n,r),t.child}var qp={dehydrated:null,treeContext:null,retryLane:0};function Gp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fj(e,t,n){var r=t.pendingProps,s=Et.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),gt(Et,s&1),e===null)return Lp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Kh(i,r,0,null),e=Lo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Gp(n),t.memoizedState=qp,e):Hv(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return iA(e,t,i,r,l,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Va(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Va(l,o):(o=Lo(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Gp(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=qp,r}return o=e.child,e=o.sibling,r=Va(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Hv(e,t){return t=Kh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ed(e,t,n,r){return r!==null&&Av(r),cl(t,e.child,null,n),e=Hv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iA(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=mm(Error(ie(422))),ed(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Kh({mode:"visible",children:r.children},s,0,null),o=Lo(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&cl(t,e.child,null,i),t.child.memoizedState=Gp(i),t.memoizedState=qp,o);if(!(t.mode&1))return ed(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ie(419)),r=mm(o,r,void 0),ed(e,t,i,r)}if(l=(i&e.childLanes)!==0,ar||l){if(r=on,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Zs(e,s),as(r,e,s,-1))}return Jv(),r=mm(Error(ie(421))),ed(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=wA.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,xr=Ba(s.nextSibling),wr=t,kt=!0,Xr=null,e!==null&&(Pr[Ar++]=Gs,Pr[Ar++]=Ks,Pr[Ar++]=Uo,Gs=e.id,Ks=e.overflow,Uo=t),t=Hv(t,r.children),t.flags|=4096,t)}function C0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Bp(e.return,t,n)}function pm(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function $j(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if($n(e,t,r.children,n),r=Et.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&C0(e,n,t);else if(e.tag===19)C0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(gt(Et,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&nh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),pm(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&nh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}pm(t,!0,n,null,o);break;case"together":pm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ea(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=Va(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Va(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lA(e,t,n){switch(t.tag){case 3:Ij(t),ll();break;case 5:uj(t);break;case 1:dr(t.type)&&Qd(t);break;case 4:Fv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;gt(Zd,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(gt(Et,Et.current&1),t.flags|=128,null):n&t.child.childLanes?Fj(e,t,n):(gt(Et,Et.current&1),e=ea(e,t,n),e!==null?e.sibling:null);gt(Et,Et.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return $j(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),gt(Et,Et.current),r)break;return null;case 22:case 23:return t.lanes=0,Mj(e,t,n)}return ea(e,t,n)}var Lj,Kp,Bj,Uj;Lj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kp=function(){};Bj=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ko(Ts.current);var o=null;switch(n){case"input":s=gp(e,s),r=gp(e,r),o=[];break;case"select":s=At({},s,{value:void 0}),r=At({},r,{value:void 0}),o=[];break;case"textarea":s=xp(e,s),r=xp(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kd)}bp(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&bt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Uj=function(e,t,n,r){n!==r&&(t.flags|=4)};function $l(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cA(e,t,n){var r=t.pendingProps;switch(Pv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(t),null;case 1:return dr(t.type)&&Yd(),Cn(t),null;case 3:return r=t.stateNode,ul(),jt(ur),jt(Tn),Lv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Xu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xr!==null&&(ng(Xr),Xr=null))),Kp(e,t),Cn(t),null;case 5:$v(t);var s=ko(Hc.current);if(n=t.type,e!==null&&t.stateNode!=null)Bj(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return Cn(t),null}if(e=ko(Ts.current),Xu(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ns]=t,r[Wc]=o,e=(t.mode&1)!==0,n){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(s=0;s<ac.length;s++)bt(ac[s],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":Rx(r,o),bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},bt("invalid",r);break;case"textarea":Ox(r,o),bt("invalid",r)}bp(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ju(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ju(r.textContent,l,e),s=["children",""+l]):Rc.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&bt("scroll",r)}switch(n){case"input":Wu(r),Mx(r,o,!0);break;case"textarea":Wu(r),Ix(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kd)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=p1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ns]=t,e[Wc]=r,Lj(e,t,!1,!1),t.stateNode=e;e:{switch(i=jp(n,r),n){case"dialog":bt("cancel",e),bt("close",e),s=r;break;case"iframe":case"object":case"embed":bt("load",e),s=r;break;case"video":case"audio":for(s=0;s<ac.length;s++)bt(ac[s],e);s=r;break;case"source":bt("error",e),s=r;break;case"img":case"image":case"link":bt("error",e),bt("load",e),s=r;break;case"details":bt("toggle",e),s=r;break;case"input":Rx(e,r),s=gp(e,r),bt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=At({},r,{value:void 0}),bt("invalid",e);break;case"textarea":Ox(e,r),s=xp(e,r),bt("invalid",e);break;default:s=r}bp(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?y1(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&g1(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Mc(e,c):typeof c=="number"&&Mc(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Rc.hasOwnProperty(o)?c!=null&&o==="onScroll"&&bt("scroll",e):c!=null&&pv(e,o,c,i))}switch(n){case"input":Wu(e),Mx(e,r,!1);break;case"textarea":Wu(e),Ix(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ka(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?$i(e,!!r.multiple,o,!1):r.defaultValue!=null&&$i(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Kd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Cn(t),null;case 6:if(e&&t.stateNode!=null)Uj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));if(n=ko(Hc.current),ko(Ts.current),Xu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ns]=t,(o=r.nodeValue!==n)&&(e=wr,e!==null))switch(e.tag){case 3:Ju(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ju(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ns]=t,t.stateNode=r}return Cn(t),null;case 13:if(jt(Et),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&xr!==null&&t.mode&1&&!(t.flags&128))aj(),ll(),t.flags|=98560,o=!1;else if(o=Xu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ie(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ie(317));o[Ns]=t}else ll(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Cn(t),o=!1}else Xr!==null&&(ng(Xr),Xr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Et.current&1?Zt===0&&(Zt=3):Jv())),t.updateQueue!==null&&(t.flags|=4),Cn(t),null);case 4:return ul(),Kp(e,t),e===null&&Uc(t.stateNode.containerInfo),Cn(t),null;case 10:return Mv(t.type._context),Cn(t),null;case 17:return dr(t.type)&&Yd(),Cn(t),null;case 19:if(jt(Et),o=t.memoizedState,o===null)return Cn(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)$l(o,!1);else{if(Zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=nh(e),i!==null){for(t.flags|=128,$l(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return gt(Et,Et.current&1|2),t.child}e=e.sibling}o.tail!==null&&$t()>hl&&(t.flags|=128,r=!0,$l(o,!1),t.lanes=4194304)}else{if(!r)if(e=nh(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!kt)return Cn(t),null}else 2*$t()-o.renderingStartTime>hl&&n!==1073741824&&(t.flags|=128,r=!0,$l(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$t(),t.sibling=null,n=Et.current,gt(Et,r?n&1|2:n&1),t):(Cn(t),null);case 22:case 23:return Qv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gr&1073741824&&(Cn(t),t.subtreeFlags&6&&(t.flags|=8192)):Cn(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function uA(e,t){switch(Pv(t),t.tag){case 1:return dr(t.type)&&Yd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ul(),jt(ur),jt(Tn),Lv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $v(t),null;case 13:if(jt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));ll()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return jt(Et),null;case 4:return ul(),null;case 10:return Mv(t.type._context),null;case 22:case 23:return Qv(),null;case 24:return null;default:return null}}var td=!1,kn=!1,dA=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Oi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(e,t,r)}else n.current=null}function Yp(e,t,n){try{n()}catch(r){Rt(e,t,r)}}var S0=!1;function hA(e,t){if(Dp=Hd,e=q1(),Ev(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=i+s),h!==o||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=i),m===o&&++d===r&&(c=i),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rp={focusedElem:e,selectionRange:n},Hd=!1,Ee=t;Ee!==null;)if(t=Ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ee=e;else for(;Ee!==null;){t=Ee;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var g=N.memoizedProps,y=N.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:Gr(t.type,g),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(x){Rt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Ee=e;break}Ee=t.return}return N=S0,S0=!1,N}function vc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Yp(t,n,o)}s=s.next}while(s!==r)}}function qh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zj(e){var t=e.alternate;t!==null&&(e.alternate=null,zj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ns],delete t[Wc],delete t[Ip],delete t[KP],delete t[YP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wj(e){return e.tag===5||e.tag===3||e.tag===4}function _0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kd));else if(r!==4&&(e=e.child,e!==null))for(Jp(e,t,n),e=e.sibling;e!==null;)Jp(e,t,n),e=e.sibling}function Xp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xp(e,t,n),e=e.sibling;e!==null;)Xp(e,t,n),e=e.sibling}var fn=null,Qr=!1;function ua(e,t,n){for(n=n.child;n!==null;)Vj(e,t,n),n=n.sibling}function Vj(e,t,n){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount($h,n)}catch{}switch(n.tag){case 5:kn||Oi(n,t);case 6:var r=fn,s=Qr;fn=null,ua(e,t,n),fn=r,Qr=s,fn!==null&&(Qr?(e=fn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(Qr?(e=fn,n=n.stateNode,e.nodeType===8?lm(e.parentNode,n):e.nodeType===1&&lm(e,n),$c(e)):lm(fn,n.stateNode));break;case 4:r=fn,s=Qr,fn=n.stateNode.containerInfo,Qr=!0,ua(e,t,n),fn=r,Qr=s;break;case 0:case 11:case 14:case 15:if(!kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Yp(n,t,i),s=s.next}while(s!==r)}ua(e,t,n);break;case 1:if(!kn&&(Oi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Rt(n,t,l)}ua(e,t,n);break;case 21:ua(e,t,n);break;case 22:n.mode&1?(kn=(r=kn)||n.memoizedState!==null,ua(e,t,n),kn=r):ua(e,t,n);break;default:ua(e,t,n)}}function k0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dA),t.forEach(function(r){var s=bA.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:fn=l.stateNode,Qr=!1;break e;case 3:fn=l.stateNode.containerInfo,Qr=!0;break e;case 4:fn=l.stateNode.containerInfo,Qr=!0;break e}l=l.return}if(fn===null)throw Error(ie(160));Vj(o,i,s),fn=null,Qr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Rt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hj(t,e),t=t.sibling}function Hj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vr(t,e),ps(e),r&4){try{vc(3,e,e.return),qh(3,e)}catch(g){Rt(e,e.return,g)}try{vc(5,e,e.return)}catch(g){Rt(e,e.return,g)}}break;case 1:Vr(t,e),ps(e),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(Vr(t,e),ps(e),r&512&&n!==null&&Oi(n,n.return),e.flags&32){var s=e.stateNode;try{Mc(s,"")}catch(g){Rt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&f1(s,o),jp(l,i);var u=jp(l,o);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?y1(s,h):d==="dangerouslySetInnerHTML"?g1(s,h):d==="children"?Mc(s,h):pv(s,d,h,u)}switch(l){case"input":vp(s,o);break;case"textarea":m1(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?$i(s,!!o.multiple,p,!1):m!==!!o.multiple&&(o.defaultValue!=null?$i(s,!!o.multiple,o.defaultValue,!0):$i(s,!!o.multiple,o.multiple?[]:"",!1))}s[Wc]=o}catch(g){Rt(e,e.return,g)}}break;case 6:if(Vr(t,e),ps(e),r&4){if(e.stateNode===null)throw Error(ie(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Rt(e,e.return,g)}}break;case 3:if(Vr(t,e),ps(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$c(t.containerInfo)}catch(g){Rt(e,e.return,g)}break;case 4:Vr(t,e),ps(e);break;case 13:Vr(t,e),ps(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Kv=$t())),r&4&&k0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(kn=(u=kn)||d,Vr(t,e),kn=u):Vr(t,e),ps(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ee=e,d=e.child;d!==null;){for(h=Ee=d;Ee!==null;){switch(m=Ee,p=m.child,m.tag){case 0:case 11:case 14:case 15:vc(4,m,m.return);break;case 1:Oi(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(g){Rt(r,n,g)}}break;case 5:Oi(m,m.return);break;case 22:if(m.memoizedState!==null){T0(h);continue}}p!==null?(p.return=m,Ee=p):T0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=v1("display",i))}catch(g){Rt(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Rt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vr(t,e),ps(e),r&4&&k0(e);break;case 21:break;default:Vr(t,e),ps(e)}}function ps(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Wj(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mc(s,""),r.flags&=-33);var o=_0(e);Xp(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=_0(e);Jp(e,l,i);break;default:throw Error(ie(161))}}catch(c){Rt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fA(e,t,n){Ee=e,qj(e)}function qj(e,t,n){for(var r=(e.mode&1)!==0;Ee!==null;){var s=Ee,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||td;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||kn;l=td;var u=kn;if(td=i,(kn=c)&&!u)for(Ee=s;Ee!==null;)i=Ee,c=i.child,i.tag===22&&i.memoizedState!==null?P0(s):c!==null?(c.return=i,Ee=c):P0(s);for(;o!==null;)Ee=o,qj(o),o=o.sibling;Ee=s,td=l,kn=u}E0(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Ee=o):E0(e)}}function E0(e){for(;Ee!==null;){var t=Ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kn||qh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!kn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Gr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&h0(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}h0(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&$c(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}kn||t.flags&512&&Qp(t)}catch(m){Rt(t,t.return,m)}}if(t===e){Ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ee=n;break}Ee=t.return}}function T0(e){for(;Ee!==null;){var t=Ee;if(t===e){Ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ee=n;break}Ee=t.return}}function P0(e){for(;Ee!==null;){var t=Ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{qh(4,t)}catch(c){Rt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Rt(t,s,c)}}var o=t.return;try{Qp(t)}catch(c){Rt(t,o,c)}break;case 5:var i=t.return;try{Qp(t)}catch(c){Rt(t,i,c)}}}catch(c){Rt(t,t.return,c)}if(t===e){Ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ee=l;break}Ee=t.return}}var mA=Math.ceil,ah=oa.ReactCurrentDispatcher,qv=oa.ReactCurrentOwner,Ir=oa.ReactCurrentBatchConfig,st=0,on=null,Kt=null,pn=0,gr=0,Ii=ro(0),Zt=0,Yc=null,Wo=0,Gh=0,Gv=0,yc=null,rr=null,Kv=0,hl=1/0,zs=null,oh=!1,Zp=null,za=null,nd=!1,Oa=null,ih=0,xc=0,eg=null,_d=-1,kd=0;function Hn(){return st&6?$t():_d!==-1?_d:_d=$t()}function Wa(e){return e.mode&1?st&2&&pn!==0?pn&-pn:JP.transition!==null?(kd===0&&(kd=P1()),kd):(e=ft,e!==0||(e=window.event,e=e===void 0?16:F1(e.type)),e):1}function as(e,t,n,r){if(50<xc)throw xc=0,eg=null,Error(ie(185));mu(e,n,r),(!(st&2)||e!==on)&&(e===on&&(!(st&2)&&(Gh|=n),Zt===4&&ba(e,pn)),hr(e,r),n===1&&st===0&&!(t.mode&1)&&(hl=$t()+500,Wh&&so()))}function hr(e,t){var n=e.callbackNode;J2(e,t);var r=Vd(e,e===on?pn:0);if(r===0)n!==null&&Lx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Lx(n),t===1)e.tag===0?QP(A0.bind(null,e)):nj(A0.bind(null,e)),qP(function(){!(st&6)&&so()}),n=null;else{switch(A1(r)){case 1:n=wv;break;case 4:n=E1;break;case 16:n=Wd;break;case 536870912:n=T1;break;default:n=Wd}n=eN(n,Gj.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gj(e,t){if(_d=-1,kd=0,st&6)throw Error(ie(327));var n=e.callbackNode;if(Wi()&&e.callbackNode!==n)return null;var r=Vd(e,e===on?pn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=lh(e,r);else{t=r;var s=st;st|=2;var o=Yj();(on!==e||pn!==t)&&(zs=null,hl=$t()+500,$o(e,t));do try{vA();break}catch(l){Kj(e,l)}while(!0);Rv(),ah.current=o,st=s,Kt!==null?t=0:(on=null,pn=0,t=Zt)}if(t!==0){if(t===2&&(s=kp(e),s!==0&&(r=s,t=tg(e,s))),t===1)throw n=Yc,$o(e,0),ba(e,r),hr(e,$t()),n;if(t===6)ba(e,r);else{if(s=e.current.alternate,!(r&30)&&!pA(s)&&(t=lh(e,r),t===2&&(o=kp(e),o!==0&&(r=o,t=tg(e,o))),t===1))throw n=Yc,$o(e,0),ba(e,r),hr(e,$t()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:xo(e,rr,zs);break;case 3:if(ba(e,r),(r&130023424)===r&&(t=Kv+500-$t(),10<t)){if(Vd(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Hn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Op(xo.bind(null,e,rr,zs),t);break}xo(e,rr,zs);break;case 4:if(ba(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-ss(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mA(r/1960))-r,10<r){e.timeoutHandle=Op(xo.bind(null,e,rr,zs),r);break}xo(e,rr,zs);break;case 5:xo(e,rr,zs);break;default:throw Error(ie(329))}}}return hr(e,$t()),e.callbackNode===n?Gj.bind(null,e):null}function tg(e,t){var n=yc;return e.current.memoizedState.isDehydrated&&($o(e,t).flags|=256),e=lh(e,t),e!==2&&(t=rr,rr=n,t!==null&&ng(t)),e}function ng(e){rr===null?rr=e:rr.push.apply(rr,e)}function pA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!os(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ba(e,t){for(t&=~Gv,t&=~Gh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ss(t),r=1<<n;e[n]=-1,t&=~r}}function A0(e){if(st&6)throw Error(ie(327));Wi();var t=Vd(e,0);if(!(t&1))return hr(e,$t()),null;var n=lh(e,t);if(e.tag!==0&&n===2){var r=kp(e);r!==0&&(t=r,n=tg(e,r))}if(n===1)throw n=Yc,$o(e,0),ba(e,t),hr(e,$t()),n;if(n===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xo(e,rr,zs),hr(e,$t()),null}function Yv(e,t){var n=st;st|=1;try{return e(t)}finally{st=n,st===0&&(hl=$t()+500,Wh&&so())}}function Vo(e){Oa!==null&&Oa.tag===0&&!(st&6)&&Wi();var t=st;st|=1;var n=Ir.transition,r=ft;try{if(Ir.transition=null,ft=1,e)return e()}finally{ft=r,Ir.transition=n,st=t,!(st&6)&&so()}}function Qv(){gr=Ii.current,jt(Ii)}function $o(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,HP(n)),Kt!==null)for(n=Kt.return;n!==null;){var r=n;switch(Pv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yd();break;case 3:ul(),jt(ur),jt(Tn),Lv();break;case 5:$v(r);break;case 4:ul();break;case 13:jt(Et);break;case 19:jt(Et);break;case 10:Mv(r.type._context);break;case 22:case 23:Qv()}n=n.return}if(on=e,Kt=e=Va(e.current,null),pn=gr=t,Zt=0,Yc=null,Gv=Gh=Wo=0,rr=yc=null,_o!==null){for(t=0;t<_o.length;t++)if(n=_o[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}_o=null}return e}function Kj(e,t){do{var n=Kt;try{if(Rv(),Nd.current=sh,rh){for(var r=Pt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rh=!1}if(zo=0,an=Jt=Pt=null,gc=!1,qc=0,qv.current=null,n===null||n.return===null){Zt=1,Yc=t,Kt=null;break}e:{var o=e,i=n.return,l=n,c=t;if(t=pn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=y0(i);if(p!==null){p.flags&=-257,x0(p,i,l,o,t),p.mode&1&&v0(o,u,t),t=p,c=u;var N=t.updateQueue;if(N===null){var g=new Set;g.add(c),t.updateQueue=g}else N.add(c);break e}else{if(!(t&1)){v0(o,u,t),Jv();break e}c=Error(ie(426))}}else if(kt&&l.mode&1){var y=y0(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),x0(y,i,l,o,t),Av(dl(c,l));break e}}o=c=dl(c,l),Zt!==4&&(Zt=2),yc===null?yc=[o]:yc.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=Aj(o,c,t);d0(o,w);break e;case 1:l=c;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(za===null||!za.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=Dj(o,l,t);d0(o,x);break e}}o=o.return}while(o!==null)}Jj(n)}catch(_){t=_,Kt===n&&n!==null&&(Kt=n=n.return);continue}break}while(!0)}function Yj(){var e=ah.current;return ah.current=sh,e===null?sh:e}function Jv(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),on===null||!(Wo&268435455)&&!(Gh&268435455)||ba(on,pn)}function lh(e,t){var n=st;st|=2;var r=Yj();(on!==e||pn!==t)&&(zs=null,$o(e,t));do try{gA();break}catch(s){Kj(e,s)}while(!0);if(Rv(),st=n,ah.current=r,Kt!==null)throw Error(ie(261));return on=null,pn=0,Zt}function gA(){for(;Kt!==null;)Qj(Kt)}function vA(){for(;Kt!==null&&!z2();)Qj(Kt)}function Qj(e){var t=Zj(e.alternate,e,gr);e.memoizedProps=e.pendingProps,t===null?Jj(e):Kt=t,qv.current=null}function Jj(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uA(n,t),n!==null){n.flags&=32767,Kt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zt=6,Kt=null;return}}else if(n=cA(n,t,gr),n!==null){Kt=n;return}if(t=t.sibling,t!==null){Kt=t;return}Kt=t=e}while(t!==null);Zt===0&&(Zt=5)}function xo(e,t,n){var r=ft,s=Ir.transition;try{Ir.transition=null,ft=1,yA(e,t,n,r)}finally{Ir.transition=s,ft=r}return null}function yA(e,t,n,r){do Wi();while(Oa!==null);if(st&6)throw Error(ie(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(X2(e,o),e===on&&(Kt=on=null,pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nd||(nd=!0,eN(Wd,function(){return Wi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ir.transition,Ir.transition=null;var i=ft;ft=1;var l=st;st|=4,qv.current=null,hA(e,n),Hj(n,e),$P(Rp),Hd=!!Dp,Rp=Dp=null,e.current=n,fA(n),W2(),st=l,ft=i,Ir.transition=o}else e.current=n;if(nd&&(nd=!1,Oa=e,ih=s),o=e.pendingLanes,o===0&&(za=null),q2(n.stateNode),hr(e,$t()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(oh)throw oh=!1,e=Zp,Zp=null,e;return ih&1&&e.tag!==0&&Wi(),o=e.pendingLanes,o&1?e===eg?xc++:(xc=0,eg=e):xc=0,so(),null}function Wi(){if(Oa!==null){var e=A1(ih),t=Ir.transition,n=ft;try{if(Ir.transition=null,ft=16>e?16:e,Oa===null)var r=!1;else{if(e=Oa,Oa=null,ih=0,st&6)throw Error(ie(331));var s=st;for(st|=4,Ee=e.current;Ee!==null;){var o=Ee,i=o.child;if(Ee.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ee=u;Ee!==null;){var d=Ee;switch(d.tag){case 0:case 11:case 15:vc(8,d,o)}var h=d.child;if(h!==null)h.return=d,Ee=h;else for(;Ee!==null;){d=Ee;var m=d.sibling,p=d.return;if(zj(d),d===u){Ee=null;break}if(m!==null){m.return=p,Ee=m;break}Ee=p}}}var N=o.alternate;if(N!==null){var g=N.child;if(g!==null){N.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ee=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Ee=i;else e:for(;Ee!==null;){if(o=Ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vc(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,Ee=w;break e}Ee=o.return}}var v=e.current;for(Ee=v;Ee!==null;){i=Ee;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Ee=b;else e:for(i=v;Ee!==null;){if(l=Ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qh(9,l)}}catch(_){Rt(l,l.return,_)}if(l===i){Ee=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,Ee=x;break e}Ee=l.return}}if(st=s,so(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot($h,e)}catch{}r=!0}return r}finally{ft=n,Ir.transition=t}}return!1}function D0(e,t,n){t=dl(n,t),t=Aj(e,t,1),e=Ua(e,t,1),t=Hn(),e!==null&&(mu(e,1,t),hr(e,t))}function Rt(e,t,n){if(e.tag===3)D0(e,e,n);else for(;t!==null;){if(t.tag===3){D0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(za===null||!za.has(r))){e=dl(n,e),e=Dj(t,e,1),t=Ua(t,e,1),e=Hn(),t!==null&&(mu(t,1,e),hr(t,e));break}}t=t.return}}function xA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Hn(),e.pingedLanes|=e.suspendedLanes&n,on===e&&(pn&n)===n&&(Zt===4||Zt===3&&(pn&130023424)===pn&&500>$t()-Kv?$o(e,0):Gv|=n),hr(e,t)}function Xj(e,t){t===0&&(e.mode&1?(t=qu,qu<<=1,!(qu&130023424)&&(qu=4194304)):t=1);var n=Hn();e=Zs(e,t),e!==null&&(mu(e,t,n),hr(e,n))}function wA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xj(e,n)}function bA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),Xj(e,n)}var Zj;Zj=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ur.current)ar=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ar=!1,lA(e,t,n);ar=!!(e.flags&131072)}else ar=!1,kt&&t.flags&1048576&&rj(t,Xd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sd(e,t),e=t.pendingProps;var s=il(t,Tn.current);zi(t,n),s=Uv(null,t,r,e,s,n);var o=zv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dr(r)?(o=!0,Qd(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Iv(t),s.updater=Hh,t.stateNode=s,s._reactInternals=t,zp(t,r,e,n),t=Hp(null,t,r,!0,o,n)):(t.tag=0,kt&&o&&Tv(t),$n(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=NA(r),e=Gr(r,e),s){case 0:t=Vp(null,t,r,e,n);break e;case 1:t=j0(null,t,r,e,n);break e;case 11:t=w0(null,t,r,e,n);break e;case 14:t=b0(null,t,r,Gr(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gr(r,s),Vp(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gr(r,s),j0(e,t,r,s,n);case 3:e:{if(Ij(t),e===null)throw Error(ie(387));r=t.pendingProps,o=t.memoizedState,s=o.element,cj(e,t),th(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=dl(Error(ie(423)),t),t=N0(e,t,r,n,s);break e}else if(r!==s){s=dl(Error(ie(424)),t),t=N0(e,t,r,n,s);break e}else for(xr=Ba(t.stateNode.containerInfo.firstChild),wr=t,kt=!0,Xr=null,n=ij(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ll(),r===s){t=ea(e,t,n);break e}$n(e,t,r,n)}t=t.child}return t;case 5:return uj(t),e===null&&Lp(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Mp(r,s)?i=null:o!==null&&Mp(r,o)&&(t.flags|=32),Oj(e,t),$n(e,t,i,n),t.child;case 6:return e===null&&Lp(t),null;case 13:return Fj(e,t,n);case 4:return Fv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cl(t,null,r,n):$n(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gr(r,s),w0(e,t,r,s,n);case 7:return $n(e,t,t.pendingProps,n),t.child;case 8:return $n(e,t,t.pendingProps.children,n),t.child;case 12:return $n(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,gt(Zd,r._currentValue),r._currentValue=i,o!==null)if(os(o.value,i)){if(o.children===s.children&&!ur.current){t=ea(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ys(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Bp(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ie(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Bp(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}$n(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,zi(t,n),s=Br(s),r=r(s),t.flags|=1,$n(e,t,r,n),t.child;case 14:return r=t.type,s=Gr(r,t.pendingProps),s=Gr(r.type,s),b0(e,t,r,s,n);case 15:return Rj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gr(r,s),Sd(e,t),t.tag=1,dr(r)?(e=!0,Qd(t)):e=!1,zi(t,n),Pj(t,r,s),zp(t,r,s,n),Hp(null,t,r,!0,e,n);case 19:return $j(e,t,n);case 22:return Mj(e,t,n)}throw Error(ie(156,t.tag))};function eN(e,t){return k1(e,t)}function jA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,r){return new jA(e,t,n,r)}function Xv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NA(e){if(typeof e=="function")return Xv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vv)return 11;if(e===yv)return 14}return 2}function Va(e,t){var n=e.alternate;return n===null?(n=Rr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ed(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")Xv(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case _i:return Lo(n.children,s,o,t);case gv:i=8,s|=8;break;case hp:return e=Rr(12,n,t,s|2),e.elementType=hp,e.lanes=o,e;case fp:return e=Rr(13,n,t,s),e.elementType=fp,e.lanes=o,e;case mp:return e=Rr(19,n,t,s),e.elementType=mp,e.lanes=o,e;case u1:return Kh(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case l1:i=10;break e;case c1:i=9;break e;case vv:i=11;break e;case yv:i=14;break e;case ya:i=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Rr(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Lo(e,t,n,r){return e=Rr(7,e,r,t),e.lanes=n,e}function Kh(e,t,n,r){return e=Rr(22,e,r,t),e.elementType=u1,e.lanes=n,e.stateNode={isHidden:!1},e}function gm(e,t,n){return e=Rr(6,e,null,t),e.lanes=n,e}function vm(e,t,n){return t=Rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jf(0),this.expirationTimes=Jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zv(e,t,n,r,s,o,i,l,c){return e=new CA(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Rr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iv(o),e}function SA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Si,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tN(e){if(!e)return Ya;e=e._reactInternals;e:{if(ei(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var n=e.type;if(dr(n))return tj(e,n,t)}return t}function nN(e,t,n,r,s,o,i,l,c){return e=Zv(n,r,!0,e,s,o,i,l,c),e.context=tN(null),n=e.current,r=Hn(),s=Wa(n),o=Ys(r,s),o.callback=t??null,Ua(n,o,s),e.current.lanes=s,mu(e,s,r),hr(e,r),e}function Yh(e,t,n,r){var s=t.current,o=Hn(),i=Wa(s);return n=tN(n),t.context===null?t.context=n:t.pendingContext=n,t=Ys(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ua(s,t,i),e!==null&&(as(e,s,i,o),jd(e,s,i)),i}function ch(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function R0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ey(e,t){R0(e,t),(e=e.alternate)&&R0(e,t)}function _A(){return null}var rN=typeof reportError=="function"?reportError:function(e){console.error(e)};function ty(e){this._internalRoot=e}Qh.prototype.render=ty.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));Yh(e,t,null,null)};Qh.prototype.unmount=ty.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vo(function(){Yh(null,e,null,null)}),t[Xs]=null}};function Qh(e){this._internalRoot=e}Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=M1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wa.length&&t!==0&&t<wa[n].priority;n++);wa.splice(n,0,e),n===0&&I1(e)}};function ny(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function M0(){}function kA(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=ch(i);o.call(u)}}var i=nN(t,r,e,0,null,!1,!1,"",M0);return e._reactRootContainer=i,e[Xs]=i.current,Uc(e.nodeType===8?e.parentNode:e),Vo(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ch(c);l.call(u)}}var c=Zv(e,0,!1,null,null,!1,!1,"",M0);return e._reactRootContainer=c,e[Xs]=c.current,Uc(e.nodeType===8?e.parentNode:e),Vo(function(){Yh(t,c,n,r)}),c}function Xh(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=ch(i);l.call(c)}}Yh(t,i,e,s)}else i=kA(n,t,e,s,r);return ch(i)}D1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=sc(t.pendingLanes);n!==0&&(bv(t,n|1),hr(t,$t()),!(st&6)&&(hl=$t()+500,so()))}break;case 13:Vo(function(){var r=Zs(e,1);if(r!==null){var s=Hn();as(r,e,1,s)}}),ey(e,1)}};jv=function(e){if(e.tag===13){var t=Zs(e,134217728);if(t!==null){var n=Hn();as(t,e,134217728,n)}ey(e,134217728)}};R1=function(e){if(e.tag===13){var t=Wa(e),n=Zs(e,t);if(n!==null){var r=Hn();as(n,e,t,r)}ey(e,t)}};M1=function(){return ft};O1=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}};Cp=function(e,t,n){switch(t){case"input":if(vp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=zh(r);if(!s)throw Error(ie(90));h1(r),vp(r,s)}}}break;case"textarea":m1(e,n);break;case"select":t=n.value,t!=null&&$i(e,!!n.multiple,t,!1)}};b1=Yv;j1=Vo;var EA={usingClientEntryPoint:!1,Events:[gu,Pi,zh,x1,w1,Yv]},Ll={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TA={bundleType:Ll.bundleType,version:Ll.version,rendererPackageName:Ll.rendererPackageName,rendererConfig:Ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=S1(e),e===null?null:e.stateNode},findFiberByHostInstance:Ll.findFiberByHostInstance||_A,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{$h=rd.inject(TA),Es=rd}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EA;Sr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ny(t))throw Error(ie(200));return SA(e,t,null,n)};Sr.createRoot=function(e,t){if(!ny(e))throw Error(ie(299));var n=!1,r="",s=rN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Zv(e,1,!1,null,null,n,!1,r,s),e[Xs]=t.current,Uc(e.nodeType===8?e.parentNode:e),new ty(t)};Sr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=S1(t),e=e===null?null:e.stateNode,e};Sr.flushSync=function(e){return Vo(e)};Sr.hydrate=function(e,t,n){if(!Jh(t))throw Error(ie(200));return Xh(null,e,t,!0,n)};Sr.hydrateRoot=function(e,t,n){if(!ny(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=rN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=nN(t,null,e,1,n??null,s,!1,o,i),e[Xs]=t.current,Uc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qh(t)};Sr.render=function(e,t,n){if(!Jh(t))throw Error(ie(200));return Xh(null,e,t,!1,n)};Sr.unmountComponentAtNode=function(e){if(!Jh(e))throw Error(ie(40));return e._reactRootContainer?(Vo(function(){Xh(null,null,e,!1,function(){e._reactRootContainer=null,e[Xs]=null})}),!0):!1};Sr.unstable_batchedUpdates=Yv;Sr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jh(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return Xh(e,t,n,!1,r)};Sr.version="18.3.1-next-f1338f8080-20240426";function sN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sN)}catch(e){console.error(e)}}sN(),s1.exports=Sr;var ti=s1.exports;const aN=qb(ti);var oN,O0=ti;oN=O0.createRoot,O0.hydrateRoot;const PA=1,AA=1e6;let ym=0;function DA(){return ym=(ym+1)%Number.MAX_SAFE_INTEGER,ym.toString()}const xm=new Map,I0=e=>{if(xm.has(e))return;const t=setTimeout(()=>{xm.delete(e),wc({type:"REMOVE_TOAST",toastId:e})},AA);xm.set(e,t)},RA=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,PA)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?I0(n):e.toasts.forEach(r=>{I0(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Td=[];let Pd={toasts:[]};function wc(e){Pd=RA(Pd,e),Td.forEach(t=>{t(Pd)})}function MA({...e}){const t=DA(),n=s=>wc({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>wc({type:"DISMISS_TOAST",toastId:t});return wc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function OA(){const[e,t]=f.useState(Pd);return f.useEffect(()=>(Td.push(t),()=>{const n=Td.indexOf(t);n>-1&&Td.splice(n,1)}),[e]),{...e,toast:MA,dismiss:n=>wc({type:"DISMISS_TOAST",toastId:n})}}function ue(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function F0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ta(...e){return t=>{let n=!1;const r=e.map(s=>{const o=F0(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():F0(e[s],null)}}}}function Ve(...e){return f.useCallback(ta(...e),e)}function IA(e,t){const n=f.createContext(t),r=o=>{const{children:i,...l}=o,c=f.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(o){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function mr(e,t=[]){let n=[];function r(o,i){const l=f.createContext(i),c=n.length;n=[...n,i];const u=h=>{var w;const{scope:m,children:p,...N}=h,g=((w=m==null?void 0:m[e])==null?void 0:w[c])||l,y=f.useMemo(()=>N,Object.values(N));return a.jsx(g.Provider,{value:y,children:p})};u.displayName=o+"Provider";function d(h,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,N=f.useContext(p);if(N)return N;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,FA(s,...t)]}function FA(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Qa(e){const t=LA(e),n=f.forwardRef((r,s)=>{const{children:o,...i}=r,l=f.Children.toArray(o),c=l.find(BA);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return a.jsx(t,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return a.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var $A=Qa("Slot");function LA(e){const t=f.forwardRef((n,r)=>{const{children:s,...o}=n;if(f.isValidElement(s)){const i=zA(s),l=UA(o,s.props);return s.type!==f.Fragment&&(l.ref=r?ta(r,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var iN=Symbol("radix.slottable");function lN(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=iN,t}function BA(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iN}function UA(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function zA(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Zh(e){const t=e+"CollectionProvider",[n,r]=mr(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:y,children:w}=g,v=re.useRef(null),b=re.useRef(new Map).current;return a.jsx(s,{scope:y,itemMap:b,collectionRef:v,children:w})};i.displayName=t;const l=e+"CollectionSlot",c=Qa(l),u=re.forwardRef((g,y)=>{const{scope:w,children:v}=g,b=o(l,w),x=Ve(y,b.collectionRef);return a.jsx(c,{ref:x,children:v})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Qa(d),p=re.forwardRef((g,y)=>{const{scope:w,children:v,...b}=g,x=re.useRef(null),_=Ve(y,x),k=o(d,w);return re.useEffect(()=>(k.itemMap.set(x,{ref:x,...b}),()=>void k.itemMap.delete(x))),a.jsx(m,{[h]:"",ref:_,children:v})});p.displayName=d;function N(g){const y=o(e+"CollectionConsumer",g);return re.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((k,E)=>b.indexOf(k.ref.current)-b.indexOf(E.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},N,r]}var WA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Te=WA.reduce((e,t)=>{const n=Qa(`Primitive.${t}`),r=f.forwardRef((s,o)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ry(e,t){e&&ti.flushSync(()=>e.dispatchEvent(t))}function Lt(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function VA(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var HA="DismissableLayer",rg="dismissableLayer.update",qA="dismissableLayer.pointerDownOutside",GA="dismissableLayer.focusOutside",$0,cN=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ni=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,u=f.useContext(cN),[d,h]=f.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),N=Ve(t,E=>h(E)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(y),v=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,x=v>=w,_=YA(E=>{const D=E.target,$=[...u.branches].some(O=>O.contains(D));!x||$||(s==null||s(E),i==null||i(E),E.defaultPrevented||l==null||l())},m),k=QA(E=>{const D=E.target;[...u.branches].some(O=>O.contains(D))||(o==null||o(E),i==null||i(E),E.defaultPrevented||l==null||l())},m);return VA(E=>{v===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($0=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),L0(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=$0)}},[d,m,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),L0())},[d,u]),f.useEffect(()=>{const E=()=>p({});return document.addEventListener(rg,E),()=>document.removeEventListener(rg,E)},[]),a.jsx(Te.div,{...c,ref:N,style:{pointerEvents:b?x?"auto":"none":void 0,...e.style},onFocusCapture:ue(e.onFocusCapture,k.onFocusCapture),onBlurCapture:ue(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ue(e.onPointerDownCapture,_.onPointerDownCapture)})});ni.displayName=HA;var KA="DismissableLayerBranch",uN=f.forwardRef((e,t)=>{const n=f.useContext(cN),r=f.useRef(null),s=Ve(t,r);return f.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),a.jsx(Te.div,{...e,ref:s})});uN.displayName=KA;function YA(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){dN(qA,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function QA(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e),r=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!r.current&&dN(GA,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function L0(){const e=new CustomEvent(rg);document.dispatchEvent(e)}function dN(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?ry(s,o):s.dispatchEvent(o)}var JA=ni,XA=uN,un=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},ZA="Portal",Nl=f.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,o]=f.useState(!1);un(()=>o(!0),[]);const i=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?aN.createPortal(a.jsx(Te.div,{...r,ref:t}),i):null});Nl.displayName=ZA;function eD(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var dn=e=>{const{present:t,children:n}=e,r=tD(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),o=Ve(r.ref,nD(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:o}):null};dn.displayName="Presence";function tD(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),o=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=eD(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=sd(r.current);o.current=l==="mounted"?u:"none"},[l]),un(()=>{const u=r.current,d=s.current;if(d!==e){const m=o.current,p=sd(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),un(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=p=>{const g=sd(r.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=p=>{p.target===t&&(o.current=sd(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function sd(e){return(e==null?void 0:e.animationName)||"none"}function nD(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var rD=hv[" useInsertionEffect ".trim().toString()]||un;function na({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,i]=sD({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=f.useCallback(d=>{var h;if(l){const m=aD(d)?d(e):d;m!==e&&((h=i.current)==null||h.call(i,m))}else o(d)},[l,e,o,i]);return[c,u]}function sD({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),o=f.useRef(t);return rD(()=>{o.current=t},[t]),f.useEffect(()=>{var i;s.current!==n&&((i=o.current)==null||i.call(o,n),s.current=n)},[n,s]),[n,r,o]}function aD(e){return typeof e=="function"}var hN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oD="VisuallyHidden",ef=f.forwardRef((e,t)=>a.jsx(Te.span,{...e,ref:t,style:{...hN,...e.style}}));ef.displayName=oD;var iD=ef,sy="ToastProvider",[ay,lD,cD]=Zh("Toast"),[fN,E9]=mr("Toast",[cD]),[uD,tf]=fN(sy),mN=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=e,[l,c]=f.useState(null),[u,d]=f.useState(0),h=f.useRef(!1),m=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${sy}\`. Expected non-empty \`string\`.`),a.jsx(ay.Provider,{scope:t,children:a.jsx(uD,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>d(p=>p+1),[]),onToastRemove:f.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:i})})};mN.displayName=sy;var pN="ToastViewport",dD=["F8"],sg="toast.viewportPause",ag="toast.viewportResume",gN=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=dD,label:s="Notifications ({hotkey})",...o}=e,i=tf(pN,n),l=lD(n),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),h=f.useRef(null),m=Ve(t,h,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=i.toastCount>0;f.useEffect(()=>{const y=w=>{var b;r.length!==0&&r.every(x=>w[x]||w.code===x)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),f.useEffect(()=>{const y=c.current,w=h.current;if(N&&y&&w){const v=()=>{if(!i.isClosePausedRef.current){const k=new CustomEvent(sg);w.dispatchEvent(k),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const k=new CustomEvent(ag);w.dispatchEvent(k),i.isClosePausedRef.current=!1}},x=k=>{!y.contains(k.relatedTarget)&&b()},_=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",v),y.addEventListener("focusout",x),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",_),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",x),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[N,i.isClosePausedRef]);const g=f.useCallback(({tabbingDirection:y})=>{const v=l().map(b=>{const x=b.ref.current,_=[x,...CD(x)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?v.reverse():v).flat()},[l]);return f.useEffect(()=>{const y=h.current;if(y){const w=v=>{var _,k,E;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const D=document.activeElement,$=v.shiftKey;if(v.target===y&&$){(_=u.current)==null||_.focus();return}const T=g({tabbingDirection:$?"backwards":"forwards"}),M=T.findIndex(U=>U===D);wm(T.slice(M+1))?v.preventDefault():$?(k=u.current)==null||k.focus():(E=d.current)==null||E.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[l,g]),a.jsxs(XA,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&a.jsx(og,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});wm(y)}}),a.jsx(ay.Slot,{scope:n,children:a.jsx(Te.ol,{tabIndex:-1,...o,ref:m})}),N&&a.jsx(og,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});wm(y)}})]})});gN.displayName=pN;var vN="ToastFocusProxy",og=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=tf(vN,n);return a.jsx(ef,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});og.displayName=vN;var yu="Toast",hD="toast.swipeStart",fD="toast.swipeMove",mD="toast.swipeCancel",pD="toast.swipeEnd",yN=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...i}=e,[l,c]=na({prop:r,defaultProp:s??!0,onChange:o,caller:yu});return a.jsx(dn,{present:n||l,children:a.jsx(yD,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Lt(e.onPause),onResume:Lt(e.onResume),onSwipeStart:ue(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ue(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});yN.displayName=yu;var[gD,vD]=fN(yu,{onClose(){}}),yD=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:p,...N}=e,g=tf(yu,n),[y,w]=f.useState(null),v=Ve(t,U=>w(U)),b=f.useRef(null),x=f.useRef(null),_=s||g.duration,k=f.useRef(0),E=f.useRef(_),D=f.useRef(0),{onToastAdd:$,onToastRemove:O}=g,Y=Lt(()=>{var A;(y==null?void 0:y.contains(document.activeElement))&&((A=g.viewport)==null||A.focus()),i()}),T=f.useCallback(U=>{!U||U===1/0||(window.clearTimeout(D.current),k.current=new Date().getTime(),D.current=window.setTimeout(Y,U))},[Y]);f.useEffect(()=>{const U=g.viewport;if(U){const A=()=>{T(E.current),u==null||u()},F=()=>{const C=new Date().getTime()-k.current;E.current=E.current-C,window.clearTimeout(D.current),c==null||c()};return U.addEventListener(sg,F),U.addEventListener(ag,A),()=>{U.removeEventListener(sg,F),U.removeEventListener(ag,A)}}},[g.viewport,_,c,u,T]),f.useEffect(()=>{o&&!g.isClosePausedRef.current&&T(_)},[o,_,g.isClosePausedRef,T]),f.useEffect(()=>($(),()=>O()),[$,O]);const M=f.useMemo(()=>y?SN(y):null,[y]);return g.viewport?a.jsxs(a.Fragment,{children:[M&&a.jsx(xD,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),a.jsx(gD,{scope:n,onClose:Y,children:ti.createPortal(a.jsx(ay.ItemSlot,{scope:n,children:a.jsx(JA,{asChild:!0,onEscapeKeyDown:ue(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||Y(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Te.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...N,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ue(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,Y()))}),onPointerDown:ue(e.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:ue(e.onPointerMove,U=>{if(!b.current)return;const A=U.clientX-b.current.x,F=U.clientY-b.current.y,C=!!x.current,j=["left","right"].includes(g.swipeDirection),S=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,P=j?S(0,A):0,H=j?0:S(0,F),R=U.pointerType==="touch"?10:2,L={x:P,y:H},J={originalEvent:U,delta:L};C?(x.current=L,ad(fD,h,J,{discrete:!1})):B0(L,g.swipeDirection,R)?(x.current=L,ad(hD,d,J,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(A)>R||Math.abs(F)>R)&&(b.current=null)}),onPointerUp:ue(e.onPointerUp,U=>{const A=x.current,F=U.target;if(F.hasPointerCapture(U.pointerId)&&F.releasePointerCapture(U.pointerId),x.current=null,b.current=null,A){const C=U.currentTarget,j={originalEvent:U,delta:A};B0(A,g.swipeDirection,g.swipeThreshold)?ad(pD,p,j,{discrete:!0}):ad(mD,m,j,{discrete:!0}),C.addEventListener("click",S=>S.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),xD=e=>{const{__scopeToast:t,children:n,...r}=e,s=tf(yu,t),[o,i]=f.useState(!1),[l,c]=f.useState(!1);return jD(()=>i(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(Nl,{asChild:!0,children:a.jsx(ef,{...r,children:o&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},wD="ToastTitle",xN=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(Te.div,{...r,ref:t})});xN.displayName=wD;var bD="ToastDescription",wN=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(Te.div,{...r,ref:t})});wN.displayName=bD;var bN="ToastAction",jN=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?a.jsx(CN,{altText:n,asChild:!0,children:a.jsx(oy,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${bN}\`. Expected non-empty \`string\`.`),null)});jN.displayName=bN;var NN="ToastClose",oy=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=vD(NN,n);return a.jsx(CN,{asChild:!0,children:a.jsx(Te.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,s.onClose)})})});oy.displayName=NN;var CN=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return a.jsx(Te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function SN(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),ND(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...SN(r))}}),t}function ad(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?ry(s,o):s.dispatchEvent(o)}var B0=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function jD(e=()=>{}){const t=Lt(e);un(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function ND(e){return e.nodeType===e.ELEMENT_NODE}function CD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wm(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var SD=mN,_N=gN,kN=yN,EN=xN,TN=wN,PN=jN,AN=oy;function DN(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=DN(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function RN(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=DN(e))&&(r&&(r+=" "),r+=t);return r}const U0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,z0=RN,nf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return z0(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=o==null?void 0:o[u];if(d===null)return null;const m=U0(d)||U0(h);return s[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(N=>{let[g,y]=N;return Array.isArray(y)?y.includes({...o,...l}[g]):{...o,...l}[g]===y})?[...u,h,m]:u},[]);return z0(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MN=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...kD,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:MN("lucide",s),...l},[...i.map(([u,d])=>f.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(e,t)=>{const n=f.forwardRef(({className:r,...s},o)=>f.createElement(ED,{ref:o,iconNode:t,className:MN(`lucide-${_D(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=Le("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=Le("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=Le("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=Le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=Le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Le("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=Le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=Le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Le("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Le("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=Le("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=Le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=Le("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=Le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Le("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=Le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=Le("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Le("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=Le("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Le("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=Le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=Le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=Le("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Le("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Le("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Le("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=Le("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Le("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),dy="-",ZD=e=>{const t=tR(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(dy);return l[0]===""&&l.length!==1&&l.shift(),BN(l,t)||eR(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},BN=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?BN(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(dy);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},q0=/^\[(.+)\]$/,eR=e=>{if(q0.test(e)){const t=q0.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},tR=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return rR(Object.entries(e.classGroups),n).forEach(([o,i])=>{lg(i,r,o,t)}),r},lg=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:G0(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(nR(s)){lg(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{lg(i,G0(t,o),n,r)})})},G0=(e,t)=>{let n=e;return t.split(dy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},nR=e=>e.isThemeGetter,rR=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[n,s]}):e,sR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},UN="!",aR=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,i=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===s&&(r||l.slice(y,y+o)===t)){c.push(l.slice(d,y)),d=y+o;continue}if(w==="/"){h=y;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(UN),N=p?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:N,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:i}):i},oR=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},iR=e=>({cache:sR(e.cacheSize),parseClassName:aR(e),...ZD(e)}),lR=/\s+/,cR=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],i=e.trim().split(lR);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let N=!!p,g=r(N?m.substring(0,p):m);if(!g){if(!N){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}N=!1}const y=oR(d).join(":"),w=h?y+UN:y,v=w+g;if(o.includes(v))continue;o.push(v);const b=s(g,N);for(let x=0;x<b.length;++x){const _=b[x];o.push(w+_)}l=u+(l.length>0?" "+l:l)}return l};function uR(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=zN(t))&&(r&&(r+=" "),r+=n);return r}const zN=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=zN(e[r]))&&(n&&(n+=" "),n+=t);return n};function dR(e,...t){let n,r,s,o=i;function i(c){const u=t.reduce((d,h)=>h(d),e());return n=iR(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=cR(c,n);return s(c,d),d}return function(){return o(uR.apply(null,arguments))}}const wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},WN=/^\[(?:([a-z-]+):)?(.+)\]$/i,hR=/^\d+\/\d+$/,fR=new Set(["px","full","screen"]),mR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$s=e=>Vi(e)||fR.has(e)||hR.test(e),da=e=>Cl(e,"length",_R),Vi=e=>!!e&&!Number.isNaN(Number(e)),jm=e=>Cl(e,"number",Vi),Bl=e=>!!e&&Number.isInteger(Number(e)),xR=e=>e.endsWith("%")&&Vi(e.slice(0,-1)),He=e=>WN.test(e),ha=e=>mR.test(e),wR=new Set(["length","size","percentage"]),bR=e=>Cl(e,wR,VN),jR=e=>Cl(e,"position",VN),NR=new Set(["image","url"]),CR=e=>Cl(e,NR,ER),SR=e=>Cl(e,"",kR),Ul=()=>!0,Cl=(e,t,n)=>{const r=WN.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},_R=e=>pR.test(e)&&!gR.test(e),VN=()=>!1,kR=e=>vR.test(e),ER=e=>yR.test(e),TR=()=>{const e=wt("colors"),t=wt("spacing"),n=wt("blur"),r=wt("brightness"),s=wt("borderColor"),o=wt("borderRadius"),i=wt("borderSpacing"),l=wt("borderWidth"),c=wt("contrast"),u=wt("grayscale"),d=wt("hueRotate"),h=wt("invert"),m=wt("gap"),p=wt("gradientColorStops"),N=wt("gradientColorStopPositions"),g=wt("inset"),y=wt("margin"),w=wt("opacity"),v=wt("padding"),b=wt("saturate"),x=wt("scale"),_=wt("sepia"),k=wt("skew"),E=wt("space"),D=wt("translate"),$=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",He,t],T=()=>[He,t],M=()=>["",$s,da],U=()=>["auto",Vi,He],A=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],C=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],S=()=>["","0",He],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[Vi,He];return{cacheSize:500,separator:":",theme:{colors:[Ul],spacing:[$s,da],blur:["none","",ha,He],brightness:H(),borderColor:[e],borderRadius:["none","","full",ha,He],borderSpacing:T(),borderWidth:M(),contrast:H(),grayscale:S(),hueRotate:H(),invert:S(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[xR,da],inset:Y(),margin:Y(),opacity:H(),padding:T(),saturate:H(),scale:H(),sepia:S(),skew:H(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[ha]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...A(),He]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bl,He]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",Bl,He]}],"grid-cols":[{"grid-cols":[Ul]}],"col-start-end":[{col:["auto",{span:["full",Bl,He]},He]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Ul]}],"row-start-end":[{row:["auto",{span:[Bl,He]},He]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[ha]},ha]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ha,da]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jm]}],"font-family":[{font:[Ul]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",Vi,jm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$s,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$s,da]}],"underline-offset":[{"underline-offset":["auto",$s,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...A(),jR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},CR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:F()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[$s,He]}],"outline-w":[{outline:[$s,da]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[$s,da]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ha,SR]}],"shadow-color":[{shadow:[Ul]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...C(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":C()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ha,He]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Bl,He]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$s,da,jm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},PR=dR(TR);function Jc(e){const t=typeof e=="string"?new Date(e):e;if(Number.isNaN(t.getTime()))return"";const n=new Date().getFullYear(),r=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return o===n?`${r}/${s}`:`${r}/${s}/${o}`}function rf(e,t){const n=new Date(e),r=new Date(t);if(Number.isNaN(n.getTime())||Number.isNaN(r.getTime()))return"";const s=new Date().getFullYear(),o=p=>String(p).padStart(2,"0");if(n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()){const p=o(n.getDate()),N=o(r.getDate()),g=o(n.getMonth()+1),y=n.getFullYear();return y===s?`${p}-${N}/${g}`:`${p}-${N}/${g}/${y}`}const l=o(n.getDate()),c=o(n.getMonth()+1),u=o(r.getDate()),d=o(r.getMonth()+1),h=n.getFullYear(),m=r.getFullYear();return h!==m?`${l}/${c}/${h} - ${u}/${d}/${m}`:h===s&&m===s?`${l}/${c} - ${u}/${d}`:`${l}/${c} - ${u}/${d}/${m}`}function te(...e){return PR(RN(e))}function An(e){return e?Jc(e):""}function AR(e){if(!e)return null;const t=e.split("/");if(t.length===3){const[n,r,s]=t,o=parseInt(n,10),i=parseInt(r,10),l=parseInt(s,10);if(o>=1&&o<=31&&i>=1&&i<=12&&l>=1e3&&l<=9999)return`${s}-${r.padStart(2,"0")}-${n.padStart(2,"0")}`}return null}function K0(e,t=!0){return e?"border-destructive focus:border-destructive focus:ring-destructive":t?"border-orange-300 focus:border-orange-500 focus:ring-orange-500":""}const DR=SD,HN=f.forwardRef(({className:e,...t},n)=>a.jsx(_N,{ref:n,className:te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));HN.displayName=_N.displayName;const RR=nf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qN=f.forwardRef(({className:e,variant:t,...n},r)=>a.jsx(kN,{ref:r,className:te(RR({variant:t}),e),...n}));qN.displayName=kN.displayName;const MR=f.forwardRef(({className:e,...t},n)=>a.jsx(PN,{ref:n,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));MR.displayName=PN.displayName;const GN=f.forwardRef(({className:e,...t},n)=>a.jsx(AN,{ref:n,className:te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(Qc,{className:"h-4 w-4"})}));GN.displayName=AN.displayName;const KN=f.forwardRef(({className:e,...t},n)=>a.jsx(EN,{ref:n,className:te("text-sm font-semibold",e),...t}));KN.displayName=EN.displayName;const YN=f.forwardRef(({className:e,...t},n)=>a.jsx(TN,{ref:n,className:te("text-sm opacity-90",e),...t}));YN.displayName=TN.displayName;function OR(){const{toasts:e}=OA();return a.jsxs(DR,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return a.jsxs(qN,{...o,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(KN,{children:n}),r&&a.jsx(YN,{children:r})]}),s,a.jsx(GN,{})]},t)}),a.jsx(HN,{})]})}var Y0=["light","dark"],IR="(prefers-color-scheme: dark)",FR=f.createContext(void 0),$R={setTheme:e=>{},themes:[]},LR=()=>{var e;return(e=f.useContext(FR))!=null?e:$R};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let u=o==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Y0.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(N,g=!1,y=!0)=>{let w=i?i[N]:N,v=g?N+"|| ''":`'${w}'`,b="";return s&&y&&!g&&Y0.includes(N)&&(b+=`d.style.colorScheme = '${N}';`),n==="class"?g||w?b+=`c.add(${v})`:b+="null":w&&(b+=`d[s](n,${v})`),b},p=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${IR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${u?"":"else{"+m(o,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var BR=e=>{switch(e){case"success":return WR;case"info":return HR;case"warning":return VR;case"error":return qR;default:return null}},UR=Array(12).fill(0),zR=({visible:e,className:t})=>re.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},re.createElement("div",{className:"sonner-spinner"},UR.map((n,r)=>re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),WR=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),VR=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),HR=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qR=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),GR=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),KR=()=>{let[e,t]=re.useState(document.hidden);return re.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},cg=1,YR=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:cg++,o=this.toasts.find(l=>l.id===s),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,o,i=r.then(async c=>{if(o=["resolve",c],re.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(JR(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>i.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||cg++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},tr=new YR,QR=(e,t)=>{let n=(t==null?void 0:t.id)||cg++;return tr.addToast({title:e,...t,id:n}),n},JR=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",XR=QR,ZR=()=>tr.toasts,eM=()=>tr.getActiveToasts(),z=Object.assign(XR,{success:tr.success,info:tr.info,warning:tr.warning,error:tr.error,custom:tr.custom,message:tr.message,promise:tr.promise,dismiss:tr.dismiss,loading:tr.loading},{getHistory:ZR,getToasts:eM});function tM(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}tM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function od(e){return e.label!==void 0}var nM=3,rM="32px",sM="16px",Q0=4e3,aM=356,oM=14,iM=20,lM=200;function Hr(...e){return e.filter(Boolean).join(" ")}function cM(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var uM=e=>{var t,n,r,s,o,i,l,c,u,d,h;let{invert:m,toast:p,unstyled:N,interacting:g,setHeights:y,visibleToasts:w,heights:v,index:b,toasts:x,expanded:_,removeToast:k,defaultRichColors:E,closeButton:D,style:$,cancelButtonStyle:O,actionButtonStyle:Y,className:T="",descriptionClassName:M="",duration:U,position:A,gap:F,loadingIcon:C,expandByDefault:j,classNames:S,icons:P,closeButtonAriaLabel:H="Close toast",pauseWhenPageIsHidden:R}=e,[L,J]=re.useState(null),[Q,G]=re.useState(null),[q,ee]=re.useState(!1),[ae,me]=re.useState(!1),[Pe,W]=re.useState(!1),[pe,je]=re.useState(!1),[$e,Ke]=re.useState(!1),[Ye,dt]=re.useState(0),[Nt,I]=re.useState(0),K=re.useRef(p.duration||U||Q0),X=re.useRef(null),ge=re.useRef(null),ve=b===0,de=b+1<=w,Ne=p.type,qe=p.dismissible!==!1,at=p.className||"",le=p.descriptionClassName||"",he=re.useMemo(()=>v.findIndex(De=>De.toastId===p.id)||0,[v,p.id]),ce=re.useMemo(()=>{var De;return(De=p.closeButton)!=null?De:D},[p.closeButton,D]),ne=re.useMemo(()=>p.duration||U||Q0,[p.duration,U]),we=re.useRef(0),ye=re.useRef(0),fe=re.useRef(0),Me=re.useRef(null),[yt,Ct]=A.split("-"),xt=re.useMemo(()=>v.reduce((De,tt,lt)=>lt>=he?De:De+tt.height,0),[v,he]),ms=KR(),rt=p.invert||m,ze=Ne==="loading";ye.current=re.useMemo(()=>he*F+xt,[he,xt]),re.useEffect(()=>{K.current=ne},[ne]),re.useEffect(()=>{ee(!0)},[]),re.useEffect(()=>{let De=ge.current;if(De){let tt=De.getBoundingClientRect().height;return I(tt),y(lt=>[{toastId:p.id,height:tt,position:p.position},...lt]),()=>y(lt=>lt.filter(Yt=>Yt.toastId!==p.id))}},[y,p.id]),re.useLayoutEffect(()=>{if(!q)return;let De=ge.current,tt=De.style.height;De.style.height="auto";let lt=De.getBoundingClientRect().height;De.style.height=tt,I(lt),y(Yt=>Yt.find(Re=>Re.toastId===p.id)?Yt.map(Re=>Re.toastId===p.id?{...Re,height:lt}:Re):[{toastId:p.id,height:lt,position:p.position},...Yt])},[q,p.title,p.description,y,p.id]);let Ie=re.useCallback(()=>{me(!0),dt(ye.current),y(De=>De.filter(tt=>tt.toastId!==p.id)),setTimeout(()=>{k(p)},lM)},[p,k,y,ye]);re.useEffect(()=>{if(p.promise&&Ne==="loading"||p.duration===1/0||p.type==="loading")return;let De;return _||g||R&&ms?(()=>{if(fe.current<we.current){let tt=new Date().getTime()-we.current;K.current=K.current-tt}fe.current=new Date().getTime()})():K.current!==1/0&&(we.current=new Date().getTime(),De=setTimeout(()=>{var tt;(tt=p.onAutoClose)==null||tt.call(p,p),Ie()},K.current)),()=>clearTimeout(De)},[_,g,p,Ne,R,ms,Ie]),re.useEffect(()=>{p.delete&&Ie()},[Ie,p.delete]);function be(){var De,tt,lt;return P!=null&&P.loading?re.createElement("div",{className:Hr(S==null?void 0:S.loader,(De=p==null?void 0:p.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":Ne==="loading"},P.loading):C?re.createElement("div",{className:Hr(S==null?void 0:S.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":Ne==="loading"},C):re.createElement(zR,{className:Hr(S==null?void 0:S.loader,(lt=p==null?void 0:p.classNames)==null?void 0:lt.loader),visible:Ne==="loading"})}return re.createElement("li",{tabIndex:0,ref:ge,className:Hr(T,at,S==null?void 0:S.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,S==null?void 0:S.default,S==null?void 0:S[Ne],(n=p==null?void 0:p.classNames)==null?void 0:n[Ne]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:E,"data-styled":!(p.jsx||p.unstyled||N),"data-mounted":q,"data-promise":!!p.promise,"data-swiped":$e,"data-removed":ae,"data-visible":de,"data-y-position":yt,"data-x-position":Ct,"data-index":b,"data-front":ve,"data-swiping":Pe,"data-dismissible":qe,"data-type":Ne,"data-invert":rt,"data-swipe-out":pe,"data-swipe-direction":Q,"data-expanded":!!(_||j&&q),style:{"--index":b,"--toasts-before":b,"--z-index":x.length-b,"--offset":`${ae?Ye:ye.current}px`,"--initial-height":j?"auto":`${Nt}px`,...$,...p.style},onDragEnd:()=>{W(!1),J(null),Me.current=null},onPointerDown:De=>{ze||!qe||(X.current=new Date,dt(ye.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(W(!0),Me.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,tt,lt,Yt;if(pe||!qe)return;Me.current=null;let Re=Number(((De=ge.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Fe=Number(((tt=ge.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nn=new Date().getTime()-((lt=X.current)==null?void 0:lt.getTime()),rn=L==="x"?Re:Fe,hn=Math.abs(rn)/nn;if(Math.abs(rn)>=iM||hn>.11){dt(ye.current),(Yt=p.onDismiss)==null||Yt.call(p,p),G(L==="x"?Re>0?"right":"left":Fe>0?"down":"up"),Ie(),je(!0),Ke(!1);return}W(!1),J(null)},onPointerMove:De=>{var tt,lt,Yt,Re;if(!Me.current||!qe||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;let Fe=De.clientY-Me.current.y,nn=De.clientX-Me.current.x,rn=(lt=e.swipeDirections)!=null?lt:cM(A);!L&&(Math.abs(nn)>1||Math.abs(Fe)>1)&&J(Math.abs(nn)>Math.abs(Fe)?"x":"y");let hn={x:0,y:0};L==="y"?(rn.includes("top")||rn.includes("bottom"))&&(rn.includes("top")&&Fe<0||rn.includes("bottom")&&Fe>0)&&(hn.y=Fe):L==="x"&&(rn.includes("left")||rn.includes("right"))&&(rn.includes("left")&&nn<0||rn.includes("right")&&nn>0)&&(hn.x=nn),(Math.abs(hn.x)>0||Math.abs(hn.y)>0)&&Ke(!0),(Yt=ge.current)==null||Yt.style.setProperty("--swipe-amount-x",`${hn.x}px`),(Re=ge.current)==null||Re.style.setProperty("--swipe-amount-y",`${hn.y}px`)}},ce&&!p.jsx?re.createElement("button",{"aria-label":H,"data-disabled":ze,"data-close-button":!0,onClick:ze||!qe?()=>{}:()=>{var De;Ie(),(De=p.onDismiss)==null||De.call(p,p)},className:Hr(S==null?void 0:S.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(o=P==null?void 0:P.close)!=null?o:GR):null,p.jsx||f.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:re.createElement(re.Fragment,null,Ne||p.icon||p.promise?re.createElement("div",{"data-icon":"",className:Hr(S==null?void 0:S.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||be():null,p.type!=="loading"?p.icon||(P==null?void 0:P[Ne])||BR(Ne):null):null,re.createElement("div",{"data-content":"",className:Hr(S==null?void 0:S.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},re.createElement("div",{"data-title":"",className:Hr(S==null?void 0:S.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?re.createElement("div",{"data-description":"",className:Hr(M,le,S==null?void 0:S.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),f.isValidElement(p.cancel)?p.cancel:p.cancel&&od(p.cancel)?re.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||O,onClick:De=>{var tt,lt;od(p.cancel)&&qe&&((lt=(tt=p.cancel).onClick)==null||lt.call(tt,De),Ie())},className:Hr(S==null?void 0:S.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,f.isValidElement(p.action)?p.action:p.action&&od(p.action)?re.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||Y,onClick:De=>{var tt,lt;od(p.action)&&((lt=(tt=p.action).onClick)==null||lt.call(tt,De),!De.defaultPrevented&&Ie())},className:Hr(S==null?void 0:S.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function J0(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function dM(e,t){let n={};return[e,t].forEach((r,s)=>{let o=s===1,i=o?"--mobile-offset":"--offset",l=o?sM:rM;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=l:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var hM=f.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:p,visibleToasts:N=nM,toastOptions:g,dir:y=J0(),gap:w=oM,loadingIcon:v,icons:b,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:_}=e,[k,E]=re.useState([]),D=re.useMemo(()=>Array.from(new Set([r].concat(k.filter(R=>R.position).map(R=>R.position)))),[k,r]),[$,O]=re.useState([]),[Y,T]=re.useState(!1),[M,U]=re.useState(!1),[A,F]=re.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),C=re.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=re.useRef(null),P=re.useRef(!1),H=re.useCallback(R=>{E(L=>{var J;return(J=L.find(Q=>Q.id===R.id))!=null&&J.delete||tr.dismiss(R.id),L.filter(({id:Q})=>Q!==R.id)})},[]);return re.useEffect(()=>tr.subscribe(R=>{if(R.dismiss){E(L=>L.map(J=>J.id===R.id?{...J,delete:!0}:J));return}setTimeout(()=>{aN.flushSync(()=>{E(L=>{let J=L.findIndex(Q=>Q.id===R.id);return J!==-1?[...L.slice(0,J),{...L[J],...R},...L.slice(J+1)]:[R,...L]})})})}),[]),re.useEffect(()=>{if(d!=="system"){F(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:L})=>{F(L?"dark":"light")})}catch{R.addListener(({matches:J})=>{try{F(J?"dark":"light")}catch(Q){console.error(Q)}})}},[d]),re.useEffect(()=>{k.length<=1&&T(!1)},[k]),re.useEffect(()=>{let R=L=>{var J,Q;s.every(G=>L[G]||L.code===G)&&(T(!0),(J=C.current)==null||J.focus()),L.code==="Escape"&&(document.activeElement===C.current||(Q=C.current)!=null&&Q.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[s]),re.useEffect(()=>{if(C.current)return()=>{S.current&&(S.current.focus({preventScroll:!0}),S.current=null,P.current=!1)}},[C.current]),re.createElement("section",{ref:t,"aria-label":`${x} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((R,L)=>{var J;let[Q,G]=R.split("-");return k.length?re.createElement("ol",{key:R,dir:y==="auto"?J0():y,tabIndex:-1,ref:C,className:l,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":Q,"data-lifted":Y&&k.length>1&&!o,"data-x-position":G,style:{"--front-toast-height":`${((J=$[0])==null?void 0:J.height)||0}px`,"--width":`${aM}px`,"--gap":`${w}px`,...p,...dM(c,u)},onBlur:q=>{P.current&&!q.currentTarget.contains(q.relatedTarget)&&(P.current=!1,S.current&&(S.current.focus({preventScroll:!0}),S.current=null))},onFocus:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||P.current||(P.current=!0,S.current=q.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{M||T(!1)},onDragEnd:()=>T(!1),onPointerDown:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},k.filter(q=>!q.position&&L===0||q.position===R).map((q,ee)=>{var ae,me;return re.createElement(uM,{key:q.id,icons:b,index:ee,toast:q,defaultRichColors:h,duration:(ae=g==null?void 0:g.duration)!=null?ae:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:N,closeButton:(me=g==null?void 0:g.closeButton)!=null?me:i,interacting:M,position:R,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:H,toasts:k.filter(Pe=>Pe.position==q.position),heights:$.filter(Pe=>Pe.position==q.position),setHeights:O,expandByDefault:o,gap:w,loadingIcon:v,expanded:Y,pauseWhenPageIsHidden:_,swipeDirections:e.swipeDirections})})):null}))});const fM=({...e})=>{const{theme:t="system"}=LR();return a.jsx(hM,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",success:"group-[.toaster]:bg-green-50 group-[.toaster]:text-green-900 group-[.toaster]:border-green-200 dark:group-[.toaster]:bg-green-950 dark:group-[.toaster]:text-green-50 dark:group-[.toaster]:border-green-800",error:"group-[.toaster]:bg-red-50 group-[.toaster]:text-red-900 group-[.toaster]:border-red-200 dark:group-[.toaster]:bg-red-950 dark:group-[.toaster]:text-red-50 dark:group-[.toaster]:border-red-800",warning:"group-[.toaster]:bg-yellow-50 group-[.toaster]:text-yellow-900 group-[.toaster]:border-yellow-200 dark:group-[.toaster]:bg-yellow-950 dark:group-[.toaster]:text-yellow-50 dark:group-[.toaster]:border-yellow-800",info:"group-[.toaster]:bg-blue-50 group-[.toaster]:text-blue-900 group-[.toaster]:border-blue-200 dark:group-[.toaster]:bg-blue-950 dark:group-[.toaster]:text-blue-50 dark:group-[.toaster]:border-blue-800"}},...e})};var mM=hv[" useId ".trim().toString()]||(()=>{}),pM=0;function gn(e){const[t,n]=f.useState(mM());return un(()=>{n(r=>r??String(pM++))},[e]),t?`radix-${t}`:""}const gM=["top","right","bottom","left"],Xa=Math.min,vr=Math.max,uh=Math.round,id=Math.floor,Ps=e=>({x:e,y:e}),vM={left:"right",right:"left",bottom:"top",top:"bottom"},yM={start:"end",end:"start"};function ug(e,t,n){return vr(e,Xa(t,n))}function ra(e,t){return typeof e=="function"?e(t):e}function sa(e){return e.split("-")[0]}function Sl(e){return e.split("-")[1]}function hy(e){return e==="x"?"y":"x"}function fy(e){return e==="y"?"height":"width"}const xM=new Set(["top","bottom"]);function Ss(e){return xM.has(sa(e))?"y":"x"}function my(e){return hy(Ss(e))}function wM(e,t,n){n===void 0&&(n=!1);const r=Sl(e),s=my(e),o=fy(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=dh(i)),[i,dh(i)]}function bM(e){const t=dh(e);return[dg(e),t,dg(t)]}function dg(e){return e.replace(/start|end/g,t=>yM[t])}const X0=["left","right"],Z0=["right","left"],jM=["top","bottom"],NM=["bottom","top"];function CM(e,t,n){switch(e){case"top":case"bottom":return n?t?Z0:X0:t?X0:Z0;case"left":case"right":return t?jM:NM;default:return[]}}function SM(e,t,n,r){const s=Sl(e);let o=CM(sa(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(dg)))),o}function dh(e){return e.replace(/left|right|bottom|top/g,t=>vM[t])}function _M(e){return{top:0,right:0,bottom:0,left:0,...e}}function QN(e){return typeof e!="number"?_M(e):{top:e,right:e,bottom:e,left:e}}function hh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ew(e,t,n){let{reference:r,floating:s}=e;const o=Ss(t),i=my(t),l=fy(i),c=sa(t),u=o==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Sl(t)){case"start":p[i]-=m*(n&&u?-1:1);break;case"end":p[i]+=m*(n&&u?-1:1);break}return p}const kM=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=ew(u,r,c),m=r,p={},N=0;for(let g=0;g<l.length;g++){const{name:y,fn:w}=l[g],{x:v,y:b,data:x,reset:_}=await w({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});d=v??d,h=b??h,p={...p,[y]:{...p[y],...x}},_&&N<=50&&(N++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(u=_.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:d,y:h}=ew(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function Xc(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ra(t,e),N=QN(p),y=l[m?h==="floating"?"reference":"floating":h],w=hh(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),x=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},_=hh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(w.top-_.top+N.top)/x.y,bottom:(_.bottom-w.bottom+N.bottom)/x.y,left:(w.left-_.left+N.left)/x.x,right:(_.right-w.right+N.right)/x.x}}const EM=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ra(e,t)||{};if(u==null)return{};const h=QN(d),m={x:n,y:r},p=my(s),N=fy(p),g=await i.getDimensions(u),y=p==="y",w=y?"top":"left",v=y?"bottom":"right",b=y?"clientHeight":"clientWidth",x=o.reference[N]+o.reference[p]-m[p]-o.floating[N],_=m[p]-o.reference[p],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let E=k?k[b]:0;(!E||!await(i.isElement==null?void 0:i.isElement(k)))&&(E=l.floating[b]||o.floating[N]);const D=x/2-_/2,$=E/2-g[N]/2-1,O=Xa(h[w],$),Y=Xa(h[v],$),T=O,M=E-g[N]-Y,U=E/2-g[N]/2+D,A=ug(T,U,M),F=!c.arrow&&Sl(s)!=null&&U!==A&&o.reference[N]/2-(U<T?O:Y)-g[N]/2<0,C=F?U<T?U-T:U-M:0;return{[p]:m[p]+C,data:{[p]:A,centerOffset:U-A-C,...F&&{alignmentOffset:C}},reset:F}}}),TM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:g=!0,...y}=ra(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const w=sa(s),v=Ss(l),b=sa(l)===l,x=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=m||(b||!g?[dh(l)]:bM(l)),k=N!=="none";!m&&k&&_.push(...SM(l,g,N,x));const E=[l,..._],D=await Xc(t,y),$=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&$.push(D[w]),h){const U=wM(s,i,x);$.push(D[U[0]],D[U[1]])}if(O=[...O,{placement:s,overflows:$}],!$.every(U=>U<=0)){var Y,T;const U=(((Y=o.flip)==null?void 0:Y.index)||0)+1,A=E[U];if(A&&(!(h==="alignment"?v!==Ss(A):!1)||O.every(j=>j.overflows[0]>0&&Ss(j.placement)===v)))return{data:{index:U,overflows:O},reset:{placement:A}};let F=(T=O.filter(C=>C.overflows[0]<=0).sort((C,j)=>C.overflows[1]-j.overflows[1])[0])==null?void 0:T.placement;if(!F)switch(p){case"bestFit":{var M;const C=(M=O.filter(j=>{if(k){const S=Ss(j.placement);return S===v||S==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(S=>S>0).reduce((S,P)=>S+P,0)]).sort((j,S)=>j[1]-S[1])[0])==null?void 0:M[0];C&&(F=C);break}case"initialPlacement":F=l;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function tw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function nw(e){return gM.some(t=>e[t]>=0)}const PM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ra(e,t);switch(r){case"referenceHidden":{const o=await Xc(t,{...s,elementContext:"reference"}),i=tw(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:nw(i)}}}case"escaped":{const o=await Xc(t,{...s,altBoundary:!0}),i=tw(o,n.floating);return{data:{escapedOffsets:i,escaped:nw(i)}}}default:return{}}}}},JN=new Set(["left","top"]);async function AM(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=sa(n),l=Sl(n),c=Ss(n)==="y",u=JN.has(i)?-1:1,d=o&&c?-1:1,h=ra(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:N}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof N=="number"&&(p=l==="end"?N*-1:N),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const DM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:l}=t,c=await AM(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},RM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:w,y:v}=y;return{x:w,y:v}}},...c}=ra(e,t),u={x:n,y:r},d=await Xc(t,c),h=Ss(sa(s)),m=hy(h);let p=u[m],N=u[h];if(o){const y=m==="y"?"top":"left",w=m==="y"?"bottom":"right",v=p+d[y],b=p-d[w];p=ug(v,p,b)}if(i){const y=h==="y"?"top":"left",w=h==="y"?"bottom":"right",v=N+d[y],b=N-d[w];N=ug(v,N,b)}const g=l.fn({...t,[m]:p,[h]:N});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[m]:o,[h]:i}}}}}},MM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ra(e,t),d={x:n,y:r},h=Ss(s),m=hy(h);let p=d[m],N=d[h];const g=ra(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",x=o.reference[m]-o.floating[b]+y.mainAxis,_=o.reference[m]+o.reference[b]-y.mainAxis;p<x?p=x:p>_&&(p=_)}if(u){var w,v;const b=m==="y"?"width":"height",x=JN.has(sa(s)),_=o.reference[h]-o.floating[b]+(x&&((w=i.offset)==null?void 0:w[h])||0)+(x?0:y.crossAxis),k=o.reference[h]+o.reference[b]+(x?0:((v=i.offset)==null?void 0:v[h])||0)-(x?y.crossAxis:0);N<_?N=_:N>k&&(N=k)}return{[m]:p,[h]:N}}}},OM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...u}=ra(e,t),d=await Xc(t,u),h=sa(s),m=Sl(s),p=Ss(s)==="y",{width:N,height:g}=o.floating;let y,w;h==="top"||h==="bottom"?(y=h,w=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,y=m==="end"?"top":"bottom");const v=g-d.top-d.bottom,b=N-d.left-d.right,x=Xa(g-d[y],v),_=Xa(N-d[w],b),k=!t.middlewareData.shift;let E=x,D=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=v),k&&!m){const O=vr(d.left,0),Y=vr(d.right,0),T=vr(d.top,0),M=vr(d.bottom,0);p?D=N-2*(O!==0||Y!==0?O+Y:vr(d.left,d.right)):E=g-2*(T!==0||M!==0?T+M:vr(d.top,d.bottom))}await c({...t,availableWidth:D,availableHeight:E});const $=await i.getDimensions(l.floating);return N!==$.width||g!==$.height?{reset:{rects:!0}}:{}}}};function sf(){return typeof window<"u"}function _l(e){return XN(e)?(e.nodeName||"").toLowerCase():"#document"}function br(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Os(e){var t;return(t=(XN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XN(e){return sf()?e instanceof Node||e instanceof br(e).Node:!1}function is(e){return sf()?e instanceof Element||e instanceof br(e).Element:!1}function Ds(e){return sf()?e instanceof HTMLElement||e instanceof br(e).HTMLElement:!1}function rw(e){return!sf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof br(e).ShadowRoot}const IM=new Set(["inline","contents"]);function xu(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ls(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!IM.has(s)}const FM=new Set(["table","td","th"]);function $M(e){return FM.has(_l(e))}const LM=[":popover-open",":modal"];function af(e){return LM.some(t=>{try{return e.matches(t)}catch{return!1}})}const BM=["transform","translate","scale","rotate","perspective"],UM=["transform","translate","scale","rotate","perspective","filter"],zM=["paint","layout","strict","content"];function py(e){const t=gy(),n=is(e)?ls(e):e;return BM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||UM.some(r=>(n.willChange||"").includes(r))||zM.some(r=>(n.contain||"").includes(r))}function WM(e){let t=Za(e);for(;Ds(t)&&!fl(t);){if(py(t))return t;if(af(t))return null;t=Za(t)}return null}function gy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VM=new Set(["html","body","#document"]);function fl(e){return VM.has(_l(e))}function ls(e){return br(e).getComputedStyle(e)}function of(e){return is(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Za(e){if(_l(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rw(e)&&e.host||Os(e);return rw(t)?t.host:t}function ZN(e){const t=Za(e);return fl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ds(t)&&xu(t)?t:ZN(t)}function Zc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=ZN(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=br(s);if(o){const l=hg(i);return t.concat(i,i.visualViewport||[],xu(s)?s:[],l&&n?Zc(l):[])}return t.concat(s,Zc(s,[],n))}function hg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eC(e){const t=ls(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ds(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=uh(n)!==o||uh(r)!==i;return l&&(n=o,r=i),{width:n,height:r,$:l}}function vy(e){return is(e)?e:e.contextElement}function Hi(e){const t=vy(e);if(!Ds(t))return Ps(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=eC(t);let i=(o?uh(n.width):n.width)/r,l=(o?uh(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const HM=Ps(0);function tC(e){const t=br(e);return!gy()||!t.visualViewport?HM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qM(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==br(e)?!1:t}function Ho(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=vy(e);let i=Ps(1);t&&(r?is(r)&&(i=Hi(r)):i=Hi(e));const l=qM(o,n,r)?tC(o):Ps(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(o){const m=br(o),p=r&&is(r)?br(r):r;let N=m,g=hg(N);for(;g&&r&&p!==N;){const y=Hi(g),w=g.getBoundingClientRect(),v=ls(g),b=w.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,x=w.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=b,u+=x,N=br(g),g=hg(N)}}return hh({width:d,height:h,x:c,y:u})}function yy(e,t){const n=of(e).scrollLeft;return t?t.left+n:Ho(Os(e)).left+n}function nC(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:yy(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function GM(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=Os(r),l=t?af(t.floating):!1;if(r===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=Ps(1);const d=Ps(0),h=Ds(r);if((h||!h&&!o)&&((_l(r)!=="body"||xu(i))&&(c=of(r)),Ds(r))){const p=Ho(r);u=Hi(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const m=i&&!h&&!o?nC(i,c,!0):Ps(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function KM(e){return Array.from(e.getClientRects())}function YM(e){const t=Os(e),n=of(e),r=e.ownerDocument.body,s=vr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=vr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+yy(e);const l=-n.scrollTop;return ls(r).direction==="rtl"&&(i+=vr(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:l}}function QM(e,t){const n=br(e),r=Os(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const u=gy();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:l,y:c}}const JM=new Set(["absolute","fixed"]);function XM(e,t){const n=Ho(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Ds(e)?Hi(e):Ps(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:i,height:l,x:c,y:u}}function sw(e,t,n){let r;if(t==="viewport")r=QM(e,n);else if(t==="document")r=YM(Os(e));else if(is(t))r=XM(t,n);else{const s=tC(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return hh(r)}function rC(e,t){const n=Za(e);return n===t||!is(n)||fl(n)?!1:ls(n).position==="fixed"||rC(n,t)}function ZM(e,t){const n=t.get(e);if(n)return n;let r=Zc(e,[],!1).filter(l=>is(l)&&_l(l)!=="body"),s=null;const o=ls(e).position==="fixed";let i=o?Za(e):e;for(;is(i)&&!fl(i);){const l=ls(i),c=py(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&JM.has(s.position)||xu(i)&&!c&&rC(e,i))?r=r.filter(d=>d!==i):s=l,i=Za(i)}return t.set(e,r),r}function eO(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?af(t)?[]:ZM(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,d)=>{const h=sw(t,d,s);return u.top=vr(h.top,u.top),u.right=Xa(h.right,u.right),u.bottom=Xa(h.bottom,u.bottom),u.left=vr(h.left,u.left),u},sw(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tO(e){const{width:t,height:n}=eC(e);return{width:t,height:n}}function nO(e,t,n){const r=Ds(t),s=Os(t),o=n==="fixed",i=Ho(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Ps(0);function u(){c.x=yy(s)}if(r||!r&&!o)if((_l(t)!=="body"||xu(s))&&(l=of(t)),r){const p=Ho(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&u();o&&!r&&s&&u();const d=s&&!r&&!o?nC(s,l):Ps(0),h=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:i.width,height:i.height}}function Nm(e){return ls(e).position==="static"}function aw(e,t){if(!Ds(e)||ls(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Os(e)===n&&(n=n.ownerDocument.body),n}function sC(e,t){const n=br(e);if(af(e))return n;if(!Ds(e)){let s=Za(e);for(;s&&!fl(s);){if(is(s)&&!Nm(s))return s;s=Za(s)}return n}let r=aw(e,t);for(;r&&$M(r)&&Nm(r);)r=aw(r,t);return r&&fl(r)&&Nm(r)&&!py(r)?n:r||WM(e)||n}const rO=async function(e){const t=this.getOffsetParent||sC,n=this.getDimensions,r=await n(e.floating);return{reference:nO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sO(e){return ls(e).direction==="rtl"}const aO={convertOffsetParentRelativeRectToViewportRelativeRect:GM,getDocumentElement:Os,getClippingRect:eO,getOffsetParent:sC,getElementRects:rO,getClientRects:KM,getDimensions:tO,getScale:Hi,isElement:is,isRTL:sO};function aC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function oO(e,t){let n=null,r;const s=Os(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||t(),!m||!p)return;const N=id(h),g=id(s.clientWidth-(d+m)),y=id(s.clientHeight-(h+p)),w=id(d),b={rootMargin:-N+"px "+-g+"px "+-y+"px "+-w+"px",threshold:vr(0,Xa(1,c))||1};let x=!0;function _(k){const E=k[0].intersectionRatio;if(E!==c){if(!x)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!aC(u,e.getBoundingClientRect())&&i(),x=!1}try{n=new IntersectionObserver(_,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(e)}return i(!0),o}function iO(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=vy(e),d=s||o?[...u?Zc(u):[],...Zc(t)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),o&&w.addEventListener("resize",n)});const h=u&&l?oO(u,n):null;let m=-1,p=null;i&&(p=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let N,g=c?Ho(e):null;c&&y();function y(){const w=Ho(e);g&&!aC(g,w)&&n(),g=w,N=requestAnimationFrame(y)}return n(),()=>{var w;d.forEach(v=>{s&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),h==null||h(),(w=p)==null||w.disconnect(),p=null,c&&cancelAnimationFrame(N)}}const lO=DM,cO=RM,uO=TM,dO=OM,hO=PM,ow=EM,fO=MM,mO=(e,t,n)=>{const r=new Map,s={platform:aO,...n},o={...s.platform,_c:r};return kM(e,t,{...s,platform:o})};var pO=typeof document<"u",gO=function(){},Dd=pO?f.useLayoutEffect:gO;function fh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!fh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!fh(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function oC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function iw(e,t){const n=oC(e);return Math.round(t*n)/n}function Cm(e){const t=f.useRef(e);return Dd(()=>{t.current=e}),t}function vO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);fh(m,r)||p(r);const[N,g]=f.useState(null),[y,w]=f.useState(null),v=f.useCallback(j=>{j!==k.current&&(k.current=j,g(j))},[]),b=f.useCallback(j=>{j!==E.current&&(E.current=j,w(j))},[]),x=o||N,_=i||y,k=f.useRef(null),E=f.useRef(null),D=f.useRef(d),$=c!=null,O=Cm(c),Y=Cm(s),T=Cm(u),M=f.useCallback(()=>{if(!k.current||!E.current)return;const j={placement:t,strategy:n,middleware:m};Y.current&&(j.platform=Y.current),mO(k.current,E.current,j).then(S=>{const P={...S,isPositioned:T.current!==!1};U.current&&!fh(D.current,P)&&(D.current=P,ti.flushSync(()=>{h(P)}))})},[m,t,n,Y,T]);Dd(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[u]);const U=f.useRef(!1);Dd(()=>(U.current=!0,()=>{U.current=!1}),[]),Dd(()=>{if(x&&(k.current=x),_&&(E.current=_),x&&_){if(O.current)return O.current(x,_,M);M()}},[x,_,M,O,$]);const A=f.useMemo(()=>({reference:k,floating:E,setReference:v,setFloating:b}),[v,b]),F=f.useMemo(()=>({reference:x,floating:_}),[x,_]),C=f.useMemo(()=>{const j={position:n,left:0,top:0};if(!F.floating)return j;const S=iw(F.floating,d.x),P=iw(F.floating,d.y);return l?{...j,transform:"translate("+S+"px, "+P+"px)",...oC(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:S,top:P}},[n,l,F.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:M,refs:A,elements:F,floatingStyles:C}),[d,M,A,F,C])}const yO=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ow({element:r.current,padding:s}).fn(n):{}:r?ow({element:r,padding:s}).fn(n):{}}}},xO=(e,t)=>({...lO(e),options:[e,t]}),wO=(e,t)=>({...cO(e),options:[e,t]}),bO=(e,t)=>({...fO(e),options:[e,t]}),jO=(e,t)=>({...uO(e),options:[e,t]}),NO=(e,t)=>({...dO(e),options:[e,t]}),CO=(e,t)=>({...hO(e),options:[e,t]}),SO=(e,t)=>({...yO(e),options:[e,t]});var _O="Arrow",iC=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return a.jsx(Te.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});iC.displayName=_O;var kO=iC;function lC(e){const[t,n]=f.useState(void 0);return un(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var xy="Popper",[cC,ao]=mr(xy),[EO,uC]=cC(xy),dC=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return a.jsx(EO,{scope:t,anchor:r,onAnchorChange:s,children:n})};dC.displayName=xy;var hC="PopperAnchor",fC=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=uC(hC,n),i=f.useRef(null),l=Ve(t,i);return f.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:a.jsx(Te.div,{...s,ref:l})});fC.displayName=hC;var wy="PopperContent",[TO,PO]=cC(wy),mC=f.forwardRef((e,t)=>{var q,ee,ae,me,Pe,W;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:N,...g}=e,y=uC(wy,n),[w,v]=f.useState(null),b=Ve(t,pe=>v(pe)),[x,_]=f.useState(null),k=lC(x),E=(k==null?void 0:k.width)??0,D=(k==null?void 0:k.height)??0,$=r+(o!=="center"?"-"+o:""),O=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Y=Array.isArray(u)?u:[u],T=Y.length>0,M={padding:O,boundary:Y.filter(DO),altBoundary:T},{refs:U,floatingStyles:A,placement:F,isPositioned:C,middlewareData:j}=vO({strategy:"fixed",placement:$,whileElementsMounted:(...pe)=>iO(...pe,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[xO({mainAxis:s+D,alignmentAxis:i}),c&&wO({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?bO():void 0,...M}),c&&jO({...M}),NO({...M,apply:({elements:pe,rects:je,availableWidth:$e,availableHeight:Ke})=>{const{width:Ye,height:dt}=je.reference,Nt=pe.floating.style;Nt.setProperty("--radix-popper-available-width",`${$e}px`),Nt.setProperty("--radix-popper-available-height",`${Ke}px`),Nt.setProperty("--radix-popper-anchor-width",`${Ye}px`),Nt.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),x&&SO({element:x,padding:l}),RO({arrowWidth:E,arrowHeight:D}),m&&CO({strategy:"referenceHidden",...M})]}),[S,P]=vC(F),H=Lt(N);un(()=>{C&&(H==null||H())},[C,H]);const R=(q=j.arrow)==null?void 0:q.x,L=(ee=j.arrow)==null?void 0:ee.y,J=((ae=j.arrow)==null?void 0:ae.centerOffset)!==0,[Q,G]=f.useState();return un(()=>{w&&G(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:C?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(me=j.transformOrigin)==null?void 0:me.x,(Pe=j.transformOrigin)==null?void 0:Pe.y].join(" "),...((W=j.hide)==null?void 0:W.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(TO,{scope:n,placedSide:S,onArrowChange:_,arrowX:R,arrowY:L,shouldHideArrow:J,children:a.jsx(Te.div,{"data-side":S,"data-align":P,...g,ref:b,style:{...g.style,animation:C?void 0:"none"}})})})});mC.displayName=wy;var pC="PopperArrow",AO={top:"bottom",right:"left",bottom:"top",left:"right"},gC=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=PO(pC,r),i=AO[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(kO,{...s,ref:n,style:{...s.style,display:"block"}})})});gC.displayName=pC;function DO(e){return e!==null}var RO=e=>({name:"transformOrigin",options:e,fn(t){var y,w,v;const{placement:n,rects:r,middlewareData:s}=t,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=vC(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let N="",g="";return u==="bottom"?(N=i?h:`${m}px`,g=`${-c}px`):u==="top"?(N=i?h:`${m}px`,g=`${r.floating.height+c}px`):u==="right"?(N=`${-c}px`,g=i?h:`${p}px`):u==="left"&&(N=`${r.floating.width+c}px`,g=i?h:`${p}px`),{data:{x:N,y:g}}}});function vC(e){const[t,n="center"]=e.split("-");return[t,n]}var by=dC,wu=fC,lf=mC,cf=gC,[uf,T9]=mr("Tooltip",[ao]),jy=ao(),yC="TooltipProvider",MO=700,lw="tooltip.open",[OO,xC]=uf(yC),wC=e=>{const{__scopeTooltip:t,delayDuration:n=MO,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,i=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(OO,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};wC.displayName=yC;var bC="Tooltip",[P9,df]=uf(bC),fg="TooltipTrigger",IO=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=df(fg,n),o=xC(fg,n),i=jy(n),l=f.useRef(null),c=Ve(t,l,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),h=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(wu,{asChild:!0,...i,children:a.jsx(Te.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ue(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ue(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ue(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ue(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:ue(e.onBlur,s.onClose),onClick:ue(e.onClick,s.onClose)})})});IO.displayName=fg;var FO="TooltipPortal",[A9,$O]=uf(FO,{forceMount:void 0}),ml="TooltipContent",jC=f.forwardRef((e,t)=>{const n=$O(ml,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,i=df(ml,e.__scopeTooltip);return a.jsx(dn,{present:r||i.open,children:i.disableHoverableContent?a.jsx(NC,{side:s,...o,ref:t}):a.jsx(LO,{side:s,...o,ref:t})})}),LO=f.forwardRef((e,t)=>{const n=df(ml,e.__scopeTooltip),r=xC(ml,e.__scopeTooltip),s=f.useRef(null),o=Ve(t,s),[i,l]=f.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,m=f.useCallback(()=>{l(null),h(!1)},[h]),p=f.useCallback((N,g)=>{const y=N.currentTarget,w={x:N.clientX,y:N.clientY},v=VO(w,y.getBoundingClientRect()),b=HO(w,v),x=qO(g.getBoundingClientRect()),_=KO([...b,...x]);l(_),h(!0)},[h]);return f.useEffect(()=>()=>m(),[m]),f.useEffect(()=>{if(c&&d){const N=y=>p(y,d),g=y=>p(y,c);return c.addEventListener("pointerleave",N),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",N),d.removeEventListener("pointerleave",g)}}},[c,d,p,m]),f.useEffect(()=>{if(i){const N=g=>{const y=g.target,w={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),b=!GO(w,i);v?m():b&&(m(),u())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[c,d,i,u,m]),a.jsx(NC,{...e,ref:o})}),[BO,UO]=uf(bC,{isInside:!1}),zO=lN("TooltipContent"),NC=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=df(ml,n),u=jy(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(lw,d),()=>document.removeEventListener(lw,d)),[d]),f.useEffect(()=>{if(c.trigger){const h=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(ni,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(lf,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(zO,{children:r}),a.jsx(BO,{scope:n,isInside:!0,children:a.jsx(iD,{id:c.contentId,role:"tooltip",children:s||r})})]})})});jC.displayName=ml;var CC="TooltipArrow",WO=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=jy(n);return UO(CC,n).isInside?null:a.jsx(cf,{...s,...r,ref:t})});WO.displayName=CC;function VO(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function HO(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function qO(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function GO(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function KO(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),YO(t)}function YO(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var QO=wC,SC=jC;const JO=QO,XO=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(SC,{ref:r,sideOffset:t,className:te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));XO.displayName=SC.displayName;var kl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qo=typeof window>"u"||"Deno"in globalThis;function Ln(){}function ZO(e,t){return typeof e=="function"?e(t):e}function mg(e){return typeof e=="number"&&e>=0&&e!==1/0}function _C(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ha(e,t){return typeof e=="function"?e(t):e}function Tr(e,t){return typeof e=="function"?e(t):e}function cw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==Ny(i,t.options))return!1}else if(!eu(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function uw(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Go(t.options.mutationKey)!==Go(o))return!1}else if(!eu(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Ny(e,t){return((t==null?void 0:t.queryKeyHashFn)||Go)(e)}function Go(e){return JSON.stringify(e,(t,n)=>pg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function eu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>eu(e[n],t[n])):!1}function kC(e,t){if(e===t)return e;const n=dw(e)&&dw(t);if(n||pg(e)&&pg(t)){const r=n?e:Object.keys(e),s=r.length,o=n?t:Object.keys(t),i=o.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<i;d++){const h=n?d:o[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=kC(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return s===i&&u===s?e:l}return t}function mh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function dw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pg(e){if(!hw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!hw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hw(e){return Object.prototype.toString.call(e)==="[object Object]"}function eI(e){return new Promise(t=>{setTimeout(t,e)})}function gg(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?kC(e,t):t}function tI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function nI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Cy=Symbol();function EC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Cy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function TC(e,t){return typeof e=="function"?e(...t):!!e}var To,Ca,Ki,Ib,rI=(Ib=class extends kl{constructor(){super();Oe(this,To);Oe(this,Ca);Oe(this,Ki);Se(this,Ki,t=>{if(!qo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,Ca)||this.setEventListener(B(this,Ki))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Ca))==null||t.call(this),Se(this,Ca,void 0))}setEventListener(t){var n;Se(this,Ki,t),(n=B(this,Ca))==null||n.call(this),Se(this,Ca,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,To)!==t&&(Se(this,To,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,To)=="boolean"?B(this,To):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},To=new WeakMap,Ca=new WeakMap,Ki=new WeakMap,Ib),Sy=new rI,Yi,Sa,Qi,Fb,sI=(Fb=class extends kl{constructor(){super();Oe(this,Yi,!0);Oe(this,Sa);Oe(this,Qi);Se(this,Qi,t=>{if(!qo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,Sa)||this.setEventListener(B(this,Qi))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Sa))==null||t.call(this),Se(this,Sa,void 0))}setEventListener(t){var n;Se(this,Qi,t),(n=B(this,Sa))==null||n.call(this),Se(this,Sa,t(this.setOnline.bind(this)))}setOnline(t){B(this,Yi)!==t&&(Se(this,Yi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,Yi)}},Yi=new WeakMap,Sa=new WeakMap,Qi=new WeakMap,Fb),ph=new sI;function vg(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function aI(e){return Math.min(1e3*2**e,3e4)}function PC(e){return(e??"online")==="online"?ph.isOnline():!0}var AC=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Sm(e){return e instanceof AC}function DC(e){let t=!1,n=0,r=!1,s;const o=vg(),i=g=>{var y;r||(m(new AC(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Sy.isFocused()&&(e.networkMode==="always"||ph.isOnline())&&e.canRun(),d=()=>PC(e.networkMode)&&e.canRun(),h=g=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,g),s==null||s(),o.resolve(g))},m=g=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,g),s==null||s(),o.reject(g))},p=()=>new Promise(g=>{var y;s=w=>{(r||u())&&g(w)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),N=()=>{if(r)return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var k;if(r)return;const v=e.retry??(qo?0:3),b=e.retryDelay??aI,x=typeof b=="function"?b(n,w):b,_=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(t||!_){m(w);return}n++,(k=e.onFail)==null||k.call(e,n,w),eI(x).then(()=>u()?void 0:p()).then(()=>{t?m(w):N()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?N():p().then(N),o)}}var oI=e=>setTimeout(e,0);function iI(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=oI;const o=l=>{t?e.push(l):s(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xt=iI(),Po,$b,RC=($b=class{constructor(){Oe(this,Po)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mg(this.gcTime)&&Se(this,Po,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qo?1/0:5*60*1e3))}clearGcTimeout(){B(this,Po)&&(clearTimeout(B(this,Po)),Se(this,Po,void 0))}},Po=new WeakMap,$b),Ji,Ao,Er,Do,Sn,cu,Ro,Kr,Us,Lb,lI=(Lb=class extends RC{constructor(t){super();Oe(this,Kr);Oe(this,Ji);Oe(this,Ao);Oe(this,Er);Oe(this,Do);Oe(this,Sn);Oe(this,cu);Oe(this,Ro);Se(this,Ro,!1),Se(this,cu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Se(this,Do,t.client),Se(this,Er,B(this,Do).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Se(this,Ji,cI(this.options)),this.state=t.state??B(this,Ji),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,Sn))==null?void 0:t.promise}setOptions(t){this.options={...B(this,cu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Er).remove(this)}setData(t,n){const r=gg(this.state.data,t,this.options);return Ge(this,Kr,Us).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ge(this,Kr,Us).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=B(this,Sn))==null?void 0:r.promise;return(s=B(this,Sn))==null||s.cancel(t),n?n.then(Ln).catch(Ln):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Ji))}isActive(){return this.observers.some(t=>Tr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ha(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!_C(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,Sn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,Sn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,Er).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,Sn)&&(B(this,Ro)?B(this,Sn).cancel({revert:!0}):B(this,Sn).cancelRetry()),this.scheduleGc()),B(this,Er).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,Kr,Us).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,Sn))return B(this,Sn).continueRetry(),B(this,Sn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Se(this,Ro,!0),r.signal)})},o=()=>{const m=EC(this.options,n),N=(()=>{const g={client:B(this,Do),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return Se(this,Ro,!1),this.options.persister?this.options.persister(m,N,this):m(N)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:B(this,Do),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),Se(this,Ao,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Ge(this,Kr,Us).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var p,N,g,y;Sm(m)&&m.silent||Ge(this,Kr,Us).call(this,{type:"error",error:m}),Sm(m)||((N=(p=B(this,Er).config).onError)==null||N.call(p,m,this),(y=(g=B(this,Er).config).onSettled)==null||y.call(g,this.state.data,m,this)),this.scheduleGc()};return Se(this,Sn,DC({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,N,g,y;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(w){c(w);return}(N=(p=B(this,Er).config).onSuccess)==null||N.call(p,m,this),(y=(g=B(this,Er).config).onSettled)==null||y.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Ge(this,Kr,Us).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Ge(this,Kr,Us).call(this,{type:"pause"})},onContinue:()=>{Ge(this,Kr,Us).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),B(this,Sn).start()}},Ji=new WeakMap,Ao=new WeakMap,Er=new WeakMap,Do=new WeakMap,Sn=new WeakMap,cu=new WeakMap,Ro=new WeakMap,Kr=new WeakSet,Us=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...MC(r.data,this.options),fetchMeta:t.meta??null};case"success":return Se(this,Ao,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Sm(s)&&s.revert&&B(this,Ao)?{...B(this,Ao),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,Er).notify({query:this,type:"updated",action:t})})},Lb);function MC(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function cI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ws,Bb,uI=(Bb=class extends kl{constructor(t={}){super();Oe(this,ws);this.config=t,Se(this,ws,new Map)}build(t,n,r){const s=n.queryKey,o=n.queryHash??Ny(s,n);let i=this.get(o);return i||(i=new lI({client:t,queryKey:s,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){B(this,ws).has(t.queryHash)||(B(this,ws).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,ws).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,ws).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,ws).get(t)}getAll(){return[...B(this,ws).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>cw(t,r)):n}notify(t){Xt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ws=new WeakMap,Bb),bs,In,Mo,js,pa,Ub,dI=(Ub=class extends RC{constructor(t){super();Oe(this,js);Oe(this,bs);Oe(this,In);Oe(this,Mo);this.mutationId=t.mutationId,Se(this,In,t.mutationCache),Se(this,bs,[]),this.state=t.state||OC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,bs).includes(t)||(B(this,bs).push(t),this.clearGcTimeout(),B(this,In).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Se(this,bs,B(this,bs).filter(n=>n!==t)),this.scheduleGc(),B(this,In).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,bs).length||(this.state.status==="pending"?this.scheduleGc():B(this,In).remove(this))}continue(){var t;return((t=B(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,u,d,h,m,p,N,g,y,w,v,b,x,_,k,E,D;const n=()=>{Ge(this,js,pa).call(this,{type:"continue"})};Se(this,Mo,DC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:($,O)=>{Ge(this,js,pa).call(this,{type:"failed",failureCount:$,error:O})},onPause:()=>{Ge(this,js,pa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,In).canRun(this)}));const r=this.state.status==="pending",s=!B(this,Mo).canStart();try{if(r)n();else{Ge(this,js,pa).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(o=B(this,In).config).onMutate)==null?void 0:i.call(o,t,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));O!==this.state.context&&Ge(this,js,pa).call(this,{type:"pending",context:O,variables:t,isPaused:s})}const $=await B(this,Mo).start();return await((d=(u=B(this,In).config).onSuccess)==null?void 0:d.call(u,$,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,$,t,this.state.context)),await((N=(p=B(this,In).config).onSettled)==null?void 0:N.call(p,$,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,$,null,t,this.state.context)),Ge(this,js,pa).call(this,{type:"success",data:$}),$}catch($){try{throw await((v=(w=B(this,In).config).onError)==null?void 0:v.call(w,$,t,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,$,t,this.state.context)),await((k=(_=B(this,In).config).onSettled)==null?void 0:k.call(_,void 0,$,this.state.variables,this.state.context,this)),await((D=(E=this.options).onSettled)==null?void 0:D.call(E,void 0,$,t,this.state.context)),$}finally{Ge(this,js,pa).call(this,{type:"error",error:$})}}finally{B(this,In).runNext(this)}}},bs=new WeakMap,In=new WeakMap,Mo=new WeakMap,js=new WeakSet,pa=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xt.batch(()=>{B(this,bs).forEach(r=>{r.onMutationUpdate(t)}),B(this,In).notify({mutation:this,type:"updated",action:t})})},Ub);function OC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hs,Yr,uu,zb,hI=(zb=class extends kl{constructor(t={}){super();Oe(this,Hs);Oe(this,Yr);Oe(this,uu);this.config=t,Se(this,Hs,new Set),Se(this,Yr,new Map),Se(this,uu,0)}build(t,n,r){const s=new dI({mutationCache:this,mutationId:++Bu(this,uu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){B(this,Hs).add(t);const n=ld(t);if(typeof n=="string"){const r=B(this,Yr).get(n);r?r.push(t):B(this,Yr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(B(this,Hs).delete(t)){const n=ld(t);if(typeof n=="string"){const r=B(this,Yr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&B(this,Yr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=ld(t);if(typeof n=="string"){const r=B(this,Yr).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=ld(t);if(typeof n=="string"){const s=(r=B(this,Yr).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xt.batch(()=>{B(this,Hs).forEach(t=>{this.notify({type:"removed",mutation:t})}),B(this,Hs).clear(),B(this,Yr).clear()})}getAll(){return Array.from(B(this,Hs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uw(n,r))}findAll(t={}){return this.getAll().filter(n=>uw(t,n))}notify(t){Xt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Ln))))}},Hs=new WeakMap,Yr=new WeakMap,uu=new WeakMap,zb);function ld(e){var t;return(t=e.options.scope)==null?void 0:t.id}function fw(e){return{onFetch:(t,n)=>{var d,h,m,p,N;const r=t.options,s=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],i=((N=t.state.data)==null?void 0:N.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=EC(t.options,t.fetchOptions),v=async(b,x,_)=>{if(g)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const Y={client:t.client,queryKey:t.queryKey,pageParam:x,direction:_?"backward":"forward",meta:t.options.meta};return y(Y),Y})(),D=await w(E),{maxPages:$}=t.options,O=_?nI:tI;return{pages:O(b.pages,D,$),pageParams:O(b.pageParams,x,$)}};if(s&&o.length){const b=s==="backward",x=b?fI:mw,_={pages:o,pageParams:i},k=x(r,_);l=await v(_,k,b)}else{const b=e??o.length;do{const x=c===0?i[0]??r.initialPageParam:mw(r,l);if(c>0&&x==null)break;l=await v(l,x),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function mw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function fI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Dt,_a,ka,Xi,Zi,Ea,el,tl,Wb,mI=(Wb=class{constructor(e={}){Oe(this,Dt);Oe(this,_a);Oe(this,ka);Oe(this,Xi);Oe(this,Zi);Oe(this,Ea);Oe(this,el);Oe(this,tl);Se(this,Dt,e.queryCache||new uI),Se(this,_a,e.mutationCache||new hI),Se(this,ka,e.defaultOptions||{}),Se(this,Xi,new Map),Se(this,Zi,new Map),Se(this,Ea,0)}mount(){Bu(this,Ea)._++,B(this,Ea)===1&&(Se(this,el,Sy.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Dt).onFocus())})),Se(this,tl,ph.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Dt).onOnline())})))}unmount(){var e,t;Bu(this,Ea)._--,B(this,Ea)===0&&((e=B(this,el))==null||e.call(this),Se(this,el,void 0),(t=B(this,tl))==null||t.call(this),Se(this,tl,void 0))}isFetching(e){return B(this,Dt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,_a).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Dt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=B(this,Dt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ha(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return B(this,Dt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=B(this,Dt).get(r.queryHash),o=s==null?void 0:s.state.data,i=ZO(t,o);if(i!==void 0)return B(this,Dt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Xt.batch(()=>B(this,Dt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Dt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,Dt);Xt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,Dt);return Xt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xt.batch(()=>B(this,Dt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Ln).catch(Ln)}invalidateQueries(e,t={}){return Xt.batch(()=>(B(this,Dt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xt.batch(()=>B(this,Dt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Ln)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Ln)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,Dt).build(this,t);return n.isStaleByTime(Ha(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ln).catch(Ln)}fetchInfiniteQuery(e){return e.behavior=fw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ln).catch(Ln)}ensureInfiniteQueryData(e){return e.behavior=fw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ph.isOnline()?B(this,_a).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Dt)}getMutationCache(){return B(this,_a)}getDefaultOptions(){return B(this,ka)}setDefaultOptions(e){Se(this,ka,e)}setQueryDefaults(e,t){B(this,Xi).set(Go(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,Xi).values()],n={};return t.forEach(r=>{eu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){B(this,Zi).set(Go(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Zi).values()],n={};return t.forEach(r=>{eu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,ka).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ny(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Cy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,ka).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Dt).clear(),B(this,_a).clear()}},Dt=new WeakMap,_a=new WeakMap,ka=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,Ea=new WeakMap,el=new WeakMap,tl=new WeakMap,Wb),Xn,Ze,du,Fn,Oo,nl,Ta,Pa,hu,rl,sl,Io,Fo,Aa,al,ut,oc,yg,xg,wg,bg,jg,Ng,Cg,IC,Vb,pI=(Vb=class extends kl{constructor(t,n){super();Oe(this,ut);Oe(this,Xn);Oe(this,Ze);Oe(this,du);Oe(this,Fn);Oe(this,Oo);Oe(this,nl);Oe(this,Ta);Oe(this,Pa);Oe(this,hu);Oe(this,rl);Oe(this,sl);Oe(this,Io);Oe(this,Fo);Oe(this,Aa);Oe(this,al,new Set);this.options=n,Se(this,Xn,t),Se(this,Pa,null),Se(this,Ta,vg()),this.options.experimental_prefetchInRender||B(this,Ta).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ze).addObserver(this),pw(B(this,Ze),this.options)?Ge(this,ut,oc).call(this):this.updateResult(),Ge(this,ut,bg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Sg(B(this,Ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Sg(B(this,Ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ge(this,ut,jg).call(this),Ge(this,ut,Ng).call(this),B(this,Ze).removeObserver(this)}setOptions(t){const n=this.options,r=B(this,Ze);if(this.options=B(this,Xn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Tr(this.options.enabled,B(this,Ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ge(this,ut,Cg).call(this),B(this,Ze).setOptions(this.options),n._defaulted&&!mh(this.options,n)&&B(this,Xn).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,Ze),observer:this});const s=this.hasListeners();s&&gw(B(this,Ze),r,this.options,n)&&Ge(this,ut,oc).call(this),this.updateResult(),s&&(B(this,Ze)!==r||Tr(this.options.enabled,B(this,Ze))!==Tr(n.enabled,B(this,Ze))||Ha(this.options.staleTime,B(this,Ze))!==Ha(n.staleTime,B(this,Ze)))&&Ge(this,ut,yg).call(this);const o=Ge(this,ut,xg).call(this);s&&(B(this,Ze)!==r||Tr(this.options.enabled,B(this,Ze))!==Tr(n.enabled,B(this,Ze))||o!==B(this,Aa))&&Ge(this,ut,wg).call(this,o)}getOptimisticResult(t){const n=B(this,Xn).getQueryCache().build(B(this,Xn),t),r=this.createResult(n,t);return vI(this,r)&&(Se(this,Fn,r),Se(this,nl,this.options),Se(this,Oo,B(this,Ze).state)),r}getCurrentResult(){return B(this,Fn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){B(this,al).add(t)}getCurrentQuery(){return B(this,Ze)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=B(this,Xn).defaultQueryOptions(t),r=B(this,Xn).getQueryCache().build(B(this,Xn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Ge(this,ut,oc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Fn)))}createResult(t,n){var $;const r=B(this,Ze),s=this.options,o=B(this,Fn),i=B(this,Oo),l=B(this,nl),u=t!==r?t.state:B(this,du),{state:d}=t;let h={...d},m=!1,p;if(n._optimisticResults){const O=this.hasListeners(),Y=!O&&pw(t,n),T=O&&gw(t,r,n,s);(Y||T)&&(h={...h,...MC(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:N,errorUpdatedAt:g,status:y}=h;p=h.data;let w=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let O;o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(O=o.data,w=!0):O=typeof n.placeholderData=="function"?n.placeholderData(($=B(this,sl))==null?void 0:$.state.data,B(this,sl)):n.placeholderData,O!==void 0&&(y="success",p=gg(o==null?void 0:o.data,O,n),m=!0)}if(n.select&&p!==void 0&&!w)if(o&&p===(i==null?void 0:i.data)&&n.select===B(this,hu))p=B(this,rl);else try{Se(this,hu,n.select),p=n.select(p),p=gg(o==null?void 0:o.data,p,n),Se(this,rl,p),Se(this,Pa,null)}catch(O){Se(this,Pa,O)}B(this,Pa)&&(N=B(this,Pa),p=B(this,rl),g=Date.now(),y="error");const v=h.fetchStatus==="fetching",b=y==="pending",x=y==="error",_=b&&v,k=p!==void 0,D={status:y,fetchStatus:h.fetchStatus,isPending:b,isSuccess:y==="success",isError:x,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:h.dataUpdatedAt,error:N,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:x&&!k,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:x&&k,isStale:_y(t,n),refetch:this.refetch,promise:B(this,Ta),isEnabled:Tr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=M=>{D.status==="error"?M.reject(D.error):D.data!==void 0&&M.resolve(D.data)},Y=()=>{const M=Se(this,Ta,D.promise=vg());O(M)},T=B(this,Ta);switch(T.status){case"pending":t.queryHash===r.queryHash&&O(T);break;case"fulfilled":(D.status==="error"||D.data!==T.value)&&Y();break;case"rejected":(D.status!=="error"||D.error!==T.reason)&&Y();break}}return D}updateResult(){const t=B(this,Fn),n=this.createResult(B(this,Ze),this.options);if(Se(this,Oo,B(this,Ze).state),Se(this,nl,this.options),B(this,Oo).data!==void 0&&Se(this,sl,B(this,Ze)),mh(n,t))return;Se(this,Fn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!B(this,al).size)return!0;const i=new Set(o??B(this,al));return this.options.throwOnError&&i.add("error"),Object.keys(B(this,Fn)).some(l=>{const c=l;return B(this,Fn)[c]!==t[c]&&i.has(c)})};Ge(this,ut,IC).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ge(this,ut,bg).call(this)}},Xn=new WeakMap,Ze=new WeakMap,du=new WeakMap,Fn=new WeakMap,Oo=new WeakMap,nl=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,hu=new WeakMap,rl=new WeakMap,sl=new WeakMap,Io=new WeakMap,Fo=new WeakMap,Aa=new WeakMap,al=new WeakMap,ut=new WeakSet,oc=function(t){Ge(this,ut,Cg).call(this);let n=B(this,Ze).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Ln)),n},yg=function(){Ge(this,ut,jg).call(this);const t=Ha(this.options.staleTime,B(this,Ze));if(qo||B(this,Fn).isStale||!mg(t))return;const r=_C(B(this,Fn).dataUpdatedAt,t)+1;Se(this,Io,setTimeout(()=>{B(this,Fn).isStale||this.updateResult()},r))},xg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,Ze)):this.options.refetchInterval)??!1},wg=function(t){Ge(this,ut,Ng).call(this),Se(this,Aa,t),!(qo||Tr(this.options.enabled,B(this,Ze))===!1||!mg(B(this,Aa))||B(this,Aa)===0)&&Se(this,Fo,setInterval(()=>{(this.options.refetchIntervalInBackground||Sy.isFocused())&&Ge(this,ut,oc).call(this)},B(this,Aa)))},bg=function(){Ge(this,ut,yg).call(this),Ge(this,ut,wg).call(this,Ge(this,ut,xg).call(this))},jg=function(){B(this,Io)&&(clearTimeout(B(this,Io)),Se(this,Io,void 0))},Ng=function(){B(this,Fo)&&(clearInterval(B(this,Fo)),Se(this,Fo,void 0))},Cg=function(){const t=B(this,Xn).getQueryCache().build(B(this,Xn),this.options);if(t===B(this,Ze))return;const n=B(this,Ze);Se(this,Ze,t),Se(this,du,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},IC=function(t){Xt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(B(this,Fn))}),B(this,Xn).getQueryCache().notify({query:B(this,Ze),type:"observerResultsUpdated"})})},Vb);function gI(e,t){return Tr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function pw(e,t){return gI(e,t)||e.state.data!==void 0&&Sg(e,t,t.refetchOnMount)}function Sg(e,t,n){if(Tr(t.enabled,e)!==!1&&Ha(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&_y(e,t)}return!1}function gw(e,t,n,r){return(e!==t||Tr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&_y(e,n)}function _y(e,t){return Tr(t.enabled,e)!==!1&&e.isStaleByTime(Ha(t.staleTime,e))}function vI(e,t){return!mh(e.getCurrentResult(),t)}var Da,Ra,Zn,qs,Qs,Rd,_g,Hb,yI=(Hb=class extends kl{constructor(n,r){super();Oe(this,Qs);Oe(this,Da);Oe(this,Ra);Oe(this,Zn);Oe(this,qs);Se(this,Da,n),this.setOptions(r),this.bindMethods(),Ge(this,Qs,Rd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=B(this,Da).defaultMutationOptions(n),mh(this.options,r)||B(this,Da).getMutationCache().notify({type:"observerOptionsUpdated",mutation:B(this,Zn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Go(r.mutationKey)!==Go(this.options.mutationKey)?this.reset():((s=B(this,Zn))==null?void 0:s.state.status)==="pending"&&B(this,Zn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=B(this,Zn))==null||n.removeObserver(this)}onMutationUpdate(n){Ge(this,Qs,Rd).call(this),Ge(this,Qs,_g).call(this,n)}getCurrentResult(){return B(this,Ra)}reset(){var n;(n=B(this,Zn))==null||n.removeObserver(this),Se(this,Zn,void 0),Ge(this,Qs,Rd).call(this),Ge(this,Qs,_g).call(this)}mutate(n,r){var s;return Se(this,qs,r),(s=B(this,Zn))==null||s.removeObserver(this),Se(this,Zn,B(this,Da).getMutationCache().build(B(this,Da),this.options)),B(this,Zn).addObserver(this),B(this,Zn).execute(n)}},Da=new WeakMap,Ra=new WeakMap,Zn=new WeakMap,qs=new WeakMap,Qs=new WeakSet,Rd=function(){var r;const n=((r=B(this,Zn))==null?void 0:r.state)??OC();Se(this,Ra,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},_g=function(n){Xt.batch(()=>{var r,s,o,i,l,c,u,d;if(B(this,qs)&&this.hasListeners()){const h=B(this,Ra).variables,m=B(this,Ra).context;(n==null?void 0:n.type)==="success"?((s=(r=B(this,qs)).onSuccess)==null||s.call(r,n.data,h,m),(i=(o=B(this,qs)).onSettled)==null||i.call(o,n.data,null,h,m)):(n==null?void 0:n.type)==="error"&&((c=(l=B(this,qs)).onError)==null||c.call(l,n.error,h,m),(d=(u=B(this,qs)).onSettled)==null||d.call(u,void 0,n.error,h,m))}this.listeners.forEach(h=>{h(B(this,Ra))})})},Hb),FC=f.createContext(void 0),tn=e=>{const t=f.useContext(FC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xI=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(FC.Provider,{value:e,children:t})),$C=f.createContext(!1),wI=()=>f.useContext($C);$C.Provider;function bI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var jI=f.createContext(bI()),NI=()=>f.useContext(jI),CI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},SI=e=>{f.useEffect(()=>{e.clearReset()},[e])},_I=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||TC(n,[e.error,r])),kI=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},EI=(e,t)=>e.isLoading&&e.isFetching&&!t,TI=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,vw=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function PI(e,t,n){var h,m,p,N,g;const r=wI(),s=NI(),o=tn(),i=o.defaultQueryOptions(e);(m=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=r?"isRestoring":"optimistic",kI(i),CI(i,s),SI(s);const l=!o.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new t(o,i)),u=c.getOptimisticResult(i),d=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(y=>{const w=d?c.subscribe(Xt.batchCalls(y)):Ln;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i)},[i,c]),TI(i,u))throw vw(i,c,s);if(_I({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((N=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||N.call(p,i,u),i.experimental_prefetchInRender&&!qo&&EI(u,r)){const y=l?vw(i,c,s):(g=o.getQueryCache().get(i.queryHash))==null?void 0:g.promise;y==null||y.catch(Ln).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function Xe(e,t){return PI(e,pI)}function xe(e,t){const n=tn(),[r]=f.useState(()=>new yI(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(i=>r.subscribe(Xt.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=f.useCallback((i,l)=>{r.mutate(i,l).catch(Ln)},[r]);if(s.error&&TC(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tu(){return tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tu.apply(this,arguments)}var Ia;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ia||(Ia={}));const yw="popstate";function AI(e){e===void 0&&(e={});function t(s,o){let{pathname:i="/",search:l="",hash:c=""}=ri(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),kg("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof o=="string"?o:gh(o))}function r(s,o){ky(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return RI(t,n,r,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ky(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DI(){return Math.random().toString(36).substr(2,8)}function xw(e,t){return{usr:e.state,key:e.key,idx:t}}function kg(e,t,n,r){return n===void 0&&(n=null),tu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ri(t):t,{state:n,key:t&&t.key||r||DI()})}function gh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ri(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function RI(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,l=Ia.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(tu({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=Ia.Pop;let y=d(),w=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:w})}function m(y,w){l=Ia.Push;let v=kg(g.location,y,w);n&&n(v,y),u=d()+1;let b=xw(v,u),x=g.createHref(v);try{i.pushState(b,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(x)}o&&c&&c({action:l,location:g.location,delta:1})}function p(y,w){l=Ia.Replace;let v=kg(g.location,y,w);n&&n(v,y),u=d();let b=xw(v,u),x=g.createHref(v);i.replaceState(b,"",x),o&&c&&c({action:l,location:g.location,delta:0})}function N(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:gh(y);return v=v.replace(/ $/,"%20"),Mt(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let g={get action(){return l},get location(){return e(s,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yw,h),c=y,()=>{s.removeEventListener(yw,h),c=null}},createHref(y){return t(s,y)},createURL:N,encodeLocation(y){let w=N(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(y){return i.go(y)}};return g}var ww;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ww||(ww={}));function MI(e,t,n){return n===void 0&&(n="/"),OI(e,t,n,!1)}function OI(e,t,n,r){let s=typeof t=="string"?ri(t):t,o=pl(s.pathname||"/",n);if(o==null)return null;let i=LC(e);II(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=GI(o);l=HI(i[c],u,r)}return l}function LC(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=qa([r,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(Mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),LC(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:WI(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let c of BC(o.path))s(o,i,c)}),t}function BC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=BC(r.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function II(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:VI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const FI=/^:[\w-]+$/,$I=3,LI=2,BI=1,UI=10,zI=-2,bw=e=>e==="*";function WI(e,t){let n=e.split("/"),r=n.length;return n.some(bw)&&(r+=zI),t&&(r+=LI),n.filter(s=>!bw(s)).reduce((s,o)=>s+(FI.test(o)?$I:o===""?BI:UI),r)}function VI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function HI(e,t,n){let{routesMeta:r}=e,s={},o="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",h=vh({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=vh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:qa([o,h.pathname]),pathnameBase:JI(qa([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=qa([o,h.pathnameBase]))}return i}function vh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qI(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const N=l[h];return p&&!N?u[m]=void 0:u[m]=(N||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function qI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ky(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function GI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ky(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function KI(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ri(e):e;return{pathname:n?n.startsWith("/")?n:YI(n,t):t,search:XI(r),hash:ZI(s)}}function YI(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function _m(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function UC(e,t){let n=QI(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zC(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ri(e):(s=tu({},e),Mt(!s.pathname||!s.pathname.includes("?"),_m("?","pathname","search",s)),Mt(!s.pathname||!s.pathname.includes("#"),_m("#","pathname","hash",s)),Mt(!s.search||!s.search.includes("#"),_m("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=n;else{let h=t.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=KI(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const qa=e=>e.join("/").replace(/\/\/+/g,"/"),JI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function eF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const WC=["post","put","patch","delete"];new Set(WC);const tF=["get",...WC];new Set(tF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nu.apply(this,arguments)}const hf=f.createContext(null),VC=f.createContext(null),oo=f.createContext(null),ff=f.createContext(null),io=f.createContext({outlet:null,matches:[],isDataRoute:!1}),HC=f.createContext(null);function nF(e,t){let{relative:n}=t===void 0?{}:t;bu()||Mt(!1);let{basename:r,navigator:s}=f.useContext(oo),{hash:o,pathname:i,search:l}=mf(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:qa([r,i])),s.createHref({pathname:c,search:l,hash:o})}function bu(){return f.useContext(ff)!=null}function si(){return bu()||Mt(!1),f.useContext(ff).location}function qC(e){f.useContext(oo).static||f.useLayoutEffect(e)}function Ey(){let{isDataRoute:e}=f.useContext(io);return e?gF():rF()}function rF(){bu()||Mt(!1);let e=f.useContext(hf),{basename:t,future:n,navigator:r}=f.useContext(oo),{matches:s}=f.useContext(io),{pathname:o}=si(),i=JSON.stringify(UC(s,n.v7_relativeSplatPath)),l=f.useRef(!1);return qC(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=zC(u,JSON.parse(i),o,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:qa([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,i,o,e])}function sF(){let{matches:e}=f.useContext(io),t=e[e.length-1];return t?t.params:{}}function mf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(oo),{matches:s}=f.useContext(io),{pathname:o}=si(),i=JSON.stringify(UC(s,r.v7_relativeSplatPath));return f.useMemo(()=>zC(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function aF(e,t){return oF(e,t)}function oF(e,t,n,r){bu()||Mt(!1);let{navigator:s}=f.useContext(oo),{matches:o}=f.useContext(io),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=si(),d;if(t){var h;let y=typeof t=="string"?ri(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||Mt(!1),d=y}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let N=MI(e,{pathname:p}),g=dF(N&&N.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:qa([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:qa([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return t&&g?f.createElement(ff.Provider,{value:{location:nu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ia.Pop}},g):g}function iF(){let e=pF(),t=eF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:s},n):null,null)}const lF=f.createElement(iF,null);class cF extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(io.Provider,{value:this.props.routeContext},f.createElement(HC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uF(e){let{routeContext:t,match:n,children:r}=e,s=f.useContext(hf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(io.Provider,{value:t},r)}function dF(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Mt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=n,N=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||N){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let p,N=!1,g=null,y=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||lF,c&&(u<0&&m===0?(N=!0,y=null):u===m&&(N=!0,y=h.route.hydrateFallbackElement||null)));let w=t.concat(i.slice(0,m+1)),v=()=>{let b;return p?b=g:N?b=y:h.route.Component?b=f.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,f.createElement(uF,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(cF,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var GC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(GC||{}),yh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yh||{});function hF(e){let t=f.useContext(hf);return t||Mt(!1),t}function fF(e){let t=f.useContext(VC);return t||Mt(!1),t}function mF(e){let t=f.useContext(io);return t||Mt(!1),t}function KC(e){let t=mF(),n=t.matches[t.matches.length-1];return n.route.id||Mt(!1),n.route.id}function pF(){var e;let t=f.useContext(HC),n=fF(yh.UseRouteError),r=KC(yh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function gF(){let{router:e}=hF(GC.UseNavigateStable),t=KC(yh.UseNavigateStable),n=f.useRef(!1);return qC(()=>{n.current=!0}),f.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,nu({fromRouteId:t},o)))},[e,t])}function vF(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Jn(e){Mt(!1)}function yF(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ia.Pop,navigator:o,static:i=!1,future:l}=e;bu()&&Mt(!1);let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:o,static:i,future:nu({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof r=="string"&&(r=ri(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:N="default"}=r,g=f.useMemo(()=>{let y=pl(d,c);return y==null?null:{location:{pathname:y,search:h,hash:m,state:p,key:N},navigationType:s}},[c,d,h,m,p,N,s]);return g==null?null:f.createElement(oo.Provider,{value:u},f.createElement(ff.Provider,{children:n,value:g}))}function xF(e){let{children:t,location:n}=e;return aF(Eg(t),n)}new Promise(()=>{});function Eg(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,s)=>{if(!f.isValidElement(r))return;let o=[...t,s];if(r.type===f.Fragment){n.push.apply(n,Eg(r.props.children,o));return}r.type!==Jn&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Eg(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xh.apply(this,arguments)}function YC(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function bF(e,t){return e.button===0&&(!t||t==="_self")&&!wF(e)}const jF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NF=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],CF="6";try{window.__reactRouterVersion=CF}catch{}const SF=f.createContext({isTransitioning:!1}),_F="startTransition",jw=hv[_F];function kF(e){let{basename:t,children:n,future:r,window:s}=e,o=f.useRef();o.current==null&&(o.current=AI({window:s,v5Compat:!0}));let i=o.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=f.useCallback(h=>{u&&jw?jw(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>i.listen(d),[i,d]),f.useEffect(()=>vF(r),[r]),f.createElement(yF,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}const EF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PF=f.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=YC(t,jF),{basename:p}=f.useContext(oo),N,g=!1;if(typeof u=="string"&&TF.test(u)&&(N=u,EF))try{let b=new URL(window.location.href),x=u.startsWith("//")?new URL(b.protocol+u):new URL(u),_=pl(x.pathname,p);x.origin===b.origin&&_!=null?u=_+x.search+x.hash:g=!0}catch{}let y=nF(u,{relative:s}),w=DF(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(b){r&&r(b),b.defaultPrevented||w(b)}return f.createElement("a",xh({},m,{href:N||y,onClick:g||o?r:v,ref:n,target:c}))}),ui=f.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:i=!1,style:l,to:c,viewTransition:u,children:d}=t,h=YC(t,NF),m=mf(c,{relative:h.relative}),p=si(),N=f.useContext(VC),{navigator:g,basename:y}=f.useContext(oo),w=N!=null&&RF(m)&&u===!0,v=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,b=p.pathname,x=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;s||(b=b.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&y&&(x=pl(x,y)||x);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let k=b===v||!i&&b.startsWith(v)&&b.charAt(_)==="/",E=x!=null&&(x===v||!i&&x.startsWith(v)&&x.charAt(v.length)==="/"),D={isActive:k,isPending:E,isTransitioning:w},$=k?r:void 0,O;typeof o=="function"?O=o(D):O=[o,k?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let Y=typeof l=="function"?l(D):l;return f.createElement(PF,xh({},h,{"aria-current":$,className:O,ref:n,style:Y,to:c,viewTransition:u}),typeof d=="function"?d(D):d)});var Tg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tg||(Tg={}));var Nw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nw||(Nw={}));function AF(e){let t=f.useContext(hf);return t||Mt(!1),t}function DF(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=Ey(),u=si(),d=mf(e,{relative:i});return f.useCallback(h=>{if(bF(h,n)){h.preventDefault();let m=r!==void 0?r:gh(u)===gh(d);c(e,{replace:m,state:s,preventScrollReset:o,relative:i,viewTransition:l})}},[u,c,d,r,s,n,e,o,i,l])}function RF(e,t){t===void 0&&(t={});let n=f.useContext(SF);n==null&&Mt(!1);let{basename:r}=AF(Tg.useViewTransitionState),s=mf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=pl(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=pl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vh(s.pathname,i)!=null||vh(s.pathname,o)!=null}const mt=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));mt.displayName="Card";const zt=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:te("flex flex-col space-y-1.5 p-4 sm:p-6",e),...t}));zt.displayName="CardHeader";const Wt=f.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:te("text-lg sm:text-xl md:text-2xl font-semibold leading-none tracking-tight",e),...t}));Wt.displayName="CardTitle";const MF=f.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:te("text-sm text-muted-foreground",e),...t}));MF.displayName="CardDescription";const Ft=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:te("p-4 sm:p-6 pt-0",e),...t}));Ft.displayName="CardContent";const OF=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:te("flex items-center p-4 sm:p-6 pt-0",e),...t}));OF.displayName="CardFooter";const _e=f.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,className:te("flex h-9 min-h-[2.25rem] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:h-10 sm:min-h-[2.5rem] sm:text-base touch-manipulation",e),ref:r,...n}));_e.displayName="Input";const ru=nf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:h-4 [&_svg]:w-4 [&_svg]:shrink-0 active:scale-95 touch-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:bg-destructive/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-3 py-2 min-h-[2.25rem] sm:h-10 sm:px-4 sm:min-h-[2.5rem]",sm:"h-8 rounded-md px-2.5 min-h-[2rem] sm:h-9 sm:px-3 sm:min-h-[2.25rem]",lg:"h-10 rounded-md px-6 min-h-[2.5rem] sm:h-11 sm:px-8 sm:min-h-[2.75rem]",icon:"h-9 w-9 min-h-[2.25rem] min-w-[2.25rem] sm:h-10 sm:w-10 sm:min-h-[2.5rem] sm:min-w-[2.5rem]"}},defaultVariants:{variant:"default",size:"default"}}),V=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const i=r?$A:"button";return a.jsx(i,{className:te(ru({variant:t,size:n,className:e})),ref:o,...s})});V.displayName="Button";var IF=f.createContext(void 0);function ju(e){const t=f.useContext(IF);return e||t||"ltr"}var km=0;function pf(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Cw()),document.body.insertAdjacentElement("beforeend",e[1]??Cw()),km++,()=>{km===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),km--}},[])}function Cw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Em="focusScope.autoFocusOnMount",Tm="focusScope.autoFocusOnUnmount",Sw={bubbles:!1,cancelable:!0},FF="FocusScope",Nu=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[l,c]=f.useState(null),u=Lt(s),d=Lt(o),h=f.useRef(null),m=Ve(t,g=>c(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const x=b.target;l.contains(x)?h.current=x:ga(h.current,{select:!0})},y=function(b){if(p.paused||!l)return;const x=b.relatedTarget;x!==null&&(l.contains(x)||ga(h.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&ga(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const v=new MutationObserver(w);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),v.disconnect()}}},[r,l,p.paused]),f.useEffect(()=>{if(l){kw.add(p);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(Em,Sw);l.addEventListener(Em,u),l.dispatchEvent(w),w.defaultPrevented||($F(WF(QC(l)),{select:!0}),document.activeElement===g&&ga(l))}return()=>{l.removeEventListener(Em,u),setTimeout(()=>{const w=new CustomEvent(Tm,Sw);l.addEventListener(Tm,d),l.dispatchEvent(w),w.defaultPrevented||ga(g??document.body,{select:!0}),l.removeEventListener(Tm,d),kw.remove(p)},0)}}},[l,u,d,p]);const N=f.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(y&&w){const v=g.currentTarget,[b,x]=LF(v);b&&x?!g.shiftKey&&w===x?(g.preventDefault(),n&&ga(b,{select:!0})):g.shiftKey&&w===b&&(g.preventDefault(),n&&ga(x,{select:!0})):w===v&&g.preventDefault()}},[n,r,p.paused]);return a.jsx(Te.div,{tabIndex:-1,...i,ref:m,onKeyDown:N})});Nu.displayName=FF;function $F(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ga(r,{select:t}),document.activeElement!==n)return}function LF(e){const t=QC(e),n=_w(t,e),r=_w(t.reverse(),e);return[n,r]}function QC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function _w(e,t){for(const n of e)if(!BF(n,{upTo:t}))return n}function BF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function UF(e){return e instanceof HTMLInputElement&&"select"in e}function ga(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&UF(e)&&t&&e.select()}}var kw=zF();function zF(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Ew(e,t),e.unshift(t)},remove(t){var n;e=Ew(e,t),(n=e[0])==null||n.resume()}}}function Ew(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function WF(e){return e.filter(t=>t.tagName!=="A")}var Pm="rovingFocusGroup.onEntryFocus",VF={bubbles:!1,cancelable:!0},Cu="RovingFocusGroup",[Pg,JC,HF]=Zh(Cu),[qF,gf]=mr(Cu,[HF]),[GF,KF]=qF(Cu),XC=f.forwardRef((e,t)=>a.jsx(Pg.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Pg.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(YF,{...e,ref:t})})}));XC.displayName=Cu;var YF=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=f.useRef(null),p=Ve(t,m),N=ju(o),[g,y]=na({prop:i,defaultProp:l??null,onChange:c,caller:Cu}),[w,v]=f.useState(!1),b=Lt(u),x=JC(n),_=f.useRef(!1),[k,E]=f.useState(0);return f.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(Pm,b),()=>D.removeEventListener(Pm,b)},[b]),a.jsx(GF,{scope:n,orientation:r,dir:N,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(D=>y(D),[y]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(D=>D+1),[]),onFocusableItemRemove:f.useCallback(()=>E(D=>D-1),[]),children:a.jsx(Te.div,{tabIndex:w||k===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:ue(e.onMouseDown,()=>{_.current=!0}),onFocus:ue(e.onFocus,D=>{const $=!_.current;if(D.target===D.currentTarget&&$&&!w){const O=new CustomEvent(Pm,VF);if(D.currentTarget.dispatchEvent(O),!O.defaultPrevented){const Y=x().filter(F=>F.focusable),T=Y.find(F=>F.active),M=Y.find(F=>F.id===g),A=[T,M,...Y].filter(Boolean).map(F=>F.ref.current);tS(A,d)}}_.current=!1}),onBlur:ue(e.onBlur,()=>v(!1))})})}),ZC="RovingFocusGroupItem",eS=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:i,...l}=e,c=gn(),u=o||c,d=KF(ZC,n),h=d.currentTabStopId===u,m=JC(n),{onFocusableItemAdd:p,onFocusableItemRemove:N,currentTabStopId:g}=d;return f.useEffect(()=>{if(r)return p(),()=>N()},[r,p,N]),a.jsx(Pg.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(Te.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ue(e.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:ue(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ue(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=XF(y,d.orientation,d.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=m().filter(x=>x.focusable).map(x=>x.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const x=b.indexOf(y.currentTarget);b=d.loop?ZF(b,x+1):b.slice(x+1)}setTimeout(()=>tS(b))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});eS.displayName=ZC;var QF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JF(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function XF(e,t,n){const r=JF(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return QF[r]}function tS(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function ZF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var nS=XC,rS=eS,e4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},di=new WeakMap,cd=new WeakMap,ud={},Am=0,sS=function(e){return e&&(e.host||sS(e.parentNode))},t4=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=sS(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},n4=function(e,t,n,r){var s=t4(t,Array.isArray(e)?e:[e]);ud[n]||(ud[n]=new WeakMap);var o=ud[n],i=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(r),N=p!==null&&p!=="false",g=(di.get(m)||0)+1,y=(o.get(m)||0)+1;di.set(m,g),o.set(m,y),i.push(m),g===1&&N&&cd.set(m,!0),y===1&&m.setAttribute(n,"true"),N||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(t),l.clear(),Am++,function(){i.forEach(function(h){var m=di.get(h)-1,p=o.get(h)-1;di.set(h,m),o.set(h,p),m||(cd.has(h)||h.removeAttribute(r),cd.delete(h)),p||h.removeAttribute(n)}),Am--,Am||(di=new WeakMap,di=new WeakMap,cd=new WeakMap,ud={})}},vf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=e4(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),n4(r,s,n,"aria-hidden")):function(){return null}},Cs=function(){return Cs=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Cs.apply(this,arguments)};function aS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function r4(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Md="right-scroll-bar-position",Od="width-before-scroll-bar",s4="with-scroll-bars-hidden",a4="--removed-body-scroll-bar-size";function Dm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function o4(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var i4=typeof window<"u"?f.useLayoutEffect:f.useEffect,Tw=new WeakMap;function l4(e,t){var n=o4(null,function(r){return e.forEach(function(s){return Dm(s,r)})});return i4(function(){var r=Tw.get(n);if(r){var s=new Set(r),o=new Set(e),i=n.current;s.forEach(function(l){o.has(l)||Dm(l,null)}),o.forEach(function(l){s.has(l)||Dm(l,i)})}Tw.set(n,e)},[e]),n}function c4(e){return e}function u4(e,t){t===void 0&&(t=c4);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function d4(e){e===void 0&&(e={});var t=u4(null);return t.options=Cs({async:!0,ssr:!1},e),t}var oS=function(e){var t=e.sideCar,n=aS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,Cs({},n))};oS.isSideCarExport=!0;function h4(e,t){return e.useMedium(t),oS}var iS=d4(),Rm=function(){},yf=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:Rm,onWheelCapture:Rm,onTouchMoveCapture:Rm}),s=r[0],o=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,N=e.noIsolation,g=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,b=e.gapMode,x=aS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,k=l4([n,t]),E=Cs(Cs({},x),s);return f.createElement(f.Fragment,null,d&&f.createElement(_,{sideCar:iS,removeScrollBar:u,shards:h,noRelative:p,noIsolation:N,inert:g,setCallbacks:o,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?f.cloneElement(f.Children.only(l),Cs(Cs({},E),{ref:k})):f.createElement(v,Cs({},E,{className:c,ref:k}),l))});yf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yf.classNames={fullWidth:Od,zeroRight:Md};var f4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function m4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=f4();return t&&e.setAttribute("nonce",t),e}function p4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function g4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var v4=function(){var e=0,t=null;return{add:function(n){e==0&&(t=m4())&&(p4(t,n),g4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},y4=function(){var e=v4();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},lS=function(){var e=y4(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},x4={left:0,top:0,right:0,gap:0},Mm=function(e){return parseInt(e||"",10)||0},w4=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Mm(n),Mm(r),Mm(s)]},b4=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return x4;var t=w4(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},j4=lS(),qi="data-scroll-locked",N4=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(s4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(qi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Md,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Od,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Md," .").concat(Md,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Od," .").concat(Od,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qi,`] {
    `).concat(a4,": ").concat(l,`px;
  }
`)},Pw=function(){var e=parseInt(document.body.getAttribute(qi)||"0",10);return isFinite(e)?e:0},C4=function(){f.useEffect(function(){return document.body.setAttribute(qi,(Pw()+1).toString()),function(){var e=Pw()-1;e<=0?document.body.removeAttribute(qi):document.body.setAttribute(qi,e.toString())}},[])},S4=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;C4();var o=f.useMemo(function(){return b4(s)},[s]);return f.createElement(j4,{styles:N4(o,!t,s,n?"":"!important")})},Ag=!1;if(typeof window<"u")try{var dd=Object.defineProperty({},"passive",{get:function(){return Ag=!0,!0}});window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch{Ag=!1}var hi=Ag?{passive:!1}:!1,_4=function(e){return e.tagName==="TEXTAREA"},cS=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!_4(e)&&n[t]==="visible")},k4=function(e){return cS(e,"overflowY")},E4=function(e){return cS(e,"overflowX")},Aw=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=uS(e,r);if(s){var o=dS(e,r),i=o[1],l=o[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},T4=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},P4=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},uS=function(e,t){return e==="v"?k4(t):E4(t)},dS=function(e,t){return e==="v"?T4(t):P4(t)},A4=function(e,t){return e==="h"&&t==="rtl"?-1:1},D4=function(e,t,n,r,s){var o=A4(e,window.getComputedStyle(t).direction),i=o*r,l=n.target,c=t.contains(l),u=!1,d=i>0,h=0,m=0;do{if(!l)break;var p=dS(e,l),N=p[0],g=p[1],y=p[2],w=g-y-o*N;(N||w)&&uS(e,l)&&(h+=w,m+=N);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},hd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Dw=function(e){return[e.deltaX,e.deltaY]},Rw=function(e){return e&&"current"in e?e.current:e},R4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},M4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},O4=0,fi=[];function I4(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(O4++)[0],o=f.useState(lS)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=r4([e.lockRef.current],(e.shards||[]).map(Rw),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var w=hd(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-w[0],x="deltaY"in g?g.deltaY:v[1]-w[1],_,k=g.target,E=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in g&&E==="h"&&k.type==="range")return!1;var D=Aw(E,k);if(!D)return!0;if(D?_=E:(_=E==="v"?"h":"v",D=Aw(E,k)),!D)return!1;if(!r.current&&"changedTouches"in g&&(b||x)&&(r.current=_),!_)return!0;var $=r.current||_;return D4($,y,g,$==="h"?b:x,!0)},[]),c=f.useCallback(function(g){var y=g;if(!(!fi.length||fi[fi.length-1]!==o)){var w="deltaY"in y?Dw(y):hd(y),v=t.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&R4(_.delta,w)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(Rw).filter(Boolean).filter(function(_){return _.contains(y.target)}),x=b.length>0?l(y,b[0]):!i.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),u=f.useCallback(function(g,y,w,v){var b={name:g,delta:y,target:w,should:v,shadowParent:F4(w)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(x){return x!==b})},1)},[]),d=f.useCallback(function(g){n.current=hd(g),r.current=void 0},[]),h=f.useCallback(function(g){u(g.type,Dw(g),g.target,l(g,e.lockRef.current))},[]),m=f.useCallback(function(g){u(g.type,hd(g),g.target,l(g,e.lockRef.current))},[]);f.useEffect(function(){return fi.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,hi),document.addEventListener("touchmove",c,hi),document.addEventListener("touchstart",d,hi),function(){fi=fi.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,hi),document.removeEventListener("touchmove",c,hi),document.removeEventListener("touchstart",d,hi)}},[]);var p=e.removeScrollBar,N=e.inert;return f.createElement(f.Fragment,null,N?f.createElement(o,{styles:M4(s)}):null,p?f.createElement(S4,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function F4(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $4=h4(iS,I4);var Su=f.forwardRef(function(e,t){return f.createElement(yf,Cs({},e,{ref:t,sideCar:$4}))});Su.classNames=yf.classNames;var Dg=["Enter"," "],L4=["ArrowDown","PageUp","Home"],hS=["ArrowUp","PageDown","End"],B4=[...L4,...hS],U4={ltr:[...Dg,"ArrowRight"],rtl:[...Dg,"ArrowLeft"]},z4={ltr:["ArrowLeft"],rtl:["ArrowRight"]},_u="Menu",[su,W4,V4]=Zh(_u),[ai,fS]=mr(_u,[V4,ao,gf]),xf=ao(),mS=gf(),[H4,oi]=ai(_u),[q4,ku]=ai(_u),pS=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=e,l=xf(t),[c,u]=f.useState(null),d=f.useRef(!1),h=Lt(o),m=ju(s);return f.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),a.jsx(by,{...l,children:a.jsx(H4,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(q4,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:i,children:r})})})};pS.displayName=_u;var G4="MenuAnchor",Ty=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=xf(n);return a.jsx(wu,{...s,...r,ref:t})});Ty.displayName=G4;var Py="MenuPortal",[K4,gS]=ai(Py,{forceMount:void 0}),vS=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=oi(Py,t);return a.jsx(K4,{scope:t,forceMount:n,children:a.jsx(dn,{present:n||o.open,children:a.jsx(Nl,{asChild:!0,container:s,children:r})})})};vS.displayName=Py;var Fr="MenuContent",[Y4,Ay]=ai(Fr),yS=f.forwardRef((e,t)=>{const n=gS(Fr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=oi(Fr,e.__scopeMenu),i=ku(Fr,e.__scopeMenu);return a.jsx(su.Provider,{scope:e.__scopeMenu,children:a.jsx(dn,{present:r||o.open,children:a.jsx(su.Slot,{scope:e.__scopeMenu,children:i.modal?a.jsx(Q4,{...s,ref:t}):a.jsx(J4,{...s,ref:t})})})})}),Q4=f.forwardRef((e,t)=>{const n=oi(Fr,e.__scopeMenu),r=f.useRef(null),s=Ve(t,r);return f.useEffect(()=>{const o=r.current;if(o)return vf(o)},[]),a.jsx(Dy,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ue(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),J4=f.forwardRef((e,t)=>{const n=oi(Fr,e.__scopeMenu);return a.jsx(Dy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),X4=Qa("MenuContent.ScrollLock"),Dy=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:N,...g}=e,y=oi(Fr,n),w=ku(Fr,n),v=xf(n),b=mS(n),x=W4(n),[_,k]=f.useState(null),E=f.useRef(null),D=Ve(t,E,y.onContentChange),$=f.useRef(0),O=f.useRef(""),Y=f.useRef(0),T=f.useRef(null),M=f.useRef("right"),U=f.useRef(0),A=N?Su:f.Fragment,F=N?{as:X4,allowPinchZoom:!0}:void 0,C=S=>{var q,ee;const P=O.current+S,H=x().filter(ae=>!ae.disabled),R=document.activeElement,L=(q=H.find(ae=>ae.ref.current===R))==null?void 0:q.textValue,J=H.map(ae=>ae.textValue),Q=u$(J,P,L),G=(ee=H.find(ae=>ae.textValue===Q))==null?void 0:ee.ref.current;(function ae(me){O.current=me,window.clearTimeout($.current),me!==""&&($.current=window.setTimeout(()=>ae(""),1e3))})(P),G&&setTimeout(()=>G.focus())};f.useEffect(()=>()=>window.clearTimeout($.current),[]),pf();const j=f.useCallback(S=>{var H,R;return M.current===((H=T.current)==null?void 0:H.side)&&h$(S,(R=T.current)==null?void 0:R.area)},[]);return a.jsx(Y4,{scope:n,searchRef:O,onItemEnter:f.useCallback(S=>{j(S)&&S.preventDefault()},[j]),onItemLeave:f.useCallback(S=>{var P;j(S)||((P=E.current)==null||P.focus(),k(null))},[j]),onTriggerLeave:f.useCallback(S=>{j(S)&&S.preventDefault()},[j]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:f.useCallback(S=>{T.current=S},[]),children:a.jsx(A,{...F,children:a.jsx(Nu,{asChild:!0,trapped:s,onMountAutoFocus:ue(o,S=>{var P;S.preventDefault(),(P=E.current)==null||P.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(ni,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:a.jsx(nS,{asChild:!0,...b,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:k,onEntryFocus:ue(c,S=>{w.isUsingKeyboardRef.current||S.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(lf,{role:"menu","aria-orientation":"vertical","data-state":MS(y.open),"data-radix-menu-content":"",dir:w.dir,...v,...g,ref:D,style:{outline:"none",...g.style},onKeyDown:ue(g.onKeyDown,S=>{const H=S.target.closest("[data-radix-menu-content]")===S.currentTarget,R=S.ctrlKey||S.altKey||S.metaKey,L=S.key.length===1;H&&(S.key==="Tab"&&S.preventDefault(),!R&&L&&C(S.key));const J=E.current;if(S.target!==J||!B4.includes(S.key))return;S.preventDefault();const G=x().filter(q=>!q.disabled).map(q=>q.ref.current);hS.includes(S.key)&&G.reverse(),l$(G)}),onBlur:ue(e.onBlur,S=>{S.currentTarget.contains(S.target)||(window.clearTimeout($.current),O.current="")}),onPointerMove:ue(e.onPointerMove,au(S=>{const P=S.target,H=U.current!==S.clientX;if(S.currentTarget.contains(P)&&H){const R=S.clientX>U.current?"right":"left";M.current=R,U.current=S.clientX}}))})})})})})})});yS.displayName=Fr;var Z4="MenuGroup",Ry=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(Te.div,{role:"group",...r,ref:t})});Ry.displayName=Z4;var e$="MenuLabel",xS=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(Te.div,{...r,ref:t})});xS.displayName=e$;var wh="MenuItem",Mw="menu.itemSelect",wf=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=f.useRef(null),i=ku(wh,e.__scopeMenu),l=Ay(wh,e.__scopeMenu),c=Ve(t,o),u=f.useRef(!1),d=()=>{const h=o.current;if(!n&&h){const m=new CustomEvent(Mw,{bubbles:!0,cancelable:!0});h.addEventListener(Mw,p=>r==null?void 0:r(p),{once:!0}),ry(h,m),m.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(wS,{...s,ref:c,disabled:n,onClick:ue(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:ue(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ue(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||Dg.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});wf.displayName=wh;var wS=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,i=Ay(wh,n),l=mS(n),c=f.useRef(null),u=Ve(t,c),[d,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const N=c.current;N&&p((N.textContent??"").trim())},[o.children]),a.jsx(su.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:a.jsx(rS,{asChild:!0,...l,focusable:!r,children:a.jsx(Te.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:ue(e.onPointerMove,au(N=>{r?i.onItemLeave(N):(i.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(e.onPointerLeave,au(N=>i.onItemLeave(N))),onFocus:ue(e.onFocus,()=>h(!0)),onBlur:ue(e.onBlur,()=>h(!1))})})})}),t$="MenuCheckboxItem",bS=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return a.jsx(_S,{scope:e.__scopeMenu,checked:n,children:a.jsx(wf,{role:"menuitemcheckbox","aria-checked":bh(n)?"mixed":n,...s,ref:t,"data-state":Oy(n),onSelect:ue(s.onSelect,()=>r==null?void 0:r(bh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});bS.displayName=t$;var jS="MenuRadioGroup",[n$,r$]=ai(jS,{value:void 0,onValueChange:()=>{}}),NS=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=Lt(r);return a.jsx(n$,{scope:e.__scopeMenu,value:n,onValueChange:o,children:a.jsx(Ry,{...s,ref:t})})});NS.displayName=jS;var CS="MenuRadioItem",SS=f.forwardRef((e,t)=>{const{value:n,...r}=e,s=r$(CS,e.__scopeMenu),o=n===s.value;return a.jsx(_S,{scope:e.__scopeMenu,checked:o,children:a.jsx(wf,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":Oy(o),onSelect:ue(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});SS.displayName=CS;var My="MenuItemIndicator",[_S,s$]=ai(My,{checked:!1}),kS=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=s$(My,n);return a.jsx(dn,{present:r||bh(o.checked)||o.checked===!0,children:a.jsx(Te.span,{...s,ref:t,"data-state":Oy(o.checked)})})});kS.displayName=My;var a$="MenuSeparator",ES=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(Te.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});ES.displayName=a$;var o$="MenuArrow",TS=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=xf(n);return a.jsx(cf,{...s,...r,ref:t})});TS.displayName=o$;var i$="MenuSub",[R9,PS]=ai(i$),ic="MenuSubTrigger",AS=f.forwardRef((e,t)=>{const n=oi(ic,e.__scopeMenu),r=ku(ic,e.__scopeMenu),s=PS(ic,e.__scopeMenu),o=Ay(ic,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(Ty,{asChild:!0,...u,children:a.jsx(wS,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":MS(n.open),...e,ref:ta(t,s.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ue(e.onPointerMove,au(h=>{o.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ue(e.onPointerLeave,au(h=>{var p,N;d();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(N=n.content)==null?void 0:N.dataset.side,y=g==="right",w=y?-5:5,v=m[y?"left":"right"],b=m[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ue(e.onKeyDown,h=>{var p;const m=o.searchRef.current!=="";e.disabled||m&&h.key===" "||U4[r.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});AS.displayName=ic;var DS="MenuSubContent",RS=f.forwardRef((e,t)=>{const n=gS(Fr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=oi(Fr,e.__scopeMenu),i=ku(Fr,e.__scopeMenu),l=PS(DS,e.__scopeMenu),c=f.useRef(null),u=Ve(t,c);return a.jsx(su.Provider,{scope:e.__scopeMenu,children:a.jsx(dn,{present:r||o.open,children:a.jsx(su.Slot,{scope:e.__scopeMenu,children:a.jsx(Dy,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ue(e.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ue(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:ue(e.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=z4[i.dir].includes(d.key);h&&m&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});RS.displayName=DS;function MS(e){return e?"open":"closed"}function bh(e){return e==="indeterminate"}function Oy(e){return bh(e)?"indeterminate":e?"checked":"unchecked"}function l$(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function c$(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function u$(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=c$(e,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function d$(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function h$(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return d$(n,t)}function au(e){return t=>t.pointerType==="mouse"?e(t):void 0}var f$=pS,m$=Ty,p$=vS,g$=yS,v$=Ry,y$=xS,x$=wf,w$=bS,b$=NS,j$=SS,N$=kS,C$=ES,S$=TS,_$=AS,k$=RS,bf="DropdownMenu",[E$,M9]=mr(bf,[fS]),Kn=fS(),[T$,OS]=E$(bf),IS=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=Kn(t),u=f.useRef(null),[d,h]=na({prop:s,defaultProp:o??!1,onChange:i,caller:bf});return a.jsx(T$,{scope:t,triggerId:gn(),triggerRef:u,contentId:gn(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:a.jsx(f$,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};IS.displayName=bf;var FS="DropdownMenuTrigger",$S=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=OS(FS,n),i=Kn(n);return a.jsx(m$,{asChild:!0,...i,children:a.jsx(Te.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ta(t,o.triggerRef),onPointerDown:ue(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ue(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$S.displayName=FS;var P$="DropdownMenuPortal",LS=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Kn(t);return a.jsx(p$,{...r,...n})};LS.displayName=P$;var BS="DropdownMenuContent",US=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=OS(BS,n),o=Kn(n),i=f.useRef(!1);return a.jsx(g$,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:ue(e.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ue(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});US.displayName=BS;var A$="DropdownMenuGroup",D$=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(v$,{...s,...r,ref:t})});D$.displayName=A$;var R$="DropdownMenuLabel",zS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(y$,{...s,...r,ref:t})});zS.displayName=R$;var M$="DropdownMenuItem",WS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(x$,{...s,...r,ref:t})});WS.displayName=M$;var O$="DropdownMenuCheckboxItem",VS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(w$,{...s,...r,ref:t})});VS.displayName=O$;var I$="DropdownMenuRadioGroup",F$=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(b$,{...s,...r,ref:t})});F$.displayName=I$;var $$="DropdownMenuRadioItem",HS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(j$,{...s,...r,ref:t})});HS.displayName=$$;var L$="DropdownMenuItemIndicator",qS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(N$,{...s,...r,ref:t})});qS.displayName=L$;var B$="DropdownMenuSeparator",GS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(C$,{...s,...r,ref:t})});GS.displayName=B$;var U$="DropdownMenuArrow",z$=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(S$,{...s,...r,ref:t})});z$.displayName=U$;var W$="DropdownMenuSubTrigger",KS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(_$,{...s,...r,ref:t})});KS.displayName=W$;var V$="DropdownMenuSubContent",YS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Kn(n);return a.jsx(k$,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});YS.displayName=V$;var H$=IS,q$=$S,G$=LS,QS=US,JS=zS,XS=WS,ZS=VS,e_=HS,t_=qS,n_=GS,r_=KS,s_=YS;const jf=H$,Nf=q$,K$=f.forwardRef(({className:e,inset:t,children:n,...r},s)=>a.jsxs(r_,{ref:s,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,a.jsx(ON,{className:"ml-auto h-4 w-4"})]}));K$.displayName=r_.displayName;const Y$=f.forwardRef(({className:e,...t},n)=>a.jsx(s_,{ref:n,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Y$.displayName=s_.displayName;const Eu=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(G$,{children:a.jsx(QS,{ref:r,sideOffset:t,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Eu.displayName=QS.displayName;const As=f.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(XS,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));As.displayName=XS.displayName;const Q$=f.forwardRef(({className:e,children:t,checked:n,...r},s)=>a.jsxs(ZS,{ref:s,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(t_,{children:a.jsx(Tt,{className:"h-4 w-4"})})}),t]}));Q$.displayName=ZS.displayName;const J$=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(e_,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(t_,{children:a.jsx(ID,{className:"h-2 w-2 fill-current"})})}),t]}));J$.displayName=e_.displayName;const X$=f.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(JS,{ref:r,className:te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));X$.displayName=JS.displayName;const Z$=f.forwardRef(({className:e,...t},n)=>a.jsx(n_,{ref:n,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));Z$.displayName=n_.displayName;const Om=[{to:"/guides",icon:YD,label:"Guides"},{to:"/companies",icon:DD,label:"Companies"},{to:"/nationalities",icon:BD,label:"Nationalities"},{to:"/provinces",icon:FN,label:"Provinces"},{to:"/destinations",icon:zD,label:"Destinations"},{to:"/shopping",icon:GD,label:"Shopping"},{to:"/expense-categories",icon:KD,label:"Categories"},{to:"/detailed-expenses",icon:LN,label:"Expenses"}],Ow=[{to:"/tours",icon:WD,label:"Tours"},{to:"/statistics",icon:RD,label:"Statistics"}],Iw=({isMobile:e=!1})=>{const t=si(),[n,r]=f.useState(!1),s=Om.some(i=>t.pathname.startsWith(i.to)),o=i=>te("flex flex-col items-center py-2 rounded-lg font-medium transition-colors",e?"flex-1 px-1 min-w-0 gap-0.5 text-xs":"flex-shrink-0 w-20 px-2 gap-1 text-sm",i?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground");return e?a.jsxs(a.Fragment,{children:[a.jsxs(ui,{to:"/",className:({isActive:i})=>o(i),children:[a.jsx(H0,{className:"h-5 w-5"}),a.jsx("span",{className:"text-center truncate w-full",children:"Home"})]}),Ow.map(i=>a.jsxs(ui,{to:i.to,className:({isActive:l})=>o(l),children:[a.jsx(i.icon,{className:"h-5 w-5"}),a.jsx("span",{className:"text-center truncate w-full",children:i.label})]},i.to)),a.jsxs(jf,{open:n,onOpenChange:r,children:[a.jsx(Nf,{asChild:!0,children:a.jsxs("button",{className:te("flex flex-col items-center gap-0.5 py-2 rounded-lg text-xs font-medium transition-colors flex-1 px-1 min-w-0",s?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground"),children:[a.jsx(qD,{className:"h-5 w-5"}),a.jsx("span",{className:"text-center truncate w-full",children:"Settings"})]})}),a.jsx(Eu,{align:"end",side:"top",className:"w-48 mb-2",children:Om.map(i=>a.jsx(As,{asChild:!0,children:a.jsxs(ui,{to:i.to,className:"flex items-center gap-2 cursor-pointer",onClick:()=>r(!1),children:[a.jsx(i.icon,{className:"h-4 w-4"}),a.jsx("span",{children:i.label})]})},i.to))})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(ui,{to:"/",className:({isActive:i})=>o(i),children:[a.jsx(H0,{className:"h-5 w-5"}),a.jsx("span",{className:"text-center truncate w-full",children:"Home"})]}),Ow.map(i=>a.jsxs(ui,{to:i.to,className:({isActive:l})=>o(l),children:[a.jsx(i.icon,{className:"h-5 w-5"}),a.jsx("span",{className:"text-center truncate w-full",children:i.label})]},i.to)),Om.map(i=>a.jsxs(ui,{to:i.to,className:({isActive:l})=>o(l),children:[a.jsx(i.icon,{className:"h-5 w-5"}),a.jsx("span",{className:"text-center truncate w-full",children:i.label})]},i.to))]})};function Nr({children:e}){return a.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[a.jsx("nav",{className:"hidden md:block border-b bg-card sticky top-0 z-50",children:a.jsx("div",{className:"mx-auto flex items-center gap-1 md:gap-3 overflow-x-auto px-2 py-2 md:px-6 md:py-3 max-w-7xl",children:a.jsx(Iw,{isMobile:!1})})}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t bg-card z-50 shadow-lg md:hidden",children:a.jsx("div",{className:"flex items-stretch justify-evenly px-1 py-1.5",children:a.jsx(Iw,{isMobile:!0})})}),a.jsx("main",{className:"flex-1 w-full",children:a.jsx("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8 pb-24 pt-4 md:pb-12 md:pt-0",children:e})})]})}const or=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{className:"relative w-full overflow-x-auto -mx-4 sm:mx-0",children:a.jsx("div",{className:"inline-block min-w-full align-middle",children:a.jsx("table",{ref:n,className:te("w-full caption-bottom text-sm",e),...t})})}));or.displayName="Table";const ir=f.forwardRef(({className:e,...t},n)=>a.jsx("thead",{ref:n,className:te("[&_tr]:border-b",e),...t}));ir.displayName="TableHeader";const lr=f.forwardRef(({className:e,...t},n)=>a.jsx("tbody",{ref:n,className:te("[&_tr:last-child]:border-0",e),...t}));lr.displayName="TableBody";const eL=f.forwardRef(({className:e,...t},n)=>a.jsx("tfoot",{ref:n,className:te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));eL.displayName="TableFooter";const nt=f.forwardRef(({className:e,...t},n)=>a.jsx("tr",{ref:n,className:te("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));nt.displayName="TableRow";const se=f.forwardRef(({className:e,...t},n)=>a.jsx("th",{ref:n,className:te("h-12 px-2 sm:px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 text-xs sm:text-sm whitespace-nowrap",e),...t}));se.displayName="TableHead";const oe=f.forwardRef(({className:e,...t},n)=>a.jsx("td",{ref:n,className:te("p-2 sm:p-4 align-middle [&:has([role=checkbox])]:pr-0 text-sm",e),...t}));oe.displayName="TableCell";const tL=f.forwardRef(({className:e,...t},n)=>a.jsx("caption",{ref:n,className:te("mt-4 text-sm text-muted-foreground",e),...t}));tL.displayName="TableCaption";const nL="modulepreload",rL=function(e){return"/local-tour-manager/"+e},Fw={},ii=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=rL(c),c in Fw)return;Fw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":nL,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},sL=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ii(async()=>{const{default:r}=await Promise.resolve().then(()=>El);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Iy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class $w extends Iy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lw extends Iy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bw extends Iy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Rg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Rg||(Rg={}));var aL=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class oL{constructor(t,{headers:n={},customFetch:r,region:s=Rg.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=sL(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return aL(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=i):typeof i=="string"?(c["Content-Type"]="text/plain",h=i):typeof FormData<"u"&&i instanceof FormData?h=i:(c["Content-Type"]="application/json",h=JSON.stringify(i)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(y=>{throw y.name==="AbortError"?y:new $w(y)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new Lw(m);if(!m.ok)throw new Bw(m);let N=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return N==="application/json"?g=yield m.json():N==="application/octet-stream"?g=yield m.blob():N==="text/event-stream"?g=m:N==="multipart/form-data"?g=yield m.formData():g=yield m.text(),{data:g,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new $w(s)}:{data:null,error:s,response:s instanceof Bw||s instanceof Lw?s.context:void 0}}})}}var sr={},Fy={},Cf={},Tu={},Sf={},_f={},iL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gl=iL();const lL=gl.fetch,a_=gl.fetch.bind(gl),o_=gl.Headers,cL=gl.Request,uL=gl.Response,El=Object.freeze(Object.defineProperty({__proto__:null,Headers:o_,Request:cL,Response:uL,default:a_,fetch:lL},Symbol.toStringTag,{value:"Module"})),dL=s2(El);var kf={};Object.defineProperty(kf,"__esModule",{value:!0});let hL=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};kf.default=hL;var i_=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});const fL=i_(dL),mL=i_(kf);let pL=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=fL.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c,u;let d=null,h=null,m=null,p=o.status,N=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),w=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,N="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await o.text();try{d=JSON.parse(y),Array.isArray(d)&&o.status===404&&(h=[],d=null,p=200,N="OK")}catch{o.status===404&&y===""?(p=204,N="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,N="OK"),d&&this.shouldThrowOnError)throw new mL.default(d)}return{error:d,data:h,count:m,status:p,statusText:N}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};_f.default=pL;var gL=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const vL=gL(_f);let yL=class extends vL.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Sf.default=yL;var xL=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tu,"__esModule",{value:!0});const wL=xL(Sf);let bL=class extends wL.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${i}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Tu.default=bL;var jL=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});const zl=jL(Tu);let NL=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new zl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new zl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new zl.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new zl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new zl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Cf.default=NL;var l_=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fy,"__esModule",{value:!0});const CL=l_(Cf),SL=l_(Tu);let _L=class c_{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new CL.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new c_(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:o}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=n);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new SL.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Fy.default=_L;var Tl=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sr,"__esModule",{value:!0});sr.PostgrestError=sr.PostgrestBuilder=sr.PostgrestTransformBuilder=sr.PostgrestFilterBuilder=sr.PostgrestQueryBuilder=sr.PostgrestClient=void 0;const u_=Tl(Fy);sr.PostgrestClient=u_.default;const d_=Tl(Cf);sr.PostgrestQueryBuilder=d_.default;const h_=Tl(Tu);sr.PostgrestFilterBuilder=h_.default;const f_=Tl(Sf);sr.PostgrestTransformBuilder=f_.default;const m_=Tl(_f);sr.PostgrestBuilder=m_.default;const p_=Tl(kf);sr.PostgrestError=p_.default;var kL=sr.default={PostgrestClient:u_.default,PostgrestQueryBuilder:d_.default,PostgrestFilterBuilder:h_.default,PostgrestTransformBuilder:f_.default,PostgrestBuilder:m_.default,PostgrestError:p_.default};const{PostgrestClient:EL,PostgrestQueryBuilder:B9,PostgrestFilterBuilder:U9,PostgrestTransformBuilder:z9,PostgrestBuilder:W9,PostgrestError:V9}=kL;class TL{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const PL="2.15.5",AL=`realtime-js/${PL}`,DL="1.0.0",Mg=1e4,RL=1e3,ML=100;var bc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bc||(bc={}));var Qt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qt||(Qt={}));var Jr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Jr||(Jr={}));var Og;(function(e){e.websocket="websocket"})(Og||(Og={}));var No;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(No||(No={}));class OL{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(t.slice(i,i+s));i=i+s;const c=r.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class g_{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pt||(pt={}));const Uw=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,i)=>(o[i]=IL(i,e,t,s),o),{})},IL=(e,t,n,r)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,i=n[e];return o&&!r.includes(o)?v_(o,i):Ig(i)},v_=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return BL(t,n)}switch(e){case pt.bool:return FL(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return $L(t);case pt.json:case pt.jsonb:return LL(t);case pt.timestamp:return UL(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return Ig(t);default:return Ig(t)}},Ig=e=>e,FL=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$L=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},LL=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},BL=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const i=e.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>v_(t,l))}return e},UL=e=>typeof e=="string"?e.replace(" ","T"):e,y_=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Im{constructor(t,n,r={},s=Mg){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zw||(zw={}));class jc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jc.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=jc.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jc.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const o=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=o[u];if(h){const m=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),N=d.filter(y=>p.indexOf(y.presence_ref)<0),g=h.filter(y=>m.indexOf(y.presence_ref)<0);N.length>0&&(l[u]=N),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ww;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ww||(Ww={}));var Nc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nc||(Nc={}));var Ws;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ws||(Ws={}));class $y{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Im(this,Jr.join,this.params,this.timeout),this.rejoinTimer=new g_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new jc(this),this.broadcastEndpointURL=y_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Qt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Nc.PRESENCE]&&this.bindings[Nc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ws.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ws.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var N;if(this.socket.setAuth(),p===void 0){t==null||t(Ws.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(N=g==null?void 0:g.length)!==null&&N!==void 0?N:0,w=[];for(let v=0;v<y;v++){const b=g[v],{filter:{event:x,schema:_,table:k,filter:E}}=b,D=p&&p[v];if(D&&D.event===x&&D.schema===_&&D.table===k&&D.filter===E)w.push(Object.assign(Object.assign({},b),{id:D.id}));else{this.unsubscribe(),this.state=Qt.errored,t==null||t(Ws.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(Ws.SUBSCRIBED);return}}).receive("error",p=>{this.state=Qt.errored,t==null||t(Ws.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ws.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Qt.joined&&t===Nc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Im(this,Jr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Im(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ML){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Jr;if(r&&[l,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let m=this._onMessage(i,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var N,g,y;return((N=p.filter)===null||N===void 0?void 0:N.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(p=>p.callback(m,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var N,g,y,w,v,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const x=p.id,_=(N=p.filter)===null||N===void 0?void 0:N.event;return x&&((g=n.ids)===null||g===void 0?void 0:g.includes(x))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(v=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const N=m.data,{schema:g,table:y,commit_timestamp:w,type:v,errors:b}=N;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(N))}p.callback(m,r)})}_isClosed(){return this.state===Qt.closed}_isJoined(){return this.state===Qt.joined}_isJoining(){return this.state===Qt.joining}_isLeaving(){return this.state===Qt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&$y.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jr.close,{},t)}_onError(t){this._on(Jr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Uw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Uw(t.columns,t.old_record)),n}}const Fm=()=>{},fd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zL=[1e3,2e3,5e3,1e4],WL=1e4,VL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HL{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mg,this.transport=null,this.heartbeatIntervalMs=fd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fm,this.ref=0,this.reconnectTimer=null,this.logger=Fm,this.conn=null,this.sendBuffer=[],this.serializer=new OL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>ii(async()=>{const{default:l}=await Promise.resolve().then(()=>El);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Og.websocket}`,this.httpEndpoint=y_(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=TL.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:DL}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bc.connecting:return No.Connecting;case bc.open:return No.Open;case bc.closing:return No.Closing;default:return No.Closed}}isConnected(){return this.connectionState()===No.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new $y(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:s,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(RL,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:i}=n,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([VL],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:AL};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Jr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new g_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,o,i,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Mg,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:fd.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Fm,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>zL[h-1]||WL,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ly extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class qL extends Ly{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fg extends Ly{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var GL=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const x_=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ii(async()=>{const{default:r}=await Promise.resolve().then(()=>El);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},KL=()=>GL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ii(()=>Promise.resolve().then(()=>El),void 0)).Response:Response}),$g=e=>{if(Array.isArray(e))return e.map(n=>$g(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=$g(r)}),t},YL=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var li=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const $m=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QL=(e,t,n)=>li(void 0,void 0,void 0,function*(){const r=yield KL();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const o=e.status||500,i=(s==null?void 0:s.statusCode)||o+"";t(new qL($m(s),o,i))}).catch(s=>{t(new Fg($m(s),s))}):t(new Fg($m(e),e))}),JL=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(YL(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Pu(e,t,n,r,s,o){return li(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,JL(t,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>QL(c,l,r))})})}function jh(e,t,n,r){return li(this,void 0,void 0,function*(){return Pu(e,"GET",t,n,r)})}function ys(e,t,n,r,s){return li(this,void 0,void 0,function*(){return Pu(e,"POST",t,r,s,n)})}function Lg(e,t,n,r,s){return li(this,void 0,void 0,function*(){return Pu(e,"PUT",t,r,s,n)})}function XL(e,t,n,r){return li(this,void 0,void 0,function*(){return Pu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function w_(e,t,n,r,s){return li(this,void 0,void 0,function*(){return Pu(e,"DELETE",t,r,s,n)})}var ZL=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class e3{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return ZL(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}var t3=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class n3{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new e3(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return t3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}var Qn=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const r3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s3{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=x_(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Qn(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Vw),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Lg:ys)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return Qn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Qn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Vw.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Lg(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Vt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Qn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield ys(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Ly("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Qn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Qn(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Qn(this,void 0,void 0,function*(){try{return{data:{path:(yield ys(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Qn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield ys(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Qn(this,void 0,void 0,function*(){try{const s=yield ys(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>jh(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new n3(c,this.shouldThrowOnError)}info(t){return Qn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield jh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:$g(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}exists(t){return Qn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield XL(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r)&&r instanceof Fg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield w_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Qn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},r3),n),{prefix:t||""});return{data:yield ys(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Qn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ys(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const a3="2.12.2",o3={"X-Client-Info":`storage-js/${a3}`};var mi=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class i3{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},o3),n),this.fetch=x_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return mi(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}getBucket(t){return mi(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return mi(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return mi(this,void 0,void 0,function*(){try{return{data:yield Lg(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return mi(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return mi(this,void 0,void 0,function*(){try{return{data:yield w_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}}class l3 extends i3{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new s3(this.url,this.headers,t,this.fetch)}}const c3="2.58.0";let lc="";typeof Deno<"u"?lc="deno":typeof document<"u"?lc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lc="react-native":lc="node";const u3={"X-Client-Info":`supabase-js-${lc}/${c3}`},d3={headers:u3},h3={schema:"public"},f3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m3={};var p3=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const g3=e=>{let t;return e?t=e:typeof fetch>"u"?t=a_:t=fetch,(...n)=>t(...n)},v3=()=>typeof Headers>"u"?o_:Headers,y3=(e,t,n)=>{const r=g3(n),s=v3();return(o,i)=>p3(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},i),{headers:u}))})};var x3=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function w3(e){return e.endsWith("/")?e:e+"/"}function b3(e,t){var n,r;const{db:s,auth:o,realtime:i,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>x3(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function j3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(w3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const b_="2.72.0",bi=30*1e3,Bg=3,Lm=Bg*bi,N3="http://localhost:9999",C3="supabase.auth.token",S3={"X-Client-Info":`gotrue-js/${b_}`},Ug="X-Supabase-Api-Version",j_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,k3=10*60*1e3;class By extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class E3 extends By{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function T3(e){return We(e)&&e.name==="AuthApiError"}class N_ extends By{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class lo extends By{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class va extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function P3(e){return We(e)&&e.name==="AuthSessionMissingError"}class Wl extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class md extends lo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pd extends lo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A3(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}class Hw extends lo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zg extends lo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Bm(e){return We(e)&&e.name==="AuthRetryableFetchError"}class qw extends lo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Wg extends lo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gw=` 	
\r=`.split(""),D3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gw.length;t+=1)e[Gw[t].charCodeAt(0)]=-2;for(let t=0;t<Nh.length;t+=1)e[Nh[t].charCodeAt(0)]=t;return e})();function Kw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Nh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Nh[r]),t.queuedBits-=6}}function C_(e,t,n){const r=D3[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yw(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{O3(i,r,n)};for(let i=0;i<e.length;i+=1)C_(e.charCodeAt(i),s,o);return t.join("")}function R3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function M3(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}R3(r,t)}}function O3(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function I3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)C_(e.charCodeAt(s),n,r);return new Uint8Array(t)}function F3(e){const t=[];return M3(e,n=>t.push(n)),new Uint8Array(t)}function $3(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Kw(s,n,r)),Kw(null,n,r),t.join("")}function L3(e){return Math.round(Date.now()/1e3)+e}function B3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const kr=()=>typeof window<"u"&&typeof document<"u",go={tested:!1,writable:!1},S_=()=>{if(!kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(go.tested)return go.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),go.tested=!0,go.writable=!0}catch{go.tested=!0,go.writable=!1}return go.writable};function U3(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const __=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ii(async()=>{const{default:r}=await Promise.resolve().then(()=>El);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},z3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ji=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},vo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fa=async(e,t)=>{await e.removeItem(t)};class Ef{constructor(){this.promise=new Ef.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ef.promiseConstructor=Promise;function Um(e){const t=e.split(".");if(t.length!==3)throw new Wg("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!_3.test(t[r]))throw new Wg("JWT not in base64url format");return{header:JSON.parse(Yw(t[0])),payload:JSON.parse(Yw(t[1])),signature:I3(t[2]),raw:{header:t[0],payload:t[1]}}}async function W3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function V3(e,t){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){r(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function H3(e){return("0"+e.toString(16)).substr(-2)}function q3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,H3).join("")}async function G3(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function K3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await G3(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pi(e,t,n=!1){const r=q3();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ji(e,`${t}-code-verifier`,s);const o=await K3(r);return[o,r===o?"plain":"s256"]}const Y3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q3(e){const t=e.headers.get(Ug);if(!t||!t.match(Y3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function J3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function X3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Z3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gi(e){if(!Z3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zm(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qw(e){return JSON.parse(JSON.stringify(e))}var e5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const wo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),t5=[502,503,504];async function Jw(e){var t;if(!z3(e))throw new zg(wo(e),0);if(t5.includes(e.status))throw new zg(wo(e),e.status);let n;try{n=await e.json()}catch(o){throw new N_(wo(o),o)}let r;const s=Q3(e);if(s&&s.getTime()>=j_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new qw(wo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new va}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new qw(wo(n),e.status,n.weak_password.reasons);throw new E3(wo(n),e.status||500,r)}const n5=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Qe(e,t,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Ug]||(o[Ug]=j_["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await r5(e,t,n+l,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function r5(e,t,n,r,s,o){const i=n5(t,r,s,o);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new zg(wo(c),0)}if(l.ok||await Jw(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Jw(c)}}function gs(e){var t;let n=null;i5(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=L3(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Xw(e){const t=gs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ja(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function s5(e){return{data:e,error:null}}function a5(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=e,i=e5(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function o5(e){return e}function i5(e){return e.access_token&&e.refresh_token&&e.expires_in}const Wm=["global","local","others"];var l5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class c5{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=__(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Wm[0]){if(Wm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wm.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ja})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=l5(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:a5,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ja})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:o5});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(N=>{const g=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(N.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(We(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){gi(t);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ja})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){gi(t);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ja})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){gi(t);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ja})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){gi(t.userId);try{const{data:n,error:r}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){gi(t.userId),gi(t.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}}function Zw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function u5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vi={debug:!!(globalThis&&S_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class k_ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class d5 extends k_{}async function h5(e,t,n){vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),vi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new d5(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function E_(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function f5(e){return parseInt(e,16)}function m5(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function p5(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=E_(e.address),N=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",y=`${N} wants you to sign in with your Ethereum account:
${p}

${g}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${n}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}w+=v}return`${y}
${w}`}u5();const g5={url:N3,storageKey:C3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function eb(e,t,n){return await n()}const yi={};class ou{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ou.nextInstanceID,ou.nextInstanceID+=1,this.instanceID>0&&kr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},g5),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new c5({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=__(s.fetch),this.lock=s.lock||eb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:kr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=h5:this.lock=eb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:S_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Zw(this.memoryStorage)),kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=yi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){yi[this.storageKey]=Object.assign(Object.assign({},yi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=yi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yi[this.storageKey]=Object.assign(Object.assign({},yi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${b_}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=U3(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),kr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),A3(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?{error:n}:{error:new N_("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const o=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:gs}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(We(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,s;try{let o;if("email"in t){const{email:d,password:h,options:m}=t;let p=null,N=null;this.flowType==="pkce"&&([p,N]=await pi(this.storage,this.storageKey)),o=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:N},xform:gs})}else if("phone"in t){const{phone:d,password:h,options:m}=t;o=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:gs})}else throw new md("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(We(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:i,options:l}=t;n=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xw})}else if("phone"in t){const{phone:o,password:i,options:l}=t;n=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xw})}else throw new md("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Wl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,o,i,l,c,u,d,h,m;let p,N;if("message"in t)p=t.message,N=t.signature;else{const{chain:g,wallet:y,statement:w,options:v}=t;let b;if(kr())if(typeof y=="object")b=y;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")b=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const x=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=E_(_[0]);let E=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const $=await b.request({method:"eth_chainId"});E=f5($)}const D={domain:x.host,address:k,statement:w,uri:x.href,version:"1",chainId:E,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=p5(D),N=await b.request({method:"personal_sign",params:[m5(p),k]})}try{const{data:g,error:y}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:N},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:gs});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Wl}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(We(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var n,r,s,o,i,l,c,u,d,h,m,p;let N,g;if("message"in t)N=t.message,g=t.signature;else{const{chain:y,wallet:w,statement:v,options:b}=t;let x;if(kr())if(typeof w=="object")x=w;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))x=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const k=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let E;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")E=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)E=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)N=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${_.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const k=await x.signMessage(new TextEncoder().encode(N),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:y,error:w}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:$3(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:gs});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Wl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(We(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const n=await vo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:i}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:gs});if(await fa(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Wl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(We(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:o,nonce:i}=t,l=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:gs}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Wl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,o,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await pi(this.storage,this.storageKey));const{error:h}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new md("You must provide either an email or phone number.")}catch(l){if(We(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,o;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:gs});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(We(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await pi(this.storage,this.storageKey)),await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:s5})}catch(o){if(We(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new va;const{error:s}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:o}=t,{error:i}=await Qe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:r,type:s,options:o}=t,{data:i,error:l}=await Qe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new md("You must provide either an email or phone number and a type")}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Lm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await vo(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=zm()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ja}):await this._useSession(async n=>{var r,s,o;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new va}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ja})})}catch(n){if(We(n))return P3(n)&&(await this._removeSession(),await fa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new va;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await pi(this.storage,this.storageKey));const{data:u,error:d}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:ja});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new va;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:i}=Um(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(We(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new va;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!kr())throw new pd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Hw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Hw("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!i||!u)throw new pd("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=bi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const N=m-h;d-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,m,d):d-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,m,d);const{data:g,error:y}=await this._getUser(o);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(r){if(We(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(T3(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await fa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=B3(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await pi(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(We(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var i,l,c,u,d;const{data:h,error:m}=o;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return kr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(We(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)throw i;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await V3(async s=>(s>0&&await W3(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gs})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Bm(o)&&Date.now()+i-r<bi})}catch(r){if(this._debug(n,"error",r),We(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),kr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await vo(this.storage,this.storageKey);if(s&&this.userStorage){let i=await vo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await ji(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:zm()}else if(s&&!s.user&&!s.user){const i=await vo(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await fa(this.storage,this.storageKey+"-user"),await ji(this.storage,this.storageKey,s)):s.user=zm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Lm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Lm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Bm(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new va;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ef;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new va;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),We(o)){const i={session:null,error:o};return Bm(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ji(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=Qw(s);await ji(this.storage,this.storageKey,o)}else{const s=Qw(n);await ji(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await fa(this.storage,this.storageKey),await fa(this.storage,this.storageKey+"-code-verifier"),await fa(this.storage,this.storageKey+"-user"),this.userStorage&&await fa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/bi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bi}ms, refresh threshold is ${Bg} ticks`),s<=Bg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof k_)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await pi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Qe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:l}=await Qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Um(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+k3>s)return r;const{data:o,error:i}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:N}=await this.getSession();if(N||!p.session)return{data:null,error:N};r=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=Um(r);n!=null&&n.allowExpired||J3(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=X3(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,F3(`${l}.${c}`)))throw new Wg("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}}ou.nextInstanceID=0;const v5=ou;class y5 extends v5{constructor(t){super(t)}}var x5=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class w5{constructor(t,n,r){var s,o,i;this.supabaseUrl=t,this.supabaseKey=n;const l=j3(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:h3,realtime:m3,auth:Object.assign(Object.assign({},f3),{storageKey:c}),global:d3},d=b3(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=y3(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new EL(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new l3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new oL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return x5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:i,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y5({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new HL(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const T_=(e,t,n)=>new w5(e,t,n);function b5(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}b5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let Vm=null;const j5=()=>!0,N5=()=>{if(!j5())throw new Error("Supabase credentials are not configured.");const e="https://wzpqtbyclwlqssperkhp.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6cHF0YnljbHdscXNzcGVya2hwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDg1ODMsImV4cCI6MjA3NDgyNDU4M30.mSGk0tLyuhIhzYfDnvMaf_AycIpM-WSuoxHbqw6g5Z0",n={persistSession:!0,autoRefreshToken:!0,...typeof window<"u"?{storage:window.localStorage}:{}};return T_(e,t,{auth:n})},P_=()=>(Vm||(Vm=N5()),Vm);function C5(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"D")}function St(e){const t=C5(e.toLowerCase().trim()),n=t.split(/\s+/),r=new Set;return r.add(t.replace(/\s+/g,"")),n.forEach(s=>{s.length>1&&r.add(s)}),n.length>1&&r.add(n.map(s=>s[0]).join("")),Array.from(r)}function et(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Cr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Bn(e,t){const n=et(e);return isNaN(t)?Cr(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function cs(e,t){const n=et(e);if(isNaN(t))return Cr(e,NaN);if(!t)return n;const r=n.getDate(),s=Cr(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const Uy=6048e5,S5=864e5;let _5={};function Au(){return _5}function Rs(e,t){var l,c,u,d;const n=Au(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=et(e),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Ko(e){return Rs(e,{weekStartsOn:1})}function A_(e){const t=et(e),n=t.getFullYear(),r=Cr(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Ko(r),o=Cr(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Ko(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function vl(e){const t=et(e);return t.setHours(0,0,0,0),t}function Ch(e){const t=et(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ts(e,t){const n=vl(e),r=vl(t),s=+n-Ch(n),o=+r-Ch(r);return Math.round((s-o)/S5)}function k5(e){const t=A_(e),n=Cr(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ko(n)}function Vg(e,t){const n=t*7;return Bn(e,n)}function E5(e,t){return cs(e,t*12)}function T5(e){let t;return e.forEach(function(n){const r=et(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function P5(e){let t;return e.forEach(n=>{const r=et(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function cr(e,t){const n=vl(e),r=vl(t);return+n==+r}function zy(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function A5(e){if(!zy(e)&&typeof e!="number")return!1;const t=et(e);return!isNaN(Number(t))}function iu(e,t){const n=et(e),r=et(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function D5(e,t,n){const r=Rs(e,n),s=Rs(t,n),o=+r-Ch(r),i=+s-Ch(s);return Math.round((o-i)/Uy)}function lu(e,t){const n=et(e),r=et(t),s=tb(n,r),o=Math.abs(ts(n,r));n.setDate(n.getDate()-s*o);const i=+(tb(n,r)===-s),l=s*(o-i);return l===0?0:l}function tb(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Wy(e){const t=et(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function fr(e){const t=et(e);return t.setDate(1),t.setHours(0,0,0,0),t}function D_(e){const t=et(e),n=Cr(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Vy(e,t){var l,c,u,d;const n=Au(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=et(e),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function R_(e){return Vy(e,{weekStartsOn:1})}const R5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M5=(e,t,n)=>{let r;const s=R5[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Hm(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const O5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},I5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},F5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$5={date:Hm({formats:O5,defaultWidth:"full"}),time:Hm({formats:I5,defaultWidth:"full"}),dateTime:Hm({formats:F5,defaultWidth:"full"})},L5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},B5=(e,t,n,r)=>L5[e];function Vl(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const U5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},z5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},W5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},V5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G5=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},K5={ordinalNumber:G5,era:Vl({values:U5,defaultWidth:"wide"}),quarter:Vl({values:z5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vl({values:W5,defaultWidth:"wide"}),day:Vl({values:V5,defaultWidth:"wide"}),dayPeriod:Vl({values:H5,defaultWidth:"wide",formattingValues:q5,defaultFormattingWidth:"wide"})};function Hl(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Q5(l,h=>h.test(i)):Y5(l,h=>h.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function Y5(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Q5(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function J5(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const X5=/^(\d+)(th|st|nd|rd)?/i,Z5=/\d+/i,e8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},t8={any:[/^b/i,/^(a|c)/i]},n8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},r8={any:[/1/i,/2/i,/3/i,/4/i]},s8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},a8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},o8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},i8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},l8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},c8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},u8={ordinalNumber:J5({matchPattern:X5,parsePattern:Z5,valueCallback:e=>parseInt(e,10)}),era:Hl({matchPatterns:e8,defaultMatchWidth:"wide",parsePatterns:t8,defaultParseWidth:"any"}),quarter:Hl({matchPatterns:n8,defaultMatchWidth:"wide",parsePatterns:r8,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hl({matchPatterns:s8,defaultMatchWidth:"wide",parsePatterns:a8,defaultParseWidth:"any"}),day:Hl({matchPatterns:o8,defaultMatchWidth:"wide",parsePatterns:i8,defaultParseWidth:"any"}),dayPeriod:Hl({matchPatterns:l8,defaultMatchWidth:"any",parsePatterns:c8,defaultParseWidth:"any"})},M_={code:"en-US",formatDistance:M5,formatLong:$5,formatRelative:B5,localize:K5,match:u8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function d8(e){const t=et(e);return ts(t,D_(t))+1}function O_(e){const t=et(e),n=+Ko(t)-+k5(t);return Math.round(n/Uy)+1}function I_(e,t){var d,h,m,p;const n=et(e),r=n.getFullYear(),s=Au(),o=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=Cr(e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const l=Rs(i,t),c=Cr(e,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const u=Rs(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function h8(e,t){var l,c,u,d;const n=Au(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=I_(e,t),o=Cr(e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Rs(o,t)}function F_(e,t){const n=et(e),r=+Rs(n,t)-+h8(n,t);return Math.round(r/Uy)+1}function ht(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ma={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ht(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ht(n+1,2)},d(e,t){return ht(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ht(e.getHours()%12||12,t.length)},H(e,t){return ht(e.getHours(),t.length)},m(e,t){return ht(e.getMinutes(),t.length)},s(e,t){return ht(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ht(s,t.length)}},xi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nb={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ma.y(e,t)},Y:function(e,t,n,r){const s=I_(e,r),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return ht(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):ht(o,t.length)},R:function(e,t){const n=A_(e);return ht(n,t.length)},u:function(e,t){const n=e.getFullYear();return ht(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ht(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ht(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ma.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ht(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=F_(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):ht(s,t.length)},I:function(e,t,n){const r=O_(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ht(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ma.d(e,t)},D:function(e,t,n){const r=d8(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ht(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ht(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ht(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return ht(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=xi.noon:r===0?s=xi.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=xi.evening:r>=12?s=xi.afternoon:r>=4?s=xi.morning:s=xi.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ma.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ma.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ht(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ht(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ma.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ma.s(e,t)},S:function(e,t){return ma.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return sb(r);case"XXXX":case"XX":return bo(r);case"XXXXX":case"XXX":default:return bo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return sb(r);case"xxxx":case"xx":return bo(r);case"xxxxx":case"xxx":default:return bo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+rb(r,":");case"OOOO":default:return"GMT"+bo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+rb(r,":");case"zzzz":default:return"GMT"+bo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return ht(r,t.length)},T:function(e,t,n){const r=e.getTime();return ht(r,t.length)}};function rb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+ht(o,2)}function sb(e,t){return e%60===0?(e>0?"-":"+")+ht(Math.abs(e)/60,2):bo(e,t)}function bo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=ht(Math.trunc(r/60),2),o=ht(r%60,2);return n+s+t+o}const ab=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$_=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},f8=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return ab(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",ab(r,t)).replace("{{time}}",$_(s,t))},m8={p:$_,P:f8},p8=/^D+$/,g8=/^Y+$/,v8=["D","DD","YY","YYYY"];function y8(e){return p8.test(e)}function x8(e){return g8.test(e)}function w8(e,t,n){const r=b8(e,t,n);if(console.warn(r),v8.includes(e))throw new RangeError(r)}function b8(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const j8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,N8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C8=/^'([^]*?)'?$/,S8=/''/g,_8=/[a-zA-Z]/;function Dr(e,t,n){var d,h,m,p,N,g,y,w;const r=Au(),s=(n==null?void 0:n.locale)??r.locale??M_,o=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((g=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((w=(y=r.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,l=et(e);if(!A5(l))throw new RangeError("Invalid time value");let c=t.match(N8).map(v=>{const b=v[0];if(b==="p"||b==="P"){const x=m8[b];return x(v,s.formatLong)}return v}).join("").match(j8).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:k8(v)};if(nb[b])return{isToken:!0,value:v};if(b.match(_8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&x8(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&y8(b))&&w8(b,t,String(e));const x=nb[b[0]];return x(l,b,s.localize,u)}).join("")}function k8(e){const t=e.match(C8);return t?t[1].replace(S8,"'"):e}function E8(e){const t=et(e),n=t.getFullYear(),r=t.getMonth(),s=Cr(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function T8(e){return Math.trunc(+et(e)/1e3)}function P8(e){const t=et(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function A8(e,t){return D5(P8(e),fr(e),t)+1}function Hg(e,t){const n=et(e),r=et(t);return n.getTime()>r.getTime()}function L_(e,t){const n=et(e),r=et(t);return+n<+r}function Hy(e,t){const n=et(e),r=et(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function D8(e,t){const n=et(e),r=et(t);return n.getFullYear()===r.getFullYear()}function qm(e,t){return Bn(e,-t)}function Gm(e,t){const n=et(e),r=n.getFullYear(),s=n.getDate(),o=Cr(e,0);o.setFullYear(r,t,15),o.setHours(0,0,0,0);const i=E8(o);return n.setMonth(t,Math.min(s,i)),n}function ob(e,t){const n=et(e);return isNaN(+n)?Cr(e,NaN):(n.setFullYear(t),n)}function B_(e){const t=e.totalGuests||0,n=y=>typeof y!="number"?t:t?Math.min(Math.max(y,0),t):y,r=(e.destinations||[]).reduce((y,w)=>{const v=n(w.guests);return y+w.price*v},0),s=(e.expenses||[]).reduce((y,w)=>{const v=n(w.guests);return y+w.price*v},0),o=(e.meals||[]).reduce((y,w)=>{const v=n(w.guests);return y+w.price*v},0),i=(e.allowances||[]).reduce((y,w)=>y+w.price*(w.quantity||1),0),l=r+s+o+i,c=e.summary,u=(c==null?void 0:c.advancePayment)??0,d=(c==null?void 0:c.companyTip)??0,h=(c==null?void 0:c.collectionsForCompany)??0,m=l-u,p=m-h,N=p+d;return{totalTabs:l,advancePayment:u,totalAfterAdvance:m,companyTip:d,totalAfterTip:N,collectionsForCompany:h,totalAfterCollections:p,finalTotal:N}}function U_(e){if(!(e.destinations!==void 0&&e.expenses!==void 0&&e.meals!==void 0&&e.allowances!==void 0))return e;const n=B_(e);return{...e,summary:n}}function R8(e){return e.map(U_)}class M8{constructor(){Lu(this,"supabase");this.supabase=P_()}mapGuide(t){return{id:t.id,name:t.name,phone:t.phone||"",note:t.note||"",status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapCompany(t){return{id:t.id,name:t.name,contactName:t.contact_name||"",phone:t.phone||"",email:t.email||"",note:t.note||"",status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapNationality(t){return{id:t.id,name:t.name,iso2:t.iso2,emoji:t.emoji,status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapProvince(t){return{id:t.id,name:t.name,status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapTouristDestination(t){return{id:t.id,name:t.name,price:Number(t.price)||0,provinceRef:{id:t.province_id||"",nameAtBooking:t.province_name_at_booking||""},status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapShopping(t){return{id:t.id,name:t.name,price:Number(t.price)||0,status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapExpenseCategory(t){return{id:t.id,name:t.name,status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapDetailedExpense(t){return{id:t.id,name:t.name,price:Number(t.price)||0,categoryRef:{id:t.category_id||"",nameAtBooking:t.category_name_at_booking||""},status:t.status,searchKeywords:t.search_keywords||[],createdAt:t.created_at,updatedAt:t.updated_at}}mapTour(t){const n=(t.adults||0)+(t.children||0),r=Math.max(1,lu(new Date(t.end_date),new Date(t.start_date))+1),s=typeof t.total_days=="number"?t.total_days:r;return{id:t.id,tourCode:t.tour_code,companyRef:{id:t.company_id||"",nameAtBooking:t.company_name_at_booking||""},guideRef:{id:t.guide_id||"",nameAtBooking:t.guide_name_at_booking||""},clientNationalityRef:{id:t.nationality_id||"",nameAtBooking:t.nationality_name_at_booking||""},clientName:t.client_name||"",adults:t.adults||0,children:t.children||0,totalGuests:n,driverName:t.driver_name||"",clientPhone:t.client_phone||"",startDate:t.start_date,endDate:t.end_date,totalDays:s,notes:t.notes||"",createdAt:t.created_at,updatedAt:t.updated_at,destinations:[],expenses:[],meals:[],allowances:[],shoppings:[],summary:{totalTabs:Number(t.total_tabs)||0,advancePayment:Number(t.advance_payment)||0,totalAfterAdvance:Number(t.total_after_advance)||0,companyTip:Number(t.company_tip)||0,totalAfterTip:Number(t.total_after_tip)||0,collectionsForCompany:Number(t.collections_for_company)||0,totalAfterCollections:Number(t.total_after_collections)||0,finalTotal:Number(t.final_total)||0}}}async listGuides(t){let n=this.supabase.from("guides").select("*").order("name");t!=null&&t.status&&(n=n.eq("status",t.status)),t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapGuide)}async getGuide(t){const{data:n,error:r}=await this.supabase.from("guides").select("*").eq("id",t).single();return r?null:n?this.mapGuide(n):null}async createGuide(t){const{data:n}=await this.supabase.from("guides").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A guide with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("guides").insert({name:t.name,phone:t.phone||"",note:t.note||"",status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapGuide(s)}async updateGuide(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("guides").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A guide with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}n.phone!==void 0&&(r.phone=n.phone),n.note!==void 0&&(r.note=n.note);const{error:s}=await this.supabase.from("guides").update(r).eq("id",t);if(s)throw s}async deleteGuide(t){const{error:n}=await this.supabase.from("guides").delete().eq("id",t);if(n)throw n}async duplicateGuide(t){const n=await this.getGuide(t);if(!n)throw new Error("Guide not found");return this.createGuide({name:`${n.name} (Copy)`,phone:n.phone,note:n.note})}async deleteAllGuides(){const{error:t}=await this.supabase.from("guides").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateGuides(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("guides").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following guides already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,phone:c.phone||"",note:c.note||"",status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("guides").insert(o).select();if(l)throw l;return(i||[]).map(this.mapGuide)}async toggleGuideStatus(t){throw new Error("Status toggling is disabled")}async toggleCompanyStatus(t){throw new Error("Status toggling is disabled")}async toggleNationalityStatus(t){throw new Error("Status toggling is disabled")}async toggleProvinceStatus(t){throw new Error("Status toggling is disabled")}async toggleTouristDestinationStatus(t){throw new Error("Status toggling is disabled")}async toggleShoppingStatus(t){throw new Error("Status toggling is disabled")}async toggleExpenseCategoryStatus(t){throw new Error("Status toggling is disabled")}async toggleDetailedExpenseStatus(t){throw new Error("Status toggling is disabled")}async listCompanies(t){let n=this.supabase.from("companies").select("*").order("name");t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapCompany)}async getCompany(t){const{data:n,error:r}=await this.supabase.from("companies").select("*").eq("id",t).single();return r?null:n?this.mapCompany(n):null}async createCompany(t){const{data:n}=await this.supabase.from("companies").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A company with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("companies").insert({name:t.name,contact_name:t.contactName||"",phone:t.phone||"",email:t.email||"",note:t.note||"",status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapCompany(s)}async updateCompany(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("companies").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A company with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}n.contactName!==void 0&&(r.contact_name=n.contactName),n.phone!==void 0&&(r.phone=n.phone),n.email!==void 0&&(r.email=n.email),n.note!==void 0&&(r.note=n.note);const{error:s}=await this.supabase.from("companies").update(r).eq("id",t);if(s)throw s}async deleteCompany(t){const{error:n}=await this.supabase.from("companies").delete().eq("id",t);if(n)throw n}async duplicateCompany(t){const n=await this.getCompany(t);if(!n)throw new Error("Company not found");return this.createCompany({name:`${n.name} (Copy)`,contactName:n.contactName,phone:n.phone,email:n.email,note:n.note})}async deleteAllCompanies(){const{error:t}=await this.supabase.from("companies").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateCompanies(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("companies").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following companies already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,contact_name:c.contactName||"",phone:c.phone||"",email:c.email||"",note:c.note||"",status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("companies").insert(o).select();if(l)throw l;return(i||[]).map(this.mapCompany)}async listNationalities(t){let n=this.supabase.from("nationalities").select("*").order("name");t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapNationality)}async getNationality(t){const{data:n,error:r}=await this.supabase.from("nationalities").select("*").eq("id",t).single();return r?null:n?this.mapNationality(n):null}async createNationality(t){const{data:n}=await this.supabase.from("nationalities").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A nationality with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("nationalities").insert({name:t.name,iso2:t.iso2,emoji:t.emoji,status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapNationality(s)}async updateNationality(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("nationalities").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A nationality with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}n.iso2!==void 0&&(r.iso2=n.iso2),n.emoji!==void 0&&(r.emoji=n.emoji);const{error:s}=await this.supabase.from("nationalities").update(r).eq("id",t);if(s)throw s}async deleteNationality(t){const{error:n}=await this.supabase.from("nationalities").delete().eq("id",t);if(n)throw n}async duplicateNationality(t){const n=await this.getNationality(t);if(!n)throw new Error("Nationality not found");return this.createNationality({name:`${n.name} (Copy)`,iso2:n.iso2,emoji:n.emoji})}async deleteAllNationalities(){const{error:t}=await this.supabase.from("nationalities").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateNationalities(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("nationalities").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following nationalities already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,iso2:c.iso2||null,emoji:c.emoji||null,status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("nationalities").insert(o).select();if(l)throw l;return(i||[]).map(this.mapNationality)}async listProvinces(t){let n=this.supabase.from("provinces").select("*").order("name");t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapProvince)}async getProvince(t){const{data:n,error:r}=await this.supabase.from("provinces").select("*").eq("id",t).single();return r?null:n?this.mapProvince(n):null}async createProvince(t){const{data:n}=await this.supabase.from("provinces").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A province with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("provinces").insert({name:t.name,status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapProvince(s)}async updateProvince(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("provinces").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A province with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}const{error:s}=await this.supabase.from("provinces").update(r).eq("id",t);if(s)throw s}async deleteProvince(t){const{error:n}=await this.supabase.from("provinces").delete().eq("id",t);if(n)throw n}async duplicateProvince(t){const n=await this.getProvince(t);if(!n)throw new Error("Province not found");return this.createProvince({name:`${n.name} (Copy)`})}async deleteAllProvinces(){const{error:t}=await this.supabase.from("provinces").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateProvinces(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("provinces").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following provinces already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("provinces").insert(o).select();if(l)throw l;return(i||[]).map(this.mapProvince)}async listTouristDestinations(t){let n=this.supabase.from("tourist_destinations").select("*").order("name");t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapTouristDestination)}async getTouristDestination(t){const{data:n,error:r}=await this.supabase.from("tourist_destinations").select("*").eq("id",t).single();return r?null:n?this.mapTouristDestination(n):null}async createTouristDestination(t){const{data:n}=await this.supabase.from("tourist_destinations").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A tourist destination with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("tourist_destinations").insert({name:t.name,price:t.price,province_id:t.provinceRef.id,province_name_at_booking:t.provinceRef.nameAtBooking,status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapTouristDestination(s)}async updateTouristDestination(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("tourist_destinations").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A tourist destination with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}n.price!==void 0&&(r.price=n.price),n.provinceRef!==void 0&&(r.province_id=n.provinceRef.id,r.province_name_at_booking=n.provinceRef.nameAtBooking),n.status!==void 0&&(r.status=n.status);const{error:s}=await this.supabase.from("tourist_destinations").update(r).eq("id",t);if(s)throw s}async deleteTouristDestination(t){const{error:n}=await this.supabase.from("tourist_destinations").delete().eq("id",t);if(n)throw n}async duplicateTouristDestination(t){const n=await this.getTouristDestination(t);if(!n)throw new Error("Tourist destination not found");return this.createTouristDestination({name:`${n.name} (Copy)`,price:n.price,provinceRef:n.provinceRef})}async deleteAllTouristDestinations(){const{error:t}=await this.supabase.from("tourist_destinations").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateTouristDestinations(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("tourist_destinations").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following tourist destinations already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,price:c.price,province_id:c.provinceRef.id,province_name_at_booking:c.provinceRef.nameAtBooking,status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("tourist_destinations").insert(o).select();if(l)throw l;return(i||[]).map(this.mapTouristDestination)}async listShoppings(t){let n=this.supabase.from("shoppings").select("*").order("name");t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapShopping)}async getShopping(t){const{data:n,error:r}=await this.supabase.from("shoppings").select("*").eq("id",t).single();return r?null:n?this.mapShopping(n):null}async createShopping(t){const{data:n}=await this.supabase.from("shoppings").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A shopping with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("shoppings").insert({name:t.name,status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapShopping(s)}async updateShopping(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("shoppings").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A shopping with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}const{error:s}=await this.supabase.from("shoppings").update(r).eq("id",t);if(s)throw s}async deleteShopping(t){const{error:n}=await this.supabase.from("shoppings").delete().eq("id",t);if(n)throw n}async duplicateShopping(t){const n=await this.getShopping(t);if(!n)throw new Error("Shopping not found");return this.createShopping({name:`${n.name} (Copy)`})}async deleteAllShoppings(){const{error:t}=await this.supabase.from("shoppings").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateShoppings(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("shoppings").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following shoppings already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("shoppings").insert(o).select();if(l)throw l;return(i||[]).map(this.mapShopping)}async listExpenseCategories(t){let n=this.supabase.from("expense_categories").select("*").order("name");t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapExpenseCategory)}async getExpenseCategory(t){const{data:n,error:r}=await this.supabase.from("expense_categories").select("*").eq("id",t).single();return r?null:n?this.mapExpenseCategory(n):null}async createExpenseCategory(t){const{data:n}=await this.supabase.from("expense_categories").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("An expense category with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("expense_categories").insert({name:t.name,status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapExpenseCategory(s)}async updateExpenseCategory(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("expense_categories").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("An expense category with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}const{error:s}=await this.supabase.from("expense_categories").update(r).eq("id",t);if(s)throw s}async deleteExpenseCategory(t){const{error:n}=await this.supabase.from("expense_categories").delete().eq("id",t);if(n)throw n}async duplicateExpenseCategory(t){const n=await this.getExpenseCategory(t);if(!n)throw new Error("Expense category not found");return this.createExpenseCategory({name:`${n.name} (Copy)`})}async deleteAllExpenseCategories(){const{error:t}=await this.supabase.from("expense_categories").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateExpenseCategories(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("expense_categories").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following expense categories already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("expense_categories").insert(o).select();if(l)throw l;return(i||[]).map(this.mapExpenseCategory)}async listDetailedExpenses(t){let n=this.supabase.from("detailed_expenses").select("*").order("name");t!=null&&t.status&&(n=n.eq("status",t.status)),t!=null&&t.search&&(n=n.ilike("name",`%${t.search}%`));const{data:r,error:s}=await n;if(s)throw s;return(r||[]).map(this.mapDetailedExpense)}async getDetailedExpense(t){const{data:n,error:r}=await this.supabase.from("detailed_expenses").select("*").eq("id",t).single();return r?null:n?this.mapDetailedExpense(n):null}async createDetailedExpense(t){const{data:n}=await this.supabase.from("detailed_expenses").select("id").ilike("name",t.name).maybeSingle();if(n)throw new Error("A detailed expense with this name already exists");const r=St(t.name),{data:s,error:o}=await this.supabase.from("detailed_expenses").insert({name:t.name,price:t.price,category_id:t.categoryRef.id,category_name_at_booking:t.categoryRef.nameAtBooking,status:"active",search_keywords:r}).select().single();if(o)throw o;return this.mapDetailedExpense(s)}async updateDetailedExpense(t,n){const r={};if(n.name!==void 0){const{data:o}=await this.supabase.from("detailed_expenses").select("id").ilike("name",n.name).neq("id",t).maybeSingle();if(o)throw new Error("A detailed expense with this name already exists");r.name=n.name,r.search_keywords=St(n.name)}n.price!==void 0&&(r.price=n.price),n.categoryRef!==void 0&&(r.category_id=n.categoryRef.id,r.category_name_at_booking=n.categoryRef.nameAtBooking),n.status!==void 0&&(r.status=n.status);const{error:s}=await this.supabase.from("detailed_expenses").update(r).eq("id",t);if(s)throw s}async deleteDetailedExpense(t){const{error:n}=await this.supabase.from("detailed_expenses").delete().eq("id",t);if(n)throw n}async duplicateDetailedExpense(t){const n=await this.getDetailedExpense(t);if(!n)throw new Error("Detailed expense not found");return this.createDetailedExpense({name:`${n.name} (Copy)`,price:n.price,categoryRef:n.categoryRef})}async deleteAllDetailedExpenses(){const{error:t}=await this.supabase.from("detailed_expenses").delete().gte("created_at","1970-01-01");if(t)throw t}async bulkCreateDetailedExpenses(t){const n=t.map(c=>c.name.toLowerCase());if(n.filter((c,u)=>n.indexOf(c)!==u).length>0)throw new Error("Duplicate names found in batch");const{data:s}=await this.supabase.from("detailed_expenses").select("name");if(s){const c=s.map(d=>d.name.toLowerCase()),u=t.filter(d=>c.includes(d.name.toLowerCase()));if(u.length>0)throw new Error(`The following detailed expenses already exist: ${u.map(d=>d.name).join(", ")}`)}const o=t.map(c=>({name:c.name,price:c.price,category_id:c.categoryRef.id,category_name_at_booking:c.categoryRef.nameAtBooking,status:"active",search_keywords:St(c.name)})),{data:i,error:l}=await this.supabase.from("detailed_expenses").insert(o).select();if(l)throw l;return(i||[]).map(this.mapDetailedExpense)}async listTours(t,n){const r=(n==null?void 0:n.includeDetails)??!1;let s=this.supabase.from("tours").select(r?`
        *,
        tour_destinations(*),
        tour_expenses(*),
        tour_meals(*),
        tour_allowances(*),
        tour_shoppings(*)
      `:"*, tour_allowances(price, quantity)",{count:"exact"});const o=(t==null?void 0:t.sortBy)||"startDate",i=(t==null?void 0:t.sortOrder)||"desc",l={startDate:"start_date",endDate:"end_date",tourCode:"tour_code",clientName:"client_name",createdAt:"created_at"};if(s=s.order(l[o]||"start_date",{ascending:i==="asc"}),r&&(s=s.order("date",{foreignTable:"tour_destinations"}).order("date",{foreignTable:"tour_expenses"}).order("date",{foreignTable:"tour_meals"}).order("date",{foreignTable:"tour_allowances"}).order("date",{foreignTable:"tour_shoppings"})),t!=null&&t.tourCodeLike){const g=`%${t.tourCodeLike.trim()}%`;s=s.ilike("tour_code",g)}else if(t!=null&&t.tourCode){const g=`%${t.tourCode.trim()}%`;s=s.ilike("tour_code",g)}if(t!=null&&t.companyNameLike){const g=`%${t.companyNameLike.trim()}%`;s=s.ilike("company_name_at_booking",g)}if(t!=null&&t.dateLike||t!=null&&t.dateLike2||t!=null&&t.dateRawLike){const g=t!=null&&t.dateLike?`%${t.dateLike.trim()}%`:void 0,y=t!=null&&t.dateLike2?`%${t.dateLike2.trim()}%`:void 0,w=t!=null&&t.dateRawLike?`%${t.dateRawLike.trim()}%`:void 0,v=[];if(g&&v.push(`start_date.ilike.${g}`),y&&v.push(`start_date.ilike.${y}`),w&&v.push(`start_date.ilike.${w}`),v.length===1){const b=g||y||w;s=s.ilike("start_date",b)}else v.length>1&&(s=s.or(v.join(",")))}t!=null&&t.clientName&&(s=s.ilike("client_name",`%${t.clientName}%`)),t!=null&&t.companyId&&(s=s.eq("company_id",t.companyId)),t!=null&&t.guideId&&(s=s.eq("guide_id",t.guideId)),t!=null&&t.startDate&&(s=s.gte("end_date",t.startDate)),t!=null&&t.endDate&&(s=s.lte("start_date",t.endDate)),t!=null&&t.nationalityId&&(s=s.eq("nationality_id",t.nationalityId));const c=typeof(t==null?void 0:t.limit)=="number"?t.limit:void 0,u=typeof(t==null?void 0:t.offset)=="number"?t.offset:void 0;typeof c=="number"&&c>0?typeof u=="number"&&u>=0?s=s.range(u,u+c-1):s=s.limit(c):c===0&&(s=s.limit(0));const{data:d,error:h,count:m}=await s;if(h)throw h;const p=(d||[]).map(g=>{const y=this.mapTour(g);return r?(y.destinations=(g.tour_destinations||[]).map(w=>({name:w.name,price:Number(w.price)||0,date:w.date,guests:w.guests!==null&&w.guests!==void 0?Number(w.guests):void 0})),y.expenses=(g.tour_expenses||[]).map(w=>({name:w.name,price:Number(w.price)||0,date:w.date,guests:w.guests!==null&&w.guests!==void 0?Number(w.guests):void 0})),y.meals=(g.tour_meals||[]).map(w=>({name:w.name,price:Number(w.price)||0,date:w.date,guests:w.guests!==null&&w.guests!==void 0?Number(w.guests):void 0})),y.allowances=(g.tour_allowances||[]).map(w=>({date:w.date,name:w.name,price:Number(w.price)||0,quantity:w.quantity||1})),y.shoppings=(g.tour_shoppings||[]).map(w=>({name:w.name,price:Number(w.price)||0,date:w.date}))):y.allowances=(g.tour_allowances||[]).map(w=>({date:"",name:"",price:Number(w.price)||0,quantity:w.quantity||1})),y});return{tours:r?R8(p):p,total:typeof m=="number"?m:p.length}}async getTour(t){const{data:n,error:r}=await this.supabase.from("tours").select(`
        *,
        tour_destinations(*),
        tour_expenses(*),
        tour_meals(*),
        tour_allowances(*),
        tour_shoppings(*)
      `).eq("id",t).order("date",{foreignTable:"tour_destinations"}).order("date",{foreignTable:"tour_expenses"}).order("date",{foreignTable:"tour_meals"}).order("date",{foreignTable:"tour_allowances"}).order("date",{foreignTable:"tour_shoppings"}).single();if(r||!n)return null;const s=this.mapTour(n),o=n;return s.destinations=(o.tour_destinations||[]).map(i=>({name:i.name,price:Number(i.price)||0,date:i.date,guests:i.guests!==null&&i.guests!==void 0?Number(i.guests):void 0})),s.expenses=(o.tour_expenses||[]).map(i=>({name:i.name,price:Number(i.price)||0,date:i.date,guests:i.guests!==null&&i.guests!==void 0?Number(i.guests):void 0})),s.meals=(o.tour_meals||[]).map(i=>({name:i.name,price:Number(i.price)||0,date:i.date,guests:i.guests!==null&&i.guests!==void 0?Number(i.guests):void 0})),s.allowances=(o.tour_allowances||[]).map(i=>({date:i.date,name:i.name,price:Number(i.price)||0,quantity:i.quantity||1})),s.shoppings=(o.tour_shoppings||[]).map(i=>({name:i.name,price:Number(i.price)||0,date:i.date})),U_(s)}async createTour(t){var c,u,d,h,m,p,N,g;const{data:n}=await this.supabase.from("tours").select("id").ilike("tour_code",t.tourCode).maybeSingle();if(n)throw new Error("A tour with this tour code already exists");const r=(t.adults||0)+(t.children||0),s=Math.max(1,lu(new Date(t.endDate),new Date(t.startDate))+1),{data:o,error:i}=await this.supabase.from("tours").insert({tour_code:t.tourCode,company_id:t.companyRef.id,company_name_at_booking:t.companyRef.nameAtBooking,guide_id:t.guideRef.id,guide_name_at_booking:t.guideRef.nameAtBooking,nationality_id:t.clientNationalityRef.id,nationality_name_at_booking:t.clientNationalityRef.nameAtBooking,client_name:t.clientName,adults:t.adults,children:t.children,total_guests:r,driver_name:t.driverName||"",client_phone:t.clientPhone||"",start_date:t.startDate,end_date:t.endDate,total_days:s,notes:t.notes||"",total_tabs:((c=t.summary)==null?void 0:c.totalTabs)??0,advance_payment:((u=t.summary)==null?void 0:u.advancePayment)??0,total_after_advance:((d=t.summary)==null?void 0:d.totalAfterAdvance)??0,company_tip:((h=t.summary)==null?void 0:h.companyTip)??0,total_after_tip:((m=t.summary)==null?void 0:m.totalAfterTip)??0,collections_for_company:((p=t.summary)==null?void 0:p.collectionsForCompany)??0,total_after_collections:((N=t.summary)==null?void 0:N.totalAfterCollections)??0,final_total:((g=t.summary)==null?void 0:g.finalTotal)??0}).select().single();if(i)throw console.error("Supabase createTour error:",i),i.code==="23505"?new Error("A tour with this tour code already exists"):i.code==="23503"?new Error("Invalid reference to company, guide, or nationality"):i.code==="23502"?new Error("Required field is missing"):i.code==="22001"?new Error("Data value too long"):i.code==="22003"?new Error("Numeric value out of range"):i.code==="22007"?new Error("Invalid date format"):i.code==="42P01"?new Error("Database table not found"):i.code==="42501"?new Error("Permission denied"):(console.error("Supabase error details:",{code:i.code,message:i.message,details:i.details,hint:i.hint,operation:"createTour",tourData:t}),new Error(`Database error: ${i.message} (Code: ${i.code})`));const l=await this.getTour(o.id);try{t.destinations&&t.destinations.length>0&&await Promise.all(t.destinations.map(y=>this.addDestination(l.id,y))),t.expenses&&t.expenses.length>0&&await Promise.all(t.expenses.map(y=>this.addExpense(l.id,y))),t.meals&&t.meals.length>0&&await Promise.all(t.meals.map(y=>this.addMeal(l.id,y))),t.allowances&&t.allowances.length>0&&await Promise.all(t.allowances.map(y=>this.addAllowance(l.id,y))),t.shoppings&&t.shoppings.length>0&&await Promise.all(t.shoppings.map(y=>this.addTourShopping(l.id,y))),t.summary&&await this.updateTour(l.id,{summary:t.summary})}catch(y){console.error("Error adding subcollections:",y)}return l}async updateTour(t,n){const r={};if(n.tourCode!==void 0){const{data:o}=await this.supabase.from("tours").select("id").ilike("tour_code",n.tourCode).neq("id",t).maybeSingle();if(o)throw new Error("A tour with this tour code already exists");r.tour_code=n.tourCode}n.companyRef!==void 0&&(r.company_id=n.companyRef.id,r.company_name_at_booking=n.companyRef.nameAtBooking),n.guideRef!==void 0&&(r.guide_id=n.guideRef.id,r.guide_name_at_booking=n.guideRef.nameAtBooking),n.clientNationalityRef!==void 0&&(r.nationality_id=n.clientNationalityRef.id,r.nationality_name_at_booking=n.clientNationalityRef.nameAtBooking),n.clientName!==void 0&&(r.client_name=n.clientName),n.adults!==void 0&&(r.adults=n.adults),n.children!==void 0&&(r.children=n.children),n.totalGuests!==void 0&&(r.total_guests=n.totalGuests),n.driverName!==void 0&&(r.driver_name=n.driverName),n.clientPhone!==void 0&&(r.client_phone=n.clientPhone),n.startDate!==void 0&&(r.start_date=n.startDate),n.endDate!==void 0&&(r.end_date=n.endDate),n.totalDays!==void 0&&(r.total_days=n.totalDays),n.notes!==void 0&&(r.notes=n.notes),n.summary!==void 0&&(r.total_tabs=n.summary.totalTabs??0,r.advance_payment=n.summary.advancePayment??0,r.total_after_advance=n.summary.totalAfterAdvance??0,r.company_tip=n.summary.companyTip??0,r.total_after_tip=n.summary.totalAfterTip??0,r.collections_for_company=n.summary.collectionsForCompany??0,r.total_after_collections=n.summary.totalAfterCollections??0,r.final_total=n.summary.finalTotal??0);const{error:s}=await this.supabase.from("tours").update(r).eq("id",t);if(s)throw s}async deleteTour(t){console.log("SupabaseStore: Deleting tour with ID:",t);const{error:n}=await this.supabase.from("tours").delete().eq("id",t);if(n)throw console.error("SupabaseStore: Delete tour error:",n),n;console.log("SupabaseStore: Tour deleted successfully")}async deleteAllTours(){const{error:t}=await this.supabase.from("tours").delete().neq("id","00000000-0000-0000-0000-000000000000");if(t)throw t}async duplicateTour(t){const n=await this.getTour(t);if(!n)throw new Error("Tour not found");let r=`${n.tourCode} (Copy)`,s=1;for(;;){const{data:o}=await this.supabase.from("tours").select("id").ilike("tour_code",r).maybeSingle();if(!o)break;s++,r=`${n.tourCode} (Copy ${s})`}return this.createTour({tourCode:r,companyRef:n.companyRef,guideRef:n.guideRef,clientNationalityRef:n.clientNationalityRef,clientName:n.clientName,clientPhone:n.clientPhone,adults:n.adults,children:n.children,driverName:n.driverName,startDate:n.startDate,endDate:n.endDate})}async recalculateTourSummary(t){const n=await this.getTour(t);if(!n)return;const r=n.summary;await this.supabase.from("tours").update({total_tabs:r.totalTabs,advance_payment:r.advancePayment,total_after_advance:r.totalAfterAdvance,company_tip:r.companyTip,total_after_tip:r.totalAfterTip,collections_for_company:r.collectionsForCompany,total_after_collections:r.totalAfterCollections,final_total:r.finalTotal}).eq("id",t)}async getDestinations(t){const{data:n,error:r}=await this.supabase.from("tour_destinations").select("*").eq("tour_id",t).order("date");if(r)throw r;return(n||[]).map(s=>({name:s.name,price:Number(s.price)||0,date:s.date,guests:typeof s.guests=="number"?s.guests:void 0}))}async addDestination(t,n){const{error:r}=await this.supabase.from("tour_destinations").insert({tour_id:t,name:n.name,price:n.price,date:n.date,guests:n.guests??null});if(r)throw console.error("Supabase addDestination error:",r),r.code==="23503"?new Error("Invalid tour reference"):r.code==="23502"?new Error("Required destination field is missing"):r.code==="22001"?new Error("Destination data too long"):r.code==="22003"?new Error("Invalid destination price"):r.code==="22007"?new Error("Invalid destination date format"):new Error(`Failed to add destination: ${r.message}`);await this.recalculateTourSummary(t)}async updateDestination(t,n,r){const{data:s}=await this.supabase.from("tour_destinations").select("id").eq("tour_id",t).order("date");if(s&&s[n]){const{error:o}=await this.supabase.from("tour_destinations").update({name:r.name,price:r.price,date:r.date,guests:r.guests??null}).eq("id",s[n].id);if(o)throw o;await this.recalculateTourSummary(t)}}async removeDestination(t,n){const{data:r}=await this.supabase.from("tour_destinations").select("id").eq("tour_id",t).order("date");if(r&&r[n]){const{error:s}=await this.supabase.from("tour_destinations").delete().eq("id",r[n].id);if(s)throw s;await this.recalculateTourSummary(t)}}async getExpenses(t){const{data:n,error:r}=await this.supabase.from("tour_expenses").select("*").eq("tour_id",t).order("date");if(r)throw r;return(n||[]).map(s=>({name:s.name,price:Number(s.price)||0,date:s.date,guests:s.guests!==null&&s.guests!==void 0?Number(s.guests):void 0}))}async addExpense(t,n){const{error:r}=await this.supabase.from("tour_expenses").insert({tour_id:t,name:n.name,price:n.price,date:n.date,guests:n.guests});if(r)throw r;await this.recalculateTourSummary(t)}async updateExpense(t,n,r){const{data:s}=await this.supabase.from("tour_expenses").select("id").eq("tour_id",t).order("date");if(s&&s[n]){console.log("Updating expense in DB - ID:",s[n].id,"Guests:",r.guests);const o={name:r.name,price:r.price,date:r.date,guests:r.guests};console.log("Update data:",o);const{error:i}=await this.supabase.from("tour_expenses").update(o).eq("id",s[n].id);if(i)throw console.error("Error updating expense:",i),i;console.log("Expense updated successfully in DB"),await this.recalculateTourSummary(t)}}async removeExpense(t,n){const{data:r}=await this.supabase.from("tour_expenses").select("id").eq("tour_id",t).order("date");if(r&&r[n]){const{error:s}=await this.supabase.from("tour_expenses").delete().eq("id",r[n].id);if(s)throw s;await this.recalculateTourSummary(t)}}async getMeals(t){const{data:n,error:r}=await this.supabase.from("tour_meals").select("*").eq("tour_id",t).order("date");if(r)throw r;return(n||[]).map(s=>({name:s.name,price:Number(s.price)||0,date:s.date,guests:s.guests!==null&&s.guests!==void 0?Number(s.guests):void 0}))}async addMeal(t,n){const{error:r}=await this.supabase.from("tour_meals").insert({tour_id:t,name:n.name,price:n.price,date:n.date,guests:n.guests??null});if(r)throw r;await this.recalculateTourSummary(t)}async updateMeal(t,n,r){const{data:s}=await this.supabase.from("tour_meals").select("id").eq("tour_id",t).order("date");if(s&&s[n]){const{error:o}=await this.supabase.from("tour_meals").update({name:r.name,price:r.price,date:r.date,guests:r.guests??null}).eq("id",s[n].id);if(o)throw o;await this.recalculateTourSummary(t)}}async removeMeal(t,n){const{data:r}=await this.supabase.from("tour_meals").select("id").eq("tour_id",t).order("date");if(r&&r[n]){const{error:s}=await this.supabase.from("tour_meals").delete().eq("id",r[n].id);if(s)throw s;await this.recalculateTourSummary(t)}}async getAllowances(t){const{data:n,error:r}=await this.supabase.from("tour_allowances").select("*").eq("tour_id",t).order("date");if(r)throw r;return(n||[]).map(s=>({date:s.date,name:s.name,price:Number(s.price)||0,quantity:s.quantity||1}))}async addAllowance(t,n){const{error:r}=await this.supabase.from("tour_allowances").insert({tour_id:t,date:n.date,name:n.name,price:n.price,quantity:n.quantity||1});if(r)throw r;await this.recalculateTourSummary(t)}async updateAllowance(t,n,r){const{data:s}=await this.supabase.from("tour_allowances").select("id").eq("tour_id",t).order("date");if(s&&s[n]){const{error:o}=await this.supabase.from("tour_allowances").update({date:r.date,name:r.name,price:r.price,quantity:r.quantity||1}).eq("id",s[n].id);if(o)throw o;await this.recalculateTourSummary(t)}}async removeAllowance(t,n){const{data:r}=await this.supabase.from("tour_allowances").select("id").eq("tour_id",t).order("date");if(r&&r[n]){const{error:s}=await this.supabase.from("tour_allowances").delete().eq("id",r[n].id);if(s)throw s;await this.recalculateTourSummary(t)}}async getTourShoppings(t){const{data:n,error:r}=await this.supabase.from("tour_shoppings").select("*").eq("tour_id",t).order("date");if(r)throw r;return(n||[]).map(s=>({name:s.name,price:Number(s.price)||0,date:s.date}))}async addTourShopping(t,n){const{error:r}=await this.supabase.from("tour_shoppings").insert({tour_id:t,name:n.name,price:n.price,date:n.date});if(r)throw r}async updateTourShopping(t,n,r){const{data:s}=await this.supabase.from("tour_shoppings").select("id").eq("tour_id",t).order("date");if(s&&s[n]){const{error:o}=await this.supabase.from("tour_shoppings").update({name:r.name,price:r.price,date:r.date}).eq("id",s[n].id);if(o)throw o}}async removeTourShopping(t,n){const{data:r}=await this.supabase.from("tour_shoppings").select("id").eq("tour_id",t).order("date");if(r&&r[n]){const{error:s}=await this.supabase.from("tour_shoppings").delete().eq("id",r[n].id);if(s)throw s}}async exportData(){const[t,n,r,s,o,i,l,c,u]=await Promise.all([this.listGuides(),this.listCompanies(),this.listNationalities(),this.listProvinces(),this.listTouristDestinations(),this.listShoppings(),this.listExpenseCategories(),this.listDetailedExpenses(),this.listTours(void 0,{includeDetails:!0})]);return{guides:t,companies:n,nationalities:r,provinces:s,touristDestinations:o,shoppings:i,expenseCategories:l,detailedExpenses:c,tours:u.tours}}async importData(t){if(t.guides)for(const n of t.guides){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createGuide(i)}if(t.companies)for(const n of t.companies){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createCompany(i)}if(t.nationalities)for(const n of t.nationalities){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createNationality(i)}if(t.provinces)for(const n of t.provinces){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createProvince(i)}if(t.touristDestinations)for(const n of t.touristDestinations){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createTouristDestination(i)}if(t.shoppings)for(const n of t.shoppings){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createShopping(i)}if(t.expenseCategories)for(const n of t.expenseCategories){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createExpenseCategory(i)}if(t.detailedExpenses)for(const n of t.detailedExpenses){const{id:r,createdAt:s,updatedAt:o,...i}=n;await this.createDetailedExpense(i)}if(t.tours)for(const n of t.tours){const{id:r,createdAt:s,updatedAt:o,destinations:i,expenses:l,meals:c,allowances:u,summary:d,...h}=n,m=await this.createTour(h);i&&i.length>0&&await Promise.all(i.map(p=>this.addDestination(m.id,p))),l&&l.length>0&&await Promise.all(l.map(p=>this.addExpense(m.id,p))),c&&c.length>0&&await Promise.all(c.map(p=>this.addMeal(m.id,p))),u&&u.length>0&&await Promise.all(u.map(p=>this.addAllowance(m.id,p))),d&&await this.updateTour(m.id,{summary:d})}}async clearAllData(){await Promise.all([this.supabase.from("tours").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("detailed_expenses").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("expense_categories").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("shoppings").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("tourist_destinations").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("provinces").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("nationalities").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("companies").delete().neq("id","00000000-0000-0000-0000-000000000000"),this.supabase.from("guides").delete().neq("id","00000000-0000-0000-0000-000000000000")])}}let Km=null;function O8(){return Km||(Km=new M8),Km}const Z=O8();function Ms({value:e,onChange:t,placeholder:n="Search...",debounceMs:r=300}){const[s,o]=f.useState(e);return f.useEffect(()=>{o(e)},[e]),f.useEffect(()=>{const i=setTimeout(()=>{s!==e&&t(s)},r);return()=>clearTimeout(i)},[s,r]),a.jsxs("div",{className:"relative",children:[a.jsx(uy,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(_e,{type:"text",value:s,onChange:i=>o(i.target.value),placeholder:n,className:"pl-9"})]})}function hs(e,t="pin",n=!0){const[r,s]=f.useState(()=>{if(n)return"pin";try{const i=localStorage.getItem(e);if(i==="pin"||i==="dock"||i==="freeze")return i}catch{}return t});f.useEffect(()=>{if(!n)try{localStorage.setItem(e,r)}catch{}},[r,e,n]);const o=f.useMemo(()=>{const i="z-10",l=n?"pin":r;return l==="pin"?`sticky top-0 md:top-16 ${i} bg-background pb-4 space-y-4`:l==="dock"?`sticky bottom-16 md:bottom-auto ${i} bg-background pt-2 pb-2 space-y-3`:`sticky top-0 md:top-16 ${i} bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 pb-4 space-y-4`},[r,n]);return{mode:n?"pin":r,setMode:s,classes:o}}var Tf="Dialog",[z_,W_]=mr(Tf),[I8,fs]=z_(Tf),V_=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,d]=na({prop:r,defaultProp:s??!1,onChange:o,caller:Tf});return a.jsx(I8,{scope:t,triggerRef:l,contentRef:c,contentId:gn(),titleId:gn(),descriptionId:gn(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:i,children:n})};V_.displayName=Tf;var H_="DialogTrigger",q_=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=fs(H_,n),o=Ve(t,s.triggerRef);return a.jsx(Te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Ky(s.open),...r,ref:o,onClick:ue(e.onClick,s.onOpenToggle)})});q_.displayName=H_;var qy="DialogPortal",[F8,G_]=z_(qy,{forceMount:void 0}),K_=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=fs(qy,t);return a.jsx(F8,{scope:t,forceMount:n,children:f.Children.map(r,i=>a.jsx(dn,{present:n||o.open,children:a.jsx(Nl,{asChild:!0,container:s,children:i})}))})};K_.displayName=qy;var Sh="DialogOverlay",Y_=f.forwardRef((e,t)=>{const n=G_(Sh,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=fs(Sh,e.__scopeDialog);return o.modal?a.jsx(dn,{present:r||o.open,children:a.jsx(L8,{...s,ref:t})}):null});Y_.displayName=Sh;var $8=Qa("DialogOverlay.RemoveScroll"),L8=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=fs(Sh,n);return a.jsx(Su,{as:$8,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Te.div,{"data-state":Ky(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Yo="DialogContent",Q_=f.forwardRef((e,t)=>{const n=G_(Yo,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=fs(Yo,e.__scopeDialog);return a.jsx(dn,{present:r||o.open,children:o.modal?a.jsx(B8,{...s,ref:t}):a.jsx(U8,{...s,ref:t})})});Q_.displayName=Yo;var B8=f.forwardRef((e,t)=>{const n=fs(Yo,e.__scopeDialog),r=f.useRef(null),s=Ve(t,n.contentRef,r);return f.useEffect(()=>{const o=r.current;if(o)return vf(o)},[]),a.jsx(J_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ue(e.onFocusOutside,o=>o.preventDefault())})}),U8=f.forwardRef((e,t)=>{const n=fs(Yo,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return a.jsx(J_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),J_=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,l=fs(Yo,n),c=f.useRef(null),u=Ve(t,c);return pf(),a.jsxs(a.Fragment,{children:[a.jsx(Nu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(ni,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ky(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(W8,{titleId:l.titleId}),a.jsx(H8,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Gy="DialogTitle",X_=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=fs(Gy,n);return a.jsx(Te.h2,{id:s.titleId,...r,ref:t})});X_.displayName=Gy;var Z_="DialogDescription",ek=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=fs(Z_,n);return a.jsx(Te.p,{id:s.descriptionId,...r,ref:t})});ek.displayName=Z_;var tk="DialogClose",nk=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=fs(tk,n);return a.jsx(Te.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,()=>s.onOpenChange(!1))})});nk.displayName=tk;function Ky(e){return e?"open":"closed"}var rk="DialogTitleWarning",[z8,sk]=IA(rk,{contentName:Yo,titleName:Gy,docsSlug:"dialog"}),W8=({titleId:e})=>{const t=sk(rk),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},V8="DialogDescriptionWarning",H8=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sk(V8).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Yy=V_,ak=q_,Qy=K_,Pf=Y_,Af=Q_,Jy=X_,Xy=ek,Zy=nk;const Yn=Yy,q8=ak,G8=Qy,ok=f.forwardRef(({className:e,...t},n)=>a.jsx(Pf,{ref:n,className:te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ok.displayName=Pf.displayName;const Dn=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(G8,{children:[a.jsx(ok,{}),a.jsxs(Af,{ref:r,className:te("fixed left-[50%] top-[50%] z-50 grid w-[calc(100%-2rem)] max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 max-h-[90vh] overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...n,children:[t,a.jsxs(Zy,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none h-8 w-8 flex items-center justify-center",children:[a.jsx(Qc,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dn.displayName=Af.displayName;const Rn=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Rn.displayName="DialogHeader";const co=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end sm:gap-0 sm:space-x-2",e),...t});co.displayName="DialogFooter";const Mn=f.forwardRef(({className:e,...t},n)=>a.jsx(Jy,{ref:n,className:te("text-lg font-semibold leading-none tracking-tight",e),...t}));Mn.displayName=Jy.displayName;const Is=f.forwardRef(({className:e,...t},n)=>a.jsx(Xy,{ref:n,className:te("text-sm text-muted-foreground",e),...t}));Is.displayName=Xy.displayName;const ik=f.forwardRef(({className:e,...t},n)=>a.jsx("textarea",{className:te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));ik.displayName="Textarea";function lk(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Df="Checkbox",[K8,H9]=mr(Df),[Y8,ex]=K8(Df);function Q8(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:o,form:i,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,p]=na({prop:n,defaultProp:s??!1,onChange:c,caller:Df}),[N,g]=f.useState(null),[y,w]=f.useState(null),v=f.useRef(!1),b=N?!!i||!!N.closest("form"):!0,x={checked:m,disabled:o,setChecked:p,control:N,setControl:g,name:l,form:i,value:d,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Ga(s)?!1:s,isFormControl:b,bubbleInput:y,setBubbleInput:w};return a.jsx(Y8,{scope:t,...x,children:J8(h)?h(x):r})}var ck="CheckboxTrigger",uk=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:o,value:i,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:N}=ex(ck,e),g=Ve(s,d),y=f.useRef(c);return f.useEffect(()=>{const w=o==null?void 0:o.form;if(w){const v=()=>h(y.current);return w.addEventListener("reset",v),()=>w.removeEventListener("reset",v)}},[o,h]),a.jsx(Te.button,{type:"button",role:"checkbox","aria-checked":Ga(c)?"mixed":c,"aria-required":u,"data-state":pk(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:ue(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:ue(n,w=>{h(v=>Ga(v)?!0:!v),N&&p&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})})});uk.displayName=ck;var tx=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return a.jsx(Q8,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:l,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>a.jsxs(a.Fragment,{children:[a.jsx(uk,{...h,ref:t,__scopeCheckbox:n}),m&&a.jsx(mk,{__scopeCheckbox:n})]})})});tx.displayName=Df;var dk="CheckboxIndicator",hk=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=ex(dk,n);return a.jsx(dn,{present:r||Ga(o.checked)||o.checked===!0,children:a.jsx(Te.span,{"data-state":pk(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});hk.displayName=dk;var fk="CheckboxBubbleInput",mk=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:i,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:p}=ex(fk,e),N=Ve(n,p),g=lk(o),y=lC(r);f.useEffect(()=>{const v=m;if(!v)return;const b=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(b,"checked").set,k=!s.current;if(g!==o&&_){const E=new Event("click",{bubbles:k});v.indeterminate=Ga(o),_.call(v,Ga(o)?!1:o),v.dispatchEvent(E)}},[m,g,o,s]);const w=f.useRef(Ga(o)?!1:o);return a.jsx(Te.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:N,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mk.displayName=fk;function J8(e){return typeof e=="function"}function Ga(e){return e==="indeterminate"}function pk(e){return Ga(e)?"indeterminate":e?"checked":"unchecked"}const gk=f.forwardRef(({className:e,...t},n)=>a.jsx(tx,{ref:n,className:te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(hk,{className:te("flex items-center justify-center text-current"),children:a.jsx(Tt,{className:"h-4 w-4"})})}));gk.displayName=tx.displayName;var X8="Label",vk=f.forwardRef((e,t)=>a.jsx(Te.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));vk.displayName=X8;var yk=vk;const Z8=nf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=f.forwardRef(({className:e,...t},n)=>a.jsx(yk,{ref:n,className:te(Z8(),e),...t}));Ce.displayName=yk.displayName;const Du=f.forwardRef(({storageKey:e,onValueChange:t,value:n,onChange:r,className:s,...o},i)=>{const[l,c]=f.useState(n||""),[u,d]=f.useState(!1),h=f.useRef(),m=`${e}-save-enabled`;f.useEffect(()=>{const y=localStorage.getItem(m)==="true";if(d(y),y){const w=localStorage.getItem(e);w!==null&&(c(w),t==null||t(w))}},[e,m,t]),f.useEffect(()=>{n!==void 0&&c(n)},[n]);const p=f.useCallback(y=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{u&&localStorage.setItem(e,y)},300)},[u,e]),N=y=>{const w=y.target.value;c(w),r==null||r(y),t==null||t(w),p(w)},g=y=>{d(y),localStorage.setItem(m,String(y)),y?localStorage.setItem(e,l):localStorage.removeItem(e)};return f.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ik,{ref:i,value:l,onChange:N,className:s,...o}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gk,{id:`${e}-checkbox`,checked:u,onCheckedChange:g}),a.jsx(Ce,{htmlFor:`${e}-checkbox`,className:"cursor-pointer text-sm text-muted-foreground",children:"Save to browser (remember data)"})]})]})});Du.displayName="TextareaWithSave";const uo=({open:e,onOpenChange:t,onImport:n,title:r,description:s,placeholder:o=`Enter items (one per line, format: name,price)
Example:
Ha Long Bay,1500000
Sapa Trek,2000000`,parseItem:i})=>{const l=`bulk-import-${r.toLowerCase().replace(/\s+/g,"-")}`,[c,u]=f.useState(""),[d,h]=f.useState(!1),m=w=>{var x;const v=(x=w.target.files)==null?void 0:x[0];if(!v)return;if(!v.name.endsWith(".txt")&&!v.name.endsWith(".csv")){z.error("Please upload a TXT or CSV file");return}const b=new FileReader;b.onload=_=>{var E;const k=(E=_.target)==null?void 0:E.result;u(k)},b.onerror=()=>{z.error("Failed to read file")},b.readAsText(v)},p=w=>{if(w.length>=2){const v=w[0],b=parseFloat(w[1].replace(/[^\d.-]/g,""));if(v&&!isNaN(b))return{name:v,price:b}}return null},N=w=>{const v=w.split(`
`).filter(_=>_.trim()),b=[],x=i||p;for(const _ of v){const k=_.split(",").map(D=>D.trim()),E=x(k);E!==null&&b.push(E)}return b},g=async()=>{if(!c.trim()){z.error("Please enter data or upload a file");return}h(!0);try{const w=N(c);if(w.length===0){z.error("No valid items found. Use format: name,price (one per line)");return}await n(w),u(""),t(!1),z.success(`Successfully imported ${w.length} item${w.length>1?"s":""}`)}catch(w){console.error("Import error:",w);const v=w instanceof Error?w.message:"Import failed";z.error(v)}finally{h(!1)}},y=()=>{u(""),t(!1)};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsxs(Dn,{className:"w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:r}),a.jsx(Is,{children:s})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs(Ce,{htmlFor:"import-file",className:"flex items-center gap-2 cursor-pointer",children:[a.jsx($D,{className:"h-4 w-4"}),"Upload Text/CSV File"]}),a.jsx("input",{id:"import-file",type:"file",accept:".txt,.csv",onChange:m,className:"mt-2"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or paste text"})})]}),a.jsxs("div",{children:[a.jsx(Ce,{htmlFor:"import-textarea",children:"Import Data"}),a.jsx(Du,{id:"import-textarea",storageKey:l,value:c,onValueChange:u,placeholder:o,className:"min-h-[300px] font-mono text-sm"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-medium",children:"Format:"}),a.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[a.jsx("li",{children:"One item per line"}),a.jsxs("li",{children:["Format: ",a.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"name,price"})]}),a.jsx("li",{children:"Price can include currency symbols (they will be removed)"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{variant:"outline",onClick:y,children:"Cancel"}),a.jsx(V,{onClick:g,disabled:d,children:d?"Importing...":"Import"})]})]})]})})};function xk({open:e,onOpenChange:t,guide:n,onSubmit:r}){const[s,o]=f.useState({name:(n==null?void 0:n.name)||"",phone:(n==null?void 0:n.phone)||"",note:(n==null?void 0:n.note)||""}),[i,l]=f.useState(!1),[c,u]=f.useState({}),d=async h=>{h.preventDefault();const m={},p=[];if(s.name.trim()||(m.name=!0,p.push("Name")),p.length>0){u(m),z.error(`Please fill in all required fields: ${p.join(", ")}`);return}u({}),l(!0);try{await r(s),t(!1),o({name:"",phone:"",note:""})}catch{}finally{l(!1)}};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsx(Dn,{className:"sm:max-w-[500px]",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:n?"Edit Guide":"Add New Guide"}),a.jsx(Is,{children:n?"Update guide information":"Create a new guide profile"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Name *"}),a.jsx(_e,{id:"name",value:s.name,onChange:h=>{o({...s,name:h.target.value}),c.name&&u({...c,name:!1})},placeholder:"Full name",className:c.name?"border-destructive":"",required:!0})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"phone",children:"Phone"}),a.jsx(_e,{id:"phone",type:"tel",value:s.phone,onChange:h=>o({...s,phone:h.target.value}),placeholder:"+84 XXX XXX XXX"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"note",children:"Note"}),a.jsx(Du,{id:"note",storageKey:n?`guide-note-edit-${n.id}`:"guide-note-create",value:s.note,onValueChange:h=>o({...s,note:h}),placeholder:"Languages, specialties, etc.",rows:3})]})]}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})})})}const eB=()=>{const e=tn(),[t,n]=f.useState(""),[r,s]=f.useState(!1),[o,i]=f.useState(),[l,c]=f.useState(!1),[u,d]=f.useState(""),[h,m]=f.useState(""),p={search:t},{data:N=[],isLoading:g}=Xe({queryKey:["guides",p],queryFn:()=>Z.listGuides(p)}),y=xe({mutationFn:A=>Z.createGuide(A),onSuccess:()=>{e.invalidateQueries({queryKey:["guides"]}),z.success("Guide created successfully")},onError:A=>{z.error(A.message||"Failed to create guide")}}),w=xe({mutationFn:({id:A,data:F})=>Z.updateGuide(A,F),onSuccess:()=>{e.invalidateQueries({queryKey:["guides"]}),z.success("Guide updated successfully")},onError:A=>{z.error(A.message||"Failed to update guide")}}),v=xe({mutationFn:A=>Z.duplicateGuide(A),onSuccess:()=>{e.invalidateQueries({queryKey:["guides"]}),z.success("Guide duplicated successfully")}}),b=xe({mutationFn:A=>Z.deleteGuide(A),onSuccess:()=>{e.invalidateQueries({queryKey:["guides"]}),z.success("Guide deleted successfully")}}),x=xe({mutationFn:()=>Z.deleteAllGuides(),onSuccess:()=>{e.invalidateQueries({queryKey:["guides"]}),z.success("All guides deleted successfully")},onError:A=>{z.error(A.message||"Failed to delete all guides")}}),_=xe({mutationFn:A=>Z.bulkCreateGuides(A),onSuccess:()=>{e.invalidateQueries({queryKey:["guides"]}),z.success("Guides imported successfully")},onError:A=>{z.error(A.message||"Failed to import guides")}}),k=async A=>{await y.mutateAsync(A)},E=async A=>{o&&await w.mutateAsync({id:o.id,data:A})},D=A=>{i(A),s(!0)},$=()=>{s(!1),i(void 0)},O=async()=>{confirm("Are you sure you want to delete all guides? This action cannot be undone.")&&await x.mutateAsync()},Y=async A=>{await _.mutateAsync(A)},T=()=>{if(M.length===0){z.error("No guides to export");return}const A=M.map(S=>{const P=[S.name];return S.phone&&P.push(S.phone),S.note&&P.push(S.note),P.join(",")}).join(`
`),F=new Blob([A],{type:"text/plain"}),C=URL.createObjectURL(F),j=document.createElement("a");j.href=C,j.download=`guides-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(C),z.success(`Exported ${M.length} guides`)},M=f.useMemo(()=>N.filter(A=>{const F=!u||A.name.toLowerCase().includes(u.toLowerCase()),C=!h||A.phone&&A.phone.toLowerCase().includes(h.toLowerCase());return F&&C}),[N,u,h]),{classes:U}=hs("guides.headerMode");return a.jsx(Nr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:U,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Guides"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your tour guides"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{onClick:T,variant:"outline",className:"gap-2",children:[a.jsx(ia,{className:"h-4 w-4"}),"Export TXT"]}),a.jsxs(V,{onClick:()=>c(!0),variant:"outline",className:"gap-2",children:[a.jsx(ds,{className:"h-4 w-4"}),"Import"]}),a.jsxs(V,{onClick:O,variant:"outline",className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>D(),className:"gap-2",children:[a.jsx(It,{className:"h-4 w-4"}),"Add Guide"]})]})]})}),a.jsxs(mt,{className:"p-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:t,onChange:n,placeholder:"Search guides..."})})}),g?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):N.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No guides found. Create your first guide!"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-md border",children:a.jsxs(or,{children:[a.jsxs(ir,{children:[a.jsxs(nt,{children:[a.jsx(se,{children:"Name"}),a.jsx(se,{children:"Phone"}),a.jsx(se,{children:"Note"}),a.jsx(se,{className:"w-[70px]"})]}),a.jsxs(nt,{children:[a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by name...",value:u,onChange:A=>d(A.target.value),className:"h-8"})}),a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by phone...",value:h,onChange:A=>m(A.target.value),className:"h-8"})}),a.jsx(se,{}),a.jsx(se,{})]})]}),a.jsx(lr,{children:M.map(A=>a.jsxs(nt,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>D(A),children:[a.jsx(oe,{className:"font-medium",children:A.name}),a.jsx(oe,{children:A.phone||"-"}),a.jsx(oe,{className:"max-w-xs truncate",children:A.note||"-"}),a.jsx(oe,{children:a.jsxs("div",{className:"flex items-center gap-1",onClick:F=>F.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>D(A),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>v.mutate(A.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this guide?")&&b.mutate(A.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},A.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:M.map(A=>a.jsxs(mt,{className:"p-4 cursor-pointer hover:bg-accent/50",onClick:()=>D(A),children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:A.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:A.phone||"No phone"})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:F=>F.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>D(A),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>v.mutate(A.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this guide?")&&b.mutate(A.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"space-y-2",children:A.note&&a.jsx("p",{className:"text-sm text-muted-foreground",children:A.note})})]},A.id))})]})]}),a.jsx(xk,{open:r,onOpenChange:$,guide:o,onSubmit:o?E:k}),a.jsx(uo,{open:l,onOpenChange:c,onImport:Y,title:"Import Guides",description:"Import multiple guides at once. Format: Guide Name[,Phone,Note] (phone and note are optional)",placeholder:"Enter guides (one per line, format: Guide Name[,Phone,Note])\\nExample:\\nJohn Smith\\nJane Doe,0987654321,Speaks English and French\\nBob Wilson,0111222333",parseItem:A=>{var F,C;return A.length>=1&&A[0].trim()?{name:A[0].trim(),phone:((F=A[1])==null?void 0:F.trim())||void 0,note:((C=A[2])==null?void 0:C.trim())||void 0}:null}})]})})};function wk({open:e,onOpenChange:t,company:n,onSubmit:r}){const[s,o]=f.useState({name:(n==null?void 0:n.name)||"",contactName:(n==null?void 0:n.contactName)||"",phone:(n==null?void 0:n.phone)||"",email:(n==null?void 0:n.email)||"",note:(n==null?void 0:n.note)||""}),[i,l]=f.useState(!1),[c,u]=f.useState({}),d=async h=>{h.preventDefault();const m={},p=[];if(s.name.trim()||(m.name=!0,p.push("Company Name")),p.length>0){u(m),z.error(`Please fill in all required fields: ${p.join(", ")}`);return}u({}),l(!0);try{await r(s),t(!1),o({name:"",contactName:"",phone:"",email:"",note:""})}catch{}finally{l(!1)}};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsx(Dn,{className:"sm:max-w-[500px]",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:n?"Edit Company":"Add New Company"}),a.jsx(Is,{children:n?"Update company information":"Create a new company profile"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Company Name *"}),a.jsx(_e,{id:"name",value:s.name,onChange:h=>{o({...s,name:h.target.value}),c.name&&u({...c,name:!1})},placeholder:"Company name",className:c.name?"border-destructive":"",required:!0})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"contactName",children:"Contact Person"}),a.jsx(_e,{id:"contactName",value:s.contactName,onChange:h=>o({...s,contactName:h.target.value}),placeholder:"Mr./Ms. Name"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"phone",children:"Phone"}),a.jsx(_e,{id:"phone",type:"tel",value:s.phone,onChange:h=>o({...s,phone:h.target.value}),placeholder:"+84 XXX XXX XXX"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"email",children:"Email"}),a.jsx(_e,{id:"email",type:"email",value:s.email,onChange:h=>o({...s,email:h.target.value}),placeholder:"contact@company.com"})]})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"note",children:"Note"}),a.jsx(Du,{id:"note",storageKey:n?`company-note-edit-${n.id}`:"company-note-create",value:s.note,onValueChange:h=>o({...s,note:h}),placeholder:"Additional information",rows:3})]})]}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})})})}const tB=()=>{const e=tn(),[t,n]=f.useState(""),[r,s]=f.useState(!1),[o,i]=f.useState(),[l,c]=f.useState(!1),[u,d]=f.useState(""),[h,m]=f.useState(""),[p,N]=f.useState(""),g={search:t},{data:y=[],isLoading:w}=Xe({queryKey:["companies",g],queryFn:()=>Z.listCompanies(g)}),v=xe({mutationFn:j=>Z.createCompany(j),onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]}),z.success("Company created successfully")},onError:j=>{z.error(j.message||"Failed to create company")}}),b=xe({mutationFn:({id:j,data:S})=>Z.updateCompany(j,S),onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]}),z.success("Company updated successfully")},onError:j=>{z.error(j.message||"Failed to update company")}}),x=xe({mutationFn:j=>Z.duplicateCompany(j),onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]}),z.success("Company duplicated successfully")}}),_=xe({mutationFn:j=>Z.deleteCompany(j),onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]}),z.success("Company deleted successfully")}}),k=xe({mutationFn:()=>Z.deleteAllCompanies(),onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]}),z.success("All companies deleted successfully")},onError:j=>{z.error(j.message||"Failed to delete all companies")}}),E=xe({mutationFn:j=>Z.bulkCreateCompanies(j),onSuccess:j=>{e.invalidateQueries({queryKey:["companies"]}),z.success(`Successfully imported ${j} companies`)},onError:j=>{z.error(j.message||"Failed to import companies")}}),D=async j=>{await v.mutateAsync(j)},$=async j=>{o&&await b.mutateAsync({id:o.id,data:j})},O=j=>{i(j),s(!0)},Y=()=>{s(!1),i(void 0)},T=async()=>{confirm("Are you sure you want to delete ALL companies? This action cannot be undone.")&&await k.mutateAsync()},M=async j=>{await E.mutateAsync(j)},U=j=>{if(j.length>=1){const S=j[0],P=j[1]||"",H=j[2]||"",R=j[3]||"";if(S)return{name:S,contactName:P,phone:H,email:R}}return null},A=()=>{if(F.length===0){z.error("No companies to export");return}const j=F.map(R=>{const L=[R.name];return R.contactName&&L.push(R.contactName),R.phone&&L.push(R.phone),R.email&&L.push(R.email),L.join(",")}).join(`
`),S=new Blob([j],{type:"text/plain"}),P=URL.createObjectURL(S),H=document.createElement("a");H.href=P,H.download=`companies-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(P),z.success(`Exported ${F.length} companies`)},F=f.useMemo(()=>y.filter(j=>{var R,L;const S=!u||j.name.toLowerCase().includes(u.toLowerCase()),P=!h||(((R=j.contactName)==null?void 0:R.toLowerCase().includes(h.toLowerCase()))??!1),H=!p||(((L=j.phone)==null?void 0:L.toLowerCase().includes(p.toLowerCase()))??!1);return S&&P&&H}),[y,u,h,p]),{classes:C}=hs("companies.headerMode");return a.jsx(Nr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:C,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Companies"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage partner travel companies"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{onClick:A,variant:"outline",className:"gap-2",children:[a.jsx(ia,{className:"h-4 w-4"}),"Export TXT"]}),a.jsxs(V,{onClick:()=>c(!0),variant:"outline",className:"gap-2",children:[a.jsx(ds,{className:"h-4 w-4"}),"Import"]}),a.jsxs(V,{onClick:T,variant:"outline",className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>O(),className:"gap-2",children:[a.jsx(It,{className:"h-4 w-4"}),"Add Company"]})]})]})}),a.jsxs(mt,{className:"p-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:t,onChange:n,placeholder:"Search companies..."})})}),w?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):y.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No companies found. Create your first company!"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-md border",children:a.jsxs(or,{children:[a.jsxs(ir,{children:[a.jsxs(nt,{children:[a.jsx(se,{children:"Company Name"}),a.jsx(se,{children:"Contact"}),a.jsx(se,{children:"Phone"}),a.jsx(se,{children:"Email"}),a.jsx(se,{className:"w-[70px]"})]}),a.jsxs(nt,{children:[a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by name...",value:u,onChange:j=>d(j.target.value),className:"h-8"})}),a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by contact...",value:h,onChange:j=>m(j.target.value),className:"h-8"})}),a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by phone...",value:p,onChange:j=>N(j.target.value),className:"h-8"})}),a.jsx(se,{}),a.jsx(se,{})]})]}),a.jsx(lr,{children:F.map(j=>a.jsxs(nt,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>O(j),children:[a.jsx(oe,{className:"font-medium",children:j.name}),a.jsx(oe,{children:j.contactName||"-"}),a.jsx(oe,{children:j.phone||"-"}),a.jsx(oe,{children:j.email||"-"}),a.jsx(oe,{children:a.jsxs("div",{className:"flex items-center gap-1",onClick:S=>S.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(j),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x.mutate(j.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this company?")&&_.mutate(j.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},j.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:F.map(j=>a.jsxs(mt,{className:"p-4 cursor-pointer hover:bg-accent/50",onClick:()=>O(j),children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:j.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:j.contactName||"No contact"})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:S=>S.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(j),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x.mutate(j.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this company?")&&_.mutate(j.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[j.phone&&a.jsx("p",{className:"text-muted-foreground",children:j.phone}),j.email&&a.jsx("p",{className:"text-muted-foreground",children:j.email})]})]},j.id))})]})]}),a.jsx(wk,{open:r,onOpenChange:Y,company:o,onSubmit:o?$:D}),a.jsx(uo,{open:l,onOpenChange:c,onImport:M,parseItem:U,title:"Import Companies",description:"Import multiple companies at once. Format: Company Name[,Contact,Phone,Email] (contact, phone, email are optional)",placeholder:`Enter companies (one per line, format: Company Name[,Contact,Phone,Email])
Example:
Company A
ABC Travel,John Doe,123-456-7890,john@abc.com
XYZ Tours,Jane Smith,098-765-4321`})]})})};function bk({open:e,onOpenChange:t,nationality:n,onSubmit:r}){const[s,o]=f.useState({name:(n==null?void 0:n.name)||"",iso2:(n==null?void 0:n.iso2)||"",emoji:(n==null?void 0:n.emoji)||""}),[i,l]=f.useState(!1),[c,u]=f.useState({});f.useEffect(()=>{o(n?{name:n.name||"",iso2:n.iso2||"",emoji:n.emoji||""}:{name:"",iso2:"",emoji:""}),u({})},[n,e]);const d=async h=>{h.preventDefault();const m={},p=[];if(s.name.trim()||(m.name=!0,p.push("Country Name")),p.length>0){u(m),z.error(`Please fill in all required fields: ${p.join(", ")}`);return}u({}),l(!0);try{await r(s),t(!1),o({name:"",iso2:"",emoji:""})}catch{}finally{l(!1)}};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsx(Dn,{className:"sm:max-w-[500px]",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:n?"Edit Nationality":"Add New Nationality"}),a.jsx(Is,{children:n?"Update nationality information":"Create a new nationality"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Country Name *"}),a.jsx(_e,{id:"name",value:s.name,onChange:h=>{o({...s,name:h.target.value}),c.name&&u({...c,name:!1})},placeholder:"Country name",className:c.name?"border-destructive":"",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"iso2",children:"ISO Code"}),a.jsx(_e,{id:"iso2",value:s.iso2,onChange:h=>{o({...s,iso2:h.target.value.toUpperCase()}),c.iso2&&u({...c,iso2:!1})},placeholder:"VN (optional)",className:c.iso2?"border-destructive":"",maxLength:2})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ce,{htmlFor:"emoji",children:"Flag Emoji"}),a.jsx(_e,{id:"emoji",value:s.emoji,onChange:h=>{o({...s,emoji:h.target.value}),c.emoji&&u({...c,emoji:!1})},placeholder:" (optional)",className:c.emoji?"border-destructive":""})]})]})]}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})})})}const nB=()=>{const e=tn(),[t,n]=f.useState(""),[r,s]=f.useState(!1),[o,i]=f.useState(!1),[l,c]=f.useState(),[u,d]=f.useState(""),[h,m]=f.useState(""),p={search:t},{data:N=[],isLoading:g}=Xe({queryKey:["nationalities",p],queryFn:()=>Z.listNationalities(p)}),y=xe({mutationFn:A=>Z.createNationality(A),onSuccess:()=>{e.invalidateQueries({queryKey:["nationalities"]}),z.success("Nationality created successfully")},onError:A=>{z.error(A.message||"Failed to create nationality")}}),w=xe({mutationFn:({id:A,data:F})=>Z.updateNationality(A,F),onSuccess:()=>{e.invalidateQueries({queryKey:["nationalities"]}),z.success("Nationality updated successfully")},onError:A=>{z.error(A.message||"Failed to update nationality")}}),v=xe({mutationFn:A=>Z.duplicateNationality(A),onSuccess:()=>{e.invalidateQueries({queryKey:["nationalities"]}),z.success("Nationality duplicated successfully")}}),b=xe({mutationFn:A=>Z.deleteNationality(A),onSuccess:()=>{e.invalidateQueries({queryKey:["nationalities"]}),z.success("Nationality deleted successfully")}}),x=xe({mutationFn:()=>Z.deleteAllNationalities(),onSuccess:()=>{e.invalidateQueries({queryKey:["nationalities"]}),z.success("All nationalities deleted successfully")},onError:A=>{z.error(A.message||"Failed to delete all nationalities")}}),_=xe({mutationFn:A=>Z.bulkCreateNationalities(A),onSuccess:()=>{e.invalidateQueries({queryKey:["nationalities"]}),z.success("Nationalities imported successfully")},onError:A=>{z.error(A.message||"Failed to import nationalities")}}),k=async A=>{await y.mutateAsync(A)},E=async A=>{l&&await w.mutateAsync({id:l.id,data:A})},D=A=>{c(A),s(!0)},$=()=>{s(!1),c(void 0)},O=async()=>{confirm("Are you sure you want to delete ALL nationalities? This action cannot be undone.")&&await x.mutateAsync()},Y=async A=>{await _.mutateAsync(A)},T=()=>{if(M.length===0){z.error("No nationalities to export");return}const A=M.map(S=>{const P=[S.name];return S.iso2&&P.push(S.iso2),S.emoji&&P.push(S.emoji),P.join(",")}).join(`
`),F=new Blob([A],{type:"text/plain"}),C=URL.createObjectURL(F),j=document.createElement("a");j.href=C,j.download=`nationalities-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(C),z.success(`Exported ${M.length} nationalities`)},M=f.useMemo(()=>N.filter(A=>{var j;const F=u===""||A.name.toLowerCase().includes(u.toLowerCase()),C=h===""||(((j=A.iso2)==null?void 0:j.toLowerCase())||"").includes(h.toLowerCase());return F&&C}),[N,u,h]),{classes:U}=hs("nationalities.headerMode");return a.jsx(Nr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:U,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Nationalities"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage client nationalities"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{onClick:T,variant:"outline",className:"gap-2",children:[a.jsx(ia,{className:"h-4 w-4"}),"Export TXT"]}),a.jsxs(V,{onClick:()=>i(!0),variant:"outline",className:"gap-2",children:[a.jsx(ds,{className:"h-4 w-4"}),"Import"]}),a.jsxs(V,{onClick:O,variant:"outline",className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>D(),className:"gap-2",children:[a.jsx(It,{className:"h-4 w-4"}),"Add Nationality"]})]})]})}),a.jsxs(mt,{className:"p-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:t,onChange:n,placeholder:"Search nationalities..."})})}),g?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):N.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No nationalities found. Create your first nationality!"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-md border",children:a.jsxs(or,{children:[a.jsxs(ir,{children:[a.jsxs(nt,{children:[a.jsx(se,{children:"Country"}),a.jsx(se,{children:"ISO Code"}),a.jsx(se,{children:"Flag"}),a.jsx(se,{className:"w-[70px]"})]}),a.jsxs(nt,{children:[a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by name...",value:u,onChange:A=>d(A.target.value),className:"h-8"})}),a.jsx(se,{children:a.jsx(_e,{placeholder:"Filter by ISO2...",value:h,onChange:A=>m(A.target.value),className:"h-8"})}),a.jsx(se,{}),a.jsx(se,{className:"w-[70px]"})]})]}),a.jsx(lr,{children:M.map(A=>a.jsxs(nt,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>D(A),children:[a.jsx(oe,{className:"font-medium",children:A.name}),a.jsx(oe,{children:A.iso2||"-"}),a.jsx(oe,{children:a.jsx("span",{className:"text-2xl",children:A.emoji||"-"})}),a.jsx(oe,{children:a.jsxs("div",{className:"flex items-center gap-1",onClick:F=>F.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>D(A),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>v.mutate(A.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this nationality?")&&b.mutate(A.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},A.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:M.map(A=>a.jsx(mt,{className:"p-4 cursor-pointer hover:bg-accent/50",onClick:()=>D(A),children:a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("span",{className:"text-3xl",children:A.emoji||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:A.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:A.iso2||"No ISO code"})]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:F=>F.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>D(A),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>v.mutate(A.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this nationality?")&&b.mutate(A.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})},A.id))})]})]}),a.jsx(bk,{open:r,onOpenChange:$,nationality:l,onSubmit:l?E:k}),a.jsx(uo,{open:o,onOpenChange:i,onImport:Y,title:"Import Nationalities",description:"Upload or paste nationality data in CSV format",placeholder:`Enter nationalities (one per line, format: Country Name[,ISO2,Emoji])
Example:
United States
United Kingdom,GB,
France,FR,
Germany,DE`,parseItem:A=>{var F,C;return A.length>=1&&A[0].trim()?{name:A[0].trim(),iso2:((F=A[1])==null?void 0:F.trim())||void 0,emoji:((C=A[2])==null?void 0:C.trim())||void 0}:null}})]})})};var Ru=e=>e.type==="checkbox",Eo=e=>e instanceof Date,Un=e=>e==null;const jk=e=>typeof e=="object";var Bt=e=>!Un(e)&&!Array.isArray(e)&&jk(e)&&!Eo(e),rB=e=>Bt(e)&&e.target?Ru(e.target)?e.target.checked:e.target.value:e,sB=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,aB=(e,t)=>e.has(sB(t)),oB=e=>{const t=e.constructor&&e.constructor.prototype;return Bt(t)&&t.hasOwnProperty("isPrototypeOf")},nx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function sn(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(nx&&(e instanceof Blob||r))&&(n||Bt(e)))if(t=n?[]:{},!n&&!oB(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=sn(e[s]));else return e;return t}var Rf=e=>/^\w*$/.test(e),qt=e=>e===void 0,rx=e=>Array.isArray(e)?e.filter(Boolean):[],sx=e=>rx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ae=(e,t,n)=>{if(!t||!Bt(e))return n;const r=(Rf(t)?[t]:sx(t)).reduce((s,o)=>Un(s)?s:s[o],e);return qt(r)||r===e?qt(e[t])?n:e[t]:r},xs=e=>typeof e=="boolean",_t=(e,t,n)=>{let r=-1;const s=Rf(t)?[t]:sx(t),o=s.length,i=o-1;for(;++r<o;){const l=s[r];let c=n;if(r!==i){const u=e[l];c=Bt(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const ib={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ls={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iB=re.createContext(null);iB.displayName="HookFormContext";var lB=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const i=o;return t._proxyFormState[i]!==Zr.all&&(t._proxyFormState[i]=!r||Zr.all),e[i]}});return s};const cB=typeof window<"u"?re.useLayoutEffect:re.useEffect;var _s=e=>typeof e=="string",uB=(e,t,n,r,s)=>_s(e)?(r&&t.watch.add(e),Ae(n,e,s)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),Ae(n,o))):(r&&(t.watchAll=!0),n),qg=e=>Un(e)||!jk(e);function Na(e,t,n=new WeakSet){if(qg(e)||qg(t))return e===t;if(Eo(e)&&Eo(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of r){const i=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const l=t[o];if(Eo(i)&&Eo(l)||Bt(i)&&Bt(l)||Array.isArray(i)&&Array.isArray(l)?!Na(i,l,n):i!==l)return!1}}return!0}var dB=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Cc=e=>Array.isArray(e)?e:[e],lb=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}},er=e=>Bt(e)&&!Object.keys(e).length,ax=e=>e.type==="file",es=e=>typeof e=="function",_h=e=>{if(!nx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Nk=e=>e.type==="select-multiple",ox=e=>e.type==="radio",hB=e=>ox(e)||Ru(e),Ym=e=>_h(e)&&e.isConnected;function fB(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=qt(e)?r++:e[t[r++]];return e}function mB(e){for(const t in e)if(e.hasOwnProperty(t)&&!qt(e[t]))return!1;return!0}function Ut(e,t){const n=Array.isArray(t)?t:Rf(t)?[t]:sx(t),r=n.length===1?e:fB(e,n),s=n.length-1,o=n[s];return r&&delete r[o],s!==0&&(Bt(r)&&er(r)||Array.isArray(r)&&mB(r))&&Ut(e,n.slice(0,-1)),e}var Ck=e=>{for(const t in e)if(es(e[t]))return!0;return!1};function kh(e,t={}){const n=Array.isArray(e);if(Bt(e)||n)for(const r in e)Array.isArray(e[r])||Bt(e[r])&&!Ck(e[r])?(t[r]=Array.isArray(e[r])?[]:{},kh(e[r],t[r])):Un(e[r])||(t[r]=!0);return t}function Sk(e,t,n){const r=Array.isArray(e);if(Bt(e)||r)for(const s in e)Array.isArray(e[s])||Bt(e[s])&&!Ck(e[s])?qt(t)||qg(n[s])?n[s]=Array.isArray(e[s])?kh(e[s],[]):{...kh(e[s])}:Sk(e[s],Un(t)?{}:t[s],n[s]):n[s]=!Na(e[s],t[s]);return n}var ql=(e,t)=>Sk(e,t,kh(t));const cb={value:!1,isValid:!1},ub={value:!0,isValid:!0};var _k=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!qt(e[0].attributes.value)?qt(e[0].value)||e[0].value===""?ub:{value:e[0].value,isValid:!0}:ub:cb}return cb},kk=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>qt(e)?e:t?e===""?NaN:e&&+e:n&&_s(e)?new Date(e):r?r(e):e;const db={isValid:!1,value:null};var Ek=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,db):db;function hb(e){const t=e.ref;return ax(t)?t.files:ox(t)?Ek(e.refs).value:Nk(t)?[...t.selectedOptions].map(({value:n})=>n):Ru(t)?_k(e.refs).value:kk(qt(t.value)?e.ref.value:t.value,e)}var pB=(e,t,n,r)=>{const s={};for(const o of e){const i=Ae(t,o);i&&_t(s,o,i._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},Eh=e=>e instanceof RegExp,Gl=e=>qt(e)?e:Eh(e)?e.source:Bt(e)?Eh(e.value)?e.value.source:e.value:e,fb=e=>({isOnSubmit:!e||e===Zr.onSubmit,isOnBlur:e===Zr.onBlur,isOnChange:e===Zr.onChange,isOnAll:e===Zr.all,isOnTouch:e===Zr.onTouched});const mb="AsyncFunction";var gB=e=>!!e&&!!e.validate&&!!(es(e.validate)&&e.validate.constructor.name===mb||Bt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===mb)),vB=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),pb=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Sc=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const o=Ae(e,s);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],s)&&!r)return!0;if(i.ref&&t(i.ref,i.name)&&!r)return!0;if(Sc(l,t))break}else if(Bt(l)&&Sc(l,t))break}}};function gb(e,t,n){const r=Ae(e,n);if(r||Rf(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),i=Ae(t,o),l=Ae(e,o);if(i&&!Array.isArray(i)&&n!==o)return{name:n};if(l&&l.type)return{name:o,error:l};if(l&&l.root&&l.root.type)return{name:`${o}.root`,error:l.root};s.pop()}return{name:n}}var yB=(e,t,n,r)=>{n(e);const{name:s,...o}=e;return er(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!r||Zr.all))},xB=(e,t,n)=>!e||!t||e===t||Cc(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),wB=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,bB=(e,t)=>!rx(Ae(e,t)).length&&Ut(e,t),jB=(e,t,n)=>{const r=Cc(Ae(e,n));return _t(r,"root",t[n]),_t(e,n,r),e},Id=e=>_s(e);function vb(e,t,n="validate"){if(Id(e)||Array.isArray(e)&&e.every(Id)||xs(e)&&!e)return{type:n,message:Id(e)?e:"",ref:t}}var wi=e=>Bt(e)&&!Eh(e)?e:{value:e,message:""},yb=async(e,t,n,r,s,o)=>{const{ref:i,refs:l,required:c,maxLength:u,minLength:d,min:h,max:m,pattern:p,validate:N,name:g,valueAsNumber:y,mount:w}=e._f,v=Ae(n,g);if(!w||t.has(g))return{};const b=l?l[0]:i,x=T=>{s&&b.reportValidity&&(b.setCustomValidity(xs(T)?"":T||""),b.reportValidity())},_={},k=ox(i),E=Ru(i),D=k||E,$=(y||ax(i))&&qt(i.value)&&qt(v)||_h(i)&&i.value===""||v===""||Array.isArray(v)&&!v.length,O=dB.bind(null,g,r,_),Y=(T,M,U,A=Ls.maxLength,F=Ls.minLength)=>{const C=T?M:U;_[g]={type:T?A:F,message:C,ref:i,...O(T?A:F,C)}};if(o?!Array.isArray(v)||!v.length:c&&(!D&&($||Un(v))||xs(v)&&!v||E&&!_k(l).isValid||k&&!Ek(l).isValid)){const{value:T,message:M}=Id(c)?{value:!!c,message:c}:wi(c);if(T&&(_[g]={type:Ls.required,message:M,ref:b,...O(Ls.required,M)},!r))return x(M),_}if(!$&&(!Un(h)||!Un(m))){let T,M;const U=wi(m),A=wi(h);if(!Un(v)&&!isNaN(v)){const F=i.valueAsNumber||v&&+v;Un(U.value)||(T=F>U.value),Un(A.value)||(M=F<A.value)}else{const F=i.valueAsDate||new Date(v),C=P=>new Date(new Date().toDateString()+" "+P),j=i.type=="time",S=i.type=="week";_s(U.value)&&v&&(T=j?C(v)>C(U.value):S?v>U.value:F>new Date(U.value)),_s(A.value)&&v&&(M=j?C(v)<C(A.value):S?v<A.value:F<new Date(A.value))}if((T||M)&&(Y(!!T,U.message,A.message,Ls.max,Ls.min),!r))return x(_[g].message),_}if((u||d)&&!$&&(_s(v)||o&&Array.isArray(v))){const T=wi(u),M=wi(d),U=!Un(T.value)&&v.length>+T.value,A=!Un(M.value)&&v.length<+M.value;if((U||A)&&(Y(U,T.message,M.message),!r))return x(_[g].message),_}if(p&&!$&&_s(v)){const{value:T,message:M}=wi(p);if(Eh(T)&&!v.match(T)&&(_[g]={type:Ls.pattern,message:M,ref:i,...O(Ls.pattern,M)},!r))return x(M),_}if(N){if(es(N)){const T=await N(v,n),M=vb(T,b);if(M&&(_[g]={...M,...O(Ls.validate,M.message)},!r))return x(M.message),_}else if(Bt(N)){let T={};for(const M in N){if(!er(T)&&!r)break;const U=vb(await N[M](v,n),b,M);U&&(T={...U,...O(M,U.message)},x(U.message),r&&(_[g]=T))}if(!er(T)&&(_[g]={ref:b,...T},!r))return _}}return x(!0),_};const NB={mode:Zr.onSubmit,reValidateMode:Zr.onChange,shouldFocusError:!0};function CB(e={}){let t={...NB,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:es(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Bt(t.defaultValues)||Bt(t.values)?sn(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:sn(s),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const m={array:lb(),state:lb()},p=t.criteriaMode===Zr.all,N=I=>K=>{clearTimeout(u),u=setTimeout(I,K)},g=async I=>{if(!t.disabled&&(d.isValid||h.isValid||I)){const K=t.resolver?er((await E()).errors):await $(r,!0);K!==n.isValid&&m.state.next({isValid:K})}},y=(I,K)=>{!t.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((I||Array.from(l.mount)).forEach(X=>{X&&(K?_t(n.validatingFields,X,K):Ut(n.validatingFields,X))}),m.state.next({validatingFields:n.validatingFields,isValidating:!er(n.validatingFields)}))},w=(I,K=[],X,ge,ve=!0,de=!0)=>{if(ge&&X&&!t.disabled){if(i.action=!0,de&&Array.isArray(Ae(r,I))){const Ne=X(Ae(r,I),ge.argA,ge.argB);ve&&_t(r,I,Ne)}if(de&&Array.isArray(Ae(n.errors,I))){const Ne=X(Ae(n.errors,I),ge.argA,ge.argB);ve&&_t(n.errors,I,Ne),bB(n.errors,I)}if((d.touchedFields||h.touchedFields)&&de&&Array.isArray(Ae(n.touchedFields,I))){const Ne=X(Ae(n.touchedFields,I),ge.argA,ge.argB);ve&&_t(n.touchedFields,I,Ne)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=ql(s,o)),m.state.next({name:I,isDirty:Y(I,K),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _t(o,I,K)},v=(I,K)=>{_t(n.errors,I,K),m.state.next({errors:n.errors})},b=I=>{n.errors=I,m.state.next({errors:n.errors,isValid:!1})},x=(I,K,X,ge)=>{const ve=Ae(r,I);if(ve){const de=Ae(o,I,qt(X)?Ae(s,I):X);qt(de)||ge&&ge.defaultChecked||K?_t(o,I,K?de:hb(ve._f)):U(I,de),i.mount&&g()}},_=(I,K,X,ge,ve)=>{let de=!1,Ne=!1;const qe={name:I};if(!t.disabled){if(!X||ge){(d.isDirty||h.isDirty)&&(Ne=n.isDirty,n.isDirty=qe.isDirty=Y(),de=Ne!==qe.isDirty);const at=Na(Ae(s,I),K);Ne=!!Ae(n.dirtyFields,I),at?Ut(n.dirtyFields,I):_t(n.dirtyFields,I,!0),qe.dirtyFields=n.dirtyFields,de=de||(d.dirtyFields||h.dirtyFields)&&Ne!==!at}if(X){const at=Ae(n.touchedFields,I);at||(_t(n.touchedFields,I,X),qe.touchedFields=n.touchedFields,de=de||(d.touchedFields||h.touchedFields)&&at!==X)}de&&ve&&m.state.next(qe)}return de?qe:{}},k=(I,K,X,ge)=>{const ve=Ae(n.errors,I),de=(d.isValid||h.isValid)&&xs(K)&&n.isValid!==K;if(t.delayError&&X?(c=N(()=>v(I,X)),c(t.delayError)):(clearTimeout(u),c=null,X?_t(n.errors,I,X):Ut(n.errors,I)),(X?!Na(ve,X):ve)||!er(ge)||de){const Ne={...ge,...de&&xs(K)?{isValid:K}:{},errors:n.errors,name:I};n={...n,...Ne},m.state.next(Ne)}},E=async I=>{y(I,!0);const K=await t.resolver(o,t.context,pB(I||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return y(I),K},D=async I=>{const{errors:K}=await E(I);if(I)for(const X of I){const ge=Ae(K,X);ge?_t(n.errors,X,ge):Ut(n.errors,X)}else n.errors=K;return K},$=async(I,K,X={valid:!0})=>{for(const ge in I){const ve=I[ge];if(ve){const{_f:de,...Ne}=ve;if(de){const qe=l.array.has(de.name),at=ve._f&&gB(ve._f);at&&d.validatingFields&&y([ge],!0);const le=await yb(ve,l.disabled,o,p,t.shouldUseNativeValidation&&!K,qe);if(at&&d.validatingFields&&y([ge]),le[de.name]&&(X.valid=!1,K))break;!K&&(Ae(le,de.name)?qe?jB(n.errors,le,de.name):_t(n.errors,de.name,le[de.name]):Ut(n.errors,de.name))}!er(Ne)&&await $(Ne,K,X)}}return X.valid},O=()=>{for(const I of l.unMount){const K=Ae(r,I);K&&(K._f.refs?K._f.refs.every(X=>!Ym(X)):!Ym(K._f.ref))&&q(I)}l.unMount=new Set},Y=(I,K)=>!t.disabled&&(I&&K&&_t(o,I,K),!Na(P(),s)),T=(I,K,X)=>uB(I,l,{...i.mount?o:qt(K)?s:_s(I)?{[I]:K}:K},X,K),M=I=>rx(Ae(i.mount?o:s,I,t.shouldUnregister?Ae(s,I,[]):[])),U=(I,K,X={})=>{const ge=Ae(r,I);let ve=K;if(ge){const de=ge._f;de&&(!de.disabled&&_t(o,I,kk(K,de)),ve=_h(de.ref)&&Un(K)?"":K,Nk(de.ref)?[...de.ref.options].forEach(Ne=>Ne.selected=ve.includes(Ne.value)):de.refs?Ru(de.ref)?de.refs.forEach(Ne=>{(!Ne.defaultChecked||!Ne.disabled)&&(Array.isArray(ve)?Ne.checked=!!ve.find(qe=>qe===Ne.value):Ne.checked=ve===Ne.value||!!ve)}):de.refs.forEach(Ne=>Ne.checked=Ne.value===ve):ax(de.ref)?de.ref.value="":(de.ref.value=ve,de.ref.type||m.state.next({name:I,values:sn(o)})))}(X.shouldDirty||X.shouldTouch)&&_(I,ve,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&S(I)},A=(I,K,X)=>{for(const ge in K){if(!K.hasOwnProperty(ge))return;const ve=K[ge],de=I+"."+ge,Ne=Ae(r,de);(l.array.has(I)||Bt(ve)||Ne&&!Ne._f)&&!Eo(ve)?A(de,ve,X):U(de,ve,X)}},F=(I,K,X={})=>{const ge=Ae(r,I),ve=l.array.has(I),de=sn(K);_t(o,I,de),ve?(m.array.next({name:I,values:sn(o)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&X.shouldDirty&&m.state.next({name:I,dirtyFields:ql(s,o),isDirty:Y(I,de)})):ge&&!ge._f&&!Un(de)?A(I,de,X):U(I,de,X),pb(I,l)&&m.state.next({...n,name:I}),m.state.next({name:i.mount?I:void 0,values:sn(o)})},C=async I=>{i.mount=!0;const K=I.target;let X=K.name,ge=!0;const ve=Ae(r,X),de=at=>{ge=Number.isNaN(at)||Eo(at)&&isNaN(at.getTime())||Na(at,Ae(o,X,at))},Ne=fb(t.mode),qe=fb(t.reValidateMode);if(ve){let at,le;const he=K.type?hb(ve._f):rB(I),ce=I.type===ib.BLUR||I.type===ib.FOCUS_OUT,ne=!vB(ve._f)&&!t.resolver&&!Ae(n.errors,X)&&!ve._f.deps||wB(ce,Ae(n.touchedFields,X),n.isSubmitted,qe,Ne),we=pb(X,l,ce);_t(o,X,he),ce?(ve._f.onBlur&&ve._f.onBlur(I),c&&c(0)):ve._f.onChange&&ve._f.onChange(I);const ye=_(X,he,ce),fe=!er(ye)||we;if(!ce&&m.state.next({name:X,type:I.type,values:sn(o)}),ne)return(d.isValid||h.isValid)&&(t.mode==="onBlur"?ce&&g():ce||g()),fe&&m.state.next({name:X,...we?{}:ye});if(!ce&&we&&m.state.next({...n}),t.resolver){const{errors:Me}=await E([X]);if(de(he),ge){const yt=gb(n.errors,r,X),Ct=gb(Me,r,yt.name||X);at=Ct.error,X=Ct.name,le=er(Me)}}else y([X],!0),at=(await yb(ve,l.disabled,o,p,t.shouldUseNativeValidation))[X],y([X]),de(he),ge&&(at?le=!1:(d.isValid||h.isValid)&&(le=await $(r,!0)));ge&&(ve._f.deps&&S(ve._f.deps),k(X,le,at,ye))}},j=(I,K)=>{if(Ae(n.errors,K)&&I.focus)return I.focus(),1},S=async(I,K={})=>{let X,ge;const ve=Cc(I);if(t.resolver){const de=await D(qt(I)?I:ve);X=er(de),ge=I?!ve.some(Ne=>Ae(de,Ne)):X}else I?(ge=(await Promise.all(ve.map(async de=>{const Ne=Ae(r,de);return await $(Ne&&Ne._f?{[de]:Ne}:Ne)}))).every(Boolean),!(!ge&&!n.isValid)&&g()):ge=X=await $(r);return m.state.next({...!_s(I)||(d.isValid||h.isValid)&&X!==n.isValid?{}:{name:I},...t.resolver||!I?{isValid:X}:{},errors:n.errors}),K.shouldFocus&&!ge&&Sc(r,j,I?ve:l.mount),ge},P=I=>{const K={...i.mount?o:s};return qt(I)?K:_s(I)?Ae(K,I):I.map(X=>Ae(K,X))},H=(I,K)=>({invalid:!!Ae((K||n).errors,I),isDirty:!!Ae((K||n).dirtyFields,I),error:Ae((K||n).errors,I),isValidating:!!Ae(n.validatingFields,I),isTouched:!!Ae((K||n).touchedFields,I)}),R=I=>{I&&Cc(I).forEach(K=>Ut(n.errors,K)),m.state.next({errors:I?n.errors:{}})},L=(I,K,X)=>{const ge=(Ae(r,I,{_f:{}})._f||{}).ref,ve=Ae(n.errors,I)||{},{ref:de,message:Ne,type:qe,...at}=ve;_t(n.errors,I,{...at,...K,ref:ge}),m.state.next({name:I,errors:n.errors,isValid:!1}),X&&X.shouldFocus&&ge&&ge.focus&&ge.focus()},J=(I,K)=>es(I)?m.state.subscribe({next:X=>"values"in X&&I(T(void 0,K),X)}):T(I,K,!0),Q=I=>m.state.subscribe({next:K=>{xB(I.name,K.name,I.exact)&&yB(K,I.formState||d,Ye,I.reRenderRoot)&&I.callback({values:{...o},...n,...K,defaultValues:s})}}).unsubscribe,G=I=>(i.mount=!0,h={...h,...I.formState},Q({...I,formState:h})),q=(I,K={})=>{for(const X of I?Cc(I):l.mount)l.mount.delete(X),l.array.delete(X),K.keepValue||(Ut(r,X),Ut(o,X)),!K.keepError&&Ut(n.errors,X),!K.keepDirty&&Ut(n.dirtyFields,X),!K.keepTouched&&Ut(n.touchedFields,X),!K.keepIsValidating&&Ut(n.validatingFields,X),!t.shouldUnregister&&!K.keepDefaultValue&&Ut(s,X);m.state.next({values:sn(o)}),m.state.next({...n,...K.keepDirty?{isDirty:Y()}:{}}),!K.keepIsValid&&g()},ee=({disabled:I,name:K})=>{(xs(I)&&i.mount||I||l.disabled.has(K))&&(I?l.disabled.add(K):l.disabled.delete(K))},ae=(I,K={})=>{let X=Ae(r,I);const ge=xs(K.disabled)||xs(t.disabled);return _t(r,I,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:I}},name:I,mount:!0,...K}}),l.mount.add(I),X?ee({disabled:xs(K.disabled)?K.disabled:t.disabled,name:I}):x(I,!0,K.value),{...ge?{disabled:K.disabled||t.disabled}:{},...t.progressive?{required:!!K.required,min:Gl(K.min),max:Gl(K.max),minLength:Gl(K.minLength),maxLength:Gl(K.maxLength),pattern:Gl(K.pattern)}:{},name:I,onChange:C,onBlur:C,ref:ve=>{if(ve){ae(I,K),X=Ae(r,I);const de=qt(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,Ne=hB(de),qe=X._f.refs||[];if(Ne?qe.find(at=>at===de):de===X._f.ref)return;_t(r,I,{_f:{...X._f,...Ne?{refs:[...qe.filter(Ym),de,...Array.isArray(Ae(s,I))?[{}]:[]],ref:{type:de.type,name:I}}:{ref:de}}}),x(I,!1,void 0,de)}else X=Ae(r,I,{}),X._f&&(X._f.mount=!1),(t.shouldUnregister||K.shouldUnregister)&&!(aB(l.array,I)&&i.action)&&l.unMount.add(I)}}},me=()=>t.shouldFocusError&&Sc(r,j,l.mount),Pe=I=>{xs(I)&&(m.state.next({disabled:I}),Sc(r,(K,X)=>{const ge=Ae(r,X);ge&&(K.disabled=ge._f.disabled||I,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(ve=>{ve.disabled=ge._f.disabled||I}))},0,!1))},W=(I,K)=>async X=>{let ge;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let ve=sn(o);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:de,values:Ne}=await E();n.errors=de,ve=sn(Ne)}else await $(r);if(l.disabled.size)for(const de of l.disabled)Ut(ve,de);if(Ut(n.errors,"root"),er(n.errors)){m.state.next({errors:{}});try{await I(ve,X)}catch(de){ge=de}}else K&&await K({...n.errors},X),me(),setTimeout(me);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:er(n.errors)&&!ge,submitCount:n.submitCount+1,errors:n.errors}),ge)throw ge},pe=(I,K={})=>{Ae(r,I)&&(qt(K.defaultValue)?F(I,sn(Ae(s,I))):(F(I,K.defaultValue),_t(s,I,sn(K.defaultValue))),K.keepTouched||Ut(n.touchedFields,I),K.keepDirty||(Ut(n.dirtyFields,I),n.isDirty=K.defaultValue?Y(I,sn(Ae(s,I))):Y()),K.keepError||(Ut(n.errors,I),d.isValid&&g()),m.state.next({...n}))},je=(I,K={})=>{const X=I?sn(I):s,ge=sn(X),ve=er(I),de=ve?s:ge;if(K.keepDefaultValues||(s=X),!K.keepValues){if(K.keepDirtyValues){const Ne=new Set([...l.mount,...Object.keys(ql(s,o))]);for(const qe of Array.from(Ne))Ae(n.dirtyFields,qe)?_t(de,qe,Ae(o,qe)):F(qe,Ae(de,qe))}else{if(nx&&qt(I))for(const Ne of l.mount){const qe=Ae(r,Ne);if(qe&&qe._f){const at=Array.isArray(qe._f.refs)?qe._f.refs[0]:qe._f.ref;if(_h(at)){const le=at.closest("form");if(le){le.reset();break}}}}if(K.keepFieldsRef)for(const Ne of l.mount)F(Ne,Ae(de,Ne));else r={}}o=t.shouldUnregister?K.keepDefaultValues?sn(s):{}:sn(de),m.array.next({values:{...de}}),m.state.next({values:{...de}})}l={mount:K.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!K.keepIsValid||!!K.keepDirtyValues,i.watch=!!t.shouldUnregister,m.state.next({submitCount:K.keepSubmitCount?n.submitCount:0,isDirty:ve?!1:K.keepDirty?n.isDirty:!!(K.keepDefaultValues&&!Na(I,s)),isSubmitted:K.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ve?{}:K.keepDirtyValues?K.keepDefaultValues&&o?ql(s,o):n.dirtyFields:K.keepDefaultValues&&I?ql(s,I):K.keepDirty?n.dirtyFields:{},touchedFields:K.keepTouched?n.touchedFields:{},errors:K.keepErrors?n.errors:{},isSubmitSuccessful:K.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},$e=(I,K)=>je(es(I)?I(o):I,K),Ke=(I,K={})=>{const X=Ae(r,I),ge=X&&X._f;if(ge){const ve=ge.refs?ge.refs[0]:ge.ref;ve.focus&&(ve.focus(),K.shouldSelect&&es(ve.select)&&ve.select())}},Ye=I=>{n={...n,...I}},Nt={control:{register:ae,unregister:q,getFieldState:H,handleSubmit:W,setError:L,_subscribe:Q,_runSchema:E,_focusError:me,_getWatch:T,_getDirty:Y,_setValid:g,_setFieldArray:w,_setDisabledField:ee,_setErrors:b,_getFieldArray:M,_reset:je,_resetDefaultValues:()=>es(t.defaultValues)&&t.defaultValues().then(I=>{$e(I,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:Pe,_subjects:m,_proxyFormState:d,get _fields(){return r},get _formValues(){return o},get _state(){return i},set _state(I){i=I},get _defaultValues(){return s},get _names(){return l},set _names(I){l=I},get _formState(){return n},get _options(){return t},set _options(I){t={...t,...I}}},subscribe:G,trigger:S,register:ae,handleSubmit:W,watch:J,setValue:F,getValues:P,reset:$e,resetField:pe,clearErrors:R,unregister:q,setError:L,setFocus:Ke,getFieldState:H};return{...Nt,formControl:Nt}}function Pl(e={}){const t=re.useRef(void 0),n=re.useRef(void 0),[r,s]=re.useState({isDirty:!1,isValidating:!1,isLoading:es(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:es(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!es(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...l}=CB(e);t.current={...l,formState:r}}const o=t.current.control;return o._options=e,cB(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),o._formState.isReady=!0,i},[o]),re.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),re.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),re.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),re.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),re.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==r.isDirty&&o._subjects.state.next({isDirty:i})}},[o,r.isDirty]),re.useEffect(()=>{e.values&&!Na(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=e.values,s(i=>({...i}))):o._resetDefaultValues()},[o,e.values]),re.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=lB(r,o),t.current}function SB({open:e,onOpenChange:t,onSubmit:n,initialData:r,isEditing:s}){const{register:o,handleSubmit:i,reset:l,formState:{errors:c}}=Pl({defaultValues:{name:(r==null?void 0:r.name)||""}});f.useEffect(()=>{e&&l({name:(r==null?void 0:r.name)||""})},[e,r,l]);const u=d=>{const h=[];if(d.name.trim()||h.push("Province Name"),h.length>0){z.error(`Please fill in all required fields: ${h.join(", ")}`);return}n(d)};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsxs(Dn,{children:[a.jsx(Rn,{children:a.jsx(Mn,{children:s?"Edit Province":"Add New Province"})}),a.jsxs("form",{onSubmit:i(u),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Province Name *"}),a.jsx(_e,{id:"name",...o("name",{required:"Province name is required"}),placeholder:"e.g., H Ni, Hu...",className:c.name?"border-destructive":""}),c.name&&a.jsx("p",{className:"text-sm text-destructive",children:c.name.message})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",children:s?"Update":"Create"})]})]})]})})}const _B=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(!1),[s,o]=f.useState(),[i,l]=f.useState(!1),[c,u]=f.useState(""),d=tn(),{data:h=[],isLoading:m}=Xe({queryKey:["provinces",e],queryFn:()=>Z.listProvinces({search:e})}),p=xe({mutationFn:T=>Z.createProvince(T),onSuccess:()=>{d.invalidateQueries({queryKey:["provinces"]}),z.success("Province created successfully"),r(!1)},onError:T=>{z.error(T.message)}}),N=xe({mutationFn:({id:T,patch:M})=>Z.updateProvince(T,M),onSuccess:()=>{d.invalidateQueries({queryKey:["provinces"]}),z.success("Province updated successfully"),r(!1),o(void 0)},onError:T=>{z.error(T.message)}}),g=xe({mutationFn:T=>Z.duplicateProvince(T),onSuccess:()=>{d.invalidateQueries({queryKey:["provinces"]}),z.success("Province duplicated successfully")}}),y=xe({mutationFn:T=>Z.deleteProvince(T),onSuccess:()=>{d.invalidateQueries({queryKey:["provinces"]}),z.success("Province deleted successfully")}}),w=xe({mutationFn:()=>Z.deleteAllProvinces(),onSuccess:()=>{d.invalidateQueries({queryKey:["provinces"]}),z.success("All provinces deleted successfully")},onError:T=>{z.error(T.message)}}),v=xe({mutationFn:T=>Z.bulkCreateProvinces(T),onSuccess:()=>{d.invalidateQueries({queryKey:["provinces"]}),z.success("Provinces imported successfully")},onError:T=>{z.error(T.message)}}),b=T=>{p.mutate(T)},x=T=>{s&&N.mutate({id:s.id,patch:{name:T.name}})},_=T=>{o(T),r(!0)},k=()=>{r(!1),o(void 0)},E=()=>{confirm("Are you sure you want to delete ALL provinces? This action cannot be undone.")&&w.mutate()},D=async T=>{await v.mutateAsync(T)},$=()=>{if(O.length===0){z.error("No provinces to export");return}const T=O.map(F=>F.name).join(`
`),M=new Blob([T],{type:"text/plain"}),U=URL.createObjectURL(M),A=document.createElement("a");A.href=U,A.download=`provinces-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(U),z.success(`Exported ${O.length} provinces`)},O=f.useMemo(()=>c?h.filter(T=>T.name.toLowerCase().includes(c.toLowerCase())):h,[h,c]),{classes:Y}=hs("provinces.headerMode");return a.jsxs(Nr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:Y,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Provinces"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage provinces and cities"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{variant:"outline",onClick:$,children:[a.jsx(ia,{className:"h-4 w-4 mr-2"}),"Export TXT"]}),a.jsxs(V,{variant:"outline",onClick:()=>l(!0),children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),"Import"]}),a.jsxs(V,{variant:"outline",onClick:E,children:[a.jsx(la,{className:"h-4 w-4 mr-2"}),"Delete All"]}),a.jsxs(V,{onClick:()=>_(),children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Add Province"]})]})]})}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:e,onChange:t,placeholder:"Search provinces..."})})}),m?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):h.length===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No provinces found. Create your first province to get started."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-lg border",children:a.jsxs("table",{className:"w-full",children:[a.jsxs("thead",{className:"bg-muted/50",children:[a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-medium",children:"Name"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Updated"}),a.jsx("th",{className:"text-right p-4 font-medium",children:"Actions"})]}),a.jsxs("tr",{className:"border-t",children:[a.jsx("th",{className:"p-2",children:a.jsx(_e,{placeholder:"Filter by name...",value:c,onChange:T=>u(T.target.value),className:"h-8"})}),a.jsx("th",{className:"p-2"}),a.jsx("th",{className:"p-2"})]})]}),a.jsx("tbody",{children:O.map(T=>a.jsxs("tr",{className:"border-t hover:bg-muted/50 cursor-pointer",onClick:()=>_(T),children:[a.jsx("td",{className:"p-4 font-medium",children:T.name}),a.jsx("td",{className:"p-4 text-muted-foreground text-sm",children:An(T.updatedAt.split("T")[0])}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1",onClick:M=>M.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>_(T),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g.mutate(T.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this province?")&&y.mutate(T.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},T.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:O.map(T=>a.jsx("div",{className:"rounded-lg border p-4 space-y-3 cursor-pointer hover:bg-muted/50",onClick:()=>_(T),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:T.name}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Updated ",An(T.updatedAt.split("T")[0])]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:M=>M.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>_(T),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g.mutate(T.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this province?")&&y.mutate(T.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})},T.id))})]})]}),a.jsx(SB,{open:n,onOpenChange:k,onSubmit:s?x:b,initialData:s,isEditing:!!s}),a.jsx(uo,{open:i,onOpenChange:l,onImport:D,title:"Import Provinces",description:"Import multiple provinces at once. Enter one province name per line or use comma format.",placeholder:`Enter province names (one per line)
Example:
Ha Noi
Ho Chi Minh
Da Nang

Or comma format:
Ha Noi,Ho Chi Minh,Da Nang`,parseItem:T=>{const M=T[0];return M?{name:M}:null}})]})};function Gg(e,[t,n]){return Math.min(n,Math.max(t,e))}var kB=[" ","Enter","ArrowUp","ArrowDown"],EB=[" ","Enter"],Qo="Select",[Mf,Of,TB]=Zh(Qo),[Al,q9]=mr(Qo,[TB,ao]),If=ao(),[PB,ho]=Al(Qo),[AB,DB]=Al(Qo),Tk=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:N}=e,g=If(t),[y,w]=f.useState(null),[v,b]=f.useState(null),[x,_]=f.useState(!1),k=ju(u),[E,D]=na({prop:r,defaultProp:s??!1,onChange:o,caller:Qo}),[$,O]=na({prop:i,defaultProp:l,onChange:c,caller:Qo}),Y=f.useRef(null),T=y?N||!!y.closest("form"):!0,[M,U]=f.useState(new Set),A=Array.from(M).map(F=>F.props.value).join(";");return a.jsx(by,{...g,children:a.jsxs(PB,{required:p,scope:t,trigger:y,onTriggerChange:w,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:x,onValueNodeHasChildrenChange:_,contentId:gn(),value:$,onValueChange:O,open:E,onOpenChange:D,dir:k,triggerPointerDownPosRef:Y,disabled:m,children:[a.jsx(Mf.Provider,{scope:t,children:a.jsx(AB,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(F=>{U(C=>new Set(C).add(F))},[]),onNativeOptionRemove:f.useCallback(F=>{U(C=>{const j=new Set(C);return j.delete(F),j})},[]),children:n})}),T?a.jsxs(Zk,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:$,onChange:F=>O(F.target.value),disabled:m,form:N,children:[$===void 0?a.jsx("option",{value:""}):null,Array.from(M)]},A):null]})})};Tk.displayName=Qo;var Pk="SelectTrigger",Ak=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=If(n),i=ho(Pk,n),l=i.disabled||r,c=Ve(t,i.onTriggerChange),u=Of(n),d=f.useRef("touch"),[h,m,p]=tE(g=>{const y=u().filter(b=>!b.disabled),w=y.find(b=>b.value===i.value),v=nE(y,g,w);v!==void 0&&i.onValueChange(v.value)}),N=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(wu,{asChild:!0,...o,children:a.jsx(Te.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":eE(i.value)?"":void 0,...s,ref:c,onClick:ue(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&N(g)}),onPointerDown:ue(s.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(N(g),g.preventDefault())}),onKeyDown:ue(s.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(y&&g.key===" ")&&kB.includes(g.key)&&(N(),g.preventDefault())})})})});Ak.displayName=Pk;var Dk="SelectValue",Rk=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...l}=e,c=ho(Dk,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Ve(t,c.onValueNodeChange);return un(()=>{u(d)},[u,d]),a.jsx(Te.span,{...l,ref:h,style:{pointerEvents:"none"},children:eE(c.value)?a.jsx(a.Fragment,{children:i}):o})});Rk.displayName=Dk;var RB="SelectIcon",Mk=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return a.jsx(Te.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});Mk.displayName=RB;var MB="SelectPortal",Ok=e=>a.jsx(Nl,{asChild:!0,...e});Ok.displayName=MB;var Jo="SelectContent",Ik=f.forwardRef((e,t)=>{const n=ho(Jo,e.__scopeSelect),[r,s]=f.useState();if(un(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?ti.createPortal(a.jsx(Fk,{scope:e.__scopeSelect,children:a.jsx(Mf.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),o):null}return a.jsx($k,{...e,ref:t})});Ik.displayName=Jo;var qr=10,[Fk,fo]=Al(Jo),OB="SelectContentImpl",IB=Qa("SelectContent.RemoveScroll"),$k=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:N,hideWhenDetached:g,avoidCollisions:y,...w}=e,v=ho(Jo,n),[b,x]=f.useState(null),[_,k]=f.useState(null),E=Ve(t,q=>x(q)),[D,$]=f.useState(null),[O,Y]=f.useState(null),T=Of(n),[M,U]=f.useState(!1),A=f.useRef(!1);f.useEffect(()=>{if(b)return vf(b)},[b]),pf();const F=f.useCallback(q=>{const[ee,...ae]=T().map(W=>W.ref.current),[me]=ae.slice(-1),Pe=document.activeElement;for(const W of q)if(W===Pe||(W==null||W.scrollIntoView({block:"nearest"}),W===ee&&_&&(_.scrollTop=0),W===me&&_&&(_.scrollTop=_.scrollHeight),W==null||W.focus(),document.activeElement!==Pe))return},[T,_]),C=f.useCallback(()=>F([D,b]),[F,D,b]);f.useEffect(()=>{M&&C()},[M,C]);const{onOpenChange:j,triggerPointerDownPosRef:S}=v;f.useEffect(()=>{if(b){let q={x:0,y:0};const ee=me=>{var Pe,W;q={x:Math.abs(Math.round(me.pageX)-(((Pe=S.current)==null?void 0:Pe.x)??0)),y:Math.abs(Math.round(me.pageY)-(((W=S.current)==null?void 0:W.y)??0))}},ae=me=>{q.x<=10&&q.y<=10?me.preventDefault():b.contains(me.target)||j(!1),document.removeEventListener("pointermove",ee),S.current=null};return S.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",ae,{capture:!0})}}},[b,j,S]),f.useEffect(()=>{const q=()=>j(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[j]);const[P,H]=tE(q=>{const ee=T().filter(Pe=>!Pe.disabled),ae=ee.find(Pe=>Pe.ref.current===document.activeElement),me=nE(ee,q,ae);me&&setTimeout(()=>me.ref.current.focus())}),R=f.useCallback((q,ee,ae)=>{const me=!A.current&&!ae;(v.value!==void 0&&v.value===ee||me)&&($(q),me&&(A.current=!0))},[v.value]),L=f.useCallback(()=>b==null?void 0:b.focus(),[b]),J=f.useCallback((q,ee,ae)=>{const me=!A.current&&!ae;(v.value!==void 0&&v.value===ee||me)&&Y(q)},[v.value]),Q=r==="popper"?Kg:Lk,G=Q===Kg?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:N,hideWhenDetached:g,avoidCollisions:y}:{};return a.jsx(Fk,{scope:n,content:b,viewport:_,onViewportChange:k,itemRefCallback:R,selectedItem:D,onItemLeave:L,itemTextRefCallback:J,focusSelectedItem:C,selectedItemText:O,position:r,isPositioned:M,searchRef:P,children:a.jsx(Su,{as:IB,allowPinchZoom:!0,children:a.jsx(Nu,{asChild:!0,trapped:v.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:ue(s,q=>{var ee;(ee=v.trigger)==null||ee.focus({preventScroll:!0}),q.preventDefault()}),children:a.jsx(ni,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(Q,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:q=>q.preventDefault(),...w,...G,onPlaced:()=>U(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ue(w.onKeyDown,q=>{const ee=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!ee&&q.key.length===1&&H(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let me=T().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(q.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const Pe=q.target,W=me.indexOf(Pe);me=me.slice(W+1)}setTimeout(()=>F(me)),q.preventDefault()}})})})})})})});$k.displayName=OB;var FB="SelectItemAlignedPosition",Lk=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=ho(Jo,n),i=fo(Jo,n),[l,c]=f.useState(null),[u,d]=f.useState(null),h=Ve(t,E=>d(E)),m=Of(n),p=f.useRef(!1),N=f.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:w,focusSelectedItem:v}=i,b=f.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&g&&y&&w){const E=o.trigger.getBoundingClientRect(),D=u.getBoundingClientRect(),$=o.valueNode.getBoundingClientRect(),O=w.getBoundingClientRect();if(o.dir!=="rtl"){const Pe=O.left-D.left,W=$.left-Pe,pe=E.left-W,je=E.width+pe,$e=Math.max(je,D.width),Ke=window.innerWidth-qr,Ye=Gg(W,[qr,Math.max(qr,Ke-$e)]);l.style.minWidth=je+"px",l.style.left=Ye+"px"}else{const Pe=D.right-O.right,W=window.innerWidth-$.right-Pe,pe=window.innerWidth-E.right-W,je=E.width+pe,$e=Math.max(je,D.width),Ke=window.innerWidth-qr,Ye=Gg(W,[qr,Math.max(qr,Ke-$e)]);l.style.minWidth=je+"px",l.style.right=Ye+"px"}const Y=m(),T=window.innerHeight-qr*2,M=g.scrollHeight,U=window.getComputedStyle(u),A=parseInt(U.borderTopWidth,10),F=parseInt(U.paddingTop,10),C=parseInt(U.borderBottomWidth,10),j=parseInt(U.paddingBottom,10),S=A+F+M+j+C,P=Math.min(y.offsetHeight*5,S),H=window.getComputedStyle(g),R=parseInt(H.paddingTop,10),L=parseInt(H.paddingBottom,10),J=E.top+E.height/2-qr,Q=T-J,G=y.offsetHeight/2,q=y.offsetTop+G,ee=A+F+q,ae=S-ee;if(ee<=J){const Pe=Y.length>0&&y===Y[Y.length-1].ref.current;l.style.bottom="0px";const W=u.clientHeight-g.offsetTop-g.offsetHeight,pe=Math.max(Q,G+(Pe?L:0)+W+C),je=ee+pe;l.style.height=je+"px"}else{const Pe=Y.length>0&&y===Y[0].ref.current;l.style.top="0px";const pe=Math.max(J,A+g.offsetTop+(Pe?R:0)+G)+ae;l.style.height=pe+"px",g.scrollTop=ee-J+g.offsetTop}l.style.margin=`${qr}px 0`,l.style.minHeight=P+"px",l.style.maxHeight=T+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,o.trigger,o.valueNode,l,u,g,y,w,o.dir,r]);un(()=>b(),[b]);const[x,_]=f.useState();un(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const k=f.useCallback(E=>{E&&N.current===!0&&(b(),v==null||v(),N.current=!1)},[b,v]);return a.jsx(LB,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:a.jsx(Te.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Lk.displayName=FB;var $B="SelectPopperPosition",Kg=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qr,...o}=e,i=If(n);return a.jsx(lf,{...i,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kg.displayName=$B;var[LB,ix]=Al(Jo,{}),Yg="SelectViewport",Bk=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=fo(Yg,n),i=ix(Yg,n),l=Ve(t,o.onViewportChange),c=f.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Mf.Slot,{scope:n,children:a.jsx(Te.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const N=window.innerHeight-qr*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),w=Math.max(g,y);if(w<N){const v=w+p,b=Math.min(N,v),x=v-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=x>0?x:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Bk.displayName=Yg;var Uk="SelectGroup",[BB,UB]=Al(Uk),zB=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=gn();return a.jsx(BB,{scope:n,id:s,children:a.jsx(Te.div,{role:"group","aria-labelledby":s,...r,ref:t})})});zB.displayName=Uk;var zk="SelectLabel",Wk=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=UB(zk,n);return a.jsx(Te.div,{id:s.id,...r,ref:t})});Wk.displayName=zk;var Th="SelectItem",[WB,Vk]=Al(Th),Hk=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=e,l=ho(Th,n),c=fo(Th,n),u=l.value===r,[d,h]=f.useState(o??""),[m,p]=f.useState(!1),N=Ve(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),g=gn(),y=f.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(WB,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(v=>{h(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(Mf.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:a.jsx(Te.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:N,onFocus:ue(i.onFocus,()=>p(!0)),onBlur:ue(i.onBlur,()=>p(!1)),onClick:ue(i.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:ue(i.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:ue(i.onPointerDown,v=>{y.current=v.pointerType}),onPointerMove:ue(i.onPointerMove,v=>{var b;y.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(i.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ue(i.onKeyDown,v=>{var x;((x=c.searchRef)==null?void 0:x.current)!==""&&v.key===" "||(EB.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});Hk.displayName=Th;var cc="SelectItemText",qk=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,i=ho(cc,n),l=fo(cc,n),c=Vk(cc,n),u=DB(cc,n),[d,h]=f.useState(null),m=Ve(t,w=>h(w),c.onItemTextChange,w=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,w,c.value,c.disabled)}),p=d==null?void 0:d.textContent,N=f.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return un(()=>(g(N),()=>y(N)),[g,y,N]),a.jsxs(a.Fragment,{children:[a.jsx(Te.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ti.createPortal(o.children,i.valueNode):null]})});qk.displayName=cc;var Gk="SelectItemIndicator",Kk=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Vk(Gk,n).isSelected?a.jsx(Te.span,{"aria-hidden":!0,...r,ref:t}):null});Kk.displayName=Gk;var Qg="SelectScrollUpButton",Yk=f.forwardRef((e,t)=>{const n=fo(Qg,e.__scopeSelect),r=ix(Qg,e.__scopeSelect),[s,o]=f.useState(!1),i=Ve(t,r.onScrollButtonChange);return un(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Jk,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Yk.displayName=Qg;var Jg="SelectScrollDownButton",Qk=f.forwardRef((e,t)=>{const n=fo(Jg,e.__scopeSelect),r=ix(Jg,e.__scopeSelect),[s,o]=f.useState(!1),i=Ve(t,r.onScrollButtonChange);return un(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Jk,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Qk.displayName=Jg;var Jk=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=fo("SelectScrollButton",n),i=f.useRef(null),l=Of(n),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),un(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(Te.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:ue(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{c()})})}),VB="SelectSeparator",Xk=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return a.jsx(Te.div,{"aria-hidden":!0,...r,ref:t})});Xk.displayName=VB;var Xg="SelectArrow",HB=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=If(n),o=ho(Xg,n),i=fo(Xg,n);return o.open&&i.position==="popper"?a.jsx(cf,{...s,...r,ref:t}):null});HB.displayName=Xg;var qB="SelectBubbleInput",Zk=f.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=f.useRef(null),o=Ve(r,s),i=lk(t);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[i,t]),a.jsx(Te.select,{...n,style:{...hN,...n.style},ref:o,defaultValue:t})});Zk.displayName=qB;function eE(e){return e===""||e===void 0}function tE(e){const t=Lt(e),n=f.useRef(""),r=f.useRef(0),s=f.useCallback(i=>{const l=n.current+i;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function nE(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=GB(e,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function GB(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var KB=Tk,rE=Ak,YB=Rk,QB=Mk,JB=Ok,sE=Ik,XB=Bk,aE=Wk,oE=Hk,ZB=qk,eU=Kk,iE=Yk,lE=Qk,cE=Xk;const ns=KB,rs=YB,Mr=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(rE,{ref:r,className:te("flex h-9 min-h-[2.25rem] w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm sm:h-10 sm:min-h-[2.5rem] sm:text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 touch-manipulation",e),...n,children:[t,a.jsx(QB,{asChild:!0,children:a.jsx(iy,{className:"h-4 w-4 opacity-50"})})]}));Mr.displayName=rE.displayName;const uE=f.forwardRef(({className:e,...t},n)=>a.jsx(iE,{ref:n,className:te("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(IN,{className:"h-4 w-4"})}));uE.displayName=iE.displayName;const dE=f.forwardRef(({className:e,...t},n)=>a.jsx(lE,{ref:n,className:te("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(iy,{className:"h-4 w-4"})}));dE.displayName=lE.displayName;const Or=f.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>a.jsx(JB,{children:a.jsxs(sE,{ref:s,className:te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[a.jsx(uE,{}),a.jsx(XB,{className:te("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(dE,{})]})}));Or.displayName=sE.displayName;const tU=f.forwardRef(({className:e,...t},n)=>a.jsx(aE,{ref:n,className:te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));tU.displayName=aE.displayName;const ct=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(oE,{ref:r,className:te("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-8 pr-2 text-sm sm:py-2.5 sm:text-base outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground touch-manipulation min-h-[2.25rem] sm:min-h-[2.5rem]",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(eU,{children:a.jsx(Tt,{className:"h-4 w-4"})})}),a.jsx(ZB,{children:t})]}));ct.displayName=oE.displayName;const nU=f.forwardRef(({className:e,...t},n)=>a.jsx(cE,{ref:n,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));nU.displayName=cE.displayName;const Kl=e=>new Intl.NumberFormat().format(e),rU=[35e3,5e4,1e5,12e4,15e4,2e5,22e4],Gt=f.forwardRef(({value:e=0,onChange:t,showQuickAmounts:n=!0,currencyLabel:r="VND",containerClassName:s,className:o,size:i="compact",...l},c)=>{const[u,d]=f.useState(e?Kl(e):""),[h,m]=f.useState(!1),[p,N]=f.useState(!1),g=f.useRef(!1),y=f.useRef(null);f.useImperativeHandle(c,()=>y.current,[]),f.useEffect(()=>{!h&&!g.current&&d(e?Kl(e):""),g.current=!1},[e,h]);const w=T=>{const M=T.replace(/[^0-9]/g,""),U=parseFloat(M);return isNaN(U)?0:U},v=T=>{const M=T.target.value,U=T.target.selectionStart??M.length;if(p){d(M);return}const A=(M.slice(0,U).match(/\d/g)||[]).length,F=M.replace(/\D/g,""),C=F===""?NaN:parseInt(F,10),j=F?Kl(C):"";d(j),F&&(g.current=!0,t==null||t(C)),requestAnimationFrame(()=>{const S=y.current;if(!S)return;let P=0,H=0;for(let R=0;R<j.length&&(/\d/.test(j[R])&&P++,H=R+1,!(P>=A));R++);A===0&&(H=0),P<A&&(H=j.length);try{S.setSelectionRange(H,H)}catch{}})},b=()=>{m(!0)},x=()=>{m(!1);const T=w(u);d(T?Kl(T):""),g.current=!0,t==null||t(T)},_=()=>{N(!0)},k=T=>{N(!1);const M={target:T.target};M.target.value=T.target.value,v(M)},E=T=>{d(Kl(T)),g.current=!0,t==null||t(T)},D=()=>{var T;d(""),g.current=!0,t==null||t(0),(T=y.current)==null||T.focus()},$=u!=="",O=l.disabled,Y=i==="compact";return a.jsxs("div",{className:te(Y?"space-y-1":"space-y-2"),children:[a.jsxs("div",{className:te("group relative flex items-center rounded-2xl border border-lime-300/70 bg-white/90 shadow-[0_0_0_1px_rgba(190,242,100,0.4)] transition focus-within:border-lime-500 focus-within:shadow-[0_0_0_2px_rgba(132,204,22,0.4)]",Y?"gap-2 rounded-md px-2 py-1":"gap-3 px-4 py-2",O&&"cursor-not-allowed opacity-60",s),children:[a.jsx(_e,{...l,ref:y,type:"text",inputMode:"numeric",autoComplete:"off",value:u,onChange:v,onCompositionStart:_,onCompositionEnd:k,onFocus:b,onBlur:x,disabled:l.disabled,className:te("flex-1 border-none bg-transparent px-0 py-0 text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0",Y?"h-8 text-sm font-medium":"h-10 text-lg font-semibold tracking-wide",o)}),a.jsx("button",{type:"button",onClick:D,disabled:!$||O,className:te("flex items-center justify-center rounded-full bg-lime-100/70 text-lime-700 transition hover:bg-lime-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lime-400 disabled:cursor-default disabled:opacity-0",Y?"h-6 w-6":"h-8 w-8"),"aria-label":"Clear amount",children:a.jsx(Qc,{className:"h-4 w-4"})}),a.jsx("span",{className:te("rounded-full bg-orange-400/80",Y?"h-4 w-px":"h-6 w-[2px]"),"aria-hidden":"true"}),a.jsx("span",{className:te("font-semibold uppercase tracking-wide text-lime-700",Y?"text-xs":"text-sm"),children:r})]}),n&&a.jsx("div",{className:te("flex flex-nowrap overflow-x-auto",Y?"gap-1":"gap-2"),children:rU.map(T=>a.jsx(V,{type:"button",variant:"outline",size:Y?"xs":"sm",onClick:()=>E(T),className:te("rounded-full border-lime-200 text-lime-700 transition hover:border-lime-400 hover:bg-lime-50 flex-shrink-0",Y?"h-6 px-2 py-0.5 text-[10px]":"h-7 px-2.5 py-0.5 text-[10px] font-medium"),children:T>=1e3?`${T/1e3}k`:T},T))})]})});Gt.displayName="CurrencyInput";var xb=1,sU=.9,aU=.8,oU=.17,Qm=.1,Jm=.999,iU=.9999,lU=.99,cU=/[\\\/_+.#"@\[\(\{&]/,uU=/[\\\/_+.#"@\[\(\{&]/g,dU=/[\s-]/,hE=/[\s-]/g;function Zg(e,t,n,r,s,o,i){if(o===t.length)return s===e.length?xb:lU;var l=`${s},${o}`;if(i[l]!==void 0)return i[l];for(var c=r.charAt(o),u=n.indexOf(c,s),d=0,h,m,p,N;u>=0;)h=Zg(e,t,n,r,u+1,o+1,i),h>d&&(u===s?h*=xb:cU.test(e.charAt(u-1))?(h*=aU,p=e.slice(s,u-1).match(uU),p&&s>0&&(h*=Math.pow(Jm,p.length))):dU.test(e.charAt(u-1))?(h*=sU,N=e.slice(s,u-1).match(hE),N&&s>0&&(h*=Math.pow(Jm,N.length))):(h*=oU,s>0&&(h*=Math.pow(Jm,u-s))),e.charAt(u)!==t.charAt(o)&&(h*=iU)),(h<Qm&&n.charAt(u-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(u-1)!==r.charAt(o))&&(m=Zg(e,t,n,r,u+1,o+2,i),m*Qm>h&&(h=m*Qm)),h>d&&(d=h),u=n.indexOf(c,u+1);return i[l]=d,d}function wb(e){return e.toLowerCase().replace(hE," ")}function hU(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Zg(e,t,wb(e),wb(t),0,0,{})}var Yl='[cmdk-group=""]',Xm='[cmdk-group-items=""]',fU='[cmdk-group-heading=""]',fE='[cmdk-item=""]',bb=`${fE}:not([aria-disabled="true"])`,ev="cmdk-item-select",Ni="data-value",mU=(e,t,n)=>hU(e,t,n),mE=f.createContext(void 0),Mu=()=>f.useContext(mE),pE=f.createContext(void 0),lx=()=>f.useContext(pE),gE=f.createContext(void 0),vE=f.forwardRef((e,t)=>{let n=Ci(()=>{var R,L;return{search:"",value:(L=(R=e.value)!=null?R:e.defaultValue)!=null?L:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Ci(()=>new Set),s=Ci(()=>new Map),o=Ci(()=>new Map),i=Ci(()=>new Set),l=yE(e),{label:c,children:u,value:d,onValueChange:h,filter:m,shouldFilter:p,loop:N,disablePointerSelection:g=!1,vimBindings:y=!0,...w}=e,v=gn(),b=gn(),x=gn(),_=f.useRef(null),k=SU();Xo(()=>{if(d!==void 0){let R=d.trim();n.current.value=R,E.emit()}},[d]),Xo(()=>{k(6,M)},[]);let E=f.useMemo(()=>({subscribe:R=>(i.current.add(R),()=>i.current.delete(R)),snapshot:()=>n.current,setState:(R,L,J)=>{var Q,G,q,ee;if(!Object.is(n.current[R],L)){if(n.current[R]=L,R==="search")T(),O(),k(1,Y);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ae=document.getElementById(x);ae?ae.focus():(Q=document.getElementById(v))==null||Q.focus()}if(k(7,()=>{var ae;n.current.selectedItemId=(ae=U())==null?void 0:ae.id,E.emit()}),J||k(5,M),((G=l.current)==null?void 0:G.value)!==void 0){let ae=L??"";(ee=(q=l.current).onValueChange)==null||ee.call(q,ae);return}}E.emit()}},emit:()=>{i.current.forEach(R=>R())}}),[]),D=f.useMemo(()=>({value:(R,L,J)=>{var Q;L!==((Q=o.current.get(R))==null?void 0:Q.value)&&(o.current.set(R,{value:L,keywords:J}),n.current.filtered.items.set(R,$(L,J)),k(2,()=>{O(),E.emit()}))},item:(R,L)=>(r.current.add(R),L&&(s.current.has(L)?s.current.get(L).add(R):s.current.set(L,new Set([R]))),k(3,()=>{T(),O(),n.current.value||Y(),E.emit()}),()=>{o.current.delete(R),r.current.delete(R),n.current.filtered.items.delete(R);let J=U();k(4,()=>{T(),(J==null?void 0:J.getAttribute("id"))===R&&Y(),E.emit()})}),group:R=>(s.current.has(R)||s.current.set(R,new Set),()=>{o.current.delete(R),s.current.delete(R)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:v,inputId:x,labelId:b,listInnerRef:_}),[]);function $(R,L){var J,Q;let G=(Q=(J=l.current)==null?void 0:J.filter)!=null?Q:mU;return R?G(R,n.current.search,L):0}function O(){if(!n.current.search||l.current.shouldFilter===!1)return;let R=n.current.filtered.items,L=[];n.current.filtered.groups.forEach(Q=>{let G=s.current.get(Q),q=0;G.forEach(ee=>{let ae=R.get(ee);q=Math.max(ae,q)}),L.push([Q,q])});let J=_.current;A().sort((Q,G)=>{var q,ee;let ae=Q.getAttribute("id"),me=G.getAttribute("id");return((q=R.get(me))!=null?q:0)-((ee=R.get(ae))!=null?ee:0)}).forEach(Q=>{let G=Q.closest(Xm);G?G.appendChild(Q.parentElement===G?Q:Q.closest(`${Xm} > *`)):J.appendChild(Q.parentElement===J?Q:Q.closest(`${Xm} > *`))}),L.sort((Q,G)=>G[1]-Q[1]).forEach(Q=>{var G;let q=(G=_.current)==null?void 0:G.querySelector(`${Yl}[${Ni}="${encodeURIComponent(Q[0])}"]`);q==null||q.parentElement.appendChild(q)})}function Y(){let R=A().find(J=>J.getAttribute("aria-disabled")!=="true"),L=R==null?void 0:R.getAttribute(Ni);E.setState("value",L||void 0)}function T(){var R,L,J,Q;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let G=0;for(let q of r.current){let ee=(L=(R=o.current.get(q))==null?void 0:R.value)!=null?L:"",ae=(Q=(J=o.current.get(q))==null?void 0:J.keywords)!=null?Q:[],me=$(ee,ae);n.current.filtered.items.set(q,me),me>0&&G++}for(let[q,ee]of s.current)for(let ae of ee)if(n.current.filtered.items.get(ae)>0){n.current.filtered.groups.add(q);break}n.current.filtered.count=G}function M(){var R,L,J;let Q=U();Q&&(((R=Q.parentElement)==null?void 0:R.firstChild)===Q&&((J=(L=Q.closest(Yl))==null?void 0:L.querySelector(fU))==null||J.scrollIntoView({block:"nearest"})),Q.scrollIntoView({block:"nearest"}))}function U(){var R;return(R=_.current)==null?void 0:R.querySelector(`${fE}[aria-selected="true"]`)}function A(){var R;return Array.from(((R=_.current)==null?void 0:R.querySelectorAll(bb))||[])}function F(R){let L=A()[R];L&&E.setState("value",L.getAttribute(Ni))}function C(R){var L;let J=U(),Q=A(),G=Q.findIndex(ee=>ee===J),q=Q[G+R];(L=l.current)!=null&&L.loop&&(q=G+R<0?Q[Q.length-1]:G+R===Q.length?Q[0]:Q[G+R]),q&&E.setState("value",q.getAttribute(Ni))}function j(R){let L=U(),J=L==null?void 0:L.closest(Yl),Q;for(;J&&!Q;)J=R>0?NU(J,Yl):CU(J,Yl),Q=J==null?void 0:J.querySelector(bb);Q?E.setState("value",Q.getAttribute(Ni)):C(R)}let S=()=>F(A().length-1),P=R=>{R.preventDefault(),R.metaKey?S():R.altKey?j(1):C(1)},H=R=>{R.preventDefault(),R.metaKey?F(0):R.altKey?j(-1):C(-1)};return f.createElement(Te.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:R=>{var L;(L=w.onKeyDown)==null||L.call(w,R);let J=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||J))switch(R.key){case"n":case"j":{y&&R.ctrlKey&&P(R);break}case"ArrowDown":{P(R);break}case"p":case"k":{y&&R.ctrlKey&&H(R);break}case"ArrowUp":{H(R);break}case"Home":{R.preventDefault(),F(0);break}case"End":{R.preventDefault(),S();break}case"Enter":{R.preventDefault();let Q=U();if(Q){let G=new Event(ev);Q.dispatchEvent(G)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:kU},c),Ff(e,R=>f.createElement(pE.Provider,{value:E},f.createElement(mE.Provider,{value:D},R))))}),pU=f.forwardRef((e,t)=>{var n,r;let s=gn(),o=f.useRef(null),i=f.useContext(gE),l=Mu(),c=yE(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Xo(()=>{if(!u)return l.item(s,i==null?void 0:i.id)},[u]);let d=xE(s,o,[e.value,e.children,o],e.keywords),h=lx(),m=eo(k=>k.value&&k.value===d.current),p=eo(k=>u||l.filter()===!1?!0:k.search?k.filtered.items.get(s)>0:!0);f.useEffect(()=>{let k=o.current;if(!(!k||e.disabled))return k.addEventListener(ev,N),()=>k.removeEventListener(ev,N)},[p,e.onSelect,e.disabled]);function N(){var k,E;g(),(E=(k=c.current).onSelect)==null||E.call(k,d.current)}function g(){h.setState("value",d.current,!0)}if(!p)return null;let{disabled:y,value:w,onSelect:v,forceMount:b,keywords:x,..._}=e;return f.createElement(Te.div,{ref:ta(o,t),..._,id:s,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!m,"data-disabled":!!y,"data-selected":!!m,onPointerMove:y||l.getDisablePointerSelection()?void 0:g,onClick:y?void 0:N},e.children)}),gU=f.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:s,...o}=e,i=gn(),l=f.useRef(null),c=f.useRef(null),u=gn(),d=Mu(),h=eo(p=>s||d.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);Xo(()=>d.group(i),[]),xE(i,l,[e.value,e.heading,c]);let m=f.useMemo(()=>({id:i,forceMount:s}),[s]);return f.createElement(Te.div,{ref:ta(l,t),...o,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&f.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),Ff(e,p=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},f.createElement(gE.Provider,{value:m},p))))}),vU=f.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,s=f.useRef(null),o=eo(i=>!i.search);return!n&&!o?null:f.createElement(Te.div,{ref:ta(s,t),...r,"cmdk-separator":"",role:"separator"})}),yU=f.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,s=e.value!=null,o=lx(),i=eo(u=>u.search),l=eo(u=>u.selectedItemId),c=Mu();return f.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),f.createElement(Te.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:s?e.value:i,onChange:u=>{s||o.setState("search",u.target.value),n==null||n(u.target.value)}})}),xU=f.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...s}=e,o=f.useRef(null),i=f.useRef(null),l=eo(u=>u.selectedItemId),c=Mu();return f.useEffect(()=>{if(i.current&&o.current){let u=i.current,d=o.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let p=u.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),f.createElement(Te.div,{ref:ta(o,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},Ff(e,u=>f.createElement("div",{ref:ta(i,c.listInnerRef),"cmdk-list-sizer":""},u)))}),wU=f.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:o,container:i,...l}=e;return f.createElement(Yy,{open:n,onOpenChange:r},f.createElement(Qy,{container:i},f.createElement(Pf,{"cmdk-overlay":"",className:s}),f.createElement(Af,{"aria-label":e.label,"cmdk-dialog":"",className:o},f.createElement(vE,{ref:t,...l}))))}),bU=f.forwardRef((e,t)=>eo(n=>n.filtered.count===0)?f.createElement(Te.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),jU=f.forwardRef((e,t)=>{let{progress:n,children:r,label:s="Loading...",...o}=e;return f.createElement(Te.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ff(e,i=>f.createElement("div",{"aria-hidden":!0},i)))}),pr=Object.assign(vE,{List:xU,Item:pU,Input:yU,Group:gU,Separator:vU,Dialog:wU,Empty:bU,Loading:jU});function NU(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function CU(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function yE(e){let t=f.useRef(e);return Xo(()=>{t.current=e}),t}var Xo=typeof window>"u"?f.useEffect:f.useLayoutEffect;function Ci(e){let t=f.useRef();return t.current===void 0&&(t.current=e()),t}function eo(e){let t=lx(),n=()=>e(t.snapshot());return f.useSyncExternalStore(t.subscribe,n,n)}function xE(e,t,n,r=[]){let s=f.useRef(),o=Mu();return Xo(()=>{var i;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():s.current}})(),c=r.map(u=>u.trim());o.value(e,l,c),(i=t.current)==null||i.setAttribute(Ni,l),s.current=l}),s}var SU=()=>{let[e,t]=f.useState(),n=Ci(()=>new Map);return Xo(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,s)=>{n.current.set(r,s),t({})}};function _U(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Ff({asChild:e,children:t},n){return e&&f.isValidElement(t)?f.cloneElement(_U(t),{ref:t.ref},n(t.props.children)):n(t)}var kU={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const vn=f.forwardRef(({className:e,...t},n)=>a.jsx(pr,{ref:n,className:te("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));vn.displayName=pr.displayName;const yn=f.forwardRef(({className:e,...t},n)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(uy,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(pr.Input,{ref:n,className:te("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));yn.displayName=pr.Input.displayName;const $r=f.forwardRef(({className:e,...t},n)=>a.jsx(pr.List,{ref:n,className:te("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));$r.displayName=pr.List.displayName;const xn=f.forwardRef((e,t)=>a.jsx(pr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));xn.displayName=pr.Empty.displayName;const wn=f.forwardRef(({className:e,...t},n)=>a.jsx(pr.Group,{ref:n,className:te("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));wn.displayName=pr.Group.displayName;const EU=f.forwardRef(({className:e,...t},n)=>a.jsx(pr.Separator,{ref:n,className:te("-mx-1 h-px bg-border",e),...t}));EU.displayName=pr.Separator.displayName;const bn=f.forwardRef(({className:e,...t},n)=>a.jsx(pr.Item,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));bn.displayName=pr.Item.displayName;var $f="Popover",[wE,G9]=mr($f,[ao]),Ou=ao(),[TU,mo]=wE($f),bE=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,l=Ou(t),c=f.useRef(null),[u,d]=f.useState(!1),[h,m]=na({prop:r,defaultProp:s??!1,onChange:o,caller:$f});return a.jsx(by,{...l,children:a.jsx(TU,{scope:t,contentId:gn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:n})})};bE.displayName=$f;var jE="PopoverAnchor",PU=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=mo(jE,n),o=Ou(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx(wu,{...o,...r,ref:t})});PU.displayName=jE;var NE="PopoverTrigger",CE=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=mo(NE,n),o=Ou(n),i=Ve(t,s.triggerRef),l=a.jsx(Te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":TE(s.open),...r,ref:i,onClick:ue(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(wu,{asChild:!0,...o,children:l})});CE.displayName=NE;var cx="PopoverPortal",[AU,DU]=wE(cx,{forceMount:void 0}),SE=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=mo(cx,t);return a.jsx(AU,{scope:t,forceMount:n,children:a.jsx(dn,{present:n||o.open,children:a.jsx(Nl,{asChild:!0,container:s,children:r})})})};SE.displayName=cx;var yl="PopoverContent",_E=f.forwardRef((e,t)=>{const n=DU(yl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=mo(yl,e.__scopePopover);return a.jsx(dn,{present:r||o.open,children:o.modal?a.jsx(MU,{...s,ref:t}):a.jsx(OU,{...s,ref:t})})});_E.displayName=yl;var RU=Qa("PopoverContent.RemoveScroll"),MU=f.forwardRef((e,t)=>{const n=mo(yl,e.__scopePopover),r=f.useRef(null),s=Ve(t,r),o=f.useRef(!1);return f.useEffect(()=>{const i=r.current;if(i)return vf(i)},[]),a.jsx(Su,{as:RU,allowPinchZoom:!0,children:a.jsx(kE,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ue(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),OU=f.forwardRef((e,t)=>{const n=mo(yl,e.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return a.jsx(kE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),kE=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=e,m=mo(yl,n),p=Ou(n);return pf(),a.jsx(Nu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(ni,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(lf,{"data-state":TE(m.open),role:"dialog",id:m.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),EE="PopoverClose",IU=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=mo(EE,n);return a.jsx(Te.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,()=>s.onOpenChange(!1))})});IU.displayName=EE;var FU="PopoverArrow",$U=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Ou(n);return a.jsx(cf,{...s,...r,ref:t})});$U.displayName=FU;function TE(e){return e?"open":"closed"}var LU=bE,BU=CE,UU=SE,PE=_E;const ln=LU,cn=BU,en=f.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>a.jsx(UU,{children:a.jsx(PE,{ref:s,align:t,sideOffset:n,className:te("z-50 w-[calc(100vw-2rem)] max-w-md rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));en.displayName=PE.displayName;function AE({open:e,onOpenChange:t,onSubmit:n,initialData:r,isEditing:s}){const[o,i]=f.useState(!1),[l,c]=f.useState((r==null?void 0:r.provinceRef.id)||""),[u,d]=f.useState({}),{register:h,handleSubmit:m,reset:p,setValue:N,watch:g,formState:{errors:y}}=Pl(),{data:w=[]}=Xe({queryKey:["provinces"],queryFn:()=>Z.listProvinces({status:"active"})});f.useEffect(()=>{e&&(p({name:(r==null?void 0:r.name)||"",price:(r==null?void 0:r.price)||0,provinceRef:(r==null?void 0:r.provinceRef)||{id:"",nameAtBooking:""}}),c((r==null?void 0:r.provinceRef.id)||""))},[e,r,p]);const v=x=>{const _=[],k={};if(x.name.trim()||_.push("Destination Name"),(x.price===void 0||x.price===null||x.price<=0)&&_.push("Price"),l||(_.push("Province"),k.province=!0),_.length>0){d(k),z.error(`Please fill in all required fields: ${_.join(", ")}`);return}d({});const E=w.find(D=>D.id===l);E&&n({...x,provinceRef:{id:E.id,nameAtBooking:E.name}})},b=w.find(x=>x.id===l);return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsxs(Dn,{children:[a.jsx(Rn,{children:a.jsx(Mn,{children:s?"Edit Destination":"Add New Destination"})}),a.jsxs("form",{onSubmit:m(v),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Destination Name *"}),a.jsx(_e,{id:"name",...h("name",{required:"Destination name is required"}),placeholder:"e.g., i Ni, Hi An Ancient Town...",className:y.name?"border-destructive":""}),y.name&&a.jsx("p",{className:"text-sm text-destructive",children:y.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Province *"}),a.jsxs(ln,{open:o,onOpenChange:i,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":o,className:te("w-full justify-between",u.province&&"border-destructive"),children:[b?b.name:"Select province...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search province..."}),a.jsx(xn,{children:"No province found."}),a.jsx(wn,{children:w.map(x=>a.jsxs(bn,{value:x.name,onSelect:()=>{c(x.id),i(!1),u.province&&d({...u,province:!1})},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",l===x.id?"opacity-100":"opacity-0")}),x.name]},x.id))})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"price",children:"Price (VND) *"}),a.jsx(Gt,{value:g("price"),onChange:x=>N("price",x),placeholder:"0"}),y.price&&a.jsx("p",{className:"text-sm text-destructive",children:y.price.message})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",children:s?"Update":"Create"})]})]})]})})}function ke(e){const t=typeof e=="number"?e:0,n=t<0?"-":"",r=Math.abs(t);if(r>=1e3){const o=(Math.trunc(r/1e3*100)/100).toFixed(2).replace(/\.00$/,"").replace(/(\.\d)0$/,"$1"),[i,l]=o.split("."),c=i.replace(/\B(?=(\d{3})+(?!\d))/g,"."),u=l&&l.length>0?`${c},${l}`:c;return`${n}${u}k`}return`${n}${r}`}const zU=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(!1),[s,o]=f.useState(!1),[i,l]=f.useState(),[c,u]=f.useState(""),[d,h]=f.useState("all"),[m,p]=f.useState(""),N=tn(),{data:g=[],isLoading:y}=Xe({queryKey:["touristDestinations",e],queryFn:()=>Z.listTouristDestinations({search:e})}),{data:w=[]}=Xe({queryKey:["provinces"],queryFn:()=>Z.listProvinces()}),v=xe({mutationFn:C=>Z.createTouristDestination(C),onSuccess:()=>{N.invalidateQueries({queryKey:["touristDestinations"]}),z.success("Destination created successfully"),r(!1)},onError:C=>{z.error(C.message)}}),b=xe({mutationFn:({id:C,patch:j})=>Z.updateTouristDestination(C,j),onSuccess:()=>{N.invalidateQueries({queryKey:["touristDestinations"]}),z.success("Destination updated successfully"),r(!1),l(void 0)},onError:C=>{z.error(C.message)}}),x=xe({mutationFn:C=>Z.duplicateTouristDestination(C),onSuccess:()=>{N.invalidateQueries({queryKey:["touristDestinations"]}),z.success("Destination duplicated successfully")}}),_=xe({mutationFn:C=>Z.deleteTouristDestination(C),onSuccess:()=>{N.invalidateQueries({queryKey:["touristDestinations"]}),z.success("Destination deleted successfully")}}),k=xe({mutationFn:()=>Z.deleteAllTouristDestinations(),onSuccess:()=>{N.invalidateQueries({queryKey:["touristDestinations"]}),z.success("All destinations deleted successfully")}}),E=xe({mutationFn:async C=>{const S=(await Z.listProvinces())[0]||{id:"",name:"Unknown"},P=C.map(H=>({name:H.name,price:H.price,provinceRef:{id:S.id,nameAtBooking:S.name}}));return Z.bulkCreateTouristDestinations(P)},onSuccess:()=>{N.invalidateQueries({queryKey:["touristDestinations"]})}}),D=C=>{v.mutate(C)},$=C=>{i&&b.mutate({id:i.id,patch:{name:C.name,price:C.price,provinceRef:C.provinceRef}})},O=C=>{l(C),r(!0)},Y=()=>{r(!1),l(void 0)},T=()=>{confirm("Are you sure you want to delete ALL destinations? This action cannot be undone.")&&k.mutate()},M=async C=>{await E.mutateAsync(C)},U=()=>{if(A.length===0){z.error("No destinations to export");return}const C=A.map(H=>`${H.name},${H.price}`).join(`
`),j=new Blob([C],{type:"text/plain"}),S=URL.createObjectURL(j),P=document.createElement("a");P.href=S,P.download=`destinations-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(S),z.success(`Exported ${A.length} destinations`)},A=f.useMemo(()=>g.filter(C=>{const j=!c||C.name.toLowerCase().includes(c.toLowerCase()),S=!d||d==="all"||C.provinceRef.nameAtBooking===d,P=!m||C.price.toString().includes(m);return j&&S&&P}),[g,c,d,m]),{classes:F}=hs("destinations.headerMode");return a.jsxs(Nr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:F,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Destinations"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage tourist destinations"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{variant:"outline",onClick:U,children:[a.jsx(ia,{className:"h-4 w-4 mr-2"}),"Export TXT"]}),a.jsxs(V,{variant:"outline",onClick:()=>o(!0),children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),"Import"]}),a.jsxs(V,{variant:"outline",onClick:T,className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>O(),children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Add Destination"]})]})]})}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:e,onChange:t,placeholder:"Search destinations..."})})}),y?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):g.length===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No destinations found. Create your first destination to get started."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-lg border",children:a.jsxs("table",{className:"w-full",children:[a.jsxs("thead",{className:"bg-muted/50",children:[a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-medium",children:"Name"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Province"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Price"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Updated"}),a.jsx("th",{className:"text-right p-4 font-medium",children:"Actions"})]}),a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:a.jsx(_e,{placeholder:"Filter name...",value:c,onChange:C=>u(C.target.value),className:"h-8"})}),a.jsx("th",{className:"p-2",children:a.jsxs(ns,{value:d,onValueChange:h,children:[a.jsx(Mr,{className:"h-8",children:a.jsx(rs,{placeholder:"All Provinces"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All"}),w.map(C=>a.jsx(ct,{value:C.name,children:C.name},C.id))]})]})}),a.jsx("th",{className:"p-2",children:a.jsx(_e,{placeholder:"Filter price...",value:m,onChange:C=>p(C.target.value),className:"h-8"})}),a.jsx("th",{className:"p-2"}),a.jsx("th",{className:"p-2"})]})]}),a.jsx("tbody",{children:A.map(C=>a.jsxs("tr",{className:"border-t hover:bg-muted/50 cursor-pointer",onClick:()=>O(C),children:[a.jsx("td",{className:"p-4 font-medium",children:C.name}),a.jsx("td",{className:"p-4 text-muted-foreground",children:C.provinceRef.nameAtBooking}),a.jsx("td",{className:"p-4 text-muted-foreground",children:ke(C.price)}),a.jsx("td",{className:"p-4 text-muted-foreground text-sm",children:An(C.updatedAt.split("T")[0])}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1",onClick:j=>j.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(C),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x.mutate(C.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this destination?")&&_.mutate(C.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},C.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:A.map(C=>a.jsx("div",{className:"rounded-lg border p-4 space-y-3 cursor-pointer hover:bg-muted/50",onClick:()=>O(C),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:C.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[C.provinceRef.nameAtBooking,"  ",ke(C.price)]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Updated ",An(C.updatedAt.split("T")[0])]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:j=>j.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(C),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x.mutate(C.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this destination?")&&_.mutate(C.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})},C.id))})]})]}),a.jsx(AE,{open:n,onOpenChange:Y,onSubmit:i?$:D,initialData:i,isEditing:!!i}),a.jsx(uo,{open:s,onOpenChange:o,onImport:M,title:"Import Destinations",description:"Import destinations from a text file or paste data. Each line should have: name,price",placeholder:`Enter destinations (one per line, format: name,price)
Example:
Ha Long Bay,1500000
Sapa Trek,2000000
Hoi An Ancient Town,800000`,parseItem:C=>{if(C.length>=2&&C[0].trim()){const j=C[0].trim(),S=parseFloat(C[1].replace(/[^\d.-]/g,""));if(!isNaN(S)&&S>0)return{name:j,price:S}}return null}})]})};function DE({open:e,onOpenChange:t,onSubmit:n,initialData:r,isEditing:s}){const{register:o,handleSubmit:i,reset:l,formState:{errors:c}}=Pl({defaultValues:{name:(r==null?void 0:r.name)||""}});f.useEffect(()=>{e&&l({name:(r==null?void 0:r.name)||""})},[e,r,l]);const u=d=>{const h=[];if(d.name.trim()||h.push("Shopping Name"),h.length>0){z.error(`Please fill in all required fields: ${h.join(", ")}`);return}n(d)};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsxs(Dn,{children:[a.jsx(Rn,{children:a.jsx(Mn,{children:s?"Edit Shopping":"Add New Shopping"})}),a.jsxs("form",{onSubmit:i(u),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Shopping Name *"}),a.jsx(_e,{id:"name",...o("name",{required:"Shopping name is required"}),placeholder:"e.g., Silk Village, Handicraft Center...",className:c.name?"border-destructive":""}),c.name&&a.jsx("p",{className:"text-sm text-destructive",children:c.name.message})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",children:s?"Update":"Create"})]})]})]})})}const WU=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(!1),[s,o]=f.useState(!1),[i,l]=f.useState(),[c,u]=f.useState(""),d=tn(),{data:h=[],isLoading:m}=Xe({queryKey:["shoppings",e],queryFn:()=>Z.listShoppings({search:e})}),p=xe({mutationFn:T=>Z.createShopping(T),onSuccess:()=>{d.invalidateQueries({queryKey:["shoppings"]}),z.success("Shopping created successfully"),r(!1)},onError:T=>{z.error(T.message)}}),N=xe({mutationFn:({id:T,patch:M})=>Z.updateShopping(T,M),onSuccess:()=>{d.invalidateQueries({queryKey:["shoppings"]}),z.success("Shopping updated successfully"),r(!1),l(void 0)},onError:T=>{z.error(T.message)}}),g=xe({mutationFn:T=>Z.duplicateShopping(T),onSuccess:()=>{d.invalidateQueries({queryKey:["shoppings"]}),z.success("Shopping duplicated successfully")}}),y=xe({mutationFn:T=>Z.deleteShopping(T),onSuccess:()=>{d.invalidateQueries({queryKey:["shoppings"]}),z.success("Shopping deleted successfully")}}),w=xe({mutationFn:()=>Z.deleteAllShoppings(),onSuccess:()=>{d.invalidateQueries({queryKey:["shoppings"]}),z.success("All shopping places deleted successfully")},onError:T=>{z.error(T.message||"Failed to delete all shopping places")}}),v=xe({mutationFn:T=>Z.bulkCreateShoppings(T),onSuccess:()=>{d.invalidateQueries({queryKey:["shoppings"]}),z.success("Shopping places imported successfully")},onError:T=>{z.error(T.message||"Failed to import shopping places")}}),b=T=>{p.mutate(T)},x=T=>{i&&N.mutate({id:i.id,patch:{name:T.name}})},_=T=>{l(T),r(!0)},k=()=>{r(!1),l(void 0)},E=async()=>{confirm("Are you sure you want to delete ALL shopping places? This action cannot be undone.")&&await w.mutateAsync()},D=async T=>{await v.mutateAsync(T)},$=()=>{if(O.length===0){z.error("No shopping places to export");return}const T=O.map(F=>F.name).join(`
`),M=new Blob([T],{type:"text/plain"}),U=URL.createObjectURL(M),A=document.createElement("a");A.href=U,A.download=`shopping-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(U),z.success(`Exported ${O.length} shopping places`)},O=f.useMemo(()=>h.filter(T=>c===""||T.name.toLowerCase().includes(c.toLowerCase())),[h,c]),{classes:Y}=hs("shopping.headerMode");return a.jsxs(Nr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:Y,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Shopping"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage shopping locations"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{onClick:$,variant:"outline",className:"gap-2",children:[a.jsx(ia,{className:"h-4 w-4"}),"Export TXT"]}),a.jsxs(V,{onClick:()=>o(!0),variant:"outline",className:"gap-2",children:[a.jsx(ds,{className:"h-4 w-4"}),"Import"]}),a.jsxs(V,{onClick:E,variant:"outline",className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>_(),children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Add Shopping"]})]})]})}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:e,onChange:t,placeholder:"Search shopping..."})})}),m?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):h.length===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No shopping locations found. Create your first shopping location to get started."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-lg border",children:a.jsxs("table",{className:"w-full",children:[a.jsxs("thead",{className:"bg-muted/50",children:[a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-medium",children:"Name"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Updated"}),a.jsx("th",{className:"text-right p-4 font-medium",children:"Actions"})]}),a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4",children:a.jsx(_e,{placeholder:"Filter by name...",value:c,onChange:T=>u(T.target.value),className:"h-8"})}),a.jsx("th",{className:"text-left p-4"}),a.jsx("th",{className:"text-right p-4"})]})]}),a.jsx("tbody",{children:O.map(T=>a.jsxs("tr",{className:"border-t hover:bg-muted/50 cursor-pointer",onClick:()=>_(T),children:[a.jsx("td",{className:"p-4 font-medium",children:T.name}),a.jsx("td",{className:"p-4 text-muted-foreground text-sm",children:An(T.updatedAt.split("T")[0])}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1",onClick:M=>M.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>_(T),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g.mutate(T.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this shopping location?")&&y.mutate(T.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},T.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:O.map(T=>a.jsx("div",{className:"rounded-lg border p-4 space-y-3 cursor-pointer hover:bg-muted/50",onClick:()=>_(T),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:T.name}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Updated ",An(T.updatedAt.split("T")[0])]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:M=>M.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>_(T),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g.mutate(T.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this shopping location?")&&y.mutate(T.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})},T.id))})]})]}),a.jsx(DE,{open:n,onOpenChange:k,onSubmit:i?x:b,initialData:i,isEditing:!!i}),a.jsx(uo,{open:s,onOpenChange:o,onImport:D,title:"Import Shopping Places",description:"Upload or paste shopping place names",placeholder:`Enter shopping place names (one per line or comma-separated)
Example:
Central Market
Grand Shopping Mall
Souk Marketplace`,parseItem:T=>T.length>=1&&T[0].trim()?{name:T[0].trim()}:null})]})};function VU({open:e,onOpenChange:t,onSubmit:n,initialData:r,isEditing:s}){const{register:o,handleSubmit:i,reset:l,formState:{errors:c}}=Pl({defaultValues:{name:(r==null?void 0:r.name)||""}});f.useEffect(()=>{e&&l({name:(r==null?void 0:r.name)||""})},[e,r,l]);const u=d=>{const h=[];if(d.name.trim()||h.push("Category Name"),h.length>0){z.error(`Please fill in all required fields: ${h.join(", ")}`);return}n(d)};return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsxs(Dn,{children:[a.jsx(Rn,{children:a.jsx(Mn,{children:s?"Edit Category":"Add New Category"})}),a.jsxs("form",{onSubmit:i(u),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Category Name *"}),a.jsx(_e,{id:"name",...o("name",{required:"Category name is required"}),placeholder:"e.g., Transportation, Accommodation...",className:c.name?"border-destructive":""}),c.name&&a.jsx("p",{className:"text-sm text-destructive",children:c.name.message})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",children:s?"Update":"Create"})]})]})]})})}const HU=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(!1),[s,o]=f.useState(!1),[i,l]=f.useState(),[c,u]=f.useState(""),d=tn(),{data:h=[],isLoading:m}=Xe({queryKey:["expenseCategories",e],queryFn:()=>Z.listExpenseCategories({search:e})}),p=xe({mutationFn:T=>Z.createExpenseCategory(T),onSuccess:()=>{d.invalidateQueries({queryKey:["expenseCategories"]}),z.success("Expense category created successfully"),r(!1)},onError:T=>{z.error(T.message)}}),N=xe({mutationFn:({id:T,patch:M})=>Z.updateExpenseCategory(T,M),onSuccess:()=>{d.invalidateQueries({queryKey:["expenseCategories"]}),z.success("Expense category updated successfully"),r(!1),l(void 0)},onError:T=>{z.error(T.message)}}),g=xe({mutationFn:T=>Z.duplicateExpenseCategory(T),onSuccess:()=>{d.invalidateQueries({queryKey:["expenseCategories"]}),z.success("Expense category duplicated successfully")}}),y=xe({mutationFn:T=>Z.deleteExpenseCategory(T),onSuccess:()=>{d.invalidateQueries({queryKey:["expenseCategories"]}),z.success("Expense category deleted successfully")}}),w=xe({mutationFn:()=>Z.deleteAllExpenseCategories(),onSuccess:()=>{d.invalidateQueries({queryKey:["expenseCategories"]}),z.success("All expense categories deleted successfully")},onError:T=>{z.error(T.message)}}),v=xe({mutationFn:T=>Z.bulkCreateExpenseCategories(T),onSuccess:()=>{d.invalidateQueries({queryKey:["expenseCategories"]})},onError:T=>{z.error(T.message)}}),b=T=>{p.mutate(T)},x=T=>{i&&N.mutate({id:i.id,patch:{name:T.name}})},_=T=>{l(T),r(!0)},k=()=>{r(!1),l(void 0)},E=()=>{confirm("Are you sure you want to delete ALL expense categories? This action cannot be undone.")&&w.mutate()},D=async T=>{await v.mutateAsync(T)},$=()=>{if(O.length===0){z.error("No expense categories to export");return}const T=O.map(F=>F.name).join(`
`),M=new Blob([T],{type:"text/plain"}),U=URL.createObjectURL(M),A=document.createElement("a");A.href=U,A.download=`expense-categories-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(U),z.success(`Exported ${O.length} expense categories`)},O=f.useMemo(()=>h.filter(T=>!c||T.name.toLowerCase().includes(c.toLowerCase())),[h,c]),{classes:Y}=hs("expensecategories.headerMode");return a.jsxs(Nr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:Y,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Expense Categories"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage expense categories"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{variant:"outline",onClick:$,children:[a.jsx(ia,{className:"h-4 w-4 mr-2"}),"Export TXT"]}),a.jsxs(V,{variant:"outline",onClick:()=>o(!0),children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),"Import"]}),a.jsxs(V,{variant:"outline",onClick:E,className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>_(),children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Add Category"]})]})]})}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:e,onChange:t,placeholder:"Search categories..."})})}),m?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):h.length===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No expense categories found. Create your first category to get started."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-lg border",children:a.jsxs("table",{className:"w-full",children:[a.jsxs("thead",{className:"bg-muted/50",children:[a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-medium",children:"Name"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Updated"}),a.jsx("th",{className:"text-right p-4 font-medium",children:"Actions"})]}),a.jsxs("tr",{className:"border-t",children:[a.jsx("th",{className:"p-2",children:a.jsx(_e,{placeholder:"Filter by name...",value:c,onChange:T=>u(T.target.value),className:"h-8"})}),a.jsx("th",{className:"p-2"}),a.jsx("th",{className:"p-2"})]})]}),a.jsx("tbody",{children:O.map(T=>a.jsxs("tr",{className:"border-t hover:bg-muted/50 cursor-pointer",onClick:()=>_(T),children:[a.jsx("td",{className:"p-4 font-medium",children:T.name}),a.jsx("td",{className:"p-4 text-muted-foreground text-sm",children:An(T.updatedAt.split("T")[0])}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1",onClick:M=>M.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>_(T),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g.mutate(T.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this category?")&&y.mutate(T.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},T.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:O.map(T=>a.jsx("div",{className:"rounded-lg border p-4 space-y-3 cursor-pointer hover:bg-muted/50",onClick:()=>_(T),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:T.name}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Updated ",An(T.updatedAt.split("T")[0])]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:M=>M.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>_(T),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g.mutate(T.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this category?")&&y.mutate(T.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})},T.id))})]})]}),a.jsx(VU,{open:n,onOpenChange:k,onSubmit:i?x:b,initialData:i,isEditing:!!i}),a.jsx(uo,{open:s,onOpenChange:o,onImport:D,title:"Import Expense Categories",description:"Import multiple expense categories at once. Enter one category name per line.",placeholder:"Enter category names (one per line)\\nExample:\\nTransportation\\nAccommodation\\nFood & Beverage\\nEntertainment",parseItem:T=>{const M=T[0];return M&&M.trim()?{name:M.trim()}:null}})]})};function RE({open:e,onOpenChange:t,onSubmit:n,initialData:r,isEditing:s}){const[o,i]=f.useState(!1),[l,c]=f.useState((r==null?void 0:r.categoryRef.id)||""),[u,d]=f.useState({}),{register:h,handleSubmit:m,reset:p,setValue:N,watch:g,formState:{errors:y}}=Pl(),{data:w=[]}=Xe({queryKey:["expenseCategories"],queryFn:()=>Z.listExpenseCategories({status:"active"})});f.useEffect(()=>{e&&(p({name:(r==null?void 0:r.name)||"",price:(r==null?void 0:r.price)||0,categoryRef:(r==null?void 0:r.categoryRef)||{id:"",nameAtBooking:""}}),c((r==null?void 0:r.categoryRef.id)||""))},[e,r,p]);const v=x=>{const _=[],k={};if(x.name.trim()||_.push("Expense Name"),(x.price===void 0||x.price===null||x.price<=0)&&_.push("Price"),l||(_.push("Category"),k.category=!0),_.length>0){d(k),z.error(`Please fill in all required fields: ${_.join(", ")}`);return}d({});const E=w.find(D=>D.id===l);E&&n({...x,categoryRef:{id:E.id,nameAtBooking:E.name}})},b=w.find(x=>x.id===l);return a.jsx(Yn,{open:e,onOpenChange:t,children:a.jsxs(Dn,{children:[a.jsx(Rn,{children:a.jsx(Mn,{children:s?"Edit Detailed Expense":"Add New Detailed Expense"})}),a.jsxs("form",{onSubmit:m(v),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"name",children:"Expense Name *"}),a.jsx(_e,{id:"name",...h("name",{required:"Expense name is required"}),placeholder:"e.g., Mineral Water, Cold Towels...",className:y.name?"border-destructive":""}),y.name&&a.jsx("p",{className:"text-sm text-destructive",children:y.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Category *"}),a.jsxs(ln,{open:o,onOpenChange:i,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":o,className:te("w-full justify-between",u.category&&"border-destructive"),children:[b?b.name:"Select category...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search category..."}),a.jsx(xn,{children:"No category found."}),a.jsx(wn,{children:w.map(x=>a.jsxs(bn,{value:x.name,onSelect:()=>{c(x.id),i(!1),u.category&&d({...u,category:!1})},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",l===x.id?"opacity-100":"opacity-0")}),x.name]},x.id))})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"price",children:"Price (VND) *"}),a.jsx(Gt,{value:g("price"),onChange:x=>N("price",x),placeholder:"0"}),y.price&&a.jsx("p",{className:"text-sm text-destructive",children:y.price.message})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),a.jsx(V,{type:"submit",children:s?"Update":"Create"})]})]})]})})}const qU=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(!1),[s,o]=f.useState(!1),[i,l]=f.useState(),[c,u]=f.useState(""),[d,h]=f.useState(""),[m,p]=f.useState(""),N=tn(),{data:g=[],isLoading:y}=Xe({queryKey:["detailedExpenses",e],queryFn:()=>Z.listDetailedExpenses({search:e})}),{data:w=[]}=Xe({queryKey:["expenseCategories"],queryFn:()=>Z.listExpenseCategories()}),v=xe({mutationFn:C=>Z.createDetailedExpense(C),onSuccess:()=>{N.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("Detailed expense created successfully"),r(!1)},onError:C=>{z.error(C.message)}}),b=xe({mutationFn:({id:C,patch:j})=>Z.updateDetailedExpense(C,j),onSuccess:()=>{N.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("Detailed expense updated successfully"),r(!1),l(void 0)},onError:C=>{z.error(C.message)}}),x=xe({mutationFn:C=>Z.duplicateDetailedExpense(C),onSuccess:()=>{N.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("Detailed expense duplicated successfully")}}),_=xe({mutationFn:C=>Z.deleteDetailedExpense(C),onSuccess:()=>{N.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("Detailed expense deleted successfully")}}),k=xe({mutationFn:()=>Z.deleteAllDetailedExpenses(),onSuccess:()=>{N.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("All detailed expenses deleted successfully")}}),E=xe({mutationFn:async C=>{const S=(await Z.listExpenseCategories())[0]||{id:"",name:"Other"},P=C.map(H=>({name:H.name,price:H.price,categoryRef:{id:S.id,nameAtBooking:S.name}}));return Z.bulkCreateDetailedExpenses(P)},onSuccess:()=>{N.invalidateQueries({queryKey:["detailedExpenses"]})}}),D=C=>{v.mutate(C)},$=C=>{i&&b.mutate({id:i.id,patch:{name:C.name,price:C.price,categoryRef:C.categoryRef}})},O=C=>{l(C),r(!0)},Y=()=>{r(!1),l(void 0)},T=()=>{confirm("Are you sure you want to delete ALL detailed expenses? This action cannot be undone.")&&k.mutate()},M=async C=>{await E.mutateAsync(C)},U=()=>{if(A.length===0){z.error("No detailed expenses to export");return}const C=A.map(H=>`${H.name},${H.price}`).join(`
`),j=new Blob([C],{type:"text/plain"}),S=URL.createObjectURL(j),P=document.createElement("a");P.href=S,P.download=`detailed-expenses-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(S),z.success(`Exported ${A.length} detailed expenses`)},A=f.useMemo(()=>g.filter(C=>{const j=!c||C.name.toLowerCase().includes(c.toLowerCase()),S=!d||C.categoryRef.nameAtBooking===d,P=!m||C.price.toString().includes(m);return j&&S&&P}),[g,c,d,m]),{classes:F}=hs("detailedexpenses.headerMode");return a.jsxs(Nr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:F,children:a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Detailed Expenses"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage detailed expenses"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[a.jsxs(V,{variant:"outline",onClick:U,children:[a.jsx(ia,{className:"h-4 w-4 mr-2"}),"Export TXT"]}),a.jsxs(V,{variant:"outline",onClick:()=>o(!0),children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),"Import"]}),a.jsxs(V,{variant:"outline",onClick:T,className:"gap-2 text-destructive hover:text-destructive",children:[a.jsx(la,{className:"h-4 w-4"}),"Delete All"]}),a.jsxs(V,{onClick:()=>O(),children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Add Expense"]})]})]})}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Ms,{value:e,onChange:t,placeholder:"Search expenses..."})})}),y?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):g.length===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No detailed expenses found. Create your first expense to get started."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block rounded-lg border",children:a.jsxs("table",{className:"w-full",children:[a.jsxs("thead",{className:"bg-muted/50",children:[a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-medium",children:"Name"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Category"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Price"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Updated"}),a.jsx("th",{className:"text-right p-4 font-medium",children:"Actions"})]}),a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:a.jsx(_e,{placeholder:"Filter name...",value:c,onChange:C=>u(C.target.value),className:"h-8"})}),a.jsx("th",{className:"p-2",children:a.jsxs(ns,{value:d,onValueChange:C=>h(C==="all"?"":C),children:[a.jsx(Mr,{className:"h-8",children:a.jsx(rs,{placeholder:"All Categories"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All"}),w.map(C=>a.jsx(ct,{value:C.name,children:C.name},C.id))]})]})}),a.jsx("th",{className:"p-2",children:a.jsx(_e,{placeholder:"Filter price...",value:m,onChange:C=>p(C.target.value),className:"h-8"})}),a.jsx("th",{className:"p-2"}),a.jsx("th",{className:"p-2"})]})]}),a.jsx("tbody",{children:A.map(C=>a.jsxs("tr",{className:"border-t hover:bg-muted/50 cursor-pointer",onClick:()=>O(C),children:[a.jsx("td",{className:"p-4 font-medium",children:C.name}),a.jsx("td",{className:"p-4 text-muted-foreground",children:C.categoryRef.nameAtBooking}),a.jsx("td",{className:"p-4 text-muted-foreground",children:ke(C.price)}),a.jsx("td",{className:"p-4 text-muted-foreground text-sm",children:An(C.updatedAt.split("T")[0])}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1",onClick:j=>j.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(C),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x.mutate(C.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this expense?")&&_.mutate(C.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},C.id))})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:A.map(C=>a.jsx("div",{className:"rounded-lg border p-4 space-y-3 cursor-pointer hover:bg-muted/50",onClick:()=>O(C),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:C.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[C.categoryRef.nameAtBooking,"  ",ke(C.price)]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Updated ",An(C.updatedAt.split("T")[0])]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:j=>j.stopPropagation(),children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(C),className:"h-8 w-8 p-0",children:a.jsx(Pn,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x.mutate(C.id),className:"h-8 w-8 p-0",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this expense?")&&_.mutate(C.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})},C.id))})]})]}),a.jsx(RE,{open:n,onOpenChange:Y,onSubmit:i?$:D,initialData:i,isEditing:!!i}),a.jsx(uo,{open:s,onOpenChange:o,onImport:M,title:"Import Detailed Expenses",description:"Import detailed expenses from a text file or paste data. Each line should have: name,price",placeholder:`Enter expenses (one per line, format: name,price)
Example:
Airport Transfer,500000
Hotel Booking,3000000
Tour Guide Fee,800000`,parseItem:C=>{if(C.length>=2&&C[0].trim()){const j=C[0].trim(),S=parseFloat(C[1].replace(/[^\d.-]/g,""));if(!isNaN(S)&&S>0)return{name:j,price:S}}return null}})]})};var Be=function(){return Be=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Be.apply(this,arguments)};function GU(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function ME(e,t,n){for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Iu(e){return e.mode==="multiple"}function Fu(e){return e.mode==="range"}function Lf(e){return e.mode==="single"}var KU={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function YU(e,t){return Dr(e,"LLLL y",t)}function QU(e,t){return Dr(e,"d",t)}function JU(e,t){return Dr(e,"LLLL",t)}function XU(e){return"".concat(e)}function ZU(e,t){return Dr(e,"cccccc",t)}function e6(e,t){return Dr(e,"yyyy",t)}var t6=Object.freeze({__proto__:null,formatCaption:YU,formatDay:QU,formatMonthCaption:JU,formatWeekNumber:XU,formatWeekdayName:ZU,formatYearCaption:e6}),n6=function(e,t,n){return Dr(e,"do MMMM (EEEE)",n)},r6=function(){return"Month: "},s6=function(){return"Go to next month"},a6=function(){return"Go to previous month"},o6=function(e,t){return Dr(e,"cccc",t)},i6=function(e){return"Week n. ".concat(e)},l6=function(){return"Year: "},c6=Object.freeze({__proto__:null,labelDay:n6,labelMonthDropdown:r6,labelNext:s6,labelPrevious:a6,labelWeekNumber:i6,labelWeekday:o6,labelYearDropdown:l6});function u6(){var e="buttons",t=KU,n=M_,r={},s={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:t6,labels:c6,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:o,styles:i,today:l,mode:"default"}}function d6(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,o=e.fromDate,i=e.toDate;return r?o=fr(r):t&&(o=new Date(t,0,1)),s?i=Wy(s):n&&(i=new Date(n,11,31)),{fromDate:o?vl(o):void 0,toDate:i?vl(i):void 0}}var OE=f.createContext(void 0);function h6(e){var t,n=e.initialProps,r=u6(),s=d6(n),o=s.fromDate,i=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Lf(n)||Iu(n)||Fu(n))&&(c=n.onSelect);var u=Be(Be(Be({},r),n),{captionLayout:l,classNames:Be(Be({},r.classNames),n.classNames),components:Be({},n.components),formatters:Be(Be({},r.formatters),n.formatters),fromDate:o,labels:Be(Be({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Be(Be({},r.modifiers),n.modifiers),modifiersClassNames:Be(Be({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Be(Be({},r.styles),n.styles),toDate:i});return a.jsx(OE.Provider,{value:u,children:e.children})}function vt(){var e=f.useContext(OE);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function IE(e){var t=vt(),n=t.locale,r=t.classNames,s=t.styles,o=t.formatters.formatCaption;return a.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:n})})}function f6(e){return a.jsx("svg",Be({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function FE(e){var t,n,r=e.onChange,s=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,u=vt(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:f6;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),a.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:o}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function m6(e){var t,n=vt(),r=n.fromDate,s=n.toDate,o=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});var h=[];if(D8(r,s))for(var m=fr(r),p=r.getMonth();p<=s.getMonth();p++)h.push(Gm(m,p));else for(var m=fr(new Date),p=0;p<=11;p++)h.push(Gm(m,p));var N=function(y){var w=Number(y.target.value),v=Gm(fr(e.displayMonth),w);e.onChange(v)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:FE;return a.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:h.map(function(y){return a.jsx("option",{value:y.getMonth(),children:l(y,{locale:i})},y.getMonth())})})}function p6(e){var t,n=e.displayMonth,r=vt(),s=r.fromDate,o=r.toDate,i=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,m=[];if(!s)return a.jsx(a.Fragment,{});if(!o)return a.jsx(a.Fragment,{});for(var p=s.getFullYear(),N=o.getFullYear(),g=p;g<=N;g++)m.push(ob(D_(new Date),g));var y=function(v){var b=ob(fr(n),Number(v.target.value));e.onChange(b)},w=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:FE;return a.jsx(w,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:y,value:n.getFullYear(),caption:d(n,{locale:i}),children:m.map(function(v){return a.jsx("option",{value:v.getFullYear(),children:d(v,{locale:i})},v.getFullYear())})})}function g6(e,t){var n=f.useState(e),r=n[0],s=n[1],o=t===void 0?r:t;return[o,s]}function v6(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&iu(o,s)<0){var u=-1*(c-1);s=cs(o,u)}return i&&iu(s,i)<0&&(s=i),fr(s)}function y6(){var e=vt(),t=v6(e),n=g6(t,e.month),r=n[0],s=n[1],o=function(i){var l;if(!e.disableNavigation){var c=fr(i);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,o]}function x6(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=fr(e),o=fr(cs(s,r)),i=iu(o,s),l=[],c=0;c<i;c++){var u=cs(s,c);l.push(u)}return n&&(l=l.reverse()),l}function w6(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,o=s===void 0?1:s,i=r?o:1,l=fr(e);if(!n)return cs(l,i);var c=iu(n,e);if(!(c<o))return cs(l,i)}}function b6(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,o=s===void 0?1:s,i=r?o:1,l=fr(e);if(!n)return cs(l,-i);var c=iu(l,n);if(!(c<=0))return cs(l,-i)}}var $E=f.createContext(void 0);function j6(e){var t=vt(),n=y6(),r=n[0],s=n[1],o=x6(r,t),i=w6(r,t),l=b6(r,t),c=function(h){return o.some(function(m){return Hy(h,m)})},u=function(h,m){c(h)||(m&&L_(h,m)?s(cs(h,1+t.numberOfMonths*-1)):s(h))},d={currentMonth:r,displayMonths:o,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return a.jsx($E.Provider,{value:d,children:e.children})}function $u(){var e=f.useContext($E);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function jb(e){var t,n=vt(),r=n.classNames,s=n.styles,o=n.components,i=$u().goToMonth,l=function(d){i(cs(d,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:IE,u=a.jsx(c,{id:e.id,displayMonth:e.displayMonth});return a.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[a.jsx("div",{className:r.vhidden,children:u}),a.jsx(m6,{onChange:l,displayMonth:e.displayMonth}),a.jsx(p6,{onChange:l,displayMonth:e.displayMonth})]})}function N6(e){return a.jsx("svg",Be({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function C6(e){return a.jsx("svg",Be({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ph=f.forwardRef(function(e,t){var n=vt(),r=n.classNames,s=n.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var i=o.join(" "),l=Be(Be({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),a.jsx("button",Be({},e,{ref:t,type:"button",className:i,style:l}))});function S6(e){var t,n,r=vt(),s=r.dir,o=r.locale,i=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!e.nextMonth&&!e.previousMonth)return a.jsx(a.Fragment,{});var m=u(e.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),N=d(e.nextMonth,{locale:o}),g=[i.nav_button,i.nav_button_next].join(" "),y=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:C6,w=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:N6;return a.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&a.jsx(Ph,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?a.jsx(y,{className:i.nav_icon,style:l.nav_icon}):a.jsx(w,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&a.jsx(Ph,{name:"next-month","aria-label":N,className:g,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?a.jsx(w,{className:i.nav_icon,style:l.nav_icon}):a.jsx(y,{className:i.nav_icon,style:l.nav_icon})})]})}function Nb(e){var t=vt().numberOfMonths,n=$u(),r=n.previousMonth,s=n.nextMonth,o=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(N){return Hy(e.displayMonth,N)}),c=l===0,u=l===i.length-1,d=t>1&&(c||!u),h=t>1&&(u||!c),m=function(){r&&o(r)},p=function(){s&&o(s)};return a.jsx(S6,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:r,onPreviousClick:m,onNextClick:p})}function _6(e){var t,n=vt(),r=n.classNames,s=n.disableNavigation,o=n.styles,i=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:IE,u;return s?u=a.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?u=a.jsx(jb,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(jb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),a.jsx(Nb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(Nb,{displayMonth:e.displayMonth,id:e.id})]}),a.jsx("div",{className:r.caption,style:o.caption,children:u})}function k6(e){var t=vt(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?a.jsx("tfoot",{className:s,style:r.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:n})})}):a.jsx(a.Fragment,{})}function E6(e,t,n){for(var r=n?Ko(new Date):Rs(new Date,{locale:e,weekStartsOn:t}),s=[],o=0;o<7;o++){var i=Bn(r,o);s.push(i)}return s}function T6(){var e=vt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=E6(s,o,i);return a.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&a.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function P6(){var e,t=vt(),n=t.classNames,r=t.styles,s=t.components,o=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:T6;return a.jsx("thead",{style:r.head,className:n.head,children:a.jsx(o,{})})}function A6(e){var t=vt(),n=t.locale,r=t.formatters.formatDay;return a.jsx(a.Fragment,{children:r(e.date,{locale:n})})}var ux=f.createContext(void 0);function D6(e){if(!Iu(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return a.jsx(ux.Provider,{value:t,children:e.children})}return a.jsx(R6,{initialProps:e.initialProps,children:e.children})}function R6(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,o=t.max,i=function(u,d,h){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,u,d,h);var N=!!(d.selected&&s&&(r==null?void 0:r.length)===s);if(!N){var g=!!(!d.selected&&o&&(r==null?void 0:r.length)===o);if(!g){var y=r?ME([],r):[];if(d.selected){var w=y.findIndex(function(v){return cr(u,v)});y.splice(w,1)}else y.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,y,u,d,h)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=o&&r.length>o-1,h=r.some(function(m){return cr(m,u)});return!!(d&&!h)});var c={selected:r,onDayClick:i,modifiers:l};return a.jsx(ux.Provider,{value:c,children:n})}function dx(){var e=f.useContext(ux);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function M6(e,t){var n=t||{},r=n.from,s=n.to;return r&&s?cr(s,e)&&cr(r,e)?void 0:cr(s,e)?{from:s,to:void 0}:cr(r,e)?void 0:Hg(r,e)?{from:e,to:s}:{from:r,to:e}:s?Hg(e,s)?{from:s,to:e}:{from:e,to:s}:r?L_(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var hx=f.createContext(void 0);function O6(e){if(!Fu(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(hx.Provider,{value:t,children:e.children})}return a.jsx(I6,{initialProps:e.initialProps,children:e.children})}function I6(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},o=s.from,i=s.to,l=t.min,c=t.max,u=function(p,N,g){var y,w;(y=t.onDayClick)===null||y===void 0||y.call(t,p,N,g);var v=M6(p,r);(w=t.onSelect)===null||w===void 0||w.call(t,v,p,N,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],i?(d.range_end=[i],cr(o,i)||(d.range_middle=[{after:o,before:i}])):d.range_end=[o]):i&&(d.range_start=[i],d.range_end=[i]),l&&(o&&!i&&d.disabled.push({after:qm(o,l-1),before:Bn(o,l-1)}),o&&i&&d.disabled.push({after:o,before:Bn(o,l-1)}),!o&&i&&d.disabled.push({after:qm(i,l-1),before:Bn(i,l-1)})),c){if(o&&!i&&(d.disabled.push({before:Bn(o,-c+1)}),d.disabled.push({after:Bn(o,c-1)})),o&&i){var h=ts(i,o)+1,m=c-h;d.disabled.push({before:qm(o,m)}),d.disabled.push({after:Bn(i,m)})}!o&&i&&(d.disabled.push({before:Bn(i,-c+1)}),d.disabled.push({after:Bn(i,c-1)}))}return a.jsx(hx.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function fx(){var e=f.useContext(hx);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Fd(e){return Array.isArray(e)?ME([],e):e!==void 0?[e]:[]}function F6(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=Fd(s)}),t}var us;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(us||(us={}));var $6=us.Selected,Bs=us.Disabled,L6=us.Hidden,B6=us.Today,Zm=us.RangeEnd,ep=us.RangeMiddle,tp=us.RangeStart,U6=us.Outside;function z6(e,t,n){var r,s=(r={},r[$6]=Fd(e.selected),r[Bs]=Fd(e.disabled),r[L6]=Fd(e.hidden),r[B6]=[e.today],r[Zm]=[],r[ep]=[],r[tp]=[],r[U6]=[],r);return e.fromDate&&s[Bs].push({before:e.fromDate}),e.toDate&&s[Bs].push({after:e.toDate}),Iu(e)?s[Bs]=s[Bs].concat(t.modifiers[Bs]):Fu(e)&&(s[Bs]=s[Bs].concat(n.modifiers[Bs]),s[tp]=n.modifiers[tp],s[ep]=n.modifiers[ep],s[Zm]=n.modifiers[Zm]),s}var LE=f.createContext(void 0);function W6(e){var t=vt(),n=dx(),r=fx(),s=z6(t,n,r),o=F6(t.modifiers),i=Be(Be({},s),o);return a.jsx(LE.Provider,{value:i,children:e.children})}function BE(){var e=f.useContext(LE);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function V6(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function H6(e){return!!(e&&typeof e=="object"&&"from"in e)}function q6(e){return!!(e&&typeof e=="object"&&"after"in e)}function G6(e){return!!(e&&typeof e=="object"&&"before"in e)}function K6(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Y6(e,t){var n,r=t.from,s=t.to;if(r&&s){var o=ts(s,r)<0;o&&(n=[s,r],r=n[0],s=n[1]);var i=ts(e,r)>=0&&ts(s,e)>=0;return i}return s?cr(s,e):r?cr(r,e):!1}function Q6(e){return zy(e)}function J6(e){return Array.isArray(e)&&e.every(zy)}function X6(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Q6(n))return cr(e,n);if(J6(n))return n.includes(e);if(H6(n))return Y6(e,n);if(K6(n))return n.dayOfWeek.includes(e.getDay());if(V6(n)){var r=ts(n.before,e),s=ts(n.after,e),o=r>0,i=s<0,l=Hg(n.before,n.after);return l?i&&o:o||i}return q6(n)?ts(e,n.after)>0:G6(n)?ts(n.before,e)>0:typeof n=="function"?n(e):!1})}function mx(e,t,n){var r=Object.keys(t).reduce(function(o,i){var l=t[i];return X6(e,l)&&o.push(i),o},[]),s={};return r.forEach(function(o){return s[o]=!0}),n&&!Hy(e,n)&&(s.outside=!0),s}function Z6(e,t){for(var n=fr(e[0]),r=Wy(e[e.length-1]),s,o,i=n;i<=r;){var l=mx(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Bn(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),s||(s=i),i=Bn(i,1)}return o||s}var ez=365;function UE(e,t){var n=t.moveBy,r=t.direction,s=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,m={day:Bn,week:Vg,month:cs,year:E5,startOfWeek:function(y){return s.ISOWeek?Ko(y):Rs(y,{locale:h,weekStartsOn:c})},endOfWeek:function(y){return s.ISOWeek?R_(y):Vy(y,{locale:h,weekStartsOn:c})}},p=m[n](e,r==="after"?1:-1);r==="before"&&u?p=T5([u,p]):r==="after"&&d&&(p=P5([d,p]));var N=!0;if(o){var g=mx(p,o);N=!g.disabled&&!g.hidden}return N?p:l.count>ez?l.lastFocused:UE(p,{moveBy:n,direction:r,context:s,modifiers:o,retry:Be(Be({},l),{count:l.count+1})})}var zE=f.createContext(void 0);function tz(e){var t=$u(),n=BE(),r=f.useState(),s=r[0],o=r[1],i=f.useState(),l=i[0],c=i[1],u=Z6(t.displayMonths,n),d=s??(l&&t.isDateDisplayed(l))?l:u,h=function(){c(s),o(void 0)},m=function(y){o(y)},p=vt(),N=function(y,w){if(s){var v=UE(s,{moveBy:y,direction:w,context:p,modifiers:n});cr(s,v)||(t.goToDate(v,s),m(v))}},g={focusedDay:s,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return a.jsx(zE.Provider,{value:g,children:e.children})}function px(){var e=f.useContext(zE);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function nz(e,t){var n=BE(),r=mx(e,n,t);return r}var gx=f.createContext(void 0);function rz(e){if(!Lf(e.initialProps)){var t={selected:void 0};return a.jsx(gx.Provider,{value:t,children:e.children})}return a.jsx(sz,{initialProps:e.initialProps,children:e.children})}function sz(e){var t=e.initialProps,n=e.children,r=function(o,i,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,o,i,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,o,o,i,l)},s={selected:t.selected,onDayClick:r};return a.jsx(gx.Provider,{value:s,children:n})}function WE(){var e=f.useContext(gx);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function az(e,t){var n=vt(),r=WE(),s=dx(),o=fx(),i=px(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,m=i.focus,p=i.focusMonthBefore,N=i.focusMonthAfter,g=i.focusYearBefore,y=i.focusYearAfter,w=i.focusStartOfWeek,v=i.focusEndOfWeek,b=function(C){var j,S,P,H;Lf(n)?(j=r.onDayClick)===null||j===void 0||j.call(r,e,t,C):Iu(n)?(S=s.onDayClick)===null||S===void 0||S.call(s,e,t,C):Fu(n)?(P=o.onDayClick)===null||P===void 0||P.call(o,e,t,C):(H=n.onDayClick)===null||H===void 0||H.call(n,e,t,C)},x=function(C){var j;m(e),(j=n.onDayFocus)===null||j===void 0||j.call(n,e,t,C)},_=function(C){var j;h(),(j=n.onDayBlur)===null||j===void 0||j.call(n,e,t,C)},k=function(C){var j;(j=n.onDayMouseEnter)===null||j===void 0||j.call(n,e,t,C)},E=function(C){var j;(j=n.onDayMouseLeave)===null||j===void 0||j.call(n,e,t,C)},D=function(C){var j;(j=n.onDayPointerEnter)===null||j===void 0||j.call(n,e,t,C)},$=function(C){var j;(j=n.onDayPointerLeave)===null||j===void 0||j.call(n,e,t,C)},O=function(C){var j;(j=n.onDayTouchCancel)===null||j===void 0||j.call(n,e,t,C)},Y=function(C){var j;(j=n.onDayTouchEnd)===null||j===void 0||j.call(n,e,t,C)},T=function(C){var j;(j=n.onDayTouchMove)===null||j===void 0||j.call(n,e,t,C)},M=function(C){var j;(j=n.onDayTouchStart)===null||j===void 0||j.call(n,e,t,C)},U=function(C){var j;(j=n.onDayKeyUp)===null||j===void 0||j.call(n,e,t,C)},A=function(C){var j;switch(C.key){case"ArrowLeft":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":C.preventDefault(),C.stopPropagation(),u();break;case"ArrowUp":C.preventDefault(),C.stopPropagation(),d();break;case"PageUp":C.preventDefault(),C.stopPropagation(),C.shiftKey?g():p();break;case"PageDown":C.preventDefault(),C.stopPropagation(),C.shiftKey?y():N();break;case"Home":C.preventDefault(),C.stopPropagation(),w();break;case"End":C.preventDefault(),C.stopPropagation(),v();break}(j=n.onDayKeyDown)===null||j===void 0||j.call(n,e,t,C)},F={onClick:b,onFocus:x,onBlur:_,onKeyDown:A,onKeyUp:U,onMouseEnter:k,onMouseLeave:E,onPointerEnter:D,onPointerLeave:$,onTouchCancel:O,onTouchEnd:Y,onTouchMove:T,onTouchStart:M};return F}function oz(){var e=vt(),t=WE(),n=dx(),r=fx(),s=Lf(e)?t.selected:Iu(e)?n.selected:Fu(e)?r.selected:void 0;return s}function iz(e){return Object.values(us).includes(e)}function lz(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(iz(r)){var o=e.classNames["day_".concat(r)];o&&n.push(o)}}),n}function cz(e,t){var n=Be({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=Be(Be({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function uz(e,t,n){var r,s,o,i=vt(),l=px(),c=nz(e,t),u=az(e,c),d=oz(),h=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var k;c.outside||l.focusedDay&&h&&cr(l.focusedDay,e)&&((k=n.current)===null||k===void 0||k.focus())},[l.focusedDay,e,n,h,c.outside]);var m=lz(i,c).join(" "),p=cz(i,c),N=!!(c.outside&&!i.showOutsideDays||c.hidden),g=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:A6,y=a.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),w={style:p,className:m,children:y,role:"gridcell"},v=l.focusTarget&&cr(l.focusTarget,e)&&!c.outside,b=l.focusedDay&&cr(l.focusedDay,e),x=Be(Be(Be({},w),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=b||v?0:-1,r)),u),_={isButton:h,isHidden:N,activeModifiers:c,selectedDays:d,buttonProps:x,divProps:w};return _}function dz(e){var t=f.useRef(null),n=uz(e.date,e.displayMonth,t);return n.isHidden?a.jsx("div",{role:"gridcell"}):n.isButton?a.jsx(Ph,Be({name:"day",ref:t},n.buttonProps)):a.jsx("div",Be({},n.divProps))}function hz(e){var t=e.number,n=e.dates,r=vt(),s=r.onWeekNumberClick,o=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!s)return a.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:d});var h=c(Number(t),{locale:l}),m=function(p){s(t,n,p)};return a.jsx(Ph,{name:"week-number","aria-label":h,className:i.weeknumber,style:o.weeknumber,onClick:m,children:d})}function fz(e){var t,n,r=vt(),s=r.styles,o=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:dz,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:hz,d;return i&&(d=a.jsx("td",{className:o.cell,style:s.cell,children:a.jsx(u,{number:e.weekNumber,dates:e.dates})})),a.jsxs("tr",{className:o.row,style:s.row,children:[d,e.dates.map(function(h){return a.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:a.jsx(c,{displayMonth:e.displayMonth,date:h})},T8(h))})]})}function Cb(e,t,n){for(var r=n!=null&&n.ISOWeek?R_(t):Vy(t,n),s=n!=null&&n.ISOWeek?Ko(e):Rs(e,n),o=ts(r,s),i=[],l=0;l<=o;l++)i.push(Bn(s,l));var c=i.reduce(function(u,d){var h=n!=null&&n.ISOWeek?O_(d):F_(d,n),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function mz(e,t){var n=Cb(fr(e),Wy(e),t);if(t!=null&&t.useFixedWeeks){var r=A8(e,t);if(r<6){var s=n[n.length-1],o=s.dates[s.dates.length-1],i=Vg(o,6-r),l=Cb(Vg(o,1),i,t);n.push.apply(n,l)}}return n}function pz(e){var t,n,r,s=vt(),o=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,m=s.firstWeekContainsDate,p=s.ISOWeek,N=mz(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:o,weekStartsOn:h,firstWeekContainsDate:m}),g=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:P6,y=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:fz,w=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:k6;return a.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&a.jsx(g,{}),a.jsx("tbody",{className:i.tbody,style:l.tbody,children:N.map(function(v){return a.jsx(y,{displayMonth:e.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),a.jsx(w,{displayMonth:e.displayMonth})]})}function gz(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var vz=gz()?f.useLayoutEffect:f.useEffect,np=!1,yz=0;function Sb(){return"react-day-picker-".concat(++yz)}function xz(e){var t,n=e??(np?Sb():null),r=f.useState(n),s=r[0],o=r[1];return vz(function(){s===null&&o(Sb())},[]),f.useEffect(function(){np===!1&&(np=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function wz(e){var t,n,r=vt(),s=r.dir,o=r.classNames,i=r.styles,l=r.components,c=$u().displayMonths,u=xz(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,h=[o.month],m=i.month,p=e.displayIndex===0,N=e.displayIndex===c.length-1,g=!p&&!N;s==="rtl"&&(t=[p,N],N=t[0],p=t[1]),p&&(h.push(o.caption_start),m=Be(Be({},m),i.caption_start)),N&&(h.push(o.caption_end),m=Be(Be({},m),i.caption_end)),g&&(h.push(o.caption_between),m=Be(Be({},m),i.caption_between));var y=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:_6;return a.jsxs("div",{className:h.join(" "),style:m,children:[a.jsx(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(pz,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function bz(e){var t=vt(),n=t.classNames,r=t.styles;return a.jsx("div",{className:n.months,style:r.months,children:e.children})}function jz(e){var t,n,r=e.initialProps,s=vt(),o=px(),i=$u(),l=f.useState(!1),c=l[0],u=l[1];f.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Be(Be({},s.styles.root),s.style),m=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,g){var y;return Be(Be({},N),(y={},y[g]=r[g],y))},{}),p=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:bz;return a.jsx("div",Be({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:a.jsx(p,{children:i.displayMonths.map(function(N,g){return a.jsx(wz,{displayIndex:g,displayMonth:N},g)})})}))}function Nz(e){var t=e.children,n=GU(e,["children"]);return a.jsx(h6,{initialProps:n,children:a.jsx(j6,{children:a.jsx(rz,{initialProps:n,children:a.jsx(D6,{initialProps:n,children:a.jsx(O6,{initialProps:n,children:a.jsx(W6,{children:a.jsx(tz,{children:t})})})})})})})}function Cz(e){return a.jsx(Nz,Be({},e,{children:a.jsx(jz,{initialProps:e})}))}function vx({className:e,classNames:t,showOutsideDays:n=!0,...r}){return a.jsx(Cz,{showOutsideDays:n,className:te("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:te(ru({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:te(ru({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>a.jsx(MD,{className:"h-4 w-4"}),IconRight:({...s})=>a.jsx(ON,{className:"h-4 w-4"})},...r})}vx.displayName="Calendar";async function Sz(){console.log("Starting recalculation of all tour summaries...");const e=[];let t=0;try{const{tours:n}=await Z.listTours({},{includeDetails:!0});console.log(`Found ${n.length} tours to process`);for(const r of n)try{const s=B_(r);await Z.updateTour(r.id,{summary:s}),t++,console.log(`Updated ${r.tourCode} (${t}/${n.length})`)}catch(s){const o=s instanceof Error?s.message:"Unknown error";e.push({tourCode:r.tourCode,error:o}),console.error(`Failed to update ${r.tourCode}:`,o)}return console.log(`Recalculation complete: ${t}/${n.length} tours updated`),e.length>0&&console.error(`Errors encountered for ${e.length} tours:`,e),{total:n.length,updated:t,errors:e}}catch(n){throw console.error("Failed to recalculate tour summaries:",n),n}}var VE="AlertDialog",[_z,K9]=mr(VE,[W_]),ca=W_(),HE=e=>{const{__scopeAlertDialog:t,...n}=e,r=ca(t);return a.jsx(Yy,{...r,...n,modal:!0})};HE.displayName=VE;var kz="AlertDialogTrigger",qE=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ca(n);return a.jsx(ak,{...s,...r,ref:t})});qE.displayName=kz;var Ez="AlertDialogPortal",GE=e=>{const{__scopeAlertDialog:t,...n}=e,r=ca(t);return a.jsx(Qy,{...r,...n})};GE.displayName=Ez;var Tz="AlertDialogOverlay",KE=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ca(n);return a.jsx(Pf,{...s,...r,ref:t})});KE.displayName=Tz;var Gi="AlertDialogContent",[Pz,Az]=_z(Gi),Dz=lN("AlertDialogContent"),YE=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=ca(n),i=f.useRef(null),l=Ve(t,i),c=f.useRef(null);return a.jsx(z8,{contentName:Gi,titleName:QE,docsSlug:"alert-dialog",children:a.jsx(Pz,{scope:n,cancelRef:c,children:a.jsxs(Af,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:ue(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(Dz,{children:r}),a.jsx(Mz,{contentRef:i})]})})})});YE.displayName=Gi;var QE="AlertDialogTitle",JE=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ca(n);return a.jsx(Jy,{...s,...r,ref:t})});JE.displayName=QE;var XE="AlertDialogDescription",ZE=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ca(n);return a.jsx(Xy,{...s,...r,ref:t})});ZE.displayName=XE;var Rz="AlertDialogAction",eT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ca(n);return a.jsx(Zy,{...s,...r,ref:t})});eT.displayName=Rz;var tT="AlertDialogCancel",nT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=Az(tT,n),o=ca(n),i=Ve(t,s);return a.jsx(Zy,{...o,...r,ref:i})});nT.displayName=tT;var Mz=({contentRef:e})=>{const t=`\`${Gi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Gi}\` by passing a \`${XE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Gi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Oz=HE,Iz=qE,Fz=GE,rT=KE,sT=YE,aT=eT,oT=nT,iT=JE,lT=ZE;const $d=Oz,_b=Iz,$z=Fz,cT=f.forwardRef(({className:e,...t},n)=>a.jsx(rT,{className:te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));cT.displayName=rT.displayName;const _c=f.forwardRef(({className:e,...t},n)=>a.jsxs($z,{children:[a.jsx(cT,{}),a.jsx(sT,{ref:n,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));_c.displayName=sT.displayName;const kc=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",e),...t});kc.displayName="AlertDialogHeader";const Ec=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ec.displayName="AlertDialogFooter";const Tc=f.forwardRef(({className:e,...t},n)=>a.jsx(iT,{ref:n,className:te("text-lg font-semibold",e),...t}));Tc.displayName=iT.displayName;const Pc=f.forwardRef(({className:e,...t},n)=>a.jsx(lT,{ref:n,className:te("text-sm text-muted-foreground",e),...t}));Pc.displayName=lT.displayName;const Ac=f.forwardRef(({className:e,...t},n)=>a.jsx(aT,{ref:n,className:te(ru(),e),...t}));Ac.displayName=aT.displayName;const Dc=f.forwardRef(({className:e,...t},n)=>a.jsx(oT,{ref:n,className:te(ru({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Dc.displayName=oT.displayName;const mn="#,##0",Lz="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";let kb;const yx=async()=>(kb??(kb=await ii(()=>import("./exceljs.min-gP670MR2.js").then(e=>e.e),__vite__mapDeps([0,1]))),kb),nr={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}},Ah={type:"pattern",pattern:"solid",fgColor:{argb:"FF00B0F0"}},Ht={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"}},uT={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"}},dT={type:"pattern",pattern:"solid",fgColor:{argb:"FFEDEDED"}},hT=e=>{const t=[],n=r=>typeof r!="number"||Number.isNaN(r)||!Number.isFinite(r);return(e.destinations||[]).forEach((r,s)=>{n(Number(r.price))&&t.push(`Destination #${s+1} has invalid price.`),r.guests!==void 0&&n(Number(r.guests))&&t.push(`Destination #${s+1} has invalid guests.`)}),(e.expenses||[]).forEach((r,s)=>{n(Number(r.price))&&t.push(`Expense #${s+1} has invalid price.`),r.guests!==void 0&&n(Number(r.guests))&&t.push(`Expense #${s+1} has invalid guests.`)}),(e.meals||[]).forEach((r,s)=>{n(Number(r.price))&&t.push(`Meal #${s+1} has invalid price.`),r.guests!==void 0&&n(Number(r.guests))&&t.push(`Meal #${s+1} has invalid guests.`)}),(e.allowances||[]).forEach((r,s)=>{n(Number(r.price))&&t.push(`Allowance #${s+1} has invalid price.`),r.quantity!==void 0&&n(Number(r.quantity))&&t.push(`Allowance #${s+1} has invalid quantity.`)}),t},Dh=e=>{const t=new Map;for(const r of e){const s=(r||"").trim().toLowerCase();s&&t.set(s,(t.get(s)||0)+1)}const n=new Set;for(const[r,s]of t)s>1&&n.add(r);return n},Bz=e=>{const t=/[\[\]:\\/?*]/g,n=e.replace(t," ").trim()||"Tour";return n.length>31?n.slice(0,31):n},Uz=(e,t)=>{const n=Bz(t);let r=1,s=n;for(;e.getWorksheet(s);){const o=` (${r})`,i=31-o.length;s=`${n.slice(0,Math.max(i,0))}${o}`,r+=1}return s},zz=(e,t=1,n=13)=>{for(let r=t;r<=n;r+=1)e.getCell(r).border=nr},Wz=(e,t,n,r)=>{e.mergeCells(t);const[s,o]=t.split(":"),i=e.getCell(s),l=e.getCell(o??s);i.value=n,i.alignment=(r==null?void 0:r.alignment)??{vertical:"middle",horizontal:"left"};for(let c=i.row;c<=l.row;c+=1){const u=e.getRow(Number(c));for(let d=i.col;d<=l.col;d+=1){const h=u.getCell(d);h.fill=dT,h.border=nr,h.alignment=(r==null?void 0:r.alignment)??{vertical:"middle",horizontal:"left"}}}},fT=async(e,t)=>{const n=await e.xlsx.writeBuffer(),r=new Blob([n],{type:Lz}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.setTimeout(()=>window.URL.revokeObjectURL(s),1e3)},mT=(e,t)=>{var M,U,A;const n=Uz(e,t.tourCode||"Tour"),r=e.addWorksheet(n);r.properties.defaultRowHeight=20,r.columns=[{key:"code",width:14},{key:"date",width:10},{key:"service",width:24},{key:"serviceDate",width:8},{key:"price",width:12},{key:"quantity",width:10},{key:"total",width:12},{key:"location",width:22},{key:"locationDate",width:8},{key:"days",width:8},{key:"ctp",width:8},{key:"ctpTotal",width:10},{key:"tourTotal",width:14}];const s=r.getRow(1);s.height=40,r.mergeCells("A1:B1"),r.mergeCells("C1:G1"),r.mergeCells("H1:L1"),[{cell:"A1",value:"code",fill:Ah},{cell:"C1",value:"v + n + ung + chi ph",fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF00B050"}}},{cell:"H1",value:"Cng tc ph (CTP) + ng",fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF00B050"}}},{cell:"M1",value:"Tng tour",fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC000"}}}].forEach(({cell:F,value:C,fill:j})=>{const S=r.getCell(F);S.value=C,S.font={bold:!0,color:{argb:"FFFFFFFF"}},S.fill=j,S.border=nr,S.alignment={horizontal:"center",vertical:"middle",wrapText:!0}});for(let F=1;F<=13;F++)s.getCell(F).border=nr;const i=r.getRow(2);["code","ngy","v/n/ung/chi ph","ngy","gi v/n gi","s khch/ s ngy/ tng s chai nc ung","thnh tin","a im/tnh","ngy","s ngy","CTP","thnh tin",""].forEach((F,C)=>{const j=i.getCell(C+1);j.value=F,j.font={bold:!0},j.fill=Ah,j.border=nr,j.alignment={horizontal:"center",vertical:"middle",wrapText:!0}}),i.height=40,r.views=[{state:"frozen",ySplit:2}];const c=t.totalGuests||t.adults+t.children,u=3,d=F=>{for(let C=1;C<=13;C+=1)F.getCell(C).border=nr};let h=!0;const m=(F,C)=>{const j=new Date(F),S=new Date(C);if(Number.isNaN(j.getTime())||Number.isNaN(S.getTime()))return"";const P=new Date().getFullYear(),H=j.getFullYear()===S.getFullYear()&&j.getMonth()===S.getMonth(),R=L=>String(L).padStart(2,"0");if(!H){const L=R(j.getDate()),J=R(j.getMonth()+1),Q=R(S.getDate()),G=R(S.getMonth()+1),q=j.getFullYear(),ee=S.getFullYear();return q!==ee?`${L}/${J}/${q} - ${Q}/${G}/${ee}`:q===P&&ee===P?`${L}/${J} - ${Q}/${G}`:`${L}/${J} - ${Q}/${G}/${ee}`}return rf(F,C)},p=F=>{if(!h)return;F.getCell(1).value=`${t.tourCode} x ${c} pax`;const C=F.getCell(2);C.value=`${m(t.startDate,t.endDate)}`,C.numFmt="@",h=!1},N=t.allowances||[],g=Dh((t.destinations||[]).map(F=>F.name||"")),y=[];if(t.destinations&&t.destinations.length>0&&t.destinations.forEach(F=>{y.push({kind:"dest",name:`v ${F.name||""}`,baseName:F.name||"",date:F.date,price:F.price||0,guests:typeof F.guests=="number"?F.guests:void 0})}),t.expenses&&t.expenses.length>0){const F=["Nc ung cho khch 15k/1 khch / 1 ngy","Nc ung cho khch 10k/1 khch / 1 ngy"];t.expenses.filter(j=>!F.includes(j.name||"")).forEach(j=>{y.push({kind:"exp",name:j.name||"",date:j.date,price:j.price||0,guests:j.guests})}),F.forEach(j=>{const S=t.expenses.filter(P=>(P.name||"")===j);if(S.length>0){const P=S.reduce((L,J)=>L+(typeof J.guests=="number"?J.guests:0),0),H=S[0].price||0,R=S.reduce((L,J)=>J.date?L?J.date<L?J.date:L:J.date:L,void 0);y.push({kind:"exp",name:j,date:R,price:H,guests:P})}})}t.meals&&t.meals.length>0&&t.meals.forEach(F=>{y.push({kind:"exp",name:F.name||"",date:F.date,price:F.price||0,guests:typeof F.guests=="number"?F.guests:void 0})}),y.sort((F,C)=>{const j=F.kind==="dest"?0:1,S=C.kind==="dest"?0:1;return j!==S?j-S:(F.name||"").localeCompare(C.name||"")});const w=N.slice().sort((F,C)=>(F.name||"").localeCompare(C.name||"")).map(F=>({name:F.name||"",date:F.date||"",price:F.price||0})),v=Math.max(y.length,w.length);let b=u-1;for(let F=0;F<v;F+=1){const C=u+F,j=r.getRow(C);p(j);const S=y[F],P=w[F];if(S){if(j.getCell(3).value=S.name,j.getCell(3).alignment={wrapText:!0,vertical:"middle"},S.kind==="dest"&&S.baseName){const H=S.baseName.trim().toLowerCase();g.has(H)&&(j.getCell(3).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC7CE"}})}j.getCell(4).value=S.date?Jc(S.date):"",j.getCell(5).value=S.price,j.getCell(5).numFmt=mn,S.price||(j.getCell(5).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC7CE"}}),j.getCell(6).value=S.guests!==void 0?S.guests:c,j.getCell(6).alignment={horizontal:"center",vertical:"middle"},j.getCell(7).value={formula:`E${C}*F${C}`},j.getCell(7).numFmt=mn}P&&(j.getCell(8).value=P.name,j.getCell(8).alignment={vertical:"middle",horizontal:"left"},j.getCell(9).value=P.date?Jc(P.date):"",j.getCell(10).value=1,j.getCell(10).alignment={horizontal:"center",vertical:"middle"},j.getCell(11).value=P.price,j.getCell(11).numFmt=mn,P.price||(j.getCell(11).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC7CE"}}),j.getCell(12).value={formula:`J${C}*K${C}`},j.getCell(12).numFmt=mn),d(j),b=C}const x=b,_=x>=u?x+1:u,k=r.getRow(_);let E=_+1;r.mergeCells(`C${k.number}:F${k.number}`),k.getCell(3).value="dch v",k.getCell(3).font={bold:!0},k.getCell(3).fill=Ht,k.getCell(3).alignment={horizontal:"left",vertical:"middle"},k.getCell(1).fill=Ht,k.getCell(2).fill=Ht,x>=u?k.getCell(7).value={formula:`SUM(G${u}:G${x})`}:k.getCell(7).value=0,k.getCell(7).numFmt=mn,k.getCell(7).font={bold:!0,size:12},k.getCell(7).fill=Ht,k.getCell(8).value="cng tc ph",k.getCell(8).font={bold:!0,size:12},k.getCell(8).fill=Ht,k.getCell(8).alignment={horizontal:"left",vertical:"middle"},k.getCell(3).font={bold:!0,size:12},k.height=22,k.getCell(9).fill=Ht,k.getCell(10).fill=Ht,k.getCell(11).fill=Ht,x>=u?k.getCell(12).value={formula:`SUM(L${u}:L${x})`}:k.getCell(12).value=0,k.getCell(12).numFmt=mn,k.getCell(12).font={bold:!0,size:12},k.getCell(12).fill=Ht,k.getCell(13).value={formula:`G${k.number}+L${k.number}`},k.getCell(13).numFmt=mn,k.getCell(13).font={bold:!0,size:12},k.getCell(13).fill=Ht,d(k);const D=((M=t.summary)==null?void 0:M.advancePayment)??0,$=((U=t.summary)==null?void 0:U.collectionsForCompany)??0,O=((A=t.summary)==null?void 0:A.companyTip)??0,Y=D!==0||$!==0||O!==0;let T;if(Y){E++;const F=r.getRow(E);E++,r.mergeCells(`L${F.number}:M${F.number}`),F.getCell(12).value="TNG KT",F.getCell(12).font={bold:!0},F.getCell(12).alignment={horizontal:"center",vertical:"middle"},F.getCell(12).fill=uT,zz(F);const C=12,j=13,S="M",P=(ee,ae,me,Pe)=>{const W=r.getRow(E);E++,W.getCell(C).value=ee;const pe={bold:!0};return Pe&&(pe.color={argb:Pe}),W.getCell(C).font=pe,W.getCell(C).alignment={horizontal:"right",vertical:"middle"},ae?W.getCell(j).value={formula:ae}:me!==void 0&&(W.getCell(j).value=me),W.getCell(j).numFmt=mn,W.getCell(j).font={bold:!0,size:12},W.getCell(j).alignment={horizontal:"right",vertical:"middle"},d(W),W},H=P("Tng chi ph + cng tc ph",`M${k.number}`),R=P("- Tm ng",void 0,D,"FFFF0000"),L=P("Sau tm ng",`${S}${H.number}-${S}${R.number}`),J=P("- Thu ca khch",void 0,$,"FFFF0000"),Q=P("Sau thu khch",`${S}${L.number}-${S}${J.number}`),G=P("+ Tip HDV nhn t cng ty",void 0,O,"FF0000FF"),q=P("Sau tip HDV",`${S}${Q.number}+${S}${G.number}`);T=P("TNG CNG",`${S}${q.number}`)}else T=k;if(t.notes&&String(t.notes).trim().length>0){E++;const F=`Ghi ch: ${t.notes}`,C=`A${E}:M${E}`;Wz(r,C,F,{bold:!1,alignment:{horizontal:"left",vertical:"top",wrapText:!0}});const j=r.getRow(E);j.height=30}return r.pageSetup={orientation:"landscape",fitToPage:!0,fitToWidth:1,fitToHeight:1,margins:{left:.3,right:.3,top:.5,bottom:.5,header:.3,footer:.3}},{sheetName:n,finalTotalCell:Y?`M${T.number}`:`M${k.number}`}},Vz=async e=>{const t=await yx(),n=new t.Workbook;n.creator="Local Tour Manager",n.calcProperties.fullCalcOnLoad=!0;const r=hT(e),s=Dh((e.destinations||[]).map(o=>o.name||""));s.size>0&&r.push("Duplicate destination names: "+Array.from(s).join(", ")),r.length>0&&typeof window<"u"&&window.alert(`Excel export warning for ${e.tourCode}:
`+r.join(`
`)),mT(n,e),await fT(n,`Tour_${e.tourCode}_${Date.now()}.xlsx`)},Hz=async e=>{if(!e.length)return;const t=await yx(),n=new t.Workbook;n.creator="Local Tour Manager",n.calcProperties.fullCalcOnLoad=!0;const r=n.addWorksheet("All Tours");r.properties.defaultRowHeight=20,r.columns=[{key:"code",width:14},{key:"date",width:10},{key:"service",width:24},{key:"serviceDate",width:8},{key:"price",width:12},{key:"quantity",width:10},{key:"total",width:12},{key:"location",width:22},{key:"locationDate",width:8},{key:"days",width:8},{key:"ctp",width:8},{key:"ctpTotal",width:10},{key:"tourTotal",width:14}];const s=r.getRow(1);s.height=40,r.mergeCells("A1:B1"),r.mergeCells("C1:G1"),r.mergeCells("H1:L1"),[{cell:"A1",value:"code",fill:Ah},{cell:"C1",value:"v + n + ung + chi ph",fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF00B050"}}},{cell:"H1",value:"Cng tc ph (CTP) + ng",fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF00B050"}}},{cell:"M1",value:"Tng tour",fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC000"}}}].forEach(({cell:g,value:y,fill:w})=>{const v=r.getCell(g);v.value=y,v.font={bold:!0,color:{argb:"FFFFFFFF"}},v.fill=w,v.border=nr,v.alignment={horizontal:"center",vertical:"middle",wrapText:!0}});for(let g=1;g<=13;g++)s.getCell(g).border=nr;const i=r.getRow(2);["code","ngy","v/n/ung/chi ph","ngy","gi v/n gi","s khch/ s ngy/ tng s chai nc ung","thnh tin","a im/tnh","ngy","s ngy","CTP","thnh tin",""].forEach((g,y)=>{const w=i.getCell(y+1);w.value=g,w.font={bold:!0},w.fill=Ah,w.border=nr,w.alignment={horizontal:"center",vertical:"middle",wrapText:!0}}),i.height=40,r.views=[{state:"frozen",ySplit:2}];let c=3;const u=[],d=[],h=[];let m;e.forEach((g,y)=>{var L,J,Q;if(hT(g).length>0&&d.push(g.tourCode||g.id),Dh((g.destinations||[]).map(G=>G.name||"")).size>0&&h.push(g.tourCode||g.id),g.startDate){const G=g.startDate,q=G.length>=7?G.slice(0,7):void 0;if(q&&m&&q!==m){const ee=q.slice(5,7),ae=q.slice(2,4),me=r.getRow(c);r.mergeCells(`A${c}:M${c}`);const Pe=` Tour thang ${ee}/${ae} `,pe=Math.max(3,Math.floor((120-Pe.length)/2)),je=`${"-".repeat(pe)}${Pe}${"-".repeat(pe)}`;me.getCell(1).value=je,me.getCell(1).alignment={horizontal:"center",vertical:"middle"};for(let $e=1;$e<=13;$e+=1)me.getCell($e).border=nr;c++}m=q||m}const b=g.totalGuests||g.adults+g.children,x=c,_=G=>{for(let q=1;q<=13;q+=1)G.getCell(q).border=nr};let k=!0;const E=(G,q)=>{const ee=new Date(G),ae=new Date(q);if(Number.isNaN(ee.getTime())||Number.isNaN(ae.getTime()))return"";const me=new Date().getFullYear(),Pe=ee.getFullYear()===ae.getFullYear()&&ee.getMonth()===ae.getMonth(),W=pe=>String(pe).padStart(2,"0");if(!Pe){const pe=W(ee.getDate()),je=W(ee.getMonth()+1),$e=W(ae.getDate()),Ke=W(ae.getMonth()+1),Ye=ee.getFullYear(),dt=ae.getFullYear();return Ye!==dt?`${pe}/${je}/${Ye} - ${$e}/${Ke}/${dt}`:Ye===me&&dt===me?`${pe}/${je} - ${$e}/${Ke}`:`${pe}/${je} - ${$e}/${Ke}/${dt}`}return rf(G,q)},D=G=>{if(!k)return;G.getCell(1).value=`${g.tourCode} x ${b} pax`;const q=G.getCell(2);q.value=`${E(g.startDate,g.endDate)}`,q.numFmt="@",k=!1},$=g.allowances||[],O=Dh((g.destinations||[]).map(G=>G.name||"")),Y=[];if(g.destinations&&g.destinations.length>0&&g.destinations.forEach(G=>{Y.push({kind:"dest",name:`v ${G.name||""}`,baseName:G.name||"",date:G.date,price:G.price||0,guests:typeof G.guests=="number"?G.guests:void 0})}),g.expenses&&g.expenses.length>0){const G=["Nc ung cho khch 15k/1 khch / 1 ngy","Nc ung cho khch 10k/1 khch / 1 ngy"];g.expenses.filter(ee=>!G.includes(ee.name||"")).forEach(ee=>{Y.push({kind:"exp",name:ee.name||"",date:ee.date,price:ee.price||0,guests:ee.guests})}),G.forEach(ee=>{const ae=g.expenses.filter(me=>(me.name||"")===ee);if(ae.length>0){const me=ae.reduce((pe,je)=>pe+(typeof je.guests=="number"?je.guests:0),0),Pe=ae[0].price||0,W=ae.reduce((pe,je)=>je.date?pe?je.date<pe?je.date:pe:je.date:pe,void 0);Y.push({kind:"exp",name:ee,date:W,price:Pe,guests:me})}})}g.meals&&g.meals.length>0&&g.meals.forEach(G=>{Y.push({kind:"exp",name:G.name||"",date:G.date,price:G.price||0,guests:typeof G.guests=="number"?G.guests:void 0})}),Y.sort((G,q)=>{const ee=G.kind==="dest"?0:1,ae=q.kind==="dest"?0:1;return ee!==ae?ee-ae:(G.name||"").localeCompare(q.name||"")});const T=($||[]).slice().sort((G,q)=>(G.name||"").localeCompare(q.name||"")),M=Math.max(Y.length,T.length);for(let G=0;G<M;G+=1){const q=c,ee=r.getRow(q);D(ee);const ae=Y[G],me=T[G];if(ae){if(ee.getCell(3).value=ae.name,ee.getCell(3).alignment={wrapText:!0,vertical:"middle"},ae.kind==="dest"&&ae.baseName){const Pe=ae.baseName.trim().toLowerCase();O.has(Pe)&&(ee.getCell(3).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC7CE"}})}ee.getCell(4).value=ae.date?Jc(ae.date):"",ee.getCell(5).value=ae.price,ee.getCell(5).numFmt=mn,ae.price||(ee.getCell(5).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC7CE"}}),ee.getCell(6).value=ae.guests!==void 0?ae.guests:b,ee.getCell(6).alignment={horizontal:"center",vertical:"middle"},ee.getCell(7).value={formula:`E${q}*F${q}`},ee.getCell(7).numFmt=mn}if(me){ee.getCell(8).value=me.name||"",ee.getCell(8).alignment={vertical:"middle",horizontal:"left"},ee.getCell(9).value=me.date?Jc(me.date):"";const Pe=me.quantity&&me.quantity>0?me.quantity:1;ee.getCell(10).value=Pe,ee.getCell(10).alignment={horizontal:"center",vertical:"middle"},ee.getCell(11).value=me.price||0,ee.getCell(11).numFmt=mn,me.price||(ee.getCell(11).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC7CE"}}),ee.getCell(12).value={formula:`J${q}*K${q}`},ee.getCell(12).numFmt=mn}_(ee),c++}const U=c-1,A=r.getRow(c);r.mergeCells(`C${c}:F${c}`),A.getCell(3).value="dch v",A.getCell(3).font={bold:!0},A.getCell(3).fill=Ht,A.getCell(3).alignment={horizontal:"left",vertical:"middle"},A.getCell(1).fill=Ht,A.getCell(2).fill=Ht,U>=x?A.getCell(7).value={formula:`SUM(G${x}:G${U})`}:A.getCell(7).value=0,A.getCell(7).numFmt=mn,A.getCell(7).fill=Ht,A.getCell(8).value="cng tc ph",A.getCell(8).font={bold:!0,size:12},A.getCell(8).fill=Ht,A.getCell(8).alignment={horizontal:"left",vertical:"middle"},A.getCell(3).font={bold:!0,size:12},A.height=22,A.getCell(9).fill=Ht,A.getCell(10).fill=Ht,A.getCell(11).fill=Ht,U>=x?A.getCell(12).value={formula:`SUM(L${x}:L${U})`}:A.getCell(12).value=0,A.getCell(12).numFmt=mn,A.getCell(12).font={bold:!0,size:12},A.getCell(12).fill=Ht,A.getCell(13).value={formula:`G${c}+L${c}`},A.getCell(13).numFmt=mn,A.getCell(13).font={bold:!0,size:12},A.getCell(13).fill=Ht,_(A);const F=c,C=((L=g.summary)==null?void 0:L.advancePayment)??0,j=((J=g.summary)==null?void 0:J.collectionsForCompany)??0,S=((Q=g.summary)==null?void 0:Q.companyTip)??0,P=C!==0||j!==0||S!==0;let H=F;if(P){c++;const G=c,q=r.getRow(G);c++,r.mergeCells(`L${G}:M${G}`),q.getCell(12).value="TNG KT",q.getCell(12).font={bold:!0},q.getCell(12).alignment={horizontal:"center",vertical:"middle"},q.getCell(12).fill=uT,_(q);const ee=(Ke,Ye,dt,Nt)=>{const I=c,K=r.getRow(I);c++,K.getCell(12).value=Ke;const X={bold:!0};return Nt&&(X.color={argb:Nt}),K.getCell(12).font=X,K.getCell(12).alignment={horizontal:"right",vertical:"middle"},Ye?K.getCell(13).value={formula:Ye}:dt!==void 0&&(K.getCell(13).value=dt),K.getCell(13).numFmt=mn,K.getCell(13).font={bold:!0,size:12},K.getCell(13).alignment={horizontal:"right",vertical:"middle"},_(K),I},ae=ee("Tng chi ph + cng tc ph",`M${F}`),me=ee("- Tm ng",void 0,C,"FFFF0000"),Pe=ee("Sau tm ng",`M${ae}-M${me}`),W=ee("- Thu ca khch",void 0,j,"FFFF0000"),pe=ee("Sau thu khch",`M${Pe}-M${W}`),je=ee("+ Tip HDV nhn t cng ty",void 0,S,"FF0000FF"),$e=ee("Sau tip HDV",`M${pe}+M${je}`);H=ee("TNG CNG",`M${$e}`)}if(u.push(`M${H}`),g.notes&&String(g.notes).trim().length>0){c++;const G=r.getRow(c);r.mergeCells(`A${c}:M${c}`),G.getCell(1).value=`Ghi ch: ${g.notes}`,G.getCell(1).alignment={horizontal:"left",vertical:"top",wrapText:!0};for(let q=1;q<=13;q+=1)G.getCell(q).border=nr;G.height=30}c++;const R=r.getRow(c);r.mergeCells(`A${c}:M${c}`),R.getCell(1).value="",R.getCell(1).fill=dT;for(let G=1;G<=13;G+=1)R.getCell(G).border=nr;R.height=12,c++,c++});const p=r.getRow(c);r.mergeCells(`A${c}:L${c}`),p.getCell(1).value="TNG CNG TT C TOURS",p.getCell(1).font={bold:!0,size:14},p.getCell(1).alignment={horizontal:"center",vertical:"middle"},p.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF6600"}};const N=u.join("+");p.getCell(13).value={formula:N},p.getCell(13).numFmt=mn,p.getCell(13).font={bold:!0,size:14},p.getCell(13).alignment={horizontal:"right",vertical:"middle"},p.getCell(13).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF6600"}};for(let g=1;g<=13;g++)p.getCell(g).border=nr;p.height=30,r.pageSetup={orientation:"landscape",fitToPage:!0,fitToWidth:1,fitToHeight:1,margins:{left:.3,right:.3,top:.5,bottom:.5,header:.3,footer:.3}},(d.length>0||h.length>0)&&typeof window<"u"&&window.alert([d.length?`Numeric issues that may cause sum errors in: ${d.join(", ")}`:null,h.length?`Duplicate destination names in: ${h.join(", ")}`:null].filter(Boolean).join(`
`)),await fT(n,`All_Tours_${Date.now()}.xlsx`)},qz=async e=>{if(!(e!=null&&e.length))return;const t=await yx(),n=(await ii(async()=>{const{default:d}=await import("./jszip.min-YIA1-66z.js").then(h=>h.j);return{default:d}},__vite__mapDeps([2,1]))).default,r=[...e].sort((d,h)=>{const m=d.startDate?new Date(d.startDate).getTime():Number.POSITIVE_INFINITY,p=h.startDate?new Date(h.startDate).getTime():Number.POSITIVE_INFINITY;return m-p}),s=new n,o=d=>{if(!d)return s.folder("unknown");const h=d.slice(0,7);return s.folder(h)};for(const d of r){const h=new t.Workbook;h.creator="Local Tour Manager",h.calcProperties.fullCalcOnLoad=!0,mT(h,d);const m=await h.xlsx.writeBuffer(),p=o(d.startDate),N=String(d.tourCode||"Tour").replace(/[\\/:*?"<>|]/g,"-").slice(0,60),y=`${d.startDate?`${d.startDate}_`:""}${N}.xlsx`;p.file(y,m)}const i=await s.generateAsync({type:"blob"}),l=window.URL.createObjectURL(i),c=document.createElement("a");c.href=l;const u=new Date().toISOString().replace(/[-:T]/g,"").slice(0,12);c.download=`Tours_By_Month_${u}.zip`,document.body.appendChild(c),c.click(),document.body.removeChild(c),setTimeout(()=>window.URL.revokeObjectURL(l),1e3)};function aa(e){return Array.isArray?Array.isArray(e):vT(e)==="[object Array]"}const Gz=1/0;function Kz(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Gz?"-0":t}function Yz(e){return e==null?"":Kz(e)}function ks(e){return typeof e=="string"}function pT(e){return typeof e=="number"}function Qz(e){return e===!0||e===!1||Jz(e)&&vT(e)=="[object Boolean]"}function gT(e){return typeof e=="object"}function Jz(e){return gT(e)&&e!==null}function yr(e){return e!=null}function rp(e){return!e.trim().length}function vT(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Xz="Incorrect 'index' type",Zz=e=>`Invalid value for key ${e}`,eW=e=>`Pattern length exceeds max of ${e}.`,tW=e=>`Missing ${e} property in key`,nW=e=>`Property 'weight' in key '${e}' must be a positive integer`,Eb=Object.prototype.hasOwnProperty;class rW{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=yT(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function yT(e){let t=null,n=null,r=null,s=1,o=null;if(ks(e)||aa(e))r=e,t=Tb(e),n=tv(e);else{if(!Eb.call(e,"name"))throw new Error(tW("name"));const i=e.name;if(r=i,Eb.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(nW(i));t=Tb(i),n=tv(i),o=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:o}}function Tb(e){return aa(e)?e:e.split(".")}function tv(e){return aa(e)?e.join("."):e}function sW(e,t){let n=[],r=!1;const s=(o,i,l)=>{if(yr(o))if(!i[l])n.push(o);else{let c=i[l];const u=o[c];if(!yr(u))return;if(l===i.length-1&&(ks(u)||pT(u)||Qz(u)))n.push(Yz(u));else if(aa(u)){r=!0;for(let d=0,h=u.length;d<h;d+=1)s(u[d],i,l+1)}else i.length&&s(u,i,l+1)}};return s(e,ks(t)?t.split("."):t,0),r?n:n[0]}const aW={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},oW={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},iW={location:0,threshold:.6,distance:100},lW={useExtendedSearch:!1,getFn:sW,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ue={...oW,...aW,...iW,...lW};const cW=/[^ ]+/g;function uW(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const o=s.match(cW).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),l=parseFloat(Math.round(i*r)/r);return n.set(o,l),l},clear(){n.clear()}}}class xx{constructor({getFn:t=Ue.getFn,fieldNormWeight:n=Ue.fieldNormWeight}={}){this.norm=uW(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ks(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();ks(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!yr(t)||rp(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,o)=>{let i=s.getFn?s.getFn(t):this.getFn(t,s.path);if(yr(i)){if(aa(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(yr(d))if(ks(d)&&!rp(d)){let h={v:d,i:u,n:this.norm.get(d)};l.push(h)}else aa(d)&&d.forEach((h,m)=>{c.push({nestedArrIndex:m,value:h})})}r.$[o]=l}else if(ks(i)&&!rp(i)){let l={v:i,n:this.norm.get(i)};r.$[o]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function xT(e,t,{getFn:n=Ue.getFn,fieldNormWeight:r=Ue.fieldNormWeight}={}){const s=new xx({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(yT)),s.setSources(t),s.create(),s}function dW(e,{getFn:t=Ue.getFn,fieldNormWeight:n=Ue.fieldNormWeight}={}){const{keys:r,records:s}=e,o=new xx({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(s),o}function gd(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Ue.distance,ignoreLocation:o=Ue.ignoreLocation}={}){const i=t/e.length;if(o)return i;const l=Math.abs(r-n);return s?i+l/s:l?1:i}function hW(e=[],t=Ue.minMatchCharLength){let n=[],r=-1,s=-1,o=0;for(let i=e.length;o<i;o+=1){let l=e[o];l&&r===-1?r=o:!l&&r!==-1&&(s=o-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}const Co=32;function fW(e,t,n,{location:r=Ue.location,distance:s=Ue.distance,threshold:o=Ue.threshold,findAllMatches:i=Ue.findAllMatches,minMatchCharLength:l=Ue.minMatchCharLength,includeMatches:c=Ue.includeMatches,ignoreLocation:u=Ue.ignoreLocation}={}){if(t.length>Co)throw new Error(eW(Co));const d=t.length,h=e.length,m=Math.max(0,Math.min(r,h));let p=o,N=m;const g=l>1||c,y=g?Array(h):[];let w;for(;(w=e.indexOf(t,N))>-1;){let E=gd(t,{currentLocation:w,expectedLocation:m,distance:s,ignoreLocation:u});if(p=Math.min(E,p),N=w+d,g){let D=0;for(;D<d;)y[w+D]=1,D+=1}}N=-1;let v=[],b=1,x=d+h;const _=1<<d-1;for(let E=0;E<d;E+=1){let D=0,$=x;for(;D<$;)gd(t,{errors:E,currentLocation:m+$,expectedLocation:m,distance:s,ignoreLocation:u})<=p?D=$:x=$,$=Math.floor((x-D)/2+D);x=$;let O=Math.max(1,m-$+1),Y=i?h:Math.min(m+$,h)+d,T=Array(Y+2);T[Y+1]=(1<<E)-1;for(let U=Y;U>=O;U-=1){let A=U-1,F=n[e.charAt(A)];if(g&&(y[A]=+!!F),T[U]=(T[U+1]<<1|1)&F,E&&(T[U]|=(v[U+1]|v[U])<<1|1|v[U+1]),T[U]&_&&(b=gd(t,{errors:E,currentLocation:A,expectedLocation:m,distance:s,ignoreLocation:u}),b<=p)){if(p=b,N=A,N<=m)break;O=Math.max(1,2*m-N)}}if(gd(t,{errors:E+1,currentLocation:m,expectedLocation:m,distance:s,ignoreLocation:u})>p)break;v=T}const k={isMatch:N>=0,score:Math.max(.001,b)};if(g){const E=hW(y,l);E.length?c&&(k.indices=E):k.isMatch=!1}return k}function mW(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}const Rh=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class wT{constructor(t,{location:n=Ue.location,threshold:r=Ue.threshold,distance:s=Ue.distance,includeMatches:o=Ue.includeMatches,findAllMatches:i=Ue.findAllMatches,minMatchCharLength:l=Ue.minMatchCharLength,isCaseSensitive:c=Ue.isCaseSensitive,ignoreDiacritics:u=Ue.ignoreDiacritics,ignoreLocation:d=Ue.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?Rh(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const h=(p,N)=>{this.chunks.push({pattern:p,alphabet:mW(p),startIndex:N})},m=this.pattern.length;if(m>Co){let p=0;const N=m%Co,g=m-N;for(;p<g;)h(this.pattern.substr(p,Co),p),p+=Co;if(N){const y=m-Co;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:s}=this.options;if(t=n?t:t.toLowerCase(),t=r?Rh(t):t,this.pattern===t){let g={isMatch:!0,score:0};return s&&(g.indices=[[0,t.length-1]]),g}const{location:o,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let h=[],m=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:w})=>{const{isMatch:v,score:b,indices:x}=fW(t,g,y,{location:o+w,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:s,ignoreLocation:d});v&&(p=!0),m+=b,v&&x&&(h=[...h,...x])});let N={isMatch:p,score:p?m/this.chunks.length:1};return p&&s&&(N.indices=h),N}}class po{constructor(t){this.pattern=t}static isMultiMatch(t){return Pb(t,this.multiRegex)}static isSingleMatch(t){return Pb(t,this.singleRegex)}search(){}}function Pb(e,t){const n=e.match(t);return n?n[1]:null}class pW extends po{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class gW extends po{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class vW extends po{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class yW extends po{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class xW extends po{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class wW extends po{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class bT extends po{constructor(t,{location:n=Ue.location,threshold:r=Ue.threshold,distance:s=Ue.distance,includeMatches:o=Ue.includeMatches,findAllMatches:i=Ue.findAllMatches,minMatchCharLength:l=Ue.minMatchCharLength,isCaseSensitive:c=Ue.isCaseSensitive,ignoreDiacritics:u=Ue.ignoreDiacritics,ignoreLocation:d=Ue.ignoreLocation}={}){super(t),this._bitapSearch=new wT(t,{location:n,threshold:r,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class jT extends po{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+o,s.push([r,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const nv=[pW,jT,vW,yW,wW,xW,gW,bT],Ab=nv.length,bW=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,jW="|";function NW(e,t={}){return e.split(jW).map(n=>{let r=n.trim().split(bW).filter(o=>o&&!!o.trim()),s=[];for(let o=0,i=r.length;o<i;o+=1){const l=r[o];let c=!1,u=-1;for(;!c&&++u<Ab;){const d=nv[u];let h=d.isMultiMatch(l);h&&(s.push(new d(h,t)),c=!0)}if(!c)for(u=-1;++u<Ab;){const d=nv[u];let h=d.isSingleMatch(l);if(h){s.push(new d(h,t));break}}}return s})}const CW=new Set([bT.type,jT.type]);class SW{constructor(t,{isCaseSensitive:n=Ue.isCaseSensitive,ignoreDiacritics:r=Ue.ignoreDiacritics,includeMatches:s=Ue.includeMatches,minMatchCharLength:o=Ue.minMatchCharLength,ignoreLocation:i=Ue.ignoreLocation,findAllMatches:l=Ue.findAllMatches,location:c=Ue.location,threshold:u=Ue.threshold,distance:d=Ue.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:s,minMatchCharLength:o,findAllMatches:l,ignoreLocation:i,location:c,threshold:u,distance:d},t=n?t:t.toLowerCase(),t=r?Rh(t):t,this.pattern=t,this.query=NW(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s,ignoreDiacritics:o}=this.options;t=s?t:t.toLowerCase(),t=o?Rh(t):t;let i=0,l=[],c=0;for(let u=0,d=n.length;u<d;u+=1){const h=n[u];l.length=0,i=0;for(let m=0,p=h.length;m<p;m+=1){const N=h[m],{isMatch:g,indices:y,score:w}=N.search(t);if(g){if(i+=1,c+=w,r){const v=N.constructor.type;CW.has(v)?l=[...l,...y]:l.push(y)}}else{c=0,i=0,l.length=0;break}}if(i){let m={isMatch:!0,score:c/i};return r&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const rv=[];function _W(...e){rv.push(...e)}function sv(e,t){for(let n=0,r=rv.length;n<r;n+=1){let s=rv[n];if(s.condition(e,t))return new s(e,t)}return new wT(e,t)}const Mh={AND:"$and",OR:"$or"},av={PATH:"$path",PATTERN:"$val"},ov=e=>!!(e[Mh.AND]||e[Mh.OR]),kW=e=>!!e[av.PATH],EW=e=>!aa(e)&&gT(e)&&!ov(e),Db=e=>({[Mh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function NT(e,t,{auto:n=!0}={}){const r=s=>{let o=Object.keys(s);const i=kW(s);if(!i&&o.length>1&&!ov(s))return r(Db(s));if(EW(s)){const c=i?s[av.PATH]:o[0],u=i?s[av.PATTERN]:s[c];if(!ks(u))throw new Error(Zz(c));const d={keyId:tv(c),pattern:u};return n&&(d.searcher=sv(u,t)),d}let l={children:[],operator:o[0]};return o.forEach(c=>{const u=s[c];aa(u)&&u.forEach(d=>{l.children.push(r(d))})}),l};return ov(e)||(e=Db(e)),r(e)}function TW(e,{ignoreFieldNorm:t=Ue.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:o,score:i})=>{const l=s?s.weight:null;r*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:o))}),n.score=r})}function PW(e,t){const n=e.matches;t.matches=[],yr(n)&&n.forEach(r=>{if(!yr(r.indices)||!r.indices.length)return;const{indices:s,value:o}=r;let i={indices:s,value:o};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),t.matches.push(i)})}function AW(e,t){t.score=e.score}function DW(e,t,{includeMatches:n=Ue.includeMatches,includeScore:r=Ue.includeScore}={}){const s=[];return n&&s.push(PW),r&&s.push(AW),e.map(o=>{const{idx:i}=o,l={item:t[i],refIndex:i};return s.length&&s.forEach(c=>{c(o,l)}),l})}class zn{constructor(t,n={},r){this.options={...Ue,...n},this.options.useExtendedSearch,this._keyStore=new rW(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof xx))throw new Error(Xz);this._myIndex=n||xT(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){yr(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,s-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:o,sortFn:i,ignoreFieldNorm:l}=this.options;let c=ks(t)?ks(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return TW(c,{ignoreFieldNorm:l}),o&&c.sort(i),pT(n)&&n>-1&&(c=c.slice(0,n)),DW(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=sv(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:o,i,n:l})=>{if(!yr(o))return;const{isMatch:c,score:u,indices:d}=n.searchIn(o);c&&s.push({item:o,idx:i,matches:[{score:u,value:o,norm:l,indices:d}]})}),s}_searchLogical(t){const n=NT(t,this.options),r=(l,c,u)=>{if(!l.children){const{keyId:h,searcher:m}=l,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:m});return p&&p.length?[{idx:u,item:c,matches:p}]:[]}const d=[];for(let h=0,m=l.children.length;h<m;h+=1){const p=l.children[h],N=r(p,c,u);if(N.length)d.push(...N);else if(l.operator===Mh.AND)return[]}return d},s=this._myIndex.records,o={},i=[];return s.forEach(({$:l,i:c})=>{if(yr(l)){let u=r(n,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},i.push(o[c])),u.forEach(({matches:d})=>{o[c].matches.push(...d)}))}}),i}_searchObjectList(t){const n=sv(t,this.options),{keys:r,records:s}=this._myIndex,o=[];return s.forEach(({$:i,i:l})=>{if(!yr(i))return;let c=[];r.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),c.length&&o.push({idx:l,item:i,matches:c})}),o}_findMatches({key:t,value:n,searcher:r}){if(!yr(n))return[];let s=[];if(aa(n))n.forEach(({v:o,i,n:l})=>{if(!yr(o))return;const{isMatch:c,score:u,indices:d}=r.searchIn(o);c&&s.push({score:u,key:t,value:o,idx:i,norm:l,indices:d})});else{const{v:o,n:i}=n,{isMatch:l,score:c,indices:u}=r.searchIn(o);l&&s.push({score:c,key:t,value:o,norm:i,indices:u})}return s}}zn.version="7.1.0";zn.createIndex=xT;zn.parseIndex=dW;zn.config=Ue;zn.parseQuery=NT;_W(SW);var RW="Separator",Rb="horizontal",MW=["horizontal","vertical"],CT=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=Rb,...s}=e,o=OW(r)?r:Rb,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx(Te.div,{"data-orientation":o,...l,...s,ref:t})});CT.displayName=RW;function OW(e){return MW.includes(e)}var ST=CT;const Fi=f.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>a.jsx(ST,{ref:s,decorative:n,orientation:t,className:te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Fi.displayName=ST.displayName;const IW=nf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _n({className:e,variant:t,...n}){return a.jsx("div",{className:te(IW({variant:t}),e),...n})}function FW(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var wx="ScrollArea",[_T,Y9]=mr(wx),[$W,zr]=_T(wx),kT=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...i}=e,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,N]=f.useState(null),[g,y]=f.useState(null),[w,v]=f.useState(0),[b,x]=f.useState(0),[_,k]=f.useState(!1),[E,D]=f.useState(!1),$=Ve(t,Y=>c(Y)),O=ju(s);return a.jsx($W,{scope:n,type:r,dir:O,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:N,scrollbarXEnabled:_,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:E,onScrollbarYEnabledChange:D,onCornerWidthChange:v,onCornerHeightChange:x,children:a.jsx(Te.div,{dir:O,...i,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});kT.displayName=wx;var ET="ScrollAreaViewport",TT=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,i=zr(ET,n),l=f.useRef(null),c=Ve(t,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(Te.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});TT.displayName=ET;var Fs="ScrollAreaScrollbar",bx=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=zr(Fs,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return f.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?a.jsx(LW,{...r,ref:t,forceMount:n}):s.type==="scroll"?a.jsx(BW,{...r,ref:t,forceMount:n}):s.type==="auto"?a.jsx(PT,{...r,ref:t,forceMount:n}):s.type==="always"?a.jsx(jx,{...r,ref:t}):null});bx.displayName=Fs;var LW=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=zr(Fs,e.__scopeScrollArea),[o,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(dn,{present:n||o,children:a.jsx(PT,{"data-state":o?"visible":"hidden",...r,ref:t})})}),BW=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=zr(Fs,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Uf(()=>c("SCROLL_END"),100),[l,c]=FW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=o?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),i()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,i]),a.jsx(dn,{present:n||l!=="hidden",children:a.jsx(jx,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ue(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ue(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),PT=f.forwardRef((e,t)=>{const n=zr(Fs,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,i]=f.useState(!1),l=e.orientation==="horizontal",c=Uf(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return xl(n.viewport,c),xl(n.content,c),a.jsx(dn,{present:r||o,children:a.jsx(jx,{"data-state":o?"visible":"hidden",...s,ref:t})})}),jx=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=zr(Fs,e.__scopeScrollArea),o=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=OT(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return qW(m,i.current,l,p)}return n==="horizontal"?a.jsx(UW,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,p=Mb(m,l,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?a.jsx(zW,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,p=Mb(m,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),UW=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=zr(Fs,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ve(t,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(DT,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bf(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),FT(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ih(i.paddingLeft),paddingEnd:Ih(i.paddingRight)}})}})}),zW=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=zr(Fs,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ve(t,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(DT,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bf(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),FT(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ih(i.paddingTop),paddingEnd:Ih(i.paddingBottom)}})}})}),[WW,AT]=_T(Fs),DT=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,p=zr(Fs,n),[N,g]=f.useState(null),y=Ve(t,$=>g($)),w=f.useRef(null),v=f.useRef(""),b=p.viewport,x=r.content-r.viewport,_=Lt(d),k=Lt(c),E=Uf(h,10);function D($){if(w.current){const O=$.clientX-w.current.left,Y=$.clientY-w.current.top;u({x:O,y:Y})}}return f.useEffect(()=>{const $=O=>{const Y=O.target;(N==null?void 0:N.contains(Y))&&_(O,x)};return document.addEventListener("wheel",$,{passive:!1}),()=>document.removeEventListener("wheel",$,{passive:!1})},[b,N,x,_]),f.useEffect(k,[r,k]),xl(N,E),xl(p.content,E),a.jsx(WW,{scope:n,scrollbar:N,hasThumb:s,onThumbChange:Lt(o),onThumbPointerUp:Lt(i),onThumbPositionChange:k,onThumbPointerDown:Lt(l),children:a.jsx(Te.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:ue(e.onPointerDown,$=>{$.button===0&&($.target.setPointerCapture($.pointerId),w.current=N.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),D($))}),onPointerMove:ue(e.onPointerMove,D),onPointerUp:ue(e.onPointerUp,$=>{const O=$.target;O.hasPointerCapture($.pointerId)&&O.releasePointerCapture($.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),Oh="ScrollAreaThumb",RT=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=AT(Oh,e.__scopeScrollArea);return a.jsx(dn,{present:n||s.hasThumb,children:a.jsx(VW,{ref:t,...r})})}),VW=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=zr(Oh,n),i=AT(Oh,n),{onThumbPositionChange:l}=i,c=Ve(t,h=>i.onThumbChange(h)),u=f.useRef(void 0),d=Uf(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(d(),!u.current){const p=GW(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,d,l]),a.jsx(Te.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ue(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),N=h.clientX-p.left,g=h.clientY-p.top;i.onThumbPointerDown({x:N,y:g})}),onPointerUp:ue(e.onPointerUp,i.onThumbPointerUp)})});RT.displayName=Oh;var Nx="ScrollAreaCorner",MT=f.forwardRef((e,t)=>{const n=zr(Nx,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(HW,{...e,ref:t}):null});MT.displayName=Nx;var HW=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=zr(Nx,n),[o,i]=f.useState(0),[l,c]=f.useState(0),u=!!(o&&l);return xl(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),xl(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?a.jsx(Te.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ih(e){return e?parseInt(e,10):0}function OT(e,t){const n=e/t;return isNaN(n)?0:n}function Bf(e){const t=OT(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function qW(e,t,n,r="ltr"){const s=Bf(n),o=s/2,i=t||o,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return IT([c,u],h)(e)}function Mb(e,t,n="ltr"){const r=Bf(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,i=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,i]:[i*-1,0],u=Gg(e,c);return IT([0,i],[0,l])(u)}function IT(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function FT(e,t){return e>0&&e<t}var GW=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Uf(e,t){const n=Lt(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function xl(e,t){const n=Lt(t);un(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var $T=kT,KW=TT,YW=MT;const LT=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs($T,{ref:r,className:te("relative overflow-hidden",e),...n,children:[a.jsx(KW,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(BT,{}),a.jsx(YW,{})]}));LT.displayName=$T.displayName;const BT=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>a.jsx(bx,{ref:r,orientation:t,className:te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(RT,{className:"relative flex-1 rounded-full bg-border"})}));BT.displayName=bx.displayName;var zf="Tabs",[QW,Q9]=mr(zf,[gf]),UT=gf(),[JW,Cx]=QW(zf),zT=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=ju(l),[h,m]=na({prop:r,onChange:s,defaultProp:o??"",caller:zf});return a.jsx(JW,{scope:n,baseId:gn(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(Te.div,{dir:d,"data-orientation":i,...u,ref:t})})});zT.displayName=zf;var WT="TabsList",VT=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=Cx(WT,n),i=UT(n);return a.jsx(nS,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:a.jsx(Te.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});VT.displayName=WT;var HT="TabsTrigger",qT=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,i=Cx(HT,n),l=UT(n),c=YT(i.baseId,r),u=QT(i.baseId,r),d=r===i.value;return a.jsx(rS,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(Te.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:ue(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(r):h.preventDefault()}),onKeyDown:ue(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(r)}),onFocus:ue(e.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(r)})})})});qT.displayName=HT;var GT="TabsContent",KT=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=e,l=Cx(GT,n),c=YT(l.baseId,r),u=QT(l.baseId,r),d=r===l.value,h=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(dn,{present:s||d,children:({present:m})=>a.jsx(Te.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});KT.displayName=GT;function YT(e,t){return`${e}-trigger-${t}`}function QT(e,t){return`${e}-content-${t}`}var XW=zT,JT=VT,XT=qT,ZT=KT;const e2=XW,Sx=f.forwardRef(({className:e,...t},n)=>a.jsx(JT,{ref:n,className:te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Sx.displayName=JT.displayName;const Wn=f.forwardRef(({className:e,...t},n)=>a.jsx(XT,{ref:n,className:te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Wn.displayName=XT.displayName;const Vn=f.forwardRef(({className:e,...t},n)=>a.jsx(ZT,{ref:n,className:te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Vn.displayName=ZT.displayName;function Ql({title:e,icon:t,items:n,tourIndex:r,sectionKey:s,onUpdate:o,onRemove:i,matchFunction:l,matchType:c,masterData:u=[],rawData:d=[]}){const[h,m]=f.useState({}),p=(g,y)=>{if(c==="summary"){const _=d&&d[y];return a.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Total Tabs",(_==null?void 0:_.totalTabs)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.totalTabs,")"]})]}),a.jsx(_e,{type:"number",value:g.totalTabs||0,readOnly:!0,className:"h-8 text-sm mt-1 bg-gray-100 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Advance Payment",(_==null?void 0:_.advancePayment)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.advancePayment,")"]})]}),a.jsx(Gt,{value:g.advancePayment||0,onChange:k=>o(y,"advancePayment",k),size:"compact"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Total After Advance",(_==null?void 0:_.totalAfterAdvance)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.totalAfterAdvance,")"]})]}),a.jsx(Gt,{value:g.totalAfterAdvance||0,onChange:k=>o(y,"totalAfterAdvance",k),size:"compact"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Company Tip",(_==null?void 0:_.companyTip)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.companyTip,")"]})]}),a.jsx(Gt,{value:g.companyTip||0,onChange:k=>o(y,"companyTip",k),size:"compact"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Total After Tip",(_==null?void 0:_.totalAfterTip)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.totalAfterTip,")"]})]}),a.jsx(_e,{type:"number",value:g.totalAfterTip||0,readOnly:!0,className:"h-8 text-sm mt-1 bg-gray-100 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Collections For Company",(_==null?void 0:_.collectionsForCompany)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.collectionsForCompany,")"]})]}),a.jsx(_e,{type:"number",value:g.collectionsForCompany||0,readOnly:!0,className:"h-8 text-sm mt-1 bg-gray-100 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Total After Collections",(_==null?void 0:_.totalAfterCollections)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.totalAfterCollections,")"]})]}),a.jsx(_e,{type:"number",value:g.totalAfterCollections||0,readOnly:!0,className:"h-8 text-sm mt-1 bg-gray-100 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Final Total",(_==null?void 0:_.finalTotal)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",_.finalTotal,")"]})]}),a.jsx(_e,{type:"number",value:g.finalTotal||0,readOnly:!0,className:"h-8 text-sm mt-1 bg-gray-100 cursor-not-allowed"})]})]})},y)}const w=l&&g.name?l(g.name):null,v=w!==null,b=d&&d[y],x=c==="destination"&&u.length>0;return a.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(_n,{variant:"outline",className:"text-xs",children:[c," ",y+1]}),v&&a.jsxs(_n,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:[a.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Matched"]})]}),a.jsx(V,{variant:"outline",size:"sm",onClick:()=>i(y),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:a.jsx(ot,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs",children:["Name",(b==null?void 0:b.name)&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:['(JSON: "',b.name,'")']})]}),x?a.jsxs(ln,{open:h[y],onOpenChange:_=>m({...h,[y]:_}),children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":h[y],className:"h-7 justify-between text-xs w-full",children:[g.name||"Select...",a.jsx(En,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search...",className:"h-7 text-xs"}),a.jsxs($r,{children:[a.jsx(xn,{children:"No item found."}),a.jsx(wn,{children:u.map(_=>{var k;return a.jsxs(bn,{value:_.name,onSelect:()=>{o(y,"name",_.name),o(y,"price",_.price),m({...h,[y]:!1})},className:"text-xs",children:[a.jsx(Tt,{className:te("mr-2 h-3 w-3",g.name===_.name?"opacity-100":"opacity-0")}),_.name," (",(k=_.price)==null?void 0:k.toLocaleString()," )"]},_.id)})})]})]})})]}):a.jsx(_e,{value:g.name||"",onChange:_=>o(y,"name",_.target.value),className:"h-7 text-xs"})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs",children:["Price",(b==null?void 0:b.price)!==void 0&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(JSON: ",b.price,")"]})]}),a.jsx(Gt,{value:g.price||0,onChange:_=>o(y,"price",_),size:"compact"})]}),c!=="allowance"&&a.jsxs("div",{className:"col-span-2",children:[a.jsxs(Ce,{className:"text-xs",children:["Date",(b==null?void 0:b.date)&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:['(JSON: "',b.date,'")']})]}),a.jsx(_e,{type:"date",value:g.date||"",onChange:_=>o(y,"date",_.target.value),className:"h-7 text-xs"})]})]}),v&&a.jsx("div",{className:"mt-2 p-2 bg-green-50 rounded text-xs text-green-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Matched:"})," ",w.name," (Price: ",w.price,")"]}),a.jsx(V,{variant:"outline",size:"sm",onClick:()=>{o(y,"price",w.price),w.id&&o(y,"id",w.id)},className:"h-5 px-2 text-xs bg-green-100 hover:bg-green-200",children:"Apply Match"})]})})]},y)},N=(g,y)=>{const w=l&&g.name?l(g.name):null,v=w!==null,b=d&&d[y],x=(c==="destination"||c==="expense"||c==="meal"||c==="allowance")&&u.length>0;if(c==="allowance"){const _=l?l(g.name):null,k=_!==null;return a.jsxs(nt,{children:[a.jsx(oe,{className:"text-xs font-medium",children:y+1}),a.jsx(oe,{className:"text-xs",children:a.jsxs("div",{className:"space-y-1",children:[x?a.jsxs(ln,{open:h[y],onOpenChange:E=>m({...h,[y]:E}),children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":h[y],className:te("h-7 justify-between text-xs w-full",k?"border-green-500 bg-green-50":"border-yellow-500 bg-yellow-50"),children:[g.name||"Select allowance...",a.jsx(En,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search allowance...",className:"h-7 text-xs"}),a.jsxs($r,{children:[a.jsx(xn,{children:"No allowance found."}),a.jsx(wn,{children:u.map(E=>a.jsxs(bn,{value:E.name,onSelect:()=>{o(y,"name",E.name),o(y,"price",E.price),m({...h,[y]:!1})},className:"text-xs",children:[a.jsx(Tt,{className:te("mr-2 h-3 w-3",g.name===E.name?"opacity-100":"opacity-0")}),E.name," (",E.price.toLocaleString()," )"]},E.id))})]})]})})]}):a.jsx(_e,{value:g.name||"",onChange:E=>o(y,"name",E.target.value),className:te("h-7 text-xs",k?"border-green-500 bg-green-50":"border-yellow-500 bg-yellow-50")}),(b==null?void 0:b.name)&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:['JSON: "',b.name,'"']}),k&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[a.jsx(Tt,{className:"h-3 w-3"}),"Matched: ",_.name]})]})}),a.jsx(oe,{className:"text-xs",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx(Gt,{value:g.price||0,onChange:E=>o(y,"price",E),size:"compact"}),(b==null?void 0:b.price)!==void 0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["JSON: ",b.price]})]})}),a.jsx(oe,{className:"text-xs",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx(_e,{type:"date",value:g.date||"",onChange:E=>o(y,"date",E.target.value),className:"h-7 text-xs"}),(b==null?void 0:b.date)&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:['JSON: "',b.date,'"']})]})}),a.jsx(oe,{className:"text-right",children:a.jsx(V,{variant:"outline",size:"sm",onClick:()=>i(y),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:a.jsx(ot,{className:"h-3 w-3"})})})]},y)}return a.jsxs(nt,{children:[a.jsx(oe,{className:"text-xs font-medium",children:y+1}),a.jsx(oe,{className:"text-xs",children:a.jsxs("div",{className:"space-y-1",children:[x?a.jsxs(ln,{open:h[y],onOpenChange:_=>m({...h,[y]:_}),children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":h[y],className:te("h-7 justify-between text-xs w-full",v?"border-green-500 bg-green-50":"border-yellow-500 bg-yellow-50"),children:[g.name||"Select...",a.jsx(En,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search...",className:"h-7 text-xs"}),a.jsxs($r,{children:[a.jsx(xn,{children:"No item found."}),a.jsx(wn,{children:u.map(_=>{var k;return a.jsxs(bn,{value:_.name,onSelect:()=>{o(y,"name",_.name),o(y,"price",_.price),m({...h,[y]:!1})},className:"text-xs",children:[a.jsx(Tt,{className:te("mr-2 h-3 w-3",g.name===_.name?"opacity-100":"opacity-0")}),_.name," (",(k=_.price)==null?void 0:k.toLocaleString()," )"]},_.id)})})]})]})})]}):a.jsx(_e,{value:g.name||"",onChange:_=>o(y,"name",_.target.value),className:te("h-7 text-xs",v?"border-green-500 bg-green-50":"border-yellow-500 bg-yellow-50")}),(b==null?void 0:b.name)&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:['JSON: "',b.name,'"']}),v&&a.jsxs(_n,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:[a.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Matched: ",w.name]})]})}),a.jsx(oe,{className:"text-xs",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx(Gt,{value:g.price||0,onChange:_=>o(y,"price",_),size:"compact"}),(b==null?void 0:b.price)!==void 0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["JSON: ",b.price]}),v&&w.price&&a.jsxs(_n,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:["Master: ",w.price.toLocaleString()," "]})]})}),a.jsx(oe,{className:"text-xs",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx(_e,{type:"date",value:g.date||"",onChange:_=>o(y,"date",_.target.value),className:"h-7 text-xs"}),(b==null?void 0:b.date)&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:['JSON: "',b.date,'"']})]})}),a.jsx(oe,{className:"text-right",children:a.jsx(V,{variant:"outline",size:"sm",onClick:()=>i(y),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:a.jsx(ot,{className:"h-3 w-3"})})})]},y)};return a.jsx("div",{children:n.length===0?a.jsxs("div",{className:"text-sm text-gray-500 text-center py-8 border rounded-lg",children:["No ",e.toLowerCase()," found"]}):c==="summary"?a.jsx("div",{className:"space-y-2",children:n.map((g,y)=>p(g,y))}):a.jsx("div",{className:"border rounded-lg",children:a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{className:"w-[50px] text-xs",children:"#"}),a.jsx(se,{className:"text-xs",children:"Name / JSON"}),a.jsx(se,{className:"text-xs",children:"Price / JSON"}),a.jsx(se,{className:"text-xs",children:"Date / JSON"}),a.jsx(se,{className:"text-xs w-[80px] text-right",children:"Actions"})]})}),a.jsx(lr,{children:n.map((g,y)=>N(g,y))})]})})})}function ZW({items:e,onCancel:t,onConfirm:n,preloadedEntities:r}){const[s,o]=f.useState((r==null?void 0:r.companies)??[]),[i,l]=f.useState((r==null?void 0:r.guides)??[]),[c,u]=f.useState((r==null?void 0:r.nationalities)??[]),[d,h]=f.useState([]),[m,p]=f.useState([]),[N,g]=f.useState([]),[y,w]=f.useState([]),[v,b]=f.useState([]),[x,_]=f.useState(e),[k,E]=f.useState(""),[D,$]=f.useState(!1),[O,Y]=f.useState(!1),[T,M]=f.useState(!1),[U,A]=f.useState(!1),[F,C]=f.useState(!1),[j,S]=f.useState(!1),[P,H]=f.useState(null),[R,L]=f.useState("");f.useState(null);const J=f.useRef(null),Q=f.useRef({});f.useEffect(()=>{(async()=>{try{const[he,ce,ne,we,ye,fe,Me]=await Promise.all([r!=null&&r.companies?Promise.resolve(r.companies):Z.listCompanies({}),r!=null&&r.guides?Promise.resolve(r.guides):Z.listGuides({}),r!=null&&r.nationalities?Promise.resolve(r.nationalities):Z.listNationalities({}),Z.listTouristDestinations({}),Z.listDetailedExpenses({}),Z.listShoppings({}),Z.listProvinces({})]);o(he),l(ce),u(ne),h(we),p(ye),g(fe),w(Me);const yt=ye.filter(Ie=>{var be;return((be=Ie.categoryRef)==null?void 0:be.nameAtBooking)==="CTP"});b(yt),Q.current={destinations:new zn(we,{keys:["name"],threshold:.5,includeScore:!0,ignoreLocation:!0}),expenses:new zn(ye,{keys:["name"],threshold:.5,includeScore:!0,ignoreLocation:!0}),shoppings:new zn(ye,{keys:["name"],threshold:.5,includeScore:!0,ignoreLocation:!0}),allowances:new zn(yt,{keys:["name"],threshold:.5,includeScore:!0,ignoreLocation:!0})};const Ct=Ie=>{if(!Ie.trim()||!Q.current.destinations)return null;const be=Q.current.destinations.search(Ie);return be.length>0&&be[0].score&&be[0].score<.5?be[0].item:null},xt=Ie=>{if(!Ie.trim()||!Q.current.expenses)return null;const be=Q.current.expenses.search(Ie);return be.length>0&&be[0].score&&be[0].score<.5?be[0].item:null},ms=Ie=>{if(!Ie.trim()||!Q.current.shoppings)return null;const be=Q.current.shoppings.search(Ie);return be.length>0&&be[0].score&&be[0].score<.5?be[0].item:null},rt=Ie=>{if(!Ie||!Ie.trim()||!Q.current.allowances)return null;const be=Q.current.allowances.search(Ie);return be.length>0&&be[0].score&&be[0].score<.5?be[0].item:null},ze=e.map(Ie=>{var tt,lt,Yt;const be={...Ie.tour},De={...Ie.raw};if(be.destinations&&!De.destinations&&(De.destinations=be.destinations.map(Re=>({...Re}))),be.expenses&&!De.expenses&&(De.expenses=be.expenses.map(Re=>({...Re}))),be.meals&&!De.meals&&(De.meals=be.meals.map(Re=>({...Re}))),be.allowances&&!De.allowances&&(De.allowances=be.allowances.map(Re=>({...Re}))),be.summary&&!De.summary&&(De.summary={...be.summary}),Ie.raw.company&&!((tt=be.companyRef)!=null&&tt.id)){const Fe=new zn(he,{keys:["name"],threshold:.5,includeScore:!0,ignoreLocation:!0}).search(Ie.raw.company);if(Fe.length>0&&Fe[0].score&&Fe[0].score<.5){const nn=Fe[0].item;be.companyRef={id:nn.id,nameAtBooking:nn.name}}}if(Ie.raw.guide&&!((lt=be.guideRef)!=null&&lt.id)){const Fe=new zn(ce,{keys:["name"],threshold:.5,includeScore:!0,ignoreLocation:!0}).search(Ie.raw.guide);if(Fe.length>0&&Fe[0].score&&Fe[0].score<.5){const nn=Fe[0].item;be.guideRef={id:nn.id,nameAtBooking:nn.name}}}if(Ie.raw.nationality&&!((Yt=be.clientNationalityRef)!=null&&Yt.id)){let Re=Ie.raw.nationality;const Fe=[",","/","-","&","and"];for(const hn of Fe)if(Re.includes(hn)){Re=Re.split(hn)[0].trim();break}const rn=new zn(ne,{keys:["name","iso2"],threshold:.5,includeScore:!0,ignoreLocation:!0}).search(Re);if(rn.length>0&&rn[0].score&&rn[0].score<.5){const hn=rn[0].item;be.clientNationalityRef={id:hn.id,nameAtBooking:hn.name}}}return be.destinations&&be.destinations.length>0&&(be.destinations=be.destinations.map(Re=>{if(!Re.name)return Re;const Fe=Ct(Re.name);return Fe?(console.log("Matched destination:",Re.name,"-> Master:",Fe.name,"Price:",Fe.price),{...Re,name:Fe.name,price:Fe.price||Re.price||0,matchedId:Fe.id,matchedPrice:Fe.price}):Re})),be.expenses&&be.expenses.length>0&&(be.expenses=be.expenses.map(Re=>{if(!Re.name)return Re;const Fe=xt(Re.name);return Fe?{...Re,name:Fe.name,price:Fe.price,matchedId:Fe.id,matchedPrice:Fe.price}:Re})),be.meals&&be.meals.length>0&&(be.meals=be.meals.map(Re=>{if(!Re.name)return Re;const Fe=xt(Re.name);return Fe?{...Re,name:Fe.name,price:Fe.price,matchedId:Fe.id,matchedPrice:Fe.price}:Re})),be.allowances&&be.allowances.length>0&&(be.allowances=be.allowances.map(Re=>{if(!Re.name)return Re;const Fe=rt(Re.name);return Fe?(console.log("Matched allowance:",Re.name,"-> Master:",Fe.name,"Price:",Fe.price),{...Re,name:Fe.name,price:Fe.price,matchedId:Fe.id,matchedPrice:Fe.price}):Re})),{...Ie,tour:be,raw:De}});_(ze)}catch(he){console.error("Failed to load entities:",he),z.error("Failed to load master data")}})()},[e,r]);const G=f.useMemo(()=>{const le={};return x.forEach((he,ce)=>{var fe,Me,yt;const ne=[],we=he.tour,ye=he.raw;we.tourCode||ne.push("Tour code is missing"),we.clientName||ne.push("Client name is missing"),we.startDate||ne.push("Start date is missing"),we.endDate||ne.push("End date is missing"),(fe=we.companyRef)!=null&&fe.id||ne.push(`Company is not selected (JSON value: "${ye.company}")`),(Me=we.guideRef)!=null&&Me.id||ne.push(`Guide is not selected (JSON value: "${ye.guide}")`),(yt=we.clientNationalityRef)!=null&&yt.id||ne.push(`Nationality is not selected (JSON value: "${ye.nationality}")`),ne.length>0&&(le[ce]=ne)}),le},[x]),q=f.useMemo(()=>{let le=x;return k.trim()&&(le=new zn(x,{keys:["tour.tourCode","tour.clientName","tour.companyRef.nameAtBooking","tour.guideRef.nameAtBooking","tour.clientNationalityRef.nameAtBooking","raw.company","raw.guide","raw.nationality","tour.destinations.name","tour.expenses.name","tour.meals.name"],threshold:.5,includeScore:!0}).search(k).map(ce=>ce.item)),le.sort((he,ce)=>{var Me,yt;const ne=x.findIndex(Ct=>Ct===he),we=x.findIndex(Ct=>Ct===ce),ye=((Me=G[ne])==null?void 0:Me.length)>0,fe=((yt=G[we])==null?void 0:yt.length)>0;return ye&&!fe?-1:!ye&&fe?1:ne-we})},[x,k,G]),ee=()=>{const le=[];return x.forEach((he,ce)=>{var ye,fe,Me;const ne=he.tour,we=ne.tourCode||`Tour ${ce+1}`;ne.tourCode||le.push(`${we}: Tour code is required`),ne.clientName||le.push(`${we}: Client name is required`),ne.startDate||le.push(`${we}: Start date is required`),ne.endDate||le.push(`${we}: End date is required`),(ye=ne.companyRef)!=null&&ye.id||le.push(`${we}: Company is required`),(fe=ne.guideRef)!=null&&fe.id||le.push(`${we}: Guide is required`),(Me=ne.clientNationalityRef)!=null&&Me.id||le.push(`${we}: Nationality is required`)}),{valid:le.length===0,errors:le}},ae=le=>{if(!le.trim()||!Q.current.destinations)return null;const he=Q.current.destinations.search(le);return he.length>0&&he[0].score&&he[0].score<.5?he[0].item:null},me=le=>{if(!le.trim()||!Q.current.expenses)return null;const he=Q.current.expenses.search(le);return he.length>0&&he[0].score&&he[0].score<.5?he[0].item:null},Pe=le=>{if(!le||!le.trim()||!Q.current.allowances)return null;const he=Q.current.allowances.search(le);return he.length>0&&he[0].score&&he[0].score<.5?he[0].item:null},W=(le,he,ce,ne)=>{_(we=>we.map((ye,fe)=>{if(fe===le){const Me=[...ye.tour.destinations||[]];return Me[he]={...Me[he],[ce]:ne},{...ye,tour:{...ye.tour,destinations:Me}}}return ye}))},pe=(le,he,ce,ne)=>{_(we=>we.map((ye,fe)=>{if(fe===le){const Me=[...ye.tour.expenses||[]];return Me[he]={...Me[he],[ce]:ne},{...ye,tour:{...ye.tour,expenses:Me}}}return ye}))},je=(le,he,ce,ne)=>{_(we=>we.map((ye,fe)=>{if(fe===le){const Me=[...ye.tour.meals||[]];return Me[he]={...Me[he],[ce]:ne},{...ye,tour:{...ye.tour,meals:Me}}}return ye}))},$e=(le,he,ce,ne)=>{_(we=>we.map((ye,fe)=>{if(fe===le){const Me=[...ye.tour.allowances||[]];return Me[he]={...Me[he],[ce]:ne},{...ye,tour:{...ye.tour,allowances:Me}}}return ye}))},Ke=(le,he)=>{_(ce=>ce.map((ne,we)=>{if(we===le){const ye=[...ne.tour.destinations||[]];return ye.splice(he,1),{...ne,tour:{...ne.tour,destinations:ye}}}return ne}))},Ye=(le,he)=>{_(ce=>ce.map((ne,we)=>{if(we===le){const ye=[...ne.tour.expenses||[]];return ye.splice(he,1),{...ne,tour:{...ne.tour,expenses:ye}}}return ne}))},dt=(le,he)=>{_(ce=>ce.map((ne,we)=>{if(we===le){const ye=[...ne.tour.meals||[]];return ye.splice(he,1),{...ne,tour:{...ne.tour,meals:ye}}}return ne}))},Nt=(le,he)=>{_(ce=>ce.map((ne,we)=>{if(we===le){const ye=[...ne.tour.allowances||[]];return ye.splice(he,1),{...ne,tour:{...ne.tour,allowances:ye}}}return ne}))},I=(le,he,ce)=>{_(ne=>ne.map((we,ye)=>ye===le?{...we,tour:{...we.tour,[he]:ce}}:we))},K=(le,he,ce)=>{_(ne=>ne.map((we,ye)=>ye===le?{...we,tour:{...we.tour,[he]:{id:ce.id,nameAtBooking:ce.name}}}:we))},X=le=>{_(he=>he.filter((ce,ne)=>ne!==le))},ge=async le=>{try{const he=await Z.createCompany(le);o(ce=>[...ce,he]),z.success("Company created successfully"),$(!1)}catch{z.error("Failed to create company")}},ve=async le=>{try{const he=await Z.createGuide(le);l(ce=>[...ce,he]),z.success("Guide created successfully"),Y(!1)}catch{z.error("Failed to create guide")}},de=async le=>{try{const he=await Z.createNationality(le);u(ce=>[...ce,he]),z.success("Nationality created successfully"),M(!1)}catch{z.error("Failed to create nationality")}},Ne=async le=>{try{const he=await Z.createTouristDestination(le);h(ce=>[...ce,he]),z.success("Destination created successfully"),A(!1)}catch{z.error("Failed to create destination")}},qe=async le=>{try{const he=await Z.createDetailedExpense(le);p(ce=>[...ce,he]),z.success("Expense created successfully"),C(!1)}catch{z.error("Failed to create expense")}},at=async le=>{try{const he=await Z.createShopping(le);g(ce=>[...ce,he]),z.success("Shopping created successfully"),S(!1)}catch{z.error("Failed to create shopping")}};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Import Review"}),a.jsxs(_n,{variant:"outline",className:"text-xs",children:[x.length," tour",x.length!==1?"s":""]}),a.jsx(_n,{variant:Object.keys(G).length===0?"default":"secondary",className:"text-xs",children:Object.keys(G).length===0?"Ready":`${Object.keys(G).length} warnings`})]})}),a.jsxs("div",{className:"relative",children:[a.jsx(uy,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-muted-foreground h-3 w-3"}),a.jsx(_e,{placeholder:"Search tours...",value:k,onChange:le=>E(le.target.value),className:"pl-7 h-8 text-sm"})]}),a.jsx("div",{className:"space-y-3",children:a.jsx(LT,{className:"h-[calc(100vh-300px)]",ref:J,children:a.jsx("div",{className:"space-y-4 pr-4",children:q.map((le,he)=>{var fe,Me,yt,Ct,xt,ms,rt;const ce=x.findIndex(ze=>ze===le),ne=le.tour,we=le.raw,ye=G[ce]||[];return a.jsxs("div",{children:[a.jsxs(mt,{className:ye.length>0?"border-yellow-500":"",children:[a.jsx(zt,{className:"pb-2 pt-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Wt,{className:"text-base",children:ne.tourCode||`Tour ${ce+1}`}),a.jsxs("div",{className:"flex items-center gap-1",children:[ye.length>0&&a.jsxs(_n,{variant:"secondary",className:"text-xs px-1.5 py-0.5",children:[ye.length,"w"]}),a.jsx(V,{variant:"outline",size:"sm",onClick:()=>X(ce),className:"h-6 w-6 p-0",children:a.jsx(ot,{className:"h-3 w-3"})})]})]})}),a.jsx(Ft,{className:"pt-2",children:a.jsxs(e2,{defaultValue:"info",className:"w-full",children:[a.jsxs(Sx,{className:"grid w-full grid-cols-6 h-8",children:[a.jsx(Wn,{value:"info",className:"text-xs px-2",children:"Info"}),a.jsxs(Wn,{value:"destinations",className:"text-xs px-1",children:["Dest",a.jsx(_n,{variant:"secondary",className:"ml-1 text-xs px-1 py-0",children:((fe=ne.destinations)==null?void 0:fe.length)||0})]}),a.jsxs(Wn,{value:"expenses",className:"text-xs px-1",children:["Exp",a.jsx(_n,{variant:"secondary",className:"ml-1 text-xs px-1 py-0",children:((Me=ne.expenses)==null?void 0:Me.length)||0})]}),a.jsxs(Wn,{value:"meals",className:"text-xs px-1",children:["Meals",a.jsx(_n,{variant:"secondary",className:"ml-1 text-xs px-1 py-0",children:((yt=ne.meals)==null?void 0:yt.length)||0})]}),a.jsxs(Wn,{value:"allowances",className:"text-xs px-1",children:["Allow",a.jsx(_n,{variant:"secondary",className:"ml-1 text-xs px-1 py-0",children:((Ct=ne.allowances)==null?void 0:Ct.length)||0})]}),a.jsx(Wn,{value:"summary",className:"text-xs px-1",children:"Summary"})]}),a.jsxs(Vn,{value:"info",className:"space-y-2 mt-2",children:[ye.length>0&&a.jsx("div",{className:"p-2 bg-yellow-50 rounded border border-yellow-200",children:a.jsxs("div",{className:"flex items-start gap-1",children:[a.jsx(OD,{className:"h-3 w-3 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-xs font-medium text-yellow-800",children:"Warnings:"}),a.jsx("ul",{className:"list-disc list-inside mt-0.5 text-xs text-yellow-700 space-y-0.5",children:ye.map((ze,Ie)=>a.jsx("li",{children:ze},Ie))})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx(Ce,{className:"text-xs font-medium",children:"Client Name"}),a.jsx(_e,{value:ne.clientName||"",onChange:ze=>I(ce,"clientName",ze.target.value),className:`h-7 text-xs ${ne.clientName?"":"border-yellow-500"}`})]}),a.jsxs("div",{children:[a.jsx(Ce,{className:"text-xs font-medium",children:"Tour Code"}),a.jsx(_e,{value:ne.tourCode||"",onChange:ze=>I(ce,"tourCode",ze.target.value),className:`h-7 text-xs ${ne.tourCode?"":"border-yellow-500"}`})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Company",we.company&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",we.company,")"]})]}),a.jsx("div",{className:(xt=ne.companyRef)!=null&&xt.id?"":"border border-yellow-500 rounded",children:a.jsx(sp,{entities:s,selected:ne.companyRef,onSelect:ze=>K(ce,"companyRef",ze),onCreateNew:()=>{H(ce),L(we.company||""),$(!0)},placeholder:"Select company"})})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Guide",we.guide&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",we.guide,")"]})]}),a.jsx("div",{className:(ms=ne.guideRef)!=null&&ms.id?"":"border border-yellow-500 rounded",children:a.jsx(sp,{entities:i,selected:ne.guideRef,onSelect:ze=>K(ce,"guideRef",ze),onCreateNew:()=>{H(ce),L(we.guide||""),Y(!0)},placeholder:"Select guide"})})]}),a.jsxs("div",{children:[a.jsxs(Ce,{className:"text-xs font-medium",children:["Nationality",we.nationality&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",we.nationality,")"]})]}),a.jsx("div",{className:(rt=ne.clientNationalityRef)!=null&&rt.id?"":"border border-yellow-500 rounded",children:a.jsx(sp,{entities:c,selected:ne.clientNationalityRef,onSelect:ze=>K(ce,"clientNationalityRef",ze),onCreateNew:()=>{H(ce),L(we.nationality||""),M(!0)},placeholder:"Select nationality"})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx(Ce,{className:"text-xs font-medium",children:"Start Date"}),a.jsx(_e,{type:"date",value:ne.startDate||"",onChange:ze=>I(ce,"startDate",ze.target.value),className:`h-7 text-xs ${ne.startDate?"":"border-yellow-500"}`})]}),a.jsxs("div",{children:[a.jsx(Ce,{className:"text-xs font-medium",children:"End Date"}),a.jsx(_e,{type:"date",value:ne.endDate||"",onChange:ze=>I(ce,"endDate",ze.target.value),className:`h-7 text-xs ${ne.endDate?"":"border-yellow-500"}`})]})]})]}),a.jsx(Vn,{value:"destinations",className:"mt-2",children:a.jsx(Ql,{title:"Destinations",icon:a.jsx(FN,{className:"h-3 w-3"}),items:ne.destinations||[],tourIndex:ce,sectionKey:"destinations",onUpdate:(ze,Ie,be)=>W(ce,ze,Ie,be),onRemove:ze=>Ke(ce,ze),matchFunction:ae,matchType:"destination",masterData:d,rawData:we.destinations||[]})}),a.jsx(Vn,{value:"expenses",className:"mt-2",children:a.jsx(Ql,{title:"Expenses",icon:a.jsx(LN,{className:"h-3 w-3"}),items:ne.expenses||[],tourIndex:ce,sectionKey:"expenses",onUpdate:(ze,Ie,be)=>pe(ce,ze,Ie,be),onRemove:ze=>Ye(ce,ze),matchFunction:me,matchType:"expense",masterData:m,rawData:we.expenses||[]})}),a.jsx(Vn,{value:"meals",className:"mt-2",children:a.jsx(Ql,{title:"Meals",icon:a.jsx(QD,{className:"h-3 w-3"}),items:ne.meals||[],tourIndex:ce,sectionKey:"meals",onUpdate:(ze,Ie,be)=>je(ce,ze,Ie,be),onRemove:ze=>dt(ce,ze),matchFunction:me,matchType:"meal",masterData:m,rawData:we.meals||[]})}),a.jsx(Vn,{value:"allowances",className:"mt-2",children:a.jsx(Ql,{title:"Allowances",icon:a.jsx(W0,{className:"h-3 w-3"}),items:ne.allowances||[],tourIndex:ce,sectionKey:"allowances",onUpdate:(ze,Ie,be)=>$e(ce,ze,Ie,be),onRemove:ze=>Nt(ce,ze),matchFunction:Pe,matchType:"allowance",masterData:v,rawData:we.allowances||[]})}),a.jsx(Vn,{value:"summary",className:"mt-2",children:a.jsx(Ql,{title:"Summary",icon:a.jsx(W0,{className:"h-3 w-3"}),items:ne.summary?[ne.summary]:[],tourIndex:ce,sectionKey:"summary",onUpdate:(ze,Ie,be)=>I(ce,"summary",{...ne.summary,[Ie]:be}),onRemove:()=>{},matchFunction:null,matchType:"summary",rawData:we.summary?[we.summary]:[]})})]})})]}),he<q.length-1&&a.jsx("div",{className:"my-4 border-t border-gray-300"})]},ce)})})})}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(V,{variant:"outline",onClick:t,children:"Cancel"}),a.jsxs(V,{onClick:()=>{try{const le=ee();if(!le.valid){z.error(`Cannot import: ${le.errors.join(", ")}`,{duration:8e3});return}const he=x.map(ce=>{const ne={...ce.tour};return ne.destinations&&(ne.destinations=ne.destinations.map(({matchedId:we,matchedPrice:ye,...fe})=>({...fe,price:ye!==void 0?ye:fe.price}))),ne.expenses&&(ne.expenses=ne.expenses.map(({matchedId:we,matchedPrice:ye,...fe})=>({...fe,price:ye!==void 0?ye:fe.price}))),ne.meals&&(ne.meals=ne.meals.map(({matchedId:we,matchedPrice:ye,...fe})=>({...fe,price:ye!==void 0?ye:fe.price}))),ne.allowances&&(ne.allowances=ne.allowances.map(({matchedId:we,matchedPrice:ye,...fe})=>({...fe,price:ye!==void 0?ye:fe.price}))),ne});n(he)}catch(le){console.error("Import confirmation error:",le);const he=le instanceof Error?le.message:"Unknown error occurred";z.error(`Import failed: ${he}`,{duration:8e3})}},children:["Import ",x.length," tour(s)"]})]}),a.jsx(wk,{open:D,onOpenChange:$,company:R?{id:"",name:R,createdAt:"",updatedAt:""}:void 0,onSubmit:ge}),a.jsx(xk,{open:O,onOpenChange:Y,guide:R?{id:"",name:R,createdAt:"",updatedAt:""}:void 0,onSubmit:ve}),a.jsx(bk,{open:T,onOpenChange:M,nationality:R?{id:"",name:R,createdAt:"",updatedAt:""}:void 0,onSubmit:de}),a.jsx(AE,{open:U,onOpenChange:A,onSubmit:Ne}),a.jsx(RE,{open:F,onOpenChange:C,onSubmit:qe}),a.jsx(DE,{open:j,onOpenChange:S,onSubmit:at})]})}function sp({entities:e,selected:t,onSelect:n,onCreateNew:r,placeholder:s}){const[o,i]=f.useState(""),[l,c]=f.useState(!1),u=f.useMemo(()=>o.trim()?new zn(e,{keys:["name"],threshold:.4,includeScore:!0}).search(o).map(h=>h.item):e,[e,o]);return a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs(ns,{value:(t==null?void 0:t.id)||void 0,onValueChange:d=>{const h=e.find(m=>m.id===d);h&&n(h)},onOpenChange:c,children:[a.jsx(Mr,{className:"h-7 flex-1 text-xs",children:a.jsx(rs,{placeholder:s})}),a.jsxs(Or,{children:[a.jsx("div",{className:"p-1",children:a.jsx(_e,{placeholder:"Search...",value:o,onChange:d=>i(d.target.value),className:"h-7 text-xs",onClick:d=>d.stopPropagation()})}),a.jsx(Fi,{}),u.map(d=>a.jsx(ct,{value:d.id,className:"text-xs",children:d.name},d.id)),u.length===0&&a.jsx("div",{className:"p-1 text-xs text-muted-foreground text-center",children:"No results found"})]})]}),a.jsx(V,{type:"button",variant:"outline",size:"sm",onClick:r,className:"h-7 w-7 p-0",children:a.jsx(It,{className:"h-3 w-3"})})]})}const uc=e=>e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," "):"",e9=(e,t,n)=>{const r=new Map;e.forEach(l=>{const c=uc(l.name);c&&!r.has(c)&&r.set(c,l)});const s=new Map;t.forEach(l=>{const c=uc(l.name);c&&!s.has(c)&&s.set(c,l)});const o=new Map,i=new Map;return n.forEach(l=>{const c=uc(l.name);c&&!o.has(c)&&o.set(c,l);const u=uc(l.iso2);u&&!i.has(u)&&i.set(u,l)}),{companies:e,guides:t,nationalities:n,lookups:{companiesByName:r,guidesByName:s,nationalitiesByName:o,nationalitiesByIso:i}}},t9=({onImport:e,trigger:t})=>{const[n,r]=f.useState(!1),[s,o]=f.useState(""),[i,l]=f.useState(!1),[c,u]=f.useState([]),[d,h]=f.useState(null),m=f.useRef(null),p=x=>{var E;const _=(E=x.target.files)==null?void 0:E[0];if(!_)return;if(!_.name.endsWith(".json")){z.error("Please upload a JSON file");return}const k=new FileReader;k.onload=D=>{var O;const $=(O=D.target)==null?void 0:O.result;o($)},k.onerror=()=>{z.error("Failed to read file")},k.readAsText(_)},N=f.useCallback(async()=>{if(d)return d;if(m.current)return m.current;const x=Promise.all([Z.listCompanies({}),Z.listGuides({}),Z.listNationalities({})]).then(([_,k,E])=>{const D=e9(_,k,E);return h(D),D}).finally(()=>{m.current=null});return m.current=x,x},[d]);f.useEffect(()=>{n&&N().catch(x=>{console.error("Failed to preload entities for import dialog",x)})},[n,N]);const g=(x,_,k,E=!1)=>{const D=uc(k);if(!D)return null;let $;if(_==="company"?$=x.lookups.companiesByName.get(D):_==="guide"?$=x.lookups.guidesByName.get(D):$=x.lookups.nationalitiesByName.get(D)||x.lookups.nationalitiesByIso.get(D),$)return{id:$.id,nameAtBooking:$.name};let O=[],Y=["name"];_==="company"?O=x.companies:_==="guide"?O=x.guides:(O=x.nationalities,Y=["name","iso2"]);const M=new zn(O,{keys:Y,threshold:.3,ignoreLocation:!0}).search(k);if(M.length>0){const U=M[0].item;return{id:U.id,nameAtBooking:U.name}}return null},y=(x,_)=>{var F,C,j,S,P,H,R,L,J;const k=x.tour||x,E=x.subcollections||{},D=k.company||"Vit ",$=k.tourGuide||"Cao Hu Tu",O=k.clientName||"Client T",Y=((F=k.clientNationality)==null?void 0:F.trim())||"Vit Nam",T=g(_,"company",D,!1),M=g(_,"guide",$,!1),U=g(_,"nationality",Y,!1);return{tour:{tourCode:k.tourCode||"",clientName:O,adults:k.adults||0,children:k.children||0,totalGuests:k.totalGuests||0,driverName:k.driverName||"",clientPhone:k.clientPhone||"",startDate:k.startDate||"",endDate:k.endDate||"",totalDays:k.totalDays||0,companyRef:T||{id:"",nameAtBooking:D},guideRef:M||{id:"",nameAtBooking:$},clientNationalityRef:U||{id:"",nameAtBooking:Y},destinations:E.destinations||[],expenses:E.expenses||[],meals:E.meals||[],allowances:E.allowances||[],summary:{totalTabs:((C=E.summary)==null?void 0:C.totalTabs)||0,advancePayment:((j=E.summary)==null?void 0:j.advancePayment)||0,totalAfterAdvance:((S=E.summary)==null?void 0:S.totalAfterAdvance)||0,companyTip:((P=E.summary)==null?void 0:P.companyTip)||0,totalAfterTip:((H=E.summary)==null?void 0:H.totalAfterTip)||0,collectionsForCompany:((R=E.summary)==null?void 0:R.collectionsForCompany)||0,totalAfterCollections:((L=E.summary)==null?void 0:L.totalAfterCollections)||0,finalTotal:((J=E.summary)==null?void 0:J.finalTotal)||0}},raw:{company:D,guide:$,nationality:Y}}},w=x=>{const _=Array.isArray(x)?x:[x],k=[];for(let E=0;E<_.length;E++){const D=_[E],$=D.tour||D,O=E+1;(!$||typeof $!="object")&&k.push(`Tour ${O}: Invalid tour data structure`)}return{valid:k.length===0,errors:k}},v=()=>{const x=[{tour:{tourCode:"SAMPLE001",company:"Vit ",tourGuide:"Cao Hu Tu",clientName:"Sample Client",clientNationality:"Vit Nam",adults:2,children:1,totalGuests:3,driverName:"Sample Driver",clientPhone:"+84123456789",startDate:"2025-01-15",endDate:"2025-01-20",totalDays:5},subcollections:{destinations:[{name:"H Ni",price:5e5,province:"H Ni",date:"2025-01-15",orderIndex:0}],expenses:[{name:"Hotel booking",price:1e6,date:"2025-01-15",orderIndex:0}],meals:[{name:"Restaurant A - Lunch",price:45e4,date:"2025-01-15",orderIndex:0}],allowances:[{province:"H Ni",amount:2e5,date:"2025-01-15",orderIndex:0}],summary:{totalTabs:0,advancePayment:0,totalAfterAdvance:0,companyTip:0,totalAfterTip:0,collectionsForCompany:0,totalAfterCollections:0,finalTotal:0}}}],_=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),k=URL.createObjectURL(_),E=document.createElement("a");E.href=k,E.download="tour-import-sample.json",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(k),z.success("Sample JSON file downloaded")},b=async()=>{if(!s.trim()){z.error("Please paste JSON data or upload a file");return}l(!0);try{const x=JSON.parse(s),_=w(x);if(!_.valid){z.error(`Invalid tour data:
${_.errors.join(`
`)}`,{duration:8e3});return}const k=Array.isArray(x)?x:[x];try{const E=await N(),D=k.map(($,O)=>{var Y;try{return y($,E)}catch(T){const M=((Y=$.tour)==null?void 0:Y.tourCode)||$.tourCode||`Tour ${O+1}`;throw new Error(`${M}: ${T instanceof Error?T.message:"Unknown error"}`)}});u(D),z.message("Review required",{description:"Review and edit tour data before importing."})}catch(E){if(E instanceof Error&&E.message.includes("Failed to preload entities"))z.error("Failed to load master data. Please try again.");else throw E}}catch(x){console.error("Import error:",x);const _=x instanceof Error?x.message:"Invalid JSON format";z.error(`Import failed: ${_}`)}finally{l(!1)}};return a.jsxs(Yn,{open:n,onOpenChange:r,children:[a.jsx(q8,{asChild:!0,children:t||a.jsxs(V,{variant:"outline",className:"hover-scale",children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),"Import JSON"]})}),a.jsxs(Dn,{className:"w-[95vw] sm:max-w-7xl max-h-[95vh] overflow-hidden",children:[a.jsxs(Rn,{className:"pb-3",children:[a.jsx(Mn,{className:"text-lg",children:"Import Tours from JSON"}),a.jsx(Is,{className:"text-sm",children:"Upload or paste JSON, then review and edit tour data before importing."})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:c.length===0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs(Ce,{htmlFor:"json-file",className:"flex items-center gap-2 cursor-pointer",children:[a.jsx(FD,{className:"h-4 w-4"}),"Upload JSON File"]}),a.jsx("input",{id:"json-file",type:"file",accept:".json",onChange:p,className:"mt-2"})]}),a.jsxs(V,{variant:"outline",size:"sm",onClick:v,className:"ml-2",children:[a.jsx(ia,{className:"h-4 w-4 mr-2"}),"Download Sample"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or paste JSON"})})]}),a.jsxs("div",{children:[a.jsx(Ce,{htmlFor:"json-textarea",children:"JSON Data"}),a.jsx(Du,{id:"json-textarea",storageKey:"tour-import-json",value:s,onValueChange:o,placeholder:'[{"tour": {"tourCode": "T001", "company": "ABC", "tourGuide": "John", "clientName": "Amy", "clientNationality": "USA", "adults": 2, "children": 0, "startDate": "2025-01-01", "endDate": "2025-01-10"}, "subcollections": {"destinations": [], "expenses": [], "meals": [], "allowances": [], "summary": {"totalTabs": 0}}}]',className:"min-h-[300px] font-mono text-sm"})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(V,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),a.jsx(V,{onClick:b,disabled:i,children:i?"Processing...":"Parse & Review"})]})]}):a.jsx("div",{className:"h-full overflow-hidden",children:a.jsx(ZW,{items:c,onCancel:()=>u([]),onConfirm:async x=>{try{await e(x),u([]),o(""),r(!1)}catch{}},preloadedEntities:d??void 0})})})]})]})};class n9 extends Error{constructor(n,r,s){super(n);Lu(this,"context");Lu(this,"originalError");this.name="ImportError",this.context=s,this.originalError=r}}function r9(e,t){const n={message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0,name:e instanceof Error?e.name:typeof e,context:t,timestamp:new Date().toISOString()};console.error("Import Error:",n)}function s9(e,t){if(r9(e,t),e instanceof n9)return e.message;if(e instanceof Error){const n=e.message.toLowerCase();return n.includes("unique constraint")||n.includes("duplicate")?"Tour code already exists":n.includes("foreign key constraint")?"Invalid reference to company, guide, or nationality":n.includes("not null constraint")?"Required field is missing":n.includes("check constraint")?"Data validation failed":n.includes("value too long")?"Data value exceeds maximum length":n.includes("numeric value out of range")?"Numeric value out of allowed range":n.includes("invalid input syntax")?"Invalid data format":n.includes("permission denied")?"Permission denied - check your access rights":n.includes("connection")?"Network connection error":n.includes("timeout")?"Request timeout - please try again":n.includes("network")?"Network error - please check your connection":n.includes("fetch")?"Failed to fetch data from server":n.includes("unauthorized")?"Authentication required":n.includes("forbidden")?"Access forbidden":n.includes("not found")?"Referenced data not found":n.includes("invalid")?"Invalid data format":n.includes("required")?"Required field is missing":n.includes("missing")?"Required data is missing":n.includes("type")?"Invalid data type":n.includes("format")?"Invalid data format":n.includes("length")?"Data length exceeds limits":n.includes("size")?"Data size exceeds limits":n.includes("range")?"Data value out of allowed range":n.includes("bound")?"Data value out of bounds":n.includes("constraint")?"Data constraint violation":n.includes("validation")?"Data validation failed":n.includes("database")?(console.error("Database error details:",{message:e.message,stack:e.stack,name:e.name,context:t}),`Database error: ${e.message}`):n.includes("sql")?"Database query error":n.includes("null")||n.includes("undefined")?"Missing required data":e.message}return typeof e=="string"?e:"Unexpected error occurred"}function a9(e){var n,r,s;const t=[];if(e.tourCode||t.push("Tour code is required"),e.clientName||t.push("Client name is required"),e.startDate||t.push("Start date is required"),e.endDate||t.push("End date is required"),(n=e.companyRef)!=null&&n.id||t.push("Company is required"),(r=e.guideRef)!=null&&r.id||t.push("Guide is required"),(s=e.clientNationalityRef)!=null&&s.id||t.push("Nationality is required"),e.startDate&&e.endDate){const o=new Date(e.startDate),i=new Date(e.endDate);isNaN(o.getTime())&&t.push("Invalid start date format"),isNaN(i.getTime())&&t.push("Invalid end date format"),o>i&&t.push("Start date cannot be after end date")}return e.adults!==void 0&&(isNaN(e.adults)||e.adults<0)&&t.push("Adults count must be a non-negative number"),e.children!==void 0&&(isNaN(e.children)||e.children<0)&&t.push("Children count must be a non-negative number"),{valid:t.length===0,errors:t}}const ap=(e,t=15)=>e?e.length<=t?e:t<=3?e.slice(0,t):e.slice(0,t-3)+"...":"",Ob=()=>{var me,Pe;const[e,t]=f.useState(()=>localStorage.getItem("tours.search.code")||""),[n,r]=f.useState(()=>{const W=localStorage.getItem("tours.search.dateRange");if(W){const pe=JSON.parse(W);return{from:pe.from?new Date(pe.from):void 0,to:pe.to?new Date(pe.to):void 0}}}),[s,o]=f.useState(()=>localStorage.getItem("tours.search.company")||""),[i,l]=f.useState(()=>localStorage.getItem("tours.nationalityFilter")||"all"),[c,u]=f.useState(()=>localStorage.getItem("tours.selectedMonth")||"all"),[d,h]=f.useState(()=>{const W=localStorage.getItem("tours.selectedYear");if(!W||W==="all"){const pe=new Date().getFullYear().toString();return localStorage.setItem("tours.selectedYear",pe),pe}return W}),[m,p]=f.useState(()=>localStorage.getItem("tours.sortBy")||"startDate-asc"),[N,g]=f.useState(()=>{const W=localStorage.getItem("tours.filtersExpanded");return W!==null?JSON.parse(W):!0}),y=Ey(),w=tn();f.useEffect(()=>{localStorage.setItem("tours.search.code",e)},[e]),f.useEffect(()=>{localStorage.setItem("tours.search.dateRange",JSON.stringify(n||{}))},[n]),f.useEffect(()=>{localStorage.setItem("tours.search.company",s)},[s]),f.useEffect(()=>{localStorage.setItem("tours.nationalityFilter",i)},[i]),f.useEffect(()=>{localStorage.setItem("tours.selectedMonth",c)},[c]),f.useEffect(()=>{localStorage.setItem("tours.selectedYear",d)},[d]),f.useEffect(()=>{localStorage.setItem("tours.sortBy",m)},[m]),f.useEffect(()=>{localStorage.setItem("tours.filtersExpanded",JSON.stringify(N))},[N]);const v=f.useMemo(()=>{const W={},pe=e.trim(),je=s.trim();if(pe&&(W.tourCodeLike=pe),n!=null&&n.from&&(W.startDate=Dr(n.from,"yyyy-MM-dd")),n!=null&&n.to&&(W.endDate=Dr(n.to,"yyyy-MM-dd")),je&&(W.companyNameLike=je),i!=="all"&&(W.nationalityId=i),!(n!=null&&n.from)&&!(n!=null&&n.to)&&c!=="all"&&d!=="all"){const Ye=Number(d),dt=Number(c);if(!Number.isNaN(Ye)&&!Number.isNaN(dt)){const Nt=String(dt).padStart(2,"0");W.startDate=`${Ye}-${Nt}-01`;const I=new Date(Ye,dt,0).getDate();W.endDate=`${Ye}-${Nt}-${String(I).padStart(2,"0")}`}}const[$e,Ke]=m.split("-");return W.sortBy=$e,W.sortOrder=Ke,W},[e,n,s,i,c,d,m]),{data:b,isLoading:x}=Xe({queryKey:["tours",v],queryFn:()=>Z.listTours({...v},{includeDetails:!0}),staleTime:3e4,gcTime:3e5}),_=(b==null?void 0:b.tours)??[],k=(b==null?void 0:b.total)??0,E=f.useMemo(()=>_.reduce((W,pe)=>{var $e;const je=(($e=pe.summary)==null?void 0:$e.finalTotal)??0;return W+je},0),[_]),{data:D}=Xe({queryKey:["tours-grand-total"],queryFn:async()=>{const{tours:W}=await Z.listTours({},{includeDetails:!0}),pe=W.reduce((je,$e)=>{var Ye;const Ke=((Ye=$e.summary)==null?void 0:Ye.finalTotal)??0;return je+Ke},0);return{count:W.length,grandTotal:pe}},staleTime:3e4,gcTime:3e5}),{data:$=[]}=Xe({queryKey:["nationalities"],queryFn:()=>Z.listNationalities({})}),O=f.useMemo(()=>{const W=new Set;return _.forEach(pe=>{const je=parseInt(pe.startDate.substring(0,4));W.add(je)}),Array.from(W).sort().reverse()},[_]),Y=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],T=()=>{l("all"),u("all"),h("all")},M=i!=="all"||c!=="all"&&d!=="all",U=xe({mutationFn:W=>Z.duplicateTour(W),onSuccess:()=>{w.invalidateQueries({queryKey:["tours"]}),z.success("Tour duplicated successfully")},onError:W=>{z.error(W.message||"Failed to duplicate tour")}}),[A,F]=f.useState(null),C=xe({mutationFn:W=>Z.deleteTour(W),onSuccess:()=>{w.invalidateQueries({queryKey:["tours"]}),z.success("Tour deleted successfully")},onError:W=>{z.error(W.message||"Failed to delete tour")}}),j=()=>{z.warning("Bulk delete not available. Please delete tours individually.")},S=xe({mutationFn:Sz,onSuccess:W=>{w.invalidateQueries({queryKey:["tours"]}),z.success(`Recalculated ${W.updated} of ${W.total} tours. ${W.errors.length>0?`${W.errors.length} errors.`:""}`),W.errors.length>0&&console.error("Recalculation errors:",W.errors)},onError:W=>{z.error(`Failed to recalculate summaries: ${W.message}`)}}),P=async W=>{const pe=await Z.getTour(W.id);if(!pe)throw new Error(`Unable to load details for tour ${W.tourCode} from the database.`);return pe},H=async()=>{if(k===0){z.error("No tours to export");return}try{const{tours:W}=await Z.listTours({...v},{includeDetails:!0});if(W.length===0){z.error("No tours to export");return}await qz(W),z.success("All tours exported by month (ZIP)")}catch(W){console.error("Failed to export tours to Excel",W),z.error("Failed to export tours ZIP. Please try again.")}},R=async()=>{if(k===0){z.error("No tours to export");return}try{const{tours:W}=await Z.listTours({...v},{includeDetails:!0});if(W.length===0){z.error("No tours to export");return}await Hz(W),z.success("All tours exported to a single Excel sheet")}catch(W){console.error("Failed to export all tours to single Excel",W),z.error("Failed to export single Excel. Please try again.")}},L=async(W,pe)=>{pe.stopPropagation();try{const je=await P(W);await Vz(je),z.success(`Tour ${W.tourCode} exported to Excel`)}catch(je){console.error(`Failed to export tour ${W.tourCode} to Excel`,je);const $e=je instanceof Error&&je.message.includes("Unable to load details")?je.message:"Failed to export tour to Excel. Please try again.";z.error($e)}},J=(W,pe)=>{pe.stopPropagation(),U.mutate(W)},Q=(W,pe)=>{pe.stopPropagation(),F(W)},G=W=>{if(!W)return W;const pe=W.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(pe))return pe;if(pe.includes("/")){const[$e,Ke,Ye]=pe.split("/");if($e&&Ke&&Ye){if($e.length===4)return`${$e}-${Ke.padStart(2,"0")}-${Ye.padStart(2,"0")}`;if(Ye.length===4){const dt=parseInt(Ke,10),Nt=dt>12?$e:Ke,I=dt>12?Ke:$e;return`${Ye}-${String(Nt).padStart(2,"0")}-${String(I).padStart(2,"0")}`}}}const je=new Date(pe);if(!isNaN(je.getTime())){const $e=je.getFullYear(),Ke=String(je.getMonth()+1).padStart(2,"0"),Ye=String(je.getDate()).padStart(2,"0");return`${$e}-${Ke}-${Ye}`}return pe},q=xe({mutationFn:async W=>{const pe=[],je=[],$e=[],Ke=(fe,Me)=>{var yt,Ct,xt;return fe?!(fe.tourCode&&!Me.tourCode.toLowerCase().includes(fe.tourCode.toLowerCase())||fe.clientName&&!Me.clientName.toLowerCase().includes(fe.clientName.toLowerCase())||fe.companyId&&((yt=Me.companyRef)==null?void 0:yt.id)!==fe.companyId||fe.guideId&&((Ct=Me.guideRef)==null?void 0:Ct.id)!==fe.guideId||fe.nationalityId&&((xt=Me.clientNationalityRef)==null?void 0:xt.id)!==fe.nationalityId||fe.startDate&&Me.startDate<fe.startDate||fe.endDate&&Me.endDate>fe.endDate):!0},Ye=fe=>{w.getQueriesData({queryKey:["tours"]}).forEach(([yt,Ct])=>{if(!Ct||!Array.isArray(yt))return;const xt=yt[1]??void 0;if(!Ke(xt,fe))return;const ms=Ct.total+1,ze=[...Ct.tours.filter(Ie=>Ie.id!==fe.id),fe].sort((Ie,be)=>(be.startDate??"").localeCompare(Ie.startDate??""));w.setQueryData(yt,{tours:ze,total:ms})})};let dt=0,Nt=0,I=0,K;const X=()=>{if(W.length<=10)return;const fe=Math.round(dt/W.length*100),Me=[`${Nt}/${W.length} imported`];I>0&&Me.push(`${I} skipped`),K=z.message(`Importing tours... ${fe}%`,{id:K,description:Me.join("  "),duration:1e3})},{tours:ge}=await Z.listTours({}),ve=new Set(ge.map(fe=>fe.tourCode.toLowerCase())),[de,Ne,qe]=await Promise.all([Z.listTouristDestinations({}),Z.listDetailedExpenses({}),Z.listShoppings({})]),at=new Map(de.map(fe=>[fe.name.toLowerCase(),fe])),le=new Map(Ne.map(fe=>[fe.name.toLowerCase(),fe])),he=new Map(qe.map(fe=>[fe.name.toLowerCase(),fe])),ce=(fe,Me)=>fe!=null&&fe.trim()&&Me.get(fe.toLowerCase())||null;if((await(async(fe,Me)=>{const yt=[],Ct=xt=>(yt.push(xt),dt+=1,xt.success?Nt+=1:"skipped"in xt&&xt.skipped&&(I+=1),X(),xt);for(let xt=0;xt<fe.length;xt+=Me){const ms=fe.slice(xt,xt+Me);await Promise.all(ms.map(async(rt,ze)=>{var be,De,tt,lt;const Ie=xt+ze;if(rt.tourCode&&ve.has(rt.tourCode.toLowerCase()))return Ct({success:!1,skipped:!0,tourCode:rt.tourCode,error:`Tour with tour code "${rt.tourCode}" already exists`});try{const Yt=a9(rt);if(!Yt.valid)throw new Error(Yt.errors.join(", "));const Re=(be=rt.destinations)==null?void 0:be.map(({matchedId:Wf,matchedPrice:Vf,...Wr})=>{const it={...Wr,date:G(Wr.date)};if((!it.price||it.price===0)&&it.name){const On=ce(it.name,at);On&&(it.name=On.name,it.price=Number(On.price)||0)}return it}),Fe=(De=rt.expenses)==null?void 0:De.map(({matchedId:Wf,matchedPrice:Vf,...Wr})=>{const it={...Wr,date:G(Wr.date)};if((!it.price||it.price===0)&&it.name){const On=ce(it.name,le);On&&(it.name=On.name,it.price=Number(On.price)||0)}return it}),nn=(tt=rt.meals)==null?void 0:tt.map(({matchedId:Wf,matchedPrice:Vf,...Wr})=>{const it={...Wr,date:G(Wr.date)};if((!it.price||it.price===0)&&it.name){const On=ce(it.name,he);On&&(it.name=On.name,it.price=Number(On.price)||0)}return it}),rn=(lt=rt.allowances)==null?void 0:lt.map(({matchedId:Wf,matchedPrice:Vf,...Wr})=>{const it={...Wr,date:G(Wr.date)};if((!it.price||it.price===0)&&it.name){const On=ce(it.name,le);On&&(it.name=On.name,it.price=Number(On.price)||0)}return it}),hn=await Z.createTour({tourCode:rt.tourCode,companyRef:rt.companyRef,guideRef:rt.guideRef,clientNationalityRef:rt.clientNationalityRef,clientName:rt.clientName,adults:rt.adults,children:rt.children,driverName:rt.driverName,clientPhone:rt.clientPhone,startDate:G(rt.startDate),endDate:G(rt.endDate),destinations:Re,expenses:Fe,meals:nn,allowances:rn,summary:rt.summary});return Ye(hn),rt.tourCode&&ve.add(rt.tourCode.toLowerCase()),Ct({success:!0,tour:hn})}catch(Yt){const Re=rt.tourCode||`Tour ${Ie+1}`,Fe={operation:"importTour",tourCode:Re,tourIndex:Ie,data:rt,timestamp:new Date().toISOString()},nn=s9(Yt,Fe);return Ct({success:!1,error:`${Re}: ${nn}`})}}))}return yt})(W,10)).forEach(fe=>{fe.success?pe.push(fe.tour):"skipped"in fe&&fe.skipped?$e.push(("tourCode"in fe?fe.tourCode:void 0)||"Unknown"):!fe.success&&"error"in fe&&je.push(fe.error)}),je.length>0)throw new Error(je.join(`
`));return{imported:pe,skipped:$e}},onSuccess:async(W,pe)=>{const{imported:je,skipped:$e}=W;await w.invalidateQueries({queryKey:["tours"]}),$e.length>0?z.success(`${je.length} tour(s) imported successfully. ${$e.length} tour(s) skipped (already exist): ${$e.join(", ")}`,{duration:8e3}):z.success(`${je.length} tour(s) imported successfully`)},onError:W=>{console.error("Import error:",W);const pe=W instanceof Error?W.message:"Failed to import tours";z.error(pe,{duration:5e3})}}),ee=W=>{q.mutate(W)},{classes:ae}=hs("tours.headerMode");return a.jsx(Nr,{children:a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:`${ae} border-b pb-4 pt-4 bg-gray-100 dark:bg-gray-900 z-40 space-y-4`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex-shrink min-w-0",children:[a.jsx("h1",{className:"text-base sm:text-2xl md:text-3xl font-bold",children:"Tours"}),a.jsx("p",{className:"text-xs sm:text-sm md:text-base text-muted-foreground truncate",children:"Manage your tours and itineraries"})]}),a.jsxs("div",{className:"flex gap-1 sm:gap-2 items-center flex-shrink-0",children:[a.jsx(t9,{onImport:ee,trigger:a.jsxs(V,{variant:"outline",size:"sm",className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",children:[a.jsx(ds,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Import"})]})}),a.jsxs(V,{onClick:H,variant:"outline",size:"sm",className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",title:"Export all tours into folders by month (ZIP)",children:[a.jsx(bm,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Export All Tours  Folders"})]}),a.jsxs(V,{onClick:R,variant:"outline",size:"sm",className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",title:"Export all tours to 1 Excel file (single sheet with grand total)",children:[a.jsx(bm,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Export All Tours  Single Sheet"})]}),a.jsxs($d,{children:[a.jsx(_b,{asChild:!0,children:a.jsxs(V,{variant:"outline",size:"sm",className:"hover-scale text-destructive hover:text-destructive h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",children:[a.jsx(la,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Delete All"})]})}),a.jsxs(_c,{children:[a.jsxs(kc,{children:[a.jsx(Tc,{children:"Are you absolutely sure?"}),a.jsx(Pc,{children:"This action cannot be undone. This will permanently delete all tours from the database."})]}),a.jsxs(Ec,{children:[a.jsx(Dc,{children:"Cancel"}),a.jsx(Ac,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete All Tours"})]})]})]}),a.jsxs($d,{children:[a.jsx(_b,{asChild:!0,children:a.jsxs(V,{variant:"outline",size:"sm",className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",title:"Recalculate summaries for all tours (fixes stale data)",children:[a.jsx(VD,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Recalculate Summaries"})]})}),a.jsxs(_c,{children:[a.jsxs(kc,{children:[a.jsx(Tc,{children:"Recalculate All Tour Summaries?"}),a.jsxs(Pc,{children:["This will recalculate and update summary fields (total_tabs, final_total, etc.) for all tours based on their current destinations, expenses, meals, and allowances.",a.jsxs("div",{className:"mt-2",children:[a.jsx("strong",{children:"Use this if:"}),a.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[a.jsx("li",{children:"Tour cards show different final totals than the Summary tab"}),a.jsx("li",{children:"Final Total on page differs from Excel export totals"}),a.jsx("li",{children:"You've imported old data and need to fix summary values"}),a.jsx("li",{children:"You changed the calculation formula (advance payment, collections, tip)"})]})]}),a.jsx("div",{className:"mt-2 text-muted-foreground text-sm",children:"Note: This may take a few moments for large numbers of tours."})]})]}),a.jsxs(Ec,{children:[a.jsx(Dc,{children:"Cancel"}),a.jsx(Ac,{onClick:()=>S.mutate(),className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:S.isPending,children:S.isPending?"Recalculating...":"Recalculate All"})]})]})]}),a.jsxs(V,{onClick:()=>y("/tours/new"),size:"sm",className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",children:[a.jsx(It,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"New Tour"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:[a.jsx(Ms,{value:e,onChange:t,placeholder:"Search tour code..."}),a.jsxs(ln,{children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",className:`w-full justify-start text-left font-normal h-10 ${!(n!=null&&n.from)&&!(n!=null&&n.to)?"text-muted-foreground":""}`,children:[a.jsx(Ad,{className:"mr-2 h-4 w-4"}),n!=null&&n.from?n.to?a.jsxs(a.Fragment,{children:[Dr(n.from,"dd/MM/yyyy")," - ",Dr(n.to,"dd/MM/yyyy")]}):Dr(n.from,"dd/MM/yyyy"):a.jsx("span",{children:"Pick a date range"})]})}),a.jsxs(en,{className:"w-auto p-0",align:"start",children:[a.jsx(vx,{mode:"range",selected:n,onSelect:r,numberOfMonths:2,initialFocus:!0}),((n==null?void 0:n.from)||(n==null?void 0:n.to))&&a.jsx("div",{className:"border-t p-3",children:a.jsxs(V,{variant:"ghost",className:"w-full",onClick:()=>r(void 0),children:[a.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Clear dates"]})})]})]}),a.jsx(Ms,{value:s,onChange:o,placeholder:"Search company..."})]}),a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("h2",{className:"text-xs sm:text-sm font-semibold flex items-center gap-1 sm:gap-2",children:[a.jsx(V0,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Filters"})]}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g(!N),className:"ml-auto h-7 w-7 p-0 sm:h-8 sm:w-8",children:N?a.jsx(IN,{className:"h-3 w-3 sm:h-4 sm:w-4"}):a.jsx(iy,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),a.jsxs("div",{className:`transition-all duration-200 overflow-hidden ${N?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-4 gap-2 sm:gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(V0,{className:"h-3 w-3"}),"Nationality"]}),a.jsxs(ns,{value:i,onValueChange:l,children:[a.jsx(Mr,{className:"h-8 sm:h-10",children:a.jsx(rs,{placeholder:"All Nationalities"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All Nationalities"}),$.map(W=>a.jsxs(ct,{value:W.id,children:[W.emoji," ",W.name]},W.id))]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(Ad,{className:"h-3 w-3"}),"Month"]}),a.jsxs(ns,{value:c,onValueChange:u,children:[a.jsx(Mr,{className:"h-8 sm:h-10",children:a.jsx(rs,{placeholder:"All"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All"}),Y.map(W=>a.jsx(ct,{value:W.value,children:W.label},W.value))]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(Ad,{className:"h-3 w-3"}),"Year"]}),a.jsxs(ns,{value:d,onValueChange:h,children:[a.jsx(Mr,{className:"h-8 sm:h-10",children:a.jsx(rs,{placeholder:"All"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All"}),O.map(W=>a.jsx(ct,{value:W.toString(),children:W},W))]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(PD,{className:"h-3 w-3"}),"Sort By"]}),a.jsxs(ns,{value:m,onValueChange:p,children:[a.jsx(Mr,{className:"h-8 sm:h-10",children:a.jsx(rs,{placeholder:"Sort by..."})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"startDate-desc",children:"Start Date (Newest First)"}),a.jsx(ct,{value:"startDate-asc",children:"Start Date (Oldest First)"}),a.jsx(ct,{value:"endDate-desc",children:"End Date (Newest First)"}),a.jsx(ct,{value:"endDate-asc",children:"End Date (Oldest First)"}),a.jsx(ct,{value:"tourCode-asc",children:"Tour Code (A-Z)"}),a.jsx(ct,{value:"tourCode-desc",children:"Tour Code (Z-A)"}),a.jsx(ct,{value:"clientName-asc",children:"Client Name (A-Z)"}),a.jsx(ct,{value:"clientName-desc",children:"Client Name (Z-A)"}),a.jsx(ct,{value:"createdAt-desc",children:"Created (Newest First)"}),a.jsx(ct,{value:"createdAt-asc",children:"Created (Oldest First)"})]})]})]})]}),M&&a.jsxs(V,{variant:"outline",onClick:T,className:"h-8 sm:h-10 sm:self-end",children:[a.jsx(Qc,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Clear Filters"]})]}),M&&a.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[a.jsxs("span",{className:"text-base sm:text-lg font-semibold",children:["Showing ",_.length," tours"]}),i!=="all"&&a.jsx(_n,{variant:"secondary",className:"text-sm font-medium",children:(me=$.find(W=>W.id===i))==null?void 0:me.name}),c!=="all"&&d!=="all"&&a.jsxs(_n,{variant:"default",className:"text-sm sm:text-base font-semibold px-3 py-1",children:[(Pe=Y.find(W=>W.value===c))==null?void 0:Pe.label," ",d]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 text-sm sm:text-base border-y py-3 bg-muted/30",children:[E!==0&&a.jsxs("div",{children:[a.jsxs("span",{className:"text-muted-foreground",children:["Final Total (",_.length," tours): "]}),a.jsx("span",{className:"font-bold text-primary",children:ke(E)})]}),D&&D.grandTotal!==0&&a.jsxs("div",{children:[a.jsxs("span",{className:"text-muted-foreground",children:["Grand Total (All ",D.count," tours in database): "]}),a.jsx("span",{className:"font-bold text-green-600",children:ke(D.grandTotal)})]})]}),x?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[1,2,3].map(W=>a.jsx("div",{className:"h-48 bg-muted rounded-lg animate-pulse"},W))}):k===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground mt-6",children:!M&&!(e.trim()||n!=null&&n.from||n!=null&&n.to||s.trim())?"No tours found. Create your first tour to get started.":"No tours match your current filters."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:_.map((W,pe)=>{var I,K;const je=!!((W.destinations||[]).some(X=>(X.price??0)===0)||(W.expenses||[]).some(X=>(X.price??0)===0)||(W.meals||[]).some(X=>(X.price??0)===0)||(W.allowances||[]).some(X=>(X.price??0)===0)),$e=(W.destinations||[]).map(X=>(X.name||"").trim().toLowerCase()).filter(Boolean),Ke=new Map;for(const X of $e)Ke.set(X,(Ke.get(X)||0)+1);const Ye=Array.from(Ke.values()).some(X=>X>1),dt=je||Ye,Nt=(W.children||0)>0;return a.jsxs("div",{className:`rounded-lg border bg-card p-4 sm:p-6 transition-all hover-scale animate-fade-in relative ${dt?"border-red-500 dark:border-red-600":""}`,style:{animationDelay:`${pe*.1}s`},children:[Nt&&a.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 dark:bg-blue-600 text-white rounded-full p-1.5 shadow-lg",title:`${W.children} child${W.children>1?"ren":""}`,children:a.jsx(AD,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-start justify-between gap-2",children:a.jsx("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>y(`/tours/${W.id}`),children:a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-nowrap",children:[a.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",title:W.tourCode,children:ap(W.tourCode,15)}),a.jsx(_n,{variant:"outline",className:"text-xs shrink-0 whitespace-nowrap",children:rf(W.startDate,W.endDate)}),a.jsxs(_n,{variant:"outline",className:"text-xs shrink-0 whitespace-nowrap",children:[W.totalDays||(W.startDate&&W.endDate?Math.max(0,lu(new Date(W.endDate),new Date(W.startDate))+1):0),"d"]}),a.jsxs(_n,{variant:"outline",className:"text-xs shrink-0 whitespace-nowrap",children:[W.totalGuests||(W.adults||0)+(W.children||0),"p"]}),dt&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-destructive text-xs sm:text-sm",title:Ye&&je?"Duplicate destination name(s) and zero price item(s) found":Ye?"Duplicate destination name(s) found":"Zero price item(s) found",children:[a.jsx(LD,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Check"})]})]})})}),a.jsx("div",{className:"pt-3 border-t cursor-pointer",onClick:()=>y(`/tours/${W.id}`),children:a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Allowance:"}),a.jsxs("span",{className:"font-semibold",children:[Math.round((((I=W.allowances)==null?void 0:I.reduce((X,ge)=>X+ge.price*(ge.quantity||1),0))||0)/1e3),"k"]})]}),((K=W.summary)==null?void 0:K.finalTotal)!==void 0&&W.summary.finalTotal!==null&&W.summary.finalTotal!==0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-muted-foreground",children:"|"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Final:"}),a.jsxs("span",{className:"font-semibold text-primary",children:[Math.round(W.summary.finalTotal/1e3),"k"]})]})]})]})}),a.jsx("div",{className:"pt-3 border-t",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs sm:text-sm cursor-pointer",onClick:()=>y(`/tours/${W.id}`),children:[a.jsx("div",{className:"min-w-0 overflow-hidden",children:a.jsxs("p",{className:"truncate",title:W.companyRef.nameAtBooking,children:[a.jsx("span",{className:"text-muted-foreground",children:"Company: "}),a.jsx("span",{className:"font-medium",children:ap(W.companyRef.nameAtBooking,15)})]})}),a.jsx("div",{className:"min-w-0 overflow-hidden",children:a.jsxs("p",{className:"truncate",title:W.clientNationalityRef.nameAtBooking,children:[a.jsx("span",{className:"text-muted-foreground",children:"Nationality: "}),a.jsx("span",{className:"font-medium",children:ap(W.clientNationalityRef.nameAtBooking,15)})]})})]})}),a.jsxs("div",{className:"flex gap-2 pt-2 border-t justify-end",children:[a.jsx(V,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:X=>L(W,X),title:"Export to Excel",children:a.jsx(bm,{className:"h-4 w-4"})}),a.jsx(V,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:X=>J(W.id,X),title:"Duplicate tour",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:X=>Q(W.id,X),disabled:C.isPending,title:"Delete tour",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})]},W.id)})}),a.jsx($d,{open:!!A,onOpenChange:W=>!W&&F(null),children:a.jsxs(_c,{children:[a.jsxs(kc,{children:[a.jsx(Tc,{children:"Delete this tour?"}),a.jsx(Pc,{children:"This action cannot be undone. The tour will be permanently removed."})]}),a.jsxs(Ec,{children:[a.jsx(Dc,{onClick:()=>F(null),children:"Cancel"}),a.jsx(Ac,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>{A&&(C.mutate(A),F(null))},children:"Delete"})]})]})})]})})},o9="https://wzpqtbyclwlqssperkhp.supabase.co",i9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6cHF0YnljbHdscXNzcGVya2hwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDg1ODMsImV4cCI6MjA3NDgyNDU4M30.mSGk0tLyuhIhzYfDnvMaf_AycIpM-WSuoxHbqw6g5Z0",jo=T_(o9,i9,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),iv=f.forwardRef(({value:e=0,onChange:t,min:n=0,max:r,step:s=1,...o},i)=>{const l=()=>{const d=(e||0)+s;(r===void 0||d<=r)&&(t==null||t(d))},c=()=>{const d=(e||0)-s;d>=n&&(t==null||t(d))},u=d=>{const h=parseInt(d.target.value);isNaN(h)?d.target.value===""&&(t==null||t(0)):t==null||t(h)};return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:c,disabled:e<=n,className:"h-9 w-9 shrink-0 sm:h-10 sm:w-10",children:a.jsx($N,{className:"h-4 w-4"})}),a.jsx(_e,{...o,ref:i,type:"number",value:e,onChange:u,min:n,max:r,step:s,className:"text-center"}),a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:l,disabled:r!==void 0&&e>=r,className:"h-9 w-9 shrink-0 sm:h-10 sm:w-10",children:a.jsx(It,{className:"h-4 w-4"})})]})});iv.displayName="NumberInput";const to=f.forwardRef(({value:e="",onChange:t,...n},r)=>{const[s,o]=f.useState(!1),[i,l]=f.useState("");f.useEffect(()=>{l(e?An(e):"")},[e]);const c=p=>{const N=p.getFullYear(),g=String(p.getMonth()+1).padStart(2,"0"),y=String(p.getDate()).padStart(2,"0");return`${N}-${g}-${y}`},u=()=>{if(!e){const N=new Date;t==null||t(c(N));return}const p=new Date(e+"T00:00:00");p.setDate(p.getDate()+1),t==null||t(c(p))},d=()=>{if(!e){const N=new Date;t==null||t(c(N));return}const p=new Date(e+"T00:00:00");p.setDate(p.getDate()-1),t==null||t(c(p))},h=p=>{const N=p.target.value;l(N);const g=AR(N);g&&(t==null||t(g))},m=p=>{p&&(t==null||t(c(p)),o(!1))};return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:d,className:"h-10 w-10 shrink-0",children:a.jsx($N,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[a.jsx(_e,{...n,ref:r,type:"text",value:i,onChange:h,placeholder:"DD/MM/YYYY",className:"flex-1"}),a.jsxs(ln,{open:s,onOpenChange:o,children:[a.jsx(cn,{asChild:!0,children:a.jsx(V,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 shrink-0",children:a.jsx(Ad,{className:"h-4 w-4"})})}),a.jsx(en,{className:"w-auto p-0",align:"end",children:a.jsx(vx,{mode:"single",selected:e?new Date(e+"T00:00:00"):void 0,onSelect:m,initialFocus:!0})})]})]}),a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:u,className:"h-10 w-10 shrink-0",children:a.jsx(It,{className:"h-4 w-4"})})]})});to.displayName="DateInput";function l9({initialData:e,onSubmit:t,showSubmitButton:n=!0}){const[r,s]=f.useState(!1),[o,i]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState((e==null?void 0:e.companyRef.id)||""),[h,m]=f.useState((e==null?void 0:e.guideRef.id)||""),[p,N]=f.useState((e==null?void 0:e.clientNationalityRef.id)||""),{register:g,handleSubmit:y,watch:w,setValue:v,formState:{errors:b}}=Pl({defaultValues:e?{tourCode:e.tourCode,companyRef:e.companyRef,guideRef:e.guideRef,clientNationalityRef:e.clientNationalityRef,clientName:e.clientName,adults:e.adults,children:e.children,driverName:e.driverName,clientPhone:e.clientPhone,startDate:e.startDate,endDate:e.endDate,notes:e.notes}:{adults:1,children:0}}),{data:x=[]}=Xe({queryKey:["companies"],queryFn:()=>Z.listCompanies({status:"active"})}),{data:_=[]}=Xe({queryKey:["guides"],queryFn:()=>Z.listGuides({status:"active"})}),{data:k=[]}=Xe({queryKey:["nationalities"],queryFn:()=>Z.listNationalities({status:"active"})}),E=w("adults"),D=w("children"),$=(E||0)+(D||0),O=w("startDate"),Y=w("endDate"),T=w("tourCode"),M=w("clientName"),U=(()=>{if(!O||!Y)return 0;const P=new Date(O),H=new Date(Y),R=Math.abs(H.getTime()-P.getTime());return Math.ceil(R/(1e3*60*60*24))+1})(),A=f.useRef(!0);f.useEffect(()=>{if(A.current){A.current=!1;return}if(!e||!T||!M||!O||!Y||!u||!h||!p)return;const P=x.find(J=>J.id===u),H=_.find(J=>J.id===h),R=k.find(J=>J.id===p);if(!P||!H||!R)return;const L=setTimeout(()=>{const J={tourCode:T,clientName:M,startDate:O,endDate:Y,adults:E||0,children:D||0,driverName:w("driverName"),clientPhone:w("clientPhone"),companyRef:{id:P.id,nameAtBooking:P.name},guideRef:{id:H.id,nameAtBooking:H.name},clientNationalityRef:{id:R.id,nameAtBooking:R.name}};t(J)},500);return()=>clearTimeout(L)},[O,Y,E,D]);const F=P=>{var Q,G;const H=[];if((Q=P.tourCode)!=null&&Q.trim()||H.push("Tour Code"),(G=P.clientName)!=null&&G.trim()||H.push("Client Name"),P.startDate||H.push("Start Date"),P.endDate||H.push("End Date"),u||H.push("Company"),h||H.push("Guide"),p||H.push("Nationality"),H.length>0){z.error(`Please fill in all required fields: ${H.join(", ")}`);return}const R=x.find(q=>q.id===u),L=_.find(q=>q.id===h),J=k.find(q=>q.id===p);if(!R||!L||!J){z.error("Please select valid Company, Guide, and Nationality");return}t({...P,companyRef:{id:R.id,nameAtBooking:R.name},guideRef:{id:L.id,nameAtBooking:L.name},clientNationalityRef:{id:J.id,nameAtBooking:J.name}})},C=x.find(P=>P.id===u),j=_.find(P=>P.id===h),S=k.find(P=>P.id===p);return a.jsxs("form",{onSubmit:y(F),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"tourCode",children:"Tour Code *"}),a.jsx(_e,{id:"tourCode",...g("tourCode",{required:"Tour code is required"}),placeholder:"e.g., AT-250901",className:te(K0(!!b.tourCode))}),b.tourCode&&a.jsx("p",{className:"text-sm text-destructive",children:b.tourCode.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Company *"}),a.jsxs(ln,{open:r,onOpenChange:s,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox",className:te("w-full justify-between",K0(!u)),children:[C?C.name:"Select company...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search company..."}),a.jsx(xn,{children:"No company found."}),a.jsx(wn,{children:x.map(P=>a.jsxs(bn,{value:P.name,onSelect:()=>{d(P.id),s(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",u===P.id?"opacity-100":"opacity-0")}),P.name]},P.id))})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Guide *"}),a.jsxs(ln,{open:o,onOpenChange:i,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[j?j.name:"Select guide...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search guide..."}),a.jsx(xn,{children:"No guide found."}),a.jsx(wn,{children:_.map(P=>a.jsxs(bn,{value:P.name,onSelect:()=>{m(P.id),i(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",h===P.id?"opacity-100":"opacity-0")}),P.name]},P.id))})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"clientName",children:"Client Name *"}),a.jsx(_e,{id:"clientName",...g("clientName",{required:"Client name is required"}),placeholder:"e.g., Mrs. Matilde Lamura"}),b.clientName&&a.jsx("p",{className:"text-sm text-destructive",children:b.clientName.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Nationality *"}),a.jsxs(ln,{open:l,onOpenChange:c,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[S?a.jsxs("span",{children:[S.emoji," ",S.name]}):"Select nationality...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search nationality..."}),a.jsx(xn,{children:"No nationality found."}),a.jsx(wn,{children:k.map(P=>a.jsxs(bn,{value:P.name,onSelect:()=>{N(P.id),c(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",p===P.id?"opacity-100":"opacity-0")}),P.emoji," ",P.name]},P.id))})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"adults",children:"Adults *"}),a.jsx(iv,{id:"adults",value:w("adults"),onChange:P=>v("adults",P),min:0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"children",children:"Children"}),a.jsx(iv,{id:"children",value:w("children"),onChange:P=>v("children",P),min:0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Total Guests"}),a.jsx(_e,{value:$,disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{children:"Total Days"}),a.jsx(_e,{value:U>0?`${U} day${U!==1?"s":""}`:"",disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"driverName",children:"Driver Name"}),a.jsx(_e,{id:"driverName",...g("driverName"),placeholder:"e.g., Mr c"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"clientPhone",children:"Client Phone"}),a.jsx(_e,{id:"clientPhone",...g("clientPhone"),placeholder:"e.g., +39 348 470 4413"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"startDate",children:"Start Date *"}),a.jsx(to,{id:"startDate",value:w("startDate"),onChange:P=>v("startDate",P)}),b.startDate&&a.jsx("p",{className:"text-sm text-destructive",children:b.startDate.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"endDate",children:"End Date *"}),a.jsx(to,{id:"endDate",value:w("endDate"),onChange:P=>v("endDate",P)}),b.endDate&&a.jsx("p",{className:"text-sm text-destructive",children:b.endDate.message})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"notes",children:"Notes"}),a.jsx("textarea",{id:"notes",...g("notes"),placeholder:"Add any additional notes about this tour...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none"})]}),n&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(V,{type:"submit",className:"hover-scale",children:[a.jsx(ig,{className:"h-4 w-4 mr-2"}),"Save Tour Info"]})})]})}function c9({tourId:e,destinations:t,onChange:n}){var j;const[r,s]=f.useState(null),[o,i]=f.useState({name:"",price:0,date:""}),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,m]=f.useState(""),[p,N]=f.useState(0),[g,y]=f.useState(""),[w,v]=f.useState(!1),b=tn(),{data:x}=Xe({queryKey:["tour",e],queryFn:()=>e?Z.getTour(e):Promise.resolve(null),enabled:!!e});!e&&o.guests===void 0&&((x==null?void 0:x.totalGuests)||0)>0&&(o.guests=x.totalGuests);const{data:_=[]}=Xe({queryKey:["touristDestinations"],queryFn:()=>Z.listTouristDestinations({status:"active"})}),k=f.useMemo(()=>{const S=new Map;return(_||[]).forEach(P=>{var L;const H=(P.name||"").trim().toLowerCase();if(!H)return;const R=((L=P.provinceRef)==null?void 0:L.nameAtBooking)||"Unknown";S.has(H)||S.set(H,R)}),S},[_]),E=f.useMemo(()=>{const S=new Map;return t.forEach(P=>{const H=(P.name||"").trim().toLowerCase();H&&S.set(H,(S.get(H)||0)+1)}),new Set(Array.from(S.entries()).filter(([,P])=>P>1).map(([P])=>P))},[t]),D=xe({mutationFn:async S=>{e?await Z.addDestination(e,S):n==null||n([...t,S])},onSuccess:()=>{e&&(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})),z.success("Destination added"),i({name:"",price:0,date:(x==null?void 0:x.startDate)||""})}}),$=xe({mutationFn:async({index:S,destination:P})=>{if(e)await Z.updateDestination(e,S,P);else{const H=[...t];H[S]=P,n==null||n(H)}},onSuccess:()=>{e&&(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})),z.success("Destination updated"),s(null)}}),O=xe({mutationFn:S=>e?Z.removeDestination(e,S):Promise.resolve(),onSuccess:(S,P)=>{e?(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})):n==null||n(t.filter((H,R)=>R!==P)),z.success("Destination removed")}}),Y=S=>{s(S),i(t[S]),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c(!0)},100)},T=f.useMemo(()=>{const S=new Map;t.map((L,J)=>({...L,originalIndex:J})).forEach(L=>{const J=(L.name||"").trim().toLowerCase(),Q=k.get(J)||"Unknown",G=S.get(Q)||[];G.push(L),S.set(Q,G)});const H=Array.from(S.keys()).sort((L,J)=>L==="Unknown"?1:J==="Unknown"?-1:L.localeCompare(J)),R=[];return H.forEach(L=>{const J=(S.get(L)||[]).slice().sort((Q,G)=>{const q=Q.date?new Date(Q.date).getTime():1/0,ee=G.date?new Date(G.date).getTime():1/0;return q-ee});R.push(a.jsx(nt,{className:"bg-muted/50",children:a.jsxs(oe,{colSpan:7,className:"font-semibold",children:["Province: ",L," (",J.length,")"]})},`group-${L}`)),J.forEach((Q,G)=>{const q=(x==null?void 0:x.totalGuests)||0,ee=typeof Q.guests=="number"?Q.guests:0,ae=Q.price*ee,me=(Q.name||"").trim().toLowerCase(),Pe=me&&E.has(me),W=(Q.price??0)===0;R.push(a.jsxs(nt,{className:`animate-fade-in ${Pe||W?"bg-red-50 dark:bg-red-950":""}`,children:[a.jsx(oe,{className:"font-medium",children:G+1}),a.jsxs(oe,{className:"font-medium",children:[Q.name,Pe&&a.jsx("span",{className:"ml-2 text-destructive",title:"Duplicate destination name",children:""})]}),a.jsxs(oe,{className:Q.price===0?"text-destructive font-semibold":"",children:[ke(Q.price),Q.price===0&&a.jsx("span",{className:"ml-2 text-destructive",title:"Price is zero",children:""})]}),a.jsx(oe,{children:a.jsx(_e,{type:"number",className:"w-16 sm:w-24",min:0,max:q,value:Q.guests??"",onChange:pe=>{let je=pe.target.value===""?void 0:Number(pe.target.value);typeof je=="number"&&!Number.isNaN(je)&&(je<0&&(je=0),q&&je>q&&(z.warning(`Guests cannot exceed total tour guests (${q}).`),je=q));const $e={...Q,guests:je};if(e)$.mutate({index:Q.originalIndex,destination:$e});else{const Ke=[...t];Ke[Q.originalIndex]=$e,n==null||n(Ke)}}})}),a.jsx(oe,{className:"font-semibold",children:ke(ae)}),a.jsx(oe,{children:An(Q.date)}),a.jsxs(oe,{className:"text-right",children:[a.jsx("div",{className:"sm:hidden",children:a.jsxs(jf,{children:[a.jsx(Nf,{asChild:!0,children:a.jsxs(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx("span",{className:"sr-only",children:"Open menu"}),a.jsx(ly,{className:"h-4 w-4"})]})}),a.jsxs(Eu,{align:"end",children:[a.jsxs(As,{onClick:()=>Y(Q.originalIndex),children:[a.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Edit"]}),a.jsxs(As,{onClick:()=>O.mutate(Q.originalIndex),className:"text-destructive",children:[a.jsx(ot,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}),a.jsxs("div",{className:"hidden sm:flex sm:gap-2 sm:justify-end",children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Y(Q.originalIndex),className:"hover-scale",title:"Edit",children:a.jsx(Ja,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O.mutate(Q.originalIndex),className:"hover-scale text-destructive hover:text-destructive",title:"Delete",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})]},`${L}-${Q.originalIndex}-${Q.date}`))})}),R},[t,k,x==null?void 0:x.totalGuests,E,e,$,n]),{data:M=[]}=Xe({queryKey:["provinces"],queryFn:()=>Z.listProvinces({status:"active"})}),U=xe({mutationFn:({name:S,price:P,provinceId:H})=>{const R=M.find(L=>L.id===H);if(!R)throw new Error("Province not found");return Z.createTouristDestination({name:S,price:P,provinceRef:{id:H,nameAtBooking:R.name}})},onSuccess:S=>{b.invalidateQueries({queryKey:["touristDestinations"]}),z.success("Tourist destination created"),d(!1),m(""),N(0),y(""),i({...o,name:S.name,price:S.price})},onError:S=>{z.error(`Failed to create destination: ${S.message}`)}}),A=S=>{if(S.preventDefault(),!o.name||!o.date){z.error("Please fill in all required fields");return}if(r!==null){const P=o.name.trim().toLowerCase();if(t.some((R,L)=>L!==r&&R.name.trim().toLowerCase()===P)){z.error("Destination name must be unique");return}$.mutate({index:r,destination:o})}else{const P=o.name.trim().toLowerCase();if(t.some(R=>R.name.trim().toLowerCase()===P)){z.error("A destination with this name already exists");return}D.mutate(o)}},F=()=>{s(null),i({name:"",price:0,date:(x==null?void 0:x.startDate)||""})},C=()=>{if(!h.trim()){z.error("Please enter a destination name");return}if(p<=0){z.error("Please enter a valid price");return}if(!g){z.error("Please select a province");return}U.mutate({name:h.trim(),price:p,provinceId:g})};return f.useEffect(()=>{!o.date&&(x!=null&&x.startDate)&&i(S=>({...S,date:x.startDate}))},[x==null?void 0:x.startDate]),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:r!==null?"Edit Destination":"Add Destination"}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ln,{open:l,onOpenChange:c,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":l,className:"flex-1 justify-between",children:[o.name||"Select destination...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search destination..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No destination found."}),a.jsx(wn,{children:_.map(S=>a.jsxs(bn,{value:S.name,onSelect:()=>{const P=new Date().toISOString().split("T")[0],H=(x==null?void 0:x.startDate)||P;i({...o,name:S.name,price:S.price,date:o.date||H,guests:o.guests??((x==null?void 0:x.totalGuests)||void 0)}),c(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",o.name===S.name?"opacity-100":"opacity-0")}),S.name," (",ke(S.price),")"]},S.id))})]})]})})]}),a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:()=>d(!0),title:"Add new destination",children:a.jsx(It,{className:"h-4 w-4"})})]}),a.jsx(Gt,{placeholder:"Price (VND)",value:o.price,onChange:S=>i({...o,price:S})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(to,{value:o.date,onChange:S=>i({...o,date:S}),required:!0}),a.jsx(_e,{type:"number",min:0,max:(x==null?void 0:x.totalGuests)||0,placeholder:"Guests",className:"w-20",value:o.guests??"",onChange:S=>{const P=(x==null?void 0:x.totalGuests)||0;let H=S.target.value===""?void 0:Number(S.target.value);typeof H=="number"&&!Number.isNaN(H)&&(H<0&&(H=0),P&&H>P&&(z.warning(`Guests cannot exceed total tour guests (${P}).`),H=P)),i({...o,guests:H})}})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(V,{type:"submit",className:"hover-scale",children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),r!==null?"Update":"Add"]}),r!==null&&a.jsx(V,{type:"button",variant:"outline",onClick:F,children:"Cancel"})]})]})]}),a.jsxs("div",{className:"rounded-lg border",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:a.jsx("h3",{className:"font-semibold",children:"Destinations List"})}),t.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No destinations added yet"}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{className:"w-[50px]",children:"#"}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Dest"}),a.jsx("span",{className:"hidden sm:inline",children:"Destination"})]}),a.jsx(se,{children:"Price"}),a.jsxs(se,{className:"w-[80px]",children:[a.jsx("span",{className:"sm:hidden",children:"Guests"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Guests"})]}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Total"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Amount"})]}),a.jsx(se,{children:"Date"}),a.jsxs(se,{className:"text-right w-[50px]",children:[a.jsx("span",{className:"sm:hidden",children:"..."}),a.jsx("span",{className:"hidden sm:inline",children:"Actions"})]})]})}),a.jsx(lr,{children:T})]}),a.jsx("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg flex justify-end",children:a.jsxs("div",{className:"text-lg font-semibold",children:["Total: ",ke(t.reduce((S,P)=>{const H=typeof P.guests=="number"?P.guests:0;return S+P.price*H},0))]})})]})]}),a.jsx(Yn,{open:u,onOpenChange:d,children:a.jsxs(Dn,{children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:"Add New Tourist Destination"}),a.jsx(Is,{children:"Create a new tourist destination that can be reused across tours."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"new-destination-name",children:"Destination Name"}),a.jsx(_e,{id:"new-destination-name",placeholder:"e.g., Ha Long Bay, Hoi An",value:h,onChange:S=>m(S.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"destination-province",children:"Province"}),a.jsxs(ln,{open:w,onOpenChange:v,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{id:"destination-province",variant:"outline",role:"combobox","aria-expanded":w,className:"justify-between w-full",children:[g?(j=M.find(S=>S.id===g))==null?void 0:j.name:"Select province...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search province..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No province found."}),a.jsx(wn,{children:M.map(S=>a.jsxs(bn,{value:S.name,onSelect:()=>{y(S.id),v(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",g===S.id?"opacity-100":"opacity-0")}),S.name]},S.id))})]})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"new-destination-price",children:"Default Price (VND)"}),a.jsx(Gt,{id:"new-destination-price",placeholder:"Default price",value:p,onChange:N})]})]}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>{d(!1),m(""),N(0),y("")},children:"Cancel"}),a.jsx(V,{type:"button",onClick:C,disabled:U.isPending,children:U.isPending?"Creating...":"Create"})]})]})})]})}function u9({tourId:e,expenses:t,onChange:n}){var F;const[r,s]=f.useState(null),[o,i]=f.useState({name:"",price:0,date:""}),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,m]=f.useState(""),[p,N]=f.useState(0),[g,y]=f.useState(""),[w,v]=f.useState(!1);f.useState(null);const b=tn(),{data:x}=Xe({queryKey:["tour",e],queryFn:()=>e?Z.getTour(e):Promise.resolve(null),enabled:!!e}),{data:_=[]}=Xe({queryKey:["detailedExpenses"],queryFn:()=>Z.listDetailedExpenses({status:"active"})}),{data:k=[]}=Xe({queryKey:["expenseCategories"],queryFn:()=>Z.listExpenseCategories({status:"active"})}),E=xe({mutationFn:async C=>{e?await Z.addExpense(e,C):n==null||n([...t,C])},onSuccess:()=>{e&&(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})),z.success("Expense added"),i({name:"",price:0,date:(x==null?void 0:x.startDate)||""})}}),D=xe({mutationFn:async({index:C,expense:j})=>{if(e)console.log("Updating expense with guests:",j.guests),await Z.updateExpense(e,C,j);else{const S=[...t];S[C]=j,n==null||n(S)}},onSuccess:(C,{expense:j})=>{e&&(console.log("Expense updated successfully, guests:",j.guests),b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})),z.success("Expense updated"),s(null)}}),$=xe({mutationFn:C=>e?Z.removeExpense(e,C):Promise.resolve(),onSuccess:(C,j)=>{e?(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})):n==null||n(t.filter((S,P)=>P!==j)),z.success("Expense removed")}}),O=xe({mutationFn:({name:C,price:j,categoryId:S})=>{const P=k.find(H=>H.id===S);if(!P)throw new Error("Category not found");return Z.createDetailedExpense({name:C,price:j,categoryRef:{id:S,nameAtBooking:P.name}})},onSuccess:C=>{b.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("Detailed expense created"),d(!1),m(""),N(0),y(""),i({...o,name:C.name,price:C.price})},onError:C=>{z.error(`Failed to create expense: ${C.message}`)}}),Y=C=>{if(C.preventDefault(),!o.name||!o.date){z.error("Please fill in all required fields");return}r!==null?D.mutate({index:r,expense:o}):E.mutate(o)},T=C=>{s(C),i(t[C]),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c(!0)},100)},M=()=>{s(null),i({name:"",price:0,date:(x==null?void 0:x.startDate)||""})},U=C=>{const j=t[C];E.mutate(j)},A=()=>{if(!h.trim()){z.error("Please enter an expense name");return}if(p<=0){z.error("Please enter a valid price");return}if(!g){z.error("Please select a category");return}O.mutate({name:h.trim(),price:p,categoryId:g})};return r===null&&o.guests===void 0&&((x==null?void 0:x.totalGuests)||0)>0&&(o.guests=x.totalGuests),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:r!==null?"Edit Expense":"Add Expense"}),a.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ln,{open:l,onOpenChange:c,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":l,className:"justify-between flex-1",children:[o.name||"Select expense...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search expense..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No expense found."}),a.jsx(wn,{children:_.map(C=>a.jsxs(bn,{value:C.name,onSelect:()=>{const j=new Date().toISOString().split("T")[0];i({...o,name:C.name,price:C.price,date:o.date||j}),c(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",o.name===C.name?"opacity-100":"opacity-0")}),C.name," (",ke(C.price),")"]},C.id))})]})]})})]}),a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:()=>d(!0),title:"Add new expense type",children:a.jsx(It,{className:"h-4 w-4"})})]}),a.jsx(Gt,{placeholder:"Price (VND)",value:o.price,onChange:C=>i({...o,price:C})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(to,{value:o.date,onChange:C=>i({...o,date:C}),required:!0}),a.jsx(_e,{type:"number",min:0,max:(x==null?void 0:x.totalGuests)||0,placeholder:"Guests",className:"w-20",value:o.guests??"",onChange:C=>{const j=(x==null?void 0:x.totalGuests)||0;let S=C.target.value===""?void 0:Number(C.target.value);typeof S=="number"&&!Number.isNaN(S)&&(S<0&&(S=0),j&&S>j&&(z.warning(`Guests cannot exceed total tour guests (${j}).`),S=j)),i({...o,guests:S})}})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(V,{type:"submit",className:"hover-scale",children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),r!==null?"Update":"Add"]}),r!==null&&a.jsx(V,{type:"button",variant:"outline",onClick:M,children:"Cancel"})]})]})]}),a.jsxs("div",{className:"rounded-lg border",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:a.jsx("h3",{className:"font-semibold",children:"Expenses List"})}),t.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No expenses added yet"}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{className:"w-[50px]",children:"#"}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Exp"}),a.jsx("span",{className:"hidden sm:inline",children:"Expense"})]}),a.jsx(se,{children:"Price"}),a.jsxs(se,{className:"w-[80px]",children:[a.jsx("span",{className:"sm:hidden",children:"Guests"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Guests"})]}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Total"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Amount"})]}),a.jsx(se,{children:"Date"}),a.jsxs(se,{className:"text-right w-[50px]",children:[a.jsx("span",{className:"sm:hidden",children:"..."}),a.jsx("span",{className:"hidden sm:inline",children:"Actions"})]})]})}),a.jsx(lr,{children:(()=>{const C=["Nc ung cho khch 15k/1 khch / 1 ngy","Nc ung cho khch 10k/1 khch / 1 ngy"],j=t.map((L,J)=>({...L,originalIndex:J})),S=C.map(L=>({name:L,rows:j.filter(J=>(J.name||"")===L)})),P=j.filter(L=>!C.includes(L.name||"")),H=[];for(const L of S)if(L.rows.length>0){const J=L.rows.reduce((q,ee)=>q+(typeof ee.guests=="number"?ee.guests:0),0),Q=L.rows[0].price||0,G=L.rows.reduce((q,ee)=>ee.date?q?ee.date<q?ee.date:q:ee.date:q,void 0);H.push({name:L.name,price:Q,guests:J,date:G,originalIndex:L.rows[0].originalIndex,originalIndices:L.rows.map(q=>q.originalIndex),merged:!0})}return[...P,...H].sort((L,J)=>{const Q=L.date?new Date(L.date).getTime():1/0,G=J.date?new Date(J.date).getTime():1/0;return Q-G}).map((L,J)=>{const Q=(x==null?void 0:x.totalGuests)||0,G=typeof L.guests=="number"?L.guests:0,q=L.price*G,ee=(L.price??0)===0;return a.jsxs(nt,{className:`animate-fade-in ${ee?"bg-red-50 dark:bg-red-950":""}`,children:[a.jsx(oe,{className:"font-medium",children:J+1}),a.jsx(oe,{className:"font-medium",children:L.name}),a.jsxs(oe,{className:L.price===0?"text-destructive font-semibold":"",children:[ke(L.price),L.price===0&&a.jsx("span",{className:"ml-2 text-destructive",title:"Price is zero",children:""})]}),a.jsx(oe,{children:a.jsx(_e,{type:"number",className:"w-16 sm:w-24 h-8",min:0,max:Q,value:L.guests??"",disabled:!!L.merged,title:L.merged?"Merged row":"Edit guests",onChange:ae=>{if(L.merged)return;let me=ae.target.value===""?void 0:Number(ae.target.value);typeof me=="number"&&!Number.isNaN(me)&&(me<0&&(me=0),Q&&me>Q&&(z.warning(`Guests cannot exceed total tour guests (${Q}).`),me=Q));const Pe={...L,guests:me},{originalIndex:W,...pe}=Pe;D.mutate({index:L.originalIndex,expense:pe})}})}),a.jsx(oe,{className:"font-semibold",children:ke(q)}),a.jsx(oe,{children:An(L.date)}),a.jsxs(oe,{className:"text-right",children:[a.jsx("div",{className:"sm:hidden",children:a.jsxs(jf,{children:[a.jsx(Nf,{asChild:!0,children:a.jsxs(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx("span",{className:"sr-only",children:"Open menu"}),a.jsx(ly,{className:"h-4 w-4"})]})}),a.jsxs(Eu,{align:"end",children:[a.jsxs(As,{onClick:()=>T(L.originalIndex),children:[a.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Edit"]}),a.jsxs(As,{onClick:()=>U(L.originalIndex),children:[a.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),a.jsxs(As,{onClick:()=>$.mutate(L.originalIndex),className:"text-destructive",children:[a.jsx(ot,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}),a.jsxs("div",{className:"hidden sm:flex sm:gap-2 sm:justify-end",children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>T(L.originalIndex),className:"hover-scale",title:"Edit",children:a.jsx(Ja,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>U(L.originalIndex),className:"hover-scale",title:"Duplicate",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>$.mutate(L.originalIndex),className:"hover-scale text-destructive hover:text-destructive",title:"Delete",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})]},`${L.originalIndex}-${L.date}-${L.merged?"merged":"row"}`)})})()})]}),a.jsx("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg flex justify-end",children:a.jsxs("div",{className:"text-lg font-semibold",children:["Total: ",ke(t.reduce((C,j)=>{const S=typeof j.guests=="number"?j.guests:0;return C+j.price*S},0))]})})]})]}),a.jsx(Yn,{open:u,onOpenChange:d,children:a.jsxs(Dn,{children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:"Add New Detailed Expense"}),a.jsx(Is,{children:"Create a new detailed expense that can be reused across tours."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"expense-name",children:"Expense Name"}),a.jsx(_e,{id:"expense-name",placeholder:"e.g., Hotel, Transport, Food",value:h,onChange:C=>m(C.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"expense-category",children:"Expense Category"}),a.jsxs(ln,{open:w,onOpenChange:v,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{id:"expense-category",variant:"outline",role:"combobox","aria-expanded":w,className:"justify-between w-full",children:[g?(F=k.find(C=>C.id===g))==null?void 0:F.name:"Select category...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search category..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No category found."}),a.jsx(wn,{children:k.map(C=>a.jsxs(bn,{value:C.name,onSelect:()=>{y(C.id),v(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",g===C.id?"opacity-100":"opacity-0")}),C.name]},C.id))})]})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"expense-price",children:"Default Price (VND)"}),a.jsx(Gt,{id:"expense-price",placeholder:"Default price",value:p,onChange:C=>N(C)})]})]}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>{d(!1),m(""),N(0),y("")},children:"Cancel"}),a.jsx(V,{type:"button",onClick:A,disabled:O.isPending,children:O.isPending?"Creating...":"Create"})]})]})})]})}function d9({tourId:e,meals:t,onChange:n}){var F;const[r,s]=f.useState(null),[o,i]=f.useState({name:"",price:0,date:""}),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,m]=f.useState(""),[p,N]=f.useState(0),[g,y]=f.useState(""),[w,v]=f.useState(!1),b=tn(),{data:x}=Xe({queryKey:["tour",e],queryFn:()=>e?Z.getTour(e):Promise.resolve(null),enabled:!!e});!e&&o.guests===void 0&&((x==null?void 0:x.totalGuests)||0)>0&&(o.guests=x.totalGuests);const{data:_=[]}=Xe({queryKey:["detailedExpenses"],queryFn:()=>Z.listDetailedExpenses({status:"active"})}),{data:k=[]}=Xe({queryKey:["expenseCategories"],queryFn:()=>Z.listExpenseCategories({status:"active"})}),E=xe({mutationFn:async C=>{e?await Z.addMeal(e,C):n==null||n([...t,C])},onSuccess:()=>{e&&(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})),z.success("Meal added"),i({name:"",price:0,date:(x==null?void 0:x.startDate)||""})}}),D=xe({mutationFn:async({index:C,meal:j})=>{if(e)await Z.updateMeal(e,C,j);else{const S=[...t];S[C]=j,n==null||n(S)}},onSuccess:()=>{e&&(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})),z.success("Meal updated"),s(null)}}),$=xe({mutationFn:C=>e?Z.removeMeal(e,C):Promise.resolve(),onSuccess:(C,j)=>{e?(b.invalidateQueries({queryKey:["tour",e]}),b.invalidateQueries({queryKey:["tours"]})):n==null||n(t.filter((S,P)=>P!==j)),z.success("Meal removed")}}),O=xe({mutationFn:({name:C,price:j,categoryId:S})=>{const P=k.find(H=>H.id===S);if(!P)throw new Error("Category not found");return Z.createDetailedExpense({name:C,price:j,categoryRef:{id:S,nameAtBooking:P.name}})},onSuccess:C=>{b.invalidateQueries({queryKey:["detailedExpenses"]}),z.success("Detailed meal created"),d(!1),m(""),N(0),y(""),i({...o,name:C.name,price:C.price})},onError:C=>{z.error(`Failed to create meal: ${C.message}`)}}),Y=C=>{if(C.preventDefault(),!o.name||!o.date){z.error("Please fill in all required fields");return}r!==null?D.mutate({index:r,meal:o}):E.mutate(o)},T=C=>{s(C),i(t[C]),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c(!0)},100)},M=()=>{s(null),i({name:"",price:0,date:(x==null?void 0:x.startDate)||""})},U=C=>{const j=t[C];E.mutate(j)},A=()=>{if(!h.trim()){z.error("Please enter a meal name");return}if(p<=0){z.error("Please enter a valid price");return}if(!g){z.error("Please select a category");return}O.mutate({name:h.trim(),price:p,categoryId:g})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:r!==null?"Edit Meal":"Add Meal"}),a.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ln,{open:l,onOpenChange:c,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":l,className:"flex-1 justify-between",children:[o.name||"Select meal...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search meal..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No meal found."}),a.jsx(wn,{children:_.map(C=>a.jsxs(bn,{value:C.name,onSelect:()=>{const j=new Date().toISOString().split("T")[0];i({...o,name:C.name,price:C.price,date:o.date||j}),c(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",o.name===C.name?"opacity-100":"opacity-0")}),C.name," (",ke(C.price),")"]},C.id))})]})]})})]}),a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:()=>d(!0),title:"Add new meal",children:a.jsx(It,{className:"h-4 w-4"})})]}),a.jsx(Gt,{placeholder:"Price (VND)",value:o.price,onChange:C=>i({...o,price:C})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(to,{value:o.date,onChange:C=>i({...o,date:C}),required:!0}),a.jsx(_e,{type:"number",min:0,max:(x==null?void 0:x.totalGuests)||0,placeholder:"Guests",className:"w-20",value:o.guests??"",onChange:C=>{const j=(x==null?void 0:x.totalGuests)||0;let S=C.target.value===""?void 0:Number(C.target.value);typeof S=="number"&&!Number.isNaN(S)&&(S<0&&(S=0),j&&S>j&&(z.warning(`Guests cannot exceed total tour guests (${j}).`),S=j)),i({...o,guests:S})}})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(V,{type:"submit",className:"hover-scale",children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),r!==null?"Update":"Add"]}),r!==null&&a.jsx(V,{type:"button",variant:"outline",onClick:M,children:"Cancel"})]})]})]}),a.jsxs("div",{className:"rounded-lg border",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:a.jsx("h3",{className:"font-semibold",children:"Meals List"})}),t.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No meals added yet"}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{className:"w-[50px]",children:"#"}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Meal"}),a.jsx("span",{className:"hidden sm:inline",children:"Meal"})]}),a.jsx(se,{children:"Price"}),a.jsxs(se,{className:"w-[80px]",children:[a.jsx("span",{className:"sm:hidden",children:"Guests"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Guests"})]}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Total"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Amount"})]}),a.jsx(se,{children:"Date"}),a.jsxs(se,{className:"text-right w-[50px]",children:[a.jsx("span",{className:"sm:hidden",children:"..."}),a.jsx("span",{className:"hidden sm:inline",children:"Actions"})]})]})}),a.jsx(lr,{children:t.map((C,j)=>({...C,originalIndex:j})).sort((C,j)=>{const S=C.date?new Date(C.date).getTime():1/0,P=j.date?new Date(j.date).getTime():1/0;return S-P}).map((C,j)=>{const S=(x==null?void 0:x.totalGuests)||0,P=typeof C.guests=="number"?C.guests:0,H=C.price*P,R=(C.price??0)===0;return a.jsxs(nt,{className:`animate-fade-in ${R?"bg-red-50 dark:bg-red-950":""}`,children:[a.jsx(oe,{className:"font-medium",children:j+1}),a.jsx(oe,{className:"font-medium",children:C.name}),a.jsxs(oe,{className:C.price===0?"text-destructive font-semibold":"",children:[ke(C.price),C.price===0&&a.jsx("span",{className:"ml-2 text-destructive",title:"Price is zero",children:""})]}),a.jsx(oe,{children:a.jsx(_e,{type:"number",className:"w-16 sm:w-24",min:0,max:S,value:C.guests??"",onChange:L=>{let J=L.target.value===""?void 0:Number(L.target.value);typeof J=="number"&&!Number.isNaN(J)&&(J<0&&(J=0),S&&J>S&&(z.warning(`Guests cannot exceed total tour guests (${S}).`),J=S));const Q={...C,guests:J};if(e)D.mutate({index:C.originalIndex,meal:Q});else{const G=[...t];G[C.originalIndex]=Q,n==null||n(G)}}})}),a.jsx(oe,{className:"font-semibold",children:ke(H)}),a.jsx(oe,{children:An(C.date)}),a.jsxs(oe,{className:"text-right",children:[a.jsx("div",{className:"sm:hidden",children:a.jsxs(jf,{children:[a.jsx(Nf,{asChild:!0,children:a.jsxs(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx("span",{className:"sr-only",children:"Open menu"}),a.jsx(ly,{className:"h-4 w-4"})]})}),a.jsxs(Eu,{align:"end",children:[a.jsxs(As,{onClick:()=>T(C.originalIndex),children:[a.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Edit"]}),a.jsxs(As,{onClick:()=>U(C.originalIndex),children:[a.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),a.jsxs(As,{onClick:()=>$.mutate(C.originalIndex),className:"text-destructive",children:[a.jsx(ot,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}),a.jsxs("div",{className:"hidden sm:flex sm:gap-2 sm:justify-end",children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>T(C.originalIndex),className:"hover-scale",title:"Edit",children:a.jsx(Ja,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>U(C.originalIndex),className:"hover-scale",title:"Duplicate",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>$.mutate(C.originalIndex),className:"hover-scale text-destructive hover:text-destructive",title:"Delete",children:a.jsx(ot,{className:"h-4 w-4"})})]})]})]},`${C.originalIndex}-${C.date}`)})})]}),a.jsx("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg flex justify-end",children:a.jsxs("div",{className:"text-lg font-semibold",children:["Total: ",ke(t.reduce((C,j)=>{const S=typeof j.guests=="number"?j.guests:0;return C+j.price*S},0))]})})]})]}),a.jsx(Yn,{open:u,onOpenChange:d,children:a.jsxs(Dn,{children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:"Add New Detailed Meal"}),a.jsx(Is,{children:"Create a new detailed meal that can be reused across tours."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"new-meal-name",children:"Meal Name"}),a.jsx(_e,{id:"new-meal-name",placeholder:"e.g., Breakfast, Lunch, Dinner",value:h,onChange:C=>m(C.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"meal-category",children:"Expense Category"}),a.jsxs(ln,{open:w,onOpenChange:v,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{id:"meal-category",variant:"outline",role:"combobox","aria-expanded":w,className:"justify-between w-full",children:[g?(F=k.find(C=>C.id===g))==null?void 0:F.name:"Select category...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-full p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search category..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No category found."}),a.jsx(wn,{children:k.map(C=>a.jsxs(bn,{value:C.name,onSelect:()=>{y(C.id),v(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",g===C.id?"opacity-100":"opacity-0")}),C.name]},C.id))})]})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"new-meal-price",children:"Default Price (VND)"}),a.jsx(Gt,{id:"new-meal-price",placeholder:"Default price",value:p,onChange:N})]})]}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>{d(!1),m(""),N(0),y("")},children:"Cancel"}),a.jsx(V,{type:"button",onClick:A,disabled:O.isPending,children:O.isPending?"Creating...":"Create"})]})]})})]})}const h9="0829101188";function f9({tourId:e,shoppings:t,onChange:n}){const[r,s]=f.useState(()=>sessionStorage.getItem("shopping.unlocked")==="true"),[o,i]=f.useState(""),[l,c]=f.useState(!1),[u,d]=f.useState(null),[h,m]=f.useState(!1),[p,N]=f.useState(!1),[g,y]=f.useState(""),w=tn(),{data:v}=Xe({queryKey:["tour",e],queryFn:()=>e?Z.getTour(e):Promise.resolve(null),enabled:!!e}),[b,x]=f.useState(()=>({name:"",price:0,date:(v==null?void 0:v.startDate)||""})),{data:_=[]}=Xe({queryKey:["shoppings"],queryFn:()=>Z.listShoppings({status:"active"})});f.useEffect(()=>{v!=null&&v.startDate&&!b.date&&x(j=>({...j,date:v.startDate}))},[v==null?void 0:v.startDate]);const k=xe({mutationFn:async j=>{e?await Z.addTourShopping(e,j):n==null||n([...t,j])},onSuccess:()=>{e&&w.invalidateQueries({queryKey:["tour",e]}),z.success("Shopping added"),x({name:"",price:0,date:(v==null?void 0:v.startDate)||""})}}),E=xe({mutationFn:async({index:j,shopping:S})=>{if(e)await Z.updateTourShopping(e,j,S);else{const P=[...t];P[j]=S,n==null||n(P)}},onSuccess:()=>{e&&w.invalidateQueries({queryKey:["tour",e]}),z.success("Shopping updated"),d(null)}}),D=xe({mutationFn:j=>e?Z.removeTourShopping(e,j):Promise.resolve(),onSuccess:(j,S)=>{e?w.invalidateQueries({queryKey:["tour",e]}):n==null||n(t.filter((P,H)=>H!==S)),z.success("Shopping removed")}}),$=xe({mutationFn:j=>Z.createShopping({name:j}),onSuccess:j=>{w.invalidateQueries({queryKey:["shoppings"]}),z.success("Shopping item created"),N(!1),y(""),x({...b,name:j.name})},onError:j=>{z.error(`Failed to create shopping: ${j.message}`)}}),O=j=>{if(j.preventDefault(),!b.name||!b.date){z.error("Please fill in all required fields");return}u!==null?E.mutate({index:u,shopping:b}):k.mutate(b)},Y=j=>{d(j),x(t[j]),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{m(!0)},100)},T=j=>{confirm("Are you sure you want to delete this shopping item?")&&D.mutate(j)},M=()=>{d(null),x({name:"",price:0,date:(v==null?void 0:v.startDate)||""})},U=()=>{if(!g.trim()){z.error("Please enter a shopping name");return}$.mutate(g.trim())};v&&v.totalGuests;const A=t.reduce((j,S)=>j+S.price,0),F=t.filter(j=>j.name==="TIP").reduce((j,S)=>j+S.price,0),C=j=>{j.preventDefault(),o===h9?(s(!0),sessionStorage.setItem("shopping.unlocked","true"),c(!1),i("")):(c(!0),i(""))};return r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("form",{onSubmit:O,className:"rounded-lg border bg-card p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4",children:u!==null?"Edit Shopping":"Add Shopping"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Shopping Item *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ln,{open:h,onOpenChange:m,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox",className:"flex-1 justify-between",children:[b.name||"Select shopping...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search shopping..."}),a.jsx(xn,{children:"No shopping found."}),a.jsx($r,{children:a.jsx(wn,{children:_.map(j=>a.jsxs(bn,{value:j.name,onSelect:()=>{x({...b,name:j.name}),m(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",b.name===j.name?"opacity-100":"opacity-0")}),j.name]},j.id))})})]})})]}),a.jsx(V,{type:"button",variant:"outline",size:"icon",onClick:()=>N(!0),title:"Add new shopping item",children:a.jsx(It,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Price *"}),a.jsx(Gt,{value:b.price,onChange:j=>x({...b,price:j})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date *"}),a.jsx(to,{value:b.date,onChange:j=>x({...b,date:j})})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx(V,{type:"submit",children:u!==null?a.jsxs(a.Fragment,{children:[a.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Update"]}):a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Add"]})}),u!==null&&a.jsx(V,{type:"button",variant:"outline",onClick:M,children:"Cancel"})]})]}),a.jsxs("div",{className:"rounded-lg border",children:[a.jsxs(or,{className:"min-w-[520px] sm:min-w-0",children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Item"}),a.jsx("span",{className:"hidden sm:inline",children:"Shopping Item"})]}),a.jsx(se,{children:"Price"}),a.jsx(se,{children:"Date"}),a.jsxs(se,{className:"w-[80px] sm:w-[100px]",children:[a.jsx("span",{className:"sm:hidden",children:"Act"}),a.jsx("span",{className:"hidden sm:inline",children:"Actions"})]})]})}),a.jsx(lr,{children:t.length===0?a.jsx(nt,{children:a.jsx(oe,{colSpan:4,className:"text-center text-muted-foreground",children:"No shopping items added yet"})}):t.map((j,S)=>a.jsxs(nt,{className:`${(j.price??0)===0?"bg-red-50 dark:bg-red-950":""}`,children:[a.jsx(oe,{className:"font-medium",children:j.name}),a.jsxs(oe,{className:j.price===0?"text-destructive font-semibold":"",children:[ke(j.price),j.price===0&&a.jsx("span",{className:"ml-2 text-destructive",title:"Price is zero",children:""})]}),a.jsx(oe,{children:An(j.date)}),a.jsx(oe,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Y(S),children:a.jsx(Ja,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"icon",onClick:()=>T(S),children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},S))})]}),t.length>0&&a.jsxs("div",{className:"border-t p-4 bg-muted/50 space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{children:"Total Shopping Amount:"}),a.jsx("span",{className:"text-lg",children:ke(A)})]}),a.jsxs("div",{className:"flex justify-between items-center font-semibold text-primary",children:[a.jsx("span",{children:"Total Tip:"}),a.jsx("span",{className:"text-lg",children:ke(F)})]})]})]}),a.jsx(Yn,{open:p,onOpenChange:N,children:a.jsxs(Dn,{children:[a.jsxs(Rn,{children:[a.jsx(Mn,{children:"Add New Shopping Item"}),a.jsx(Is,{children:"Create a new shopping item to add to the master shopping list."})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"new-shopping-name",children:"Shopping Name *"}),a.jsx(_e,{id:"new-shopping-name",placeholder:"e.g., TIP, Souvenir Shop",value:g,onChange:j=>y(j.target.value),onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),U())}})]})}),a.jsxs(co,{children:[a.jsx(V,{type:"button",variant:"outline",onClick:()=>{N(!1),y("")},children:"Cancel"}),a.jsx(V,{type:"button",onClick:U,disabled:$.isPending,children:$.isPending?"Creating...":"Create"})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs(mt,{className:"w-full max-w-md",children:[a.jsx(zt,{children:a.jsxs(Wt,{className:"flex items-center gap-2",children:[a.jsx(cy,{className:"h-5 w-5"}),"Shopping Tab Access"]})}),a.jsx(Ft,{children:a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"pin",className:"text-sm font-medium",children:"Enter PIN (hint: your phone number)"}),a.jsx(_e,{id:"pin",type:"password",inputMode:"numeric",pattern:"[0-9]*",value:o,onChange:j=>{i(j.target.value),c(!1)},placeholder:"Enter PIN",className:l?"border-red-500":"",autoFocus:!0}),l&&a.jsx("p",{className:"text-sm text-red-500",children:"Incorrect PIN. Please try again."})]}),a.jsx(V,{type:"submit",className:"w-full",children:"Unlock Shopping Tab"})]})})]})})}function m9({tourId:e,allowances:t,onChange:n}){const[r,s]=f.useState(null),[o,i]=f.useState({date:"",name:"",price:0,quantity:1});f.useState(!1);const[l,c]=f.useState(!1),u=tn();Xe({queryKey:["provinces"],queryFn:()=>Z.listProvinces({status:"active"})});const{data:d=[]}=Xe({queryKey:["detailedExpenses"],queryFn:()=>Z.listDetailedExpenses({status:"active"})}),h=d.filter(x=>{var _;return((_=x.categoryRef)==null?void 0:_.nameAtBooking)==="CTP"}),m=xe({mutationFn:async x=>{e?await Z.addAllowance(e,x):n==null||n([...t,x])},onSuccess:()=>{e&&(u.invalidateQueries({queryKey:["tour",e]}),u.invalidateQueries({queryKey:["tours"]})),z.success("Allowance added"),i({date:(v==null?void 0:v.startDate)||"",name:"",price:0,quantity:1})},onError:x=>{console.error("Error adding allowance:",x),z.error("Failed to add allowance: "+(x instanceof Error?x.message:"Unknown error"))}}),p=xe({mutationFn:async({index:x,allowance:_})=>{if(e)await Z.updateAllowance(e,x,_);else{const k=[...t];k[x]=_,n==null||n(k)}},onSuccess:()=>{e&&(u.invalidateQueries({queryKey:["tour",e]}),u.invalidateQueries({queryKey:["tours"]})),z.success("Allowance updated"),s(null)}}),N=xe({mutationFn:x=>e?Z.removeAllowance(e,x):Promise.resolve(),onSuccess:(x,_)=>{e?(u.invalidateQueries({queryKey:["tour",e]}),u.invalidateQueries({queryKey:["tours"]})):n==null||n(t.filter((k,E)=>E!==_)),z.success("Allowance removed")}}),g=x=>{if(x.preventDefault(),console.log("Submitting allowance:",o),!o.name||!o.date){z.error("Please fill in all required fields");return}r!==null?p.mutate({index:r,allowance:o}):m.mutate(o)},y=x=>{s(x),i(t[x]),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c(!0)},100)},w=()=>{s(null),i({date:(v==null?void 0:v.startDate)||"",name:"",price:0,quantity:1})},{data:v}=Xe({queryKey:["tour",e],queryFn:()=>e?Z.getTour(e):Promise.resolve(null),enabled:!!e});f.useEffect(()=>{!o.date&&(v!=null&&v.startDate)&&i(x=>({...x,date:v.startDate}))},[v==null?void 0:v.startDate]);const b=x=>{const _=t[x];m.mutate({..._})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:r!==null?"Edit Allowance":"Add Allowance"}),a.jsx("form",{onSubmit:g,className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs(ln,{open:l,onOpenChange:c,children:[a.jsx(cn,{asChild:!0,children:a.jsxs(V,{variant:"outline",role:"combobox","aria-expanded":l,className:"justify-between",children:[o.name||"Select allowance...",a.jsx(En,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(en,{className:"w-[300px] p-0",align:"start",children:a.jsxs(vn,{children:[a.jsx(yn,{placeholder:"Search allowance..."}),a.jsxs($r,{children:[a.jsx(xn,{children:"No allowance found."}),a.jsx(wn,{children:h.map(x=>a.jsxs(bn,{value:x.name,onSelect:()=>{const _=new Date().toISOString().split("T")[0],k=(v==null?void 0:v.startDate)||_;i({...o,name:x.name,price:x.price,date:o.date||k,quantity:o.quantity||1}),c(!1)},children:[a.jsx(Tt,{className:te("mr-2 h-4 w-4",o.name===x.name?"opacity-100":"opacity-0")}),x.name," (",ke(x.price),")"]},x.id))})]})]})})]}),a.jsx(Gt,{placeholder:"Price (VND)",value:o.price,onChange:x=>i({...o,price:x})}),a.jsx(to,{value:o.date,onChange:x=>i({...o,date:x}),required:!0}),a.jsx(_e,{type:"number",placeholder:"Quantity",value:o.quantity||1,onChange:x=>i({...o,quantity:parseInt(x.target.value)||1}),min:"1"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(V,{type:"submit",className:"hover-scale flex-1",children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),r!==null?"Update":"Add"]}),r!==null&&a.jsx(V,{type:"button",variant:"outline",onClick:w,children:"Cancel"})]})]})})]}),a.jsxs("div",{className:"rounded-lg border",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:a.jsx("h3",{className:"font-semibold",children:"Allowances List"})}),t.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No allowances added yet"}):a.jsxs(or,{className:"min-w-[680px] sm:min-w-0",children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{className:"w-[50px]",children:"#"}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Name"}),a.jsx("span",{className:"hidden sm:inline",children:"Name"})]}),a.jsx(se,{children:"Price"}),a.jsx(se,{className:"w-[80px]",children:"Qty"}),a.jsxs(se,{children:[a.jsx("span",{className:"sm:hidden",children:"Total"}),a.jsx("span",{className:"hidden sm:inline",children:"Total Amount"})]}),a.jsx(se,{children:"Date"}),a.jsxs(se,{className:"text-right w-[80px] sm:w-auto",children:[a.jsx("span",{className:"sm:hidden",children:"Act"}),a.jsx("span",{className:"hidden sm:inline",children:"Actions"})]})]})}),a.jsxs(lr,{children:[t.map((x,_)=>({...x,originalIndex:_})).sort((x,_)=>{const k=(x.name||"").localeCompare(_.name||"");if(k!==0)return k;const E=x.date?new Date(x.date).getTime():1/0,D=_.date?new Date(_.date).getTime():1/0;return E-D}).map((x,_)=>{const k=x.quantity||1,E=x.price*k,D=(x.price??0)===0;return a.jsxs(nt,{className:`animate-fade-in ${D?"bg-red-50 dark:bg-red-950":""}`,children:[a.jsx(oe,{className:"font-medium",children:_+1}),a.jsx(oe,{className:"font-medium",children:x.name}),a.jsxs(oe,{className:x.price===0?"text-destructive font-semibold":"",children:[ke(x.price),x.price===0&&a.jsx("span",{className:"ml-2 text-destructive",title:"Price is zero",children:""})]}),a.jsx(oe,{children:k}),a.jsx(oe,{className:"font-semibold",children:ke(E)}),a.jsx(oe,{children:An(x.date)}),a.jsx(oe,{className:"text-right",children:a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>b(x.originalIndex),className:"hover-scale",title:"Copy row",children:a.jsx(Ot,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>y(x.originalIndex),className:"hover-scale",title:"Edit",children:a.jsx(Ja,{className:"h-4 w-4"})}),a.jsx(V,{variant:"ghost",size:"sm",onClick:()=>N.mutate(x.originalIndex),className:"hover-scale text-destructive hover:text-destructive",title:"Delete",children:a.jsx(ot,{className:"h-4 w-4"})})]})})]},`${x.name}-${x.date}-${x.originalIndex}`)}),a.jsxs(nt,{className:"bg-muted/50 font-semibold",children:[a.jsx(oe,{colSpan:3,className:"text-right",children:"Total:"}),a.jsxs(oe,{children:[t.reduce((x,_)=>x+(_.quantity||1),0)," days"]}),a.jsx(oe,{className:"font-bold",children:ke(t.reduce((x,_)=>x+_.price*(_.quantity||1),0))}),a.jsx(oe,{colSpan:2})]})]})]})]})]})}function p9({tour:e,onSummaryUpdate:t}){const n=e.totalGuests||0,r=m=>typeof m!="number"?n:n?Math.min(Math.max(m,0),n):m,s=e.destinations.reduce((m,p)=>{const N=r(p.guests);return m+p.price*N},0),o=e.expenses.reduce((m,p)=>{const N=r(p.guests);return m+p.price*N},0),i=e.meals.reduce((m,p)=>{const N=r(p.guests);return m+p.price*N},0),l=e.allowances.reduce((m,p)=>m+p.price*(p.quantity||1),0),c=s+o+i+l,[u,d]=f.useState(()=>{const m=e.summary;return{totalTabs:c,advancePayment:(m==null?void 0:m.advancePayment)??0,totalAfterAdvance:0,companyTip:(m==null?void 0:m.companyTip)??0,totalAfterTip:0,collectionsForCompany:(m==null?void 0:m.collectionsForCompany)??0,totalAfterCollections:0,finalTotal:0}});f.useEffect(()=>{d(m=>({...m,totalTabs:c}))},[c]),f.useEffect(()=>{const m=u.totalTabs-(u.advancePayment||0),p=m-(u.collectionsForCompany||0),N=p+(u.companyTip||0),y={...u,totalAfterAdvance:m,totalAfterTip:N,totalAfterCollections:p,finalTotal:N};(y.totalAfterAdvance!==u.totalAfterAdvance||y.totalAfterTip!==u.totalAfterTip||y.totalAfterCollections!==u.totalAfterCollections||y.finalTotal!==u.finalTotal)&&d(y)},[u.totalTabs,u.advancePayment,u.companyTip,u.collectionsForCompany]);const h=(m,p)=>{const N={...u,[m]:p},g=N.totalTabs-(N.advancePayment||0),y=g-(N.collectionsForCompany||0),w=y+(N.companyTip||0),b={...N,totalAfterAdvance:g,totalAfterCollections:y,totalAfterTip:w,finalTotal:w};d(b),t&&t(b)};return a.jsx("div",{className:"space-y-6",children:a.jsxs(mt,{className:"animate-fade-in",children:[a.jsx(zt,{children:a.jsx(Wt,{children:"Financial Summary"})}),a.jsxs(Ft,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center py-2 bg-primary/10 px-3 rounded",children:[a.jsx("span",{className:"font-medium",children:"Total Tabs (Auto-calculated)"}),a.jsx("span",{className:"font-bold text-primary",children:ke(u.totalTabs)})]}),a.jsx(Fi,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"advancePayment",className:"text-red-600 font-semibold",children:"- Advance Payment (Input)"}),a.jsx(Gt,{id:"advancePayment",value:u.advancePayment||0,onChange:m=>h("advancePayment",m)})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 bg-muted/50 px-3 rounded",children:[a.jsx("span",{className:"font-medium",children:"Total After Advance"}),a.jsx("span",{className:"font-bold",children:ke(u.totalAfterAdvance)})]}),a.jsx(Fi,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"collectionsForCompany",className:"text-red-600 font-semibold",children:"- Collections for Company (Input)"}),a.jsx(Gt,{id:"collectionsForCompany",value:u.collectionsForCompany||0,onChange:m=>h("collectionsForCompany",m)})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 bg-muted/50 px-3 rounded",children:[a.jsx("span",{className:"font-medium",children:"Total After Collections"}),a.jsx("span",{className:"font-bold",children:ke(u.totalAfterCollections)})]}),a.jsx(Fi,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ce,{htmlFor:"companyTip",className:"text-blue-600 font-semibold",children:"+ Company Tip (Input)"}),a.jsx(Gt,{id:"companyTip",value:u.companyTip||0,onChange:m=>h("companyTip",m)})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 bg-muted/50 px-3 rounded",children:[a.jsx("span",{className:"font-medium",children:"Total After Tip"}),a.jsx("span",{className:"font-bold",children:ke(u.totalAfterTip)})]}),a.jsx(Fi,{}),a.jsxs("div",{className:"flex justify-between items-center py-3 bg-primary/10 px-4 rounded-lg mt-4",children:[a.jsx("span",{className:"text-lg font-bold",children:"Final Total"}),a.jsx("span",{className:"text-lg font-bold text-primary",children:ke(u.finalTotal)})]})]})]})})}function g9({tourId:e,tourCode:t}){const[n,r]=f.useState(!1),[s,o]=f.useState(null),[i,l]=f.useState(1),[c,u]=f.useState({x:0,y:0}),[d,h]=f.useState(!1),[m,p]=f.useState({x:0,y:0}),N=tn(),{data:g=[],isLoading:y}=Xe({queryKey:["tourImages",e],queryFn:async()=>{const{data:C,error:j}=await jo.from("tour_images").select("*").eq("tour_id",e).order("created_at",{ascending:!1});if(j)throw j;return C},enabled:!!e}),w=xe({mutationFn:async C=>{const j=C.name.split(".").pop(),S=`${t}_${Date.now()}.${j}`,P=`${t}/${S}`,{error:H}=await jo.storage.from("tour-images").upload(P,C,{cacheControl:"3600",upsert:!1});if(H)throw H;const{error:R}=await jo.from("tour_images").insert({tour_id:e,storage_path:P,file_name:C.name,file_size:C.size,mime_type:C.type});if(R)throw R},onSuccess:()=>{N.invalidateQueries({queryKey:["tourImages",e]}),z.success("Image uploaded successfully")},onError:C=>{z.error(`Failed to upload image: ${C.message}`)}}),v=xe({mutationFn:async C=>{const{error:j}=await jo.storage.from("tour-images").remove([C.storage_path]);if(j)throw j;const{error:S}=await jo.from("tour_images").delete().eq("id",C.id);if(S)throw S},onSuccess:()=>{N.invalidateQueries({queryKey:["tourImages",e]}),z.success("Image deleted successfully")},onError:C=>{z.error(`Failed to delete image: ${C.message}`)}}),b=async C=>{const j=C.target.files;if(!(!j||j.length===0)){r(!0);try{for(const S of Array.from(j)){if(!S.type.startsWith("image/")){z.error(`${S.name} is not an image file`);continue}if(S.size>5*1024*1024){z.error(`${S.name} is too large (max 5MB)`);continue}await w.mutateAsync(S)}}finally{r(!1),C.target.value=""}}},x=C=>{const{data:j}=jo.storage.from("tour-images").getPublicUrl(C);return j.publicUrl},_=C=>{o(C),l(1),u({x:0,y:0})},k=()=>{o(null),l(1),u({x:0,y:0})},E=C=>{C.preventDefault();const j=C.deltaY>0?-.1:.1;l(S=>Math.max(.5,Math.min(5,S+j)))},D=C=>{i>1&&(h(!0),p({x:C.clientX-c.x,y:C.clientY-c.y}))},$=C=>{d&&i>1&&u({x:C.clientX-m.x,y:C.clientY-m.y})},O=()=>{h(!1)},Y=C=>{i>1&&C.touches.length===1&&(h(!0),p({x:C.touches[0].clientX-c.x,y:C.touches[0].clientY-c.y}))},T=C=>{d&&i>1&&C.touches.length===1&&u({x:C.touches[0].clientX-m.x,y:C.touches[0].clientY-m.y})},M=()=>{h(!1)},U=()=>{l(C=>Math.min(5,C+.25))},A=()=>{l(C=>Math.max(.5,C-.25))},F=()=>{l(1),u({x:0,y:0})};return y?a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((C,j)=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg animate-pulse"},j))})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Tour Images"}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"tour-image-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",multiple:!0,className:"hidden",onChange:b,disabled:n}),a.jsx(V,{onClick:()=>{var C;return(C=document.getElementById("tour-image-upload"))==null?void 0:C.click()},disabled:n,className:"hover-scale",children:n?a.jsxs(a.Fragment,{children:[a.jsx(ds,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"h-4 w-4 mr-2"}),"Upload Images"]})})]})]}),g.length===0?a.jsxs("div",{className:"p-12 text-center border-2 border-dashed rounded-lg",children:[a.jsx(UD,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"No images uploaded yet"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:'Click the "Upload Images" button to add tour images'})]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map(C=>a.jsx(mt,{className:"overflow-hidden group",children:a.jsxs(Ft,{className:"p-0 relative",children:[a.jsx("img",{src:x(C.storage_path),alt:C.file_name,className:"w-full aspect-square object-cover cursor-pointer",loading:"lazy",onClick:()=>_(C)}),a.jsx("div",{className:"absolute top-2 right-2 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx(V,{variant:"destructive",size:"icon",onClick:j=>{j.stopPropagation(),v.mutate(C)},className:"hover-scale h-8 w-8 shadow-lg",children:a.jsx(ot,{className:"h-4 w-4"})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 to-transparent pointer-events-none",children:[a.jsx("p",{className:"text-white text-xs truncate",children:C.file_name}),a.jsx("p",{className:"text-white/60 text-xs",children:C.file_size?`${(C.file_size/1024).toFixed(0)} KB`:"Unknown size"})]})]})},C.id))})]}),a.jsx(Yn,{open:!!s,onOpenChange:k,children:a.jsxs(Dn,{className:"max-w-[95vw] sm:max-w-4xl h-[95vh] p-0 gap-0 flex flex-col",children:[a.jsx(Rn,{className:"p-4 sm:p-6 pb-2 shrink-0",children:a.jsx(Mn,{className:"text-sm sm:text-base truncate pr-8",children:s==null?void 0:s.file_name})}),s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute top-16 right-4 z-50 flex flex-col gap-2",children:[a.jsx(V,{variant:"secondary",size:"icon",onClick:U,className:"h-10 w-10 rounded-full shadow-lg",title:"Zoom in",children:a.jsx(JD,{className:"h-5 w-5"})}),a.jsx(V,{variant:"secondary",size:"icon",onClick:A,className:"h-10 w-10 rounded-full shadow-lg",title:"Zoom out",children:a.jsx(XD,{className:"h-5 w-5"})}),a.jsx(V,{variant:"secondary",size:"icon",onClick:F,className:"h-10 w-10 rounded-full shadow-lg",title:"Reset zoom",children:a.jsx(HD,{className:"h-5 w-5"})}),a.jsxs("div",{className:"text-xs text-center bg-secondary rounded-full px-2 py-1 shadow-lg",children:[Math.round(i*100),"%"]})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative cursor-move select-none",style:{minHeight:0},onWheel:E,onMouseDown:D,onMouseMove:$,onMouseUp:O,onMouseLeave:O,onTouchStart:Y,onTouchMove:T,onTouchEnd:M,children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 sm:p-6 pt-2",children:a.jsx("img",{src:x(s.storage_path),alt:s.file_name,className:"rounded-lg max-w-full max-h-full object-contain",style:{transform:`scale(${i}) translate(${c.x/i}px, ${c.y/i}px)`,transition:d?"none":"transform 0.1s ease-out",userSelect:"none",pointerEvents:"none"},draggable:!1})})}),a.jsxs("div",{className:"border-t bg-background p-4 sm:p-6 space-y-3 shrink-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[a.jsx("span",{children:s.file_size?`${(s.file_size/1024).toFixed(0)} KB`:"Unknown size"}),a.jsx("span",{className:"text-xs",children:new Date(s.created_at).toLocaleString()})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[a.jsx(V,{variant:"outline",size:"sm",onClick:()=>window.open(x(s.storage_path),"_blank"),className:"w-full sm:w-auto",children:"Open in New Tab"}),a.jsxs(V,{variant:"destructive",size:"sm",onClick:()=>{v.mutate(s),k()},className:"w-full sm:w-auto",children:[a.jsx(ot,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})]})}const op=(e,t)=>typeof e!="number"?t:t?Math.min(Math.max(e,0),t):e,Jl=e=>{if(!e)return{destinations:0,expenses:0,meals:0,allowances:0,shoppings:0};const t=e.totalGuests||0,n=(e.destinations||[]).reduce((l,c)=>{const u=op(c.guests,t);return l+c.price*u},0),r=(e.expenses||[]).reduce((l,c)=>{const u=op(c.guests,t);return l+c.price*u},0),s=(e.meals||[]).reduce((l,c)=>{const u=op(c.guests,t);return l+c.price*u},0),o=(e.allowances||[]).reduce((l,c)=>l+c.price*(c.quantity||1),0),i=(e.shoppings||[]).reduce((l,c)=>l+c.price,0);return{destinations:n,expenses:r,meals:s,allowances:o,shoppings:i}},v9=()=>{var E,D,$,O,Y,T;const{id:e}=sF(),t=Ey(),n=tn(),[r,s]=f.useState(!1);f.useState(null);const[o,i]=f.useState("info"),[l,c]=f.useState({destinations:[],expenses:[],meals:[],shoppings:[],allowances:[],summary:{totalTabs:0,advancePayment:0,totalAfterAdvance:0,companyTip:0,totalAfterTip:0,collectionsForCompany:0,totalAfterCollections:0,finalTotal:0}}),u=e==="new",{data:d,isLoading:h}=Xe({queryKey:["tour",e],queryFn:()=>Z.getTour(e),enabled:!u}),{data:m=[]}=Xe({queryKey:["tourImages",e],queryFn:async()=>{const{data:M,error:U}=await jo.from("tour_images").select("*").eq("tour_id",e);if(U)throw U;return M||[]},enabled:!u&&!!e}),p=xe({mutationFn:async M=>{const U=(M.adults||0)+(M.children||0);let A=0;if(M.startDate&&M.endDate)try{A=Math.max(0,lu(new Date(M.endDate),new Date(M.startDate))+1)}catch{}const F={...M,totalGuests:U,totalDays:A,destinations:l.destinations||[],expenses:l.expenses||[],meals:l.meals||[],allowances:l.allowances||[],shoppings:l.shoppings||[],summary:l.summary};return await Z.createTour(F)},onSuccess:M=>{n.invalidateQueries({queryKey:["tours"]}),z.success("Tour created successfully"),t("/tours")},onError:M=>{const U=M.message.toLowerCase();U.includes("unique")||U.includes("duplicate")||U.includes("tour_code")?z.error("This tour code already exists. Please use a different tour code."):z.error(M.message||"Failed to create tour")}}),N=xe({mutationFn:({id:M,patch:U})=>Z.updateTour(M,U),onSuccess:()=>{n.invalidateQueries({queryKey:["tour",e]}),n.invalidateQueries({queryKey:["tours"]}),z.success("Tour updated successfully")},onError:M=>{const U=M.message.toLowerCase();U.includes("unique")||U.includes("duplicate")||U.includes("tour_code")?z.error("This tour code already exists. Please use a different tour code."):z.error(M.message||"Failed to update tour")}}),g=xe({mutationFn:M=>Z.deleteTour(M),onSuccess:()=>{n.invalidateQueries({queryKey:["tours"]}),z.success("Tour deleted successfully"),t("/tours")}}),y=M=>{if(u)p.mutate(M);else if(e){const U=(M.adults||0)+(M.children||0);let A=0;if(M.startDate&&M.endDate)try{A=Math.max(0,lu(new Date(M.endDate),new Date(M.startDate))+1)}catch{}N.mutate({id:e,patch:{...M,totalGuests:U,totalDays:A}})}},w=M=>{e&&!u&&N.mutate({id:e,patch:{summary:M}})},v=()=>{e&&!u&&g.mutate(e)},b=()=>{if(o==="info"){const M=document.querySelector("form");M&&M.requestSubmit()}},x=u?l:d,_=(x==null?void 0:x.totalGuests)||((x==null?void 0:x.adults)||0)+((x==null?void 0:x.children)||0)||0,{classes:k}=hs("tourdetail.headerMode");return h&&!u?a.jsx(Nr,{children:a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse"}),a.jsx("div",{className:"h-[400px] bg-muted rounded animate-pulse"})]})}):a.jsxs(Nr,{children:[a.jsx("div",{className:"animate-fade-in",children:u||d?a.jsxs(e2,{defaultValue:"info",value:o,onValueChange:i,className:"space-y-4",children:[a.jsxs("div",{className:`${k} border-b py-2 sm:py-4 bg-blue-100 dark:bg-blue-900 z-40`,children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[a.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t("/tours"),className:"hover-scale h-8 w-8 flex-shrink-0",title:"Back to tours list",children:a.jsx(TD,{className:"h-4 w-4"})}),a.jsx("h1",{className:"text-base sm:text-xl md:text-2xl lg:text-3xl font-bold truncate",children:u?"New Tour":(d==null?void 0:d.tourCode)||"Tour Details"})]}),a.jsxs("div",{className:"flex gap-1 sm:gap-2 items-center flex-shrink-0",children:[u&&a.jsxs(V,{variant:"default",size:"sm",onClick:b,className:"hover-scale h-10 px-4",title:"Save tour",children:[a.jsx(ig,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:"Save Tour"})]}),!u&&o==="info"&&a.jsxs(V,{variant:"default",size:"sm",onClick:b,className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",title:"Save tour info",children:[a.jsx(ig,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Save Info"})]}),!u&&a.jsxs(V,{variant:"destructive",size:"sm",onClick:()=>s(!0),className:"hover-scale h-8 w-8 p-0 sm:h-10 sm:w-auto sm:px-4",title:"Delete tour",children:[a.jsx(ot,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]}),x&&a.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-0.5 text-xs sm:text-sm px-2 sm:px-0",children:[a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Date:"}),a.jsx("span",{className:"font-semibold",children:x.startDate&&x.endDate?rf(x.startDate,x.endDate):"-"})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Days:"}),a.jsx("span",{className:"font-semibold",children:x.totalDays||0})]}),a.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"|"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Adults:"}),a.jsx("span",{className:"font-semibold",children:x.adults||0})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Children:"}),a.jsx("span",{className:"font-semibold",children:x.children||0})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Guests:"}),a.jsx("span",{className:"font-semibold",children:_})]})]})]}),a.jsx("div",{className:"pt-2 sm:pt-4",children:a.jsxs(Sx,{className:"grid w-full grid-cols-3 lg:grid-cols-7 gap-1 rounded-xl bg-background shadow-sm border p-0.5 sm:p-1 h-auto",children:[a.jsx(Wn,{value:"info",className:"text-xs sm:text-sm",children:"Info"}),a.jsx(Wn,{value:"destinations",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"sm:hidden",children:"Dest"}),a.jsx("span",{className:"hidden sm:inline",children:"Destinations"}),a.jsxs("span",{className:"text-xs sm:text-sm font-bold",children:[((E=x==null?void 0:x.destinations)==null?void 0:E.length)||0," | ",ke(Jl(x).destinations)]})]})}),a.jsx(Wn,{value:"expenses",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"sm:hidden",children:"Exp"}),a.jsx("span",{className:"hidden sm:inline",children:"Expenses"}),a.jsxs("span",{className:"text-xs sm:text-sm font-bold",children:[((D=x==null?void 0:x.expenses)==null?void 0:D.length)||0," | ",ke(Jl(x).expenses)]})]})}),a.jsx(Wn,{value:"meals",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{children:"Meals"}),a.jsxs("span",{className:"text-xs sm:text-sm font-bold",children:[(($=x==null?void 0:x.meals)==null?void 0:$.length)||0," | ",ke(Jl(x).meals)]})]})}),a.jsx(Wn,{value:"shoppings",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"sm:hidden",children:"Shop"}),a.jsx("span",{className:"hidden sm:inline",children:"Shopping"}),a.jsxs("span",{className:"text-xs sm:text-sm font-bold",children:[((O=x==null?void 0:x.shoppings)==null?void 0:O.length)||0," | ",ke(Jl(x).shoppings)]})]})}),a.jsx(Wn,{value:"allowances",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"sm:hidden",children:"Allow"}),a.jsx("span",{className:"hidden sm:inline",children:"Allowances"}),a.jsxs("span",{className:"text-xs sm:text-sm font-bold",children:[((Y=x==null?void 0:x.allowances)==null?void 0:Y.length)||0," | ",ke(Jl(x).allowances)]})]})}),a.jsx(Wn,{value:"summary",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"sm:hidden",children:"Sum"}),a.jsx("span",{className:"hidden sm:inline",children:"Summary"}),a.jsx("span",{className:"text-xs sm:text-sm font-bold",children:ke(((T=x==null?void 0:x.summary)==null?void 0:T.finalTotal)??0)})]})}),!u&&a.jsx(Wn,{value:"images",className:"text-xs sm:text-sm",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"sm:hidden",children:"Img"}),a.jsx("span",{className:"hidden sm:inline",children:"Images"}),a.jsx("span",{className:"text-xs sm:text-sm font-bold",children:m.length})]})})]})})]}),a.jsx(Vn,{value:"info",className:"animate-fade-in",children:a.jsx("div",{className:"rounded-lg border bg-card p-6",children:a.jsx(l9,{initialData:u?void 0:d,onSubmit:y,showSubmitButton:!1})})}),a.jsx(Vn,{value:"destinations",className:"animate-fade-in",children:a.jsx(c9,{tourId:u?void 0:e,destinations:(x==null?void 0:x.destinations)||[],onChange:M=>{u&&c({...l,destinations:M})}})}),a.jsx(Vn,{value:"expenses",className:"animate-fade-in",children:a.jsx(u9,{tourId:u?void 0:e,expenses:(x==null?void 0:x.expenses)||[],onChange:M=>{u&&c({...l,expenses:M})}})}),a.jsx(Vn,{value:"meals",className:"animate-fade-in",children:a.jsx(d9,{tourId:u?void 0:e,meals:(x==null?void 0:x.meals)||[],onChange:M=>{u&&c({...l,meals:M})}})}),a.jsx(Vn,{value:"shoppings",className:"animate-fade-in",children:a.jsx(f9,{tourId:u?void 0:e,shoppings:(x==null?void 0:x.shoppings)||[],onChange:M=>{u&&c({...l,shoppings:M})}})}),a.jsx(Vn,{value:"allowances",className:"animate-fade-in",children:a.jsx(m9,{tourId:u?void 0:e,allowances:(x==null?void 0:x.allowances)||[],onChange:M=>{u&&c({...l,allowances:M})}})}),a.jsx(Vn,{value:"summary",className:"animate-fade-in",children:a.jsx(p9,{tour:x,onSummaryUpdate:M=>{u?c({...l,summary:M}):w(M)}})}),a.jsx(Vn,{value:"images",className:"animate-fade-in",children:!u&&d&&a.jsx(g9,{tourId:e,tourCode:d.tourCode})})]}):null}),a.jsx($d,{open:r,onOpenChange:s,children:a.jsxs(_c,{children:[a.jsxs(kc,{children:[a.jsx(Tc,{children:"Delete Tour"}),a.jsx(Pc,{children:"Are you sure you want to delete this tour? This action cannot be undone."})]}),a.jsxs(Ec,{children:[a.jsx(Dc,{children:"Cancel"}),a.jsx(Ac,{onClick:v,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})},y9=()=>{const e=si();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},x9="__unknown_guide__",w9="__unknown_company__",b9="__unknown_nationality__",Ld="Unknown",j9="0829101188",Xl=e=>(e.allowances||[]).reduce((t,n)=>t+n.price*(n.quantity??1),0),Zl=e=>{const t=(e.shoppings||[]).filter(r=>r.name==="TIP"),n=t.reduce((r,s)=>r+s.price,0);return t.length>0&&console.log(`Tour ${e.tourCode}: Found ${t.length} TIP items, total: ${n}`,t),n},ec=e=>(e.shoppings||[]).filter(n=>n.name!=="TIP").reduce((n,r)=>n+r.price,0),tc=e=>{var t;return((t=e.summary)==null?void 0:t.companyTip)||0},ip=e=>e.startDate?e.startDate.slice(0,7):Ld,lp=e=>{var t,n,r;return{id:((t=e.guideRef)==null?void 0:t.id)||x9,name:((r=(n=e.guideRef)==null?void 0:n.nameAtBooking)==null?void 0:r.trim())||"Unknown guide"}},cp=e=>{var t,n,r;return{id:((t=e.companyRef)==null?void 0:t.id)||w9,name:((r=(n=e.companyRef)==null?void 0:n.nameAtBooking)==null?void 0:r.trim())||"Unknown company"}},up=e=>{var t,n,r;return{id:((t=e.clientNationalityRef)==null?void 0:t.id)||b9,name:((r=(n=e.clientNationalityRef)==null?void 0:n.nameAtBooking)==null?void 0:r.trim())||"Unknown nationality"}},N9=()=>{var C;const e=tn(),t=P_(),[n,r]=f.useState(()=>sessionStorage.getItem("statistics.unlocked")==="true"),[s,o]=f.useState(""),[i,l]=f.useState(!1),{data:c,isLoading:u}=Xe({queryKey:["statistics","tours"],queryFn:()=>Z.listTours(void 0,{includeDetails:!0}),staleTime:6e4,gcTime:10*6e4}),d=(c==null?void 0:c.tours)??[];d.length>0&&console.log("Statistics - Sample tour data:",{tourCount:d.length,firstTour:d[0],hasShoppings:d.some(j=>j.shoppings&&j.shoppings.length>0),shoppingsExample:(C=d.find(j=>j.shoppings&&j.shoppings.length>0))==null?void 0:C.shoppings});const[h,m]=f.useState("all"),[p,N]=f.useState("all"),[g,y]=f.useState("all"),[w,v]=f.useState("all");f.useEffect(()=>{const j=t.channel("statistics-changes").on("postgres_changes",{event:"*",schema:"public",table:"tour_shoppings"},()=>{e.invalidateQueries({queryKey:["statistics","tours"]})}).on("postgres_changes",{event:"*",schema:"public",table:"tour_allowances"},()=>{e.invalidateQueries({queryKey:["statistics","tours"]})}).on("postgres_changes",{event:"*",schema:"public",table:"tours"},()=>{e.invalidateQueries({queryKey:["statistics","tours"]})}).subscribe();return()=>{t.removeChannel(j)}},[t,e]);const b=f.useMemo(()=>{const j=new Map;return d.forEach(S=>{const P=lp(S);j.set(P.id,P.name)}),Array.from(j.entries()).map(([S,P])=>({id:S,name:P})).sort((S,P)=>S.name.localeCompare(P.name))},[d]),x=f.useMemo(()=>{const j=new Map;return d.forEach(S=>{const P=cp(S);j.set(P.id,P.name)}),Array.from(j.entries()).map(([S,P])=>({id:S,name:P})).sort((S,P)=>S.name.localeCompare(P.name))},[d]),_=f.useMemo(()=>{const j=new Map;return d.forEach(S=>{const P=up(S);j.set(P.id,P.name)}),Array.from(j.entries()).map(([S,P])=>({id:S,name:P})).sort((S,P)=>S.name.localeCompare(P.name))},[d]),k=f.useMemo(()=>{const j=new Set;return d.forEach(S=>{const P=ip(S);P!==Ld&&j.add(P)}),Array.from(j).sort((S,P)=>P.localeCompare(S))},[d]),E=f.useMemo(()=>d.filter(j=>{const S=lp(j),P=cp(j),H=up(j),R=ip(j),L=h==="all"||S.id===h,J=p==="all"||P.id===p,Q=g==="all"||H.id===g;return L&&J&&Q&&(w==="all"||R===w)}),[d,h,p,g,w]),D=f.useMemo(()=>E.reduce((j,S)=>{var G;const P=Xl(S),H=Zl(S),R=tc(S),L=ec(S),J=P+H+R+L,Q=((G=S.summary)==null?void 0:G.finalTotal)??0;return j.allowances+=P,j.tipFromGuests+=H,j.companyTip+=R,j.shoppings+=L,j.totalShopTipAllow+=J,j.finalTotal+=Q,j.tours+=1,j.guests+=S.totalGuests??0,j},{allowances:0,tipFromGuests:0,companyTip:0,shoppings:0,totalShopTipAllow:0,finalTotal:0,tours:0,guests:0}),[E]),$=f.useMemo(()=>d.reduce((j,S)=>{var H;const P=((H=S.summary)==null?void 0:H.finalTotal)??0;return j.finalTotal+=P,j.tours+=1,j},{finalTotal:0,tours:0}),[d]),O=f.useMemo(()=>{const j=new Map;return E.forEach(S=>{var q;const P=lp(S),H=Xl(S),R=Zl(S),L=tc(S),J=ec(S),Q=((q=S.summary)==null?void 0:q.finalTotal)??0;j.has(P.id)||j.set(P.id,{id:P.id,name:P.name,totalTours:0,totalAllowances:0,totalTipFromGuests:0,totalCompanyTip:0,totalShoppings:0,totalShopTipAllow:0,finalTotal:0});const G=j.get(P.id);G.totalTours+=1,G.totalAllowances+=H,G.totalTipFromGuests+=R,G.totalCompanyTip+=L,G.totalShoppings+=J,G.totalShopTipAllow+=H+R+L+J,G.finalTotal+=Q}),Array.from(j.values()).sort((S,P)=>P.finalTotal-S.finalTotal)},[E]),Y=f.useMemo(()=>{const j=new Map;return E.forEach(S=>{var q;const P=cp(S),H=Xl(S),R=Zl(S),L=tc(S),J=ec(S),Q=((q=S.summary)==null?void 0:q.finalTotal)??0;j.has(P.id)||j.set(P.id,{id:P.id,name:P.name,totalTours:0,totalAllowances:0,totalTipFromGuests:0,totalCompanyTip:0,totalShoppings:0,totalShopTipAllow:0,finalTotal:0});const G=j.get(P.id);G.totalTours+=1,G.totalAllowances+=H,G.totalTipFromGuests+=R,G.totalCompanyTip+=L,G.totalShoppings+=J,G.totalShopTipAllow+=H+R+L+J,G.finalTotal+=Q}),Array.from(j.values()).sort((S,P)=>P.finalTotal-S.finalTotal)},[E]),T=f.useMemo(()=>{const j=new Map;return E.forEach(S=>{var q;const P=ip(S),H=Xl(S),R=Zl(S),L=tc(S),J=ec(S),Q=((q=S.summary)==null?void 0:q.finalTotal)??0;j.has(P)||j.set(P,{month:P,totalTours:0,totalAllowances:0,totalTipFromGuests:0,totalCompanyTip:0,totalShoppings:0,totalShopTipAllow:0,finalTotal:0});const G=j.get(P);G.totalTours+=1,G.totalAllowances+=H,G.totalTipFromGuests+=R,G.totalCompanyTip+=L,G.totalShoppings+=J,G.totalShopTipAllow+=H+R+L+J,G.finalTotal+=Q}),Array.from(j.values()).sort((S,P)=>S.month===Ld?1:P.month===Ld?-1:P.month.localeCompare(S.month))},[E]),M=f.useMemo(()=>{const j=new Map;return E.forEach(S=>{var q;const P=up(S),H=Xl(S),R=Zl(S),L=tc(S),J=ec(S),Q=((q=S.summary)==null?void 0:q.finalTotal)??0;j.has(P.id)||j.set(P.id,{id:P.id,name:P.name,totalTours:0,totalAllowances:0,totalTipFromGuests:0,totalCompanyTip:0,totalShoppings:0,totalShopTipAllow:0,finalTotal:0});const G=j.get(P.id);G.totalTours+=1,G.totalAllowances+=H,G.totalTipFromGuests+=R,G.totalCompanyTip+=L,G.totalShoppings+=J,G.totalShopTipAllow+=H+R+L+J,G.finalTotal+=Q}),Array.from(j.values()).sort((S,P)=>P.finalTotal-S.finalTotal)},[E]),{classes:U}=hs("statistics.headerMode"),A=()=>{m("all"),N("all"),y("all"),v("all")},F=j=>{j.preventDefault(),s===j9?(r(!0),sessionStorage.setItem("statistics.unlocked","true"),l(!1),o("")):(l(!0),o(""))};return n?a.jsx(Nr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:U,children:a.jsx("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Statistics"}),a.jsx("p",{className:"text-muted-foreground",children:"Review allowances, tips, and shopping statistics by guide, company, nationality, and month."})]})})}),a.jsxs(mt,{children:[a.jsx(zt,{children:a.jsx(Wt,{children:"Filters"})}),a.jsx(Ft,{children:a.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5 flex-1",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-muted-foreground",children:"Guide"}),a.jsxs(ns,{value:h,onValueChange:m,children:[a.jsx(Mr,{children:a.jsx(rs,{placeholder:"All guides"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All guides"}),b.map(j=>a.jsx(ct,{value:j.id,children:j.name},j.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-muted-foreground",children:"Company"}),a.jsxs(ns,{value:p,onValueChange:N,children:[a.jsx(Mr,{children:a.jsx(rs,{placeholder:"All companies"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All companies"}),x.map(j=>a.jsx(ct,{value:j.id,children:j.name},j.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-muted-foreground",children:"Nationality"}),a.jsxs(ns,{value:g,onValueChange:y,children:[a.jsx(Mr,{children:a.jsx(rs,{placeholder:"All nationalities"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All nationalities"}),_.map(j=>a.jsx(ct,{value:j.id,children:j.name},j.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-muted-foreground",children:"Month"}),a.jsxs(ns,{value:w,onValueChange:v,children:[a.jsx(Mr,{children:a.jsx(rs,{placeholder:"All months"})}),a.jsxs(Or,{children:[a.jsx(ct,{value:"all",children:"All months"}),k.map(j=>a.jsx(ct,{value:j,children:j},j))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium text-muted-foreground",children:"Actions"}),a.jsx("div",{className:"flex gap-2",children:a.jsx(V,{variant:"outline",className:"flex-1",onClick:A,children:"Reset filters"})})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[E.length," tour(s) match the current filters."]})]})})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-7",children:[a.jsxs(mt,{className:"bg-primary/10",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-muted-foreground",children:"Total Tours"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-3xl font-bold",children:D.tours}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Tours included"})]})]}),a.jsxs(mt,{className:"bg-primary/10",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-muted-foreground",children:"Total Guests"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-3xl font-bold",children:D.guests}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Adults + Children"})]})]}),a.jsxs(mt,{className:"bg-blue-50 dark:bg-blue-950",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-muted-foreground",children:"Allowances"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ke(D.allowances)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"CTP total"})]})]}),a.jsxs(mt,{className:"bg-green-50 dark:bg-green-950",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-muted-foreground",children:"Tips from Guests"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ke(D.tipFromGuests)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:'Shopping "TIP"'})]})]}),a.jsxs(mt,{className:"bg-purple-50 dark:bg-purple-950",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-muted-foreground",children:"Company Tips"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ke(D.companyTip)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"From summary"})]})]}),a.jsxs(mt,{className:"bg-orange-50 dark:bg-orange-950",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-muted-foreground",children:"Shoppings"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ke(D.shoppings)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Excluding TIP"})]})]}),a.jsxs(mt,{className:"bg-primary/20",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-xs sm:text-sm font-medium text-primary break-words",children:"Total (S+T+A)"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:ke(D.totalShopTipAllow)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Shop+Tip+Allow"})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(mt,{className:"bg-blue-100 dark:bg-blue-900 border-2 border-blue-400",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Final Total (Filtered Tours)"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:ke(D.finalTotal)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[D.tours," tours (current filters)"]})]})]}),a.jsxs(mt,{className:"bg-green-100 dark:bg-green-900 border-2 border-green-400",children:[a.jsx(zt,{className:"pb-2",children:a.jsx(Wt,{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Grand Total (All Tours)"})}),a.jsxs(Ft,{children:[a.jsx("div",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:ke($.finalTotal)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[$.tours," tours in database"]})]})]})]}),a.jsxs(mt,{children:[a.jsx(zt,{children:a.jsx(Wt,{children:"Statistics by Guide"})}),a.jsx(Ft,{children:u?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading statistics..."}):O.length===0?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No tours found for the selected filters."}):a.jsx("div",{className:"rounded-md border overflow-x-auto",children:a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{children:"Guide"}),a.jsx(se,{className:"text-right",children:"Tours"}),a.jsx(se,{className:"text-right",children:"Allowances"}),a.jsx(se,{className:"text-right",children:"Tips (Guests)"}),a.jsx(se,{className:"text-right",children:"Tips (Company)"}),a.jsx(se,{className:"text-right",children:"Shoppings"}),a.jsx(se,{className:"text-right font-semibold",children:"Total (S+T+A)"}),a.jsx(se,{className:"text-right font-bold bg-blue-100 dark:bg-blue-900",children:"Final Total"})]})}),a.jsx(lr,{children:O.map(j=>a.jsxs(nt,{children:[a.jsx(oe,{children:j.name}),a.jsx(oe,{className:"text-right",children:j.totalTours}),a.jsx(oe,{className:"text-right",children:ke(j.totalAllowances)}),a.jsx(oe,{className:"text-right",children:ke(j.totalTipFromGuests)}),a.jsx(oe,{className:"text-right",children:ke(j.totalCompanyTip)}),a.jsx(oe,{className:"text-right",children:ke(j.totalShoppings)}),a.jsx(oe,{className:"text-right font-semibold text-primary",children:ke(j.totalShopTipAllow)}),a.jsx(oe,{className:"text-right font-bold text-blue-600 dark:text-blue-400",children:ke(j.finalTotal)})]},j.id))})]})})})]}),a.jsxs(mt,{children:[a.jsx(zt,{children:a.jsx(Wt,{children:"Statistics by Company"})}),a.jsx(Ft,{children:u?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading statistics..."}):Y.length===0?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No tours found for the selected filters."}):a.jsx("div",{className:"rounded-md border overflow-x-auto",children:a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{children:"Company"}),a.jsx(se,{className:"text-right",children:"Tours"}),a.jsx(se,{className:"text-right",children:"Allowances"}),a.jsx(se,{className:"text-right",children:"Tips (Guests)"}),a.jsx(se,{className:"text-right",children:"Tips (Company)"}),a.jsx(se,{className:"text-right",children:"Shoppings"}),a.jsx(se,{className:"text-right font-semibold",children:"Total (S+T+A)"}),a.jsx(se,{className:"text-right font-bold bg-blue-100 dark:bg-blue-900",children:"Final Total"})]})}),a.jsx(lr,{children:Y.map(j=>a.jsxs(nt,{children:[a.jsx(oe,{children:j.name}),a.jsx(oe,{className:"text-right",children:j.totalTours}),a.jsx(oe,{className:"text-right",children:ke(j.totalAllowances)}),a.jsx(oe,{className:"text-right",children:ke(j.totalTipFromGuests)}),a.jsx(oe,{className:"text-right",children:ke(j.totalCompanyTip)}),a.jsx(oe,{className:"text-right",children:ke(j.totalShoppings)}),a.jsx(oe,{className:"text-right font-semibold text-primary",children:ke(j.totalShopTipAllow)}),a.jsx(oe,{className:"text-right font-bold text-blue-600 dark:text-blue-400",children:ke(j.finalTotal)})]},j.id))})]})})})]}),a.jsxs(mt,{children:[a.jsx(zt,{children:a.jsx(Wt,{children:"Monthly Statistics"})}),a.jsx(Ft,{children:u?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading statistics..."}):T.length===0?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No tours found for the selected filters."}):a.jsx("div",{className:"rounded-md border overflow-x-auto",children:a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{children:"Month"}),a.jsx(se,{className:"text-right",children:"Tours"}),a.jsx(se,{className:"text-right",children:"Allowances"}),a.jsx(se,{className:"text-right",children:"Tips (Guests)"}),a.jsx(se,{className:"text-right",children:"Tips (Company)"}),a.jsx(se,{className:"text-right",children:"Shoppings"}),a.jsx(se,{className:"text-right font-semibold",children:"Total (S+T+A)"}),a.jsx(se,{className:"text-right font-bold bg-blue-100 dark:bg-blue-900",children:"Final Total"})]})}),a.jsx(lr,{children:T.map(j=>a.jsxs(nt,{children:[a.jsx(oe,{children:j.month}),a.jsx(oe,{className:"text-right",children:j.totalTours}),a.jsx(oe,{className:"text-right",children:ke(j.totalAllowances)}),a.jsx(oe,{className:"text-right",children:ke(j.totalTipFromGuests)}),a.jsx(oe,{className:"text-right",children:ke(j.totalCompanyTip)}),a.jsx(oe,{className:"text-right",children:ke(j.totalShoppings)}),a.jsx(oe,{className:"text-right font-semibold text-primary",children:ke(j.totalShopTipAllow)}),a.jsx(oe,{className:"text-right font-bold text-blue-600 dark:text-blue-400",children:ke(j.finalTotal)})]},j.month))})]})})})]}),a.jsxs(mt,{children:[a.jsx(zt,{children:a.jsx(Wt,{children:"Statistics by Nationality"})}),a.jsx(Ft,{children:u?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading statistics..."}):M.length===0?a.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No tours found for the selected filters."}):a.jsx("div",{className:"rounded-md border overflow-x-auto",children:a.jsxs(or,{children:[a.jsx(ir,{children:a.jsxs(nt,{children:[a.jsx(se,{children:"Nationality"}),a.jsx(se,{className:"text-right",children:"Tours"}),a.jsx(se,{className:"text-right",children:"Allowances"}),a.jsx(se,{className:"text-right",children:"Tips (Guests)"}),a.jsx(se,{className:"text-right",children:"Tips (Company)"}),a.jsx(se,{className:"text-right",children:"Shoppings"}),a.jsx(se,{className:"text-right font-semibold",children:"Total (S+T+A)"}),a.jsx(se,{className:"text-right font-bold bg-blue-100 dark:bg-blue-900",children:"Final Total"})]})}),a.jsx(lr,{children:M.map(j=>a.jsxs(nt,{children:[a.jsx(oe,{children:j.name}),a.jsx(oe,{className:"text-right",children:j.totalTours}),a.jsx(oe,{className:"text-right",children:ke(j.totalAllowances)}),a.jsx(oe,{className:"text-right",children:ke(j.totalTipFromGuests)}),a.jsx(oe,{className:"text-right",children:ke(j.totalCompanyTip)}),a.jsx(oe,{className:"text-right",children:ke(j.totalShoppings)}),a.jsx(oe,{className:"text-right font-semibold text-primary",children:ke(j.totalShopTipAllow)}),a.jsx(oe,{className:"text-right font-bold text-blue-600 dark:text-blue-400",children:ke(j.finalTotal)})]},j.id))})]})})})]})]})}):a.jsx(Nr,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:a.jsxs(mt,{className:"w-full max-w-md",children:[a.jsx(zt,{children:a.jsxs(Wt,{className:"flex items-center gap-2",children:[a.jsx(cy,{className:"h-5 w-5"}),"Statistics Access"]})}),a.jsx(Ft,{children:a.jsxs("form",{onSubmit:F,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"pin",className:"text-sm font-medium",children:"Enter PIN (hint: your phone number)"}),a.jsx(_e,{id:"pin",type:"password",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:j=>{o(j.target.value),l(!1)},placeholder:"Enter PIN",className:i?"border-red-500":"",autoFocus:!0}),i&&a.jsx("p",{className:"text-sm text-red-500",children:"Incorrect PIN. Please try again."})]}),a.jsx(V,{type:"submit",className:"w-full",children:"Unlock Statistics"})]})})]})})})},C9=new mI,S9="0829101188",_9=()=>{const[e,t]=f.useState(()=>sessionStorage.getItem("app.unlocked")==="true"),[n,r]=f.useState(""),[s,o]=f.useState(!1),i=l=>{l.preventDefault(),n===S9?(t(!0),sessionStorage.setItem("app.unlocked","true"),o(!1),r("")):(o(!0),r(""))};return e?a.jsx(xI,{client:C9,children:a.jsxs(JO,{children:[a.jsx(OR,{}),a.jsx(fM,{}),a.jsx(kF,{children:a.jsxs(xF,{children:[a.jsx(Jn,{path:"/",element:a.jsx(Ob,{})}),a.jsx(Jn,{path:"/guides",element:a.jsx(eB,{})}),a.jsx(Jn,{path:"/companies",element:a.jsx(tB,{})}),a.jsx(Jn,{path:"/nationalities",element:a.jsx(nB,{})}),a.jsx(Jn,{path:"/provinces",element:a.jsx(_B,{})}),a.jsx(Jn,{path:"/destinations",element:a.jsx(zU,{})}),a.jsx(Jn,{path:"/shopping",element:a.jsx(WU,{})}),a.jsx(Jn,{path:"/expense-categories",element:a.jsx(HU,{})}),a.jsx(Jn,{path:"/detailed-expenses",element:a.jsx(qU,{})}),a.jsx(Jn,{path:"/tours",element:a.jsx(Ob,{})}),a.jsx(Jn,{path:"/tours/:id",element:a.jsx(v9,{})}),a.jsx(Jn,{path:"/statistics",element:a.jsx(N9,{})}),a.jsx(Jn,{path:"*",element:a.jsx(y9,{})})]})})]})}):a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:a.jsxs(mt,{className:"w-full max-w-md mx-4",children:[a.jsx(zt,{children:a.jsxs(Wt,{className:"flex items-center gap-2 text-2xl",children:[a.jsx(cy,{className:"h-6 w-6"}),"Tour Manager - Access Required"]})}),a.jsx(Ft,{children:a.jsxs("form",{onSubmit:i,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"pin",className:"text-sm font-medium",children:"Enter PIN (hint: your phone number)"}),a.jsx(_e,{id:"pin",type:"password",inputMode:"numeric",pattern:"[0-9]*",value:n,onChange:l=>{r(l.target.value),o(!1)},placeholder:"Enter PIN",className:s?"border-red-500":"",autoFocus:!0}),s&&a.jsx("p",{className:"text-sm text-red-500",children:"Incorrect PIN. Please try again."})]}),a.jsx(V,{type:"submit",className:"w-full",children:"Unlock App"})]})})]})})};oN(document.getElementById("root")).render(a.jsx(_9,{}));export{Lr as c,qb as g};
