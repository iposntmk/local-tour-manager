
**Nhiá»‡m vá»¥:**
Äá»c áº£nh hoáº·c file **â€œchÆ°Æ¡ng trÃ¬nh tourâ€** (tour itinerary) vÃ  **tráº£ vá» nhiá»u Ä‘á»‘i tÆ°á»£ng JSON há»£p lá»‡** theo **schema á»Ÿ cuá»‘i**.

**YÃªu cáº§u output:**

* Báº¯t Ä‘áº§u báº±ng `[` vÃ  káº¿t thÃºc báº±ng `]`.
* Giá»¯a cÃ¡c tour cÃ³ dáº¥u pháº©y `,`.
* **CHá»ˆ** tráº£ vá» JSON (khÃ´ng thÃªm chá»¯, markdown, giáº£i thÃ­ch, hoáº·c nháº­n xÃ©t).

---

### ğŸ”§ Quy táº¯c chung

* Náº¿u thiáº¿u dá»¯ liá»‡u:

  * string â†’ `""`
  * number â†’ `0`
  * boolean â†’ `false`
  * array â†’ `[]`
* NgÃ y (`date`): Ä‘á»‹nh dáº¡ng `"yyyy-mm-dd"`.

  * Náº¿u thiáº¿u â†’ `""`.
  * Náº¿u khÃ´ng cÃ³ nÄƒm â†’ máº·c Ä‘á»‹nh **2025**.
* Tiá»n tá»‡: chá»‰ láº¥y **sá»‘**.

  * Bá» kÃ½ tá»±, cháº¥m, pháº©y, Ä‘Æ¡n vá»‹ (`Ä‘`, `k`, `vnd`).
  * VÃ­ dá»¥: `150k` â†’ `150000`, `200.000Ä‘` â†’ `200000`.
* **KhÃ´ng bá»‹a hoáº·c suy diá»…n thÃªm dá»¯ liá»‡u.**

---

### ğŸ§­ Nguá»“n dá»¯ liá»‡u Æ°u tiÃªn

1. **Header:** MÃ£ Ä‘oÃ n, HDV, LÃ¡i xe, Sá»‘ khÃ¡ch.
2. **Báº£ng khÃ¡ch:** TÃªn & Quá»‘c tá»‹ch â†’ xÃ¡c Ä‘á»‹nh `clientNationality`.
3. **Báº£ng lá»‹ch ngÃ y:** NgÃ y, Tham quan, Ä‚n trÆ°a, Ä‚n tá»‘i, KhÃ¡ch sáº¡n.
4. **Ghi chÃº cuá»‘i trang:** NOTE, Ä‘iá»‡n thoáº¡i, cÃ´ng ty Ä‘áº·t khÃ¡ch sáº¡n.

---

### ğŸ§© TrÆ°á»ng chÃ­nh `tour`

| TrÆ°á»ng                              | Nguá»“n / Quy táº¯c                                                                                                     |
| ----------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| `tourCode`                          | Tá»« â€œCode Ä‘oÃ nâ€ hoáº·c â€œMÃ£ tourâ€                                                                                       |
| `adults`, `children`, `totalGuests` | Tá»« â€œSá»‘ khÃ¡châ€                                                                                                       |
| `tourGuide`                         | LuÃ´n = `"Cao Há»¯u TÃº"`                                                                                               |
| `driverName`                        | Tá»« â€œLÃ¡i xeâ€, náº¿u khÃ´ng cÃ³ â†’ `""`                                                                                    |
| `company`                           | Cá»¥m â€œKhÃ¡ch sáº¡n: â€¦ bookâ€ hoáº·c â€œÄ‘áº·tâ€                                                                                  |
| `clientPhone`                       | Tá»« pháº§n ghi chÃº                                                                                                     |
| `clientNationality`                 | Náº¿u cÃ³ báº£ng khÃ¡ch â†’ quá»‘c tá»‹ch phá»• biáº¿n nháº¥t. Náº¿u khÃ´ng â†’ suy luáº­n tá»« mÃ£ vÃ¹ng hoáº·c tÃªn khÃ¡ch. KhÃ´ng xÃ¡c Ä‘á»‹nh â†’ `""`. |
| `startDate`, `endDate`              | Tá»« cá»™t â€œNgÃ yâ€ (min & max)                                                                                           |
| `totalDays`                         | `(endDate - startDate) + 1`, náº¿u thiáº¿u â†’ `0`                                                                        |

---

### ğŸ§± Subcollections

#### a) `destinations`

* TÃ¡ch tá»« cá»™t **Tham quan**, chia theo dáº¥u pháº©y.
* Má»—i Ä‘iá»ƒm lÃ  1 object.


náº¿u destinations.name cÃ³ chá»©a 1 tá»« hoáº·c cá»¥m (viáº¿t hoÃ¡ or viáº¿t thÆ°á»ng cÃ³ dáº¥u or khÃ´ng cÃ³ dáº¥u) trong danh sÃ¡ch: 'ChÃ¹a ThiÃªn má»¥ or ThiÃªn má»¥ or Cáº©m Thanh, Cam Thanh, chá»£, chÃ¹a, nhÃ  thá», Ä‘Ã¨o háº£i vÃ¢n, háº£i vÃ¢n, lÄƒng cÃ´, cáº§u rá»“ng, an báº±ng, biá»ƒn, lÃ ng hÆ°Æ¡ng, lÃ ng nÃ³n, la vang, cá»­a Ä‘áº¡i, lang co, thiÃªn má»¥, háº£i vá»ng Ä‘Ã i, Ä‘á»— quyÃªn, ngÅ© há»“, thÃ¡c Ä‘á»— quyÃªn, vá»ng háº£i Ä‘Ã i, cam thanh, Cáº©m thanh, Cáº©m Thanh, cÃ¢m thanh, SÃ´ng Thu Bá»“n' thÃ¬ ko táº¡o object cho destination
* Náº¿u chá»‰ â€œÄ‘Ã³n sÃ¢n bay / don sb no guideâ€ vÃ  khÃ´ng cÃ³ Ä‘iá»ƒm tham quan â†’ bá» qua.
* Má»—i record: `{ "name", "price", "province", "date", "orderIndex" }`
  (province cÃ³ thá»ƒ suy luáº­n theo vÃ¹ng chÃ­nh cá»§a tour)

#### b) `expenses`

* Tá»« cá»™t **Ä‚n trÆ°a / Ä‚n tá»‘i** hoáº·c ghi chÃº cÃ³ chi phÃ­ nhÆ°ng khÃ´ng gáº¯n Ä‘iá»ƒm tham quan.
* Record: `{ "name","price","date","orderIndex" }`.

#### c) `meals`

* Tá»« cá»™t Ä‚n trÆ°a / Ä‚n tá»‘i náº¿u giÃ¡ trá»‹ cá»§a Ã´/cell  chá»©a tá»« book/ Ä‘áº·t. thÃ¬ táº¡o 1 record cho meals array theo cáº¥u trÃºc: Record: `{ "name","price","date","orderIndex" }`.

#### d) `allowances`

* Suy luáº­n tá»‰nh tá»« Ä‘iá»ƒm chÃ­nh trong ngÃ y.
* Náº¿u chá»‰ â€œÄ‘Ã³n sÃ¢n bayâ€ hoáº·c â€œdon sb no guideâ€ â†’ bá» qua.
* GiÃ¡ trá»‹ máº·c Ä‘á»‹nh:

  * Quáº£ng BÃ¬nh / Quáº£ng Trá»‹ â†’ `800000`
  * Huáº¿ / ÄÃ  Náºµng / Quáº£ng Nam â†’ `600000`
  * Báº¡ch MÃ£ (Huáº¿) â†’ `900000`
  * KhÃ¡c â†’ `600000`
* Record: `{ "name","price","date","orderIndex" }`.

#### e) `summary`

* Náº¿u khÃ´ng cÃ³ dá»¯ liá»‡u â†’ táº¥t cáº£ = `0`.
* CÃ¡c tá»‰nh há»£p lá»‡: `ÄÃ  Náºµng`, `Huáº¿`, `Quáº£ng BÃ¬nh`, `Quáº£ng Nam`, `Quáº£ng Trá»‹`.

---

### ğŸ§¾ SCHEMA JSON (báº¯t buá»™c xuáº¥t ra)

```json
[
  {
    "tour": {
      "tourCode": "",
      "company": "",
      "tourGuide": "Cao Há»¯u TÃº",
      "clientName": "",
      "clientNationality": "",
      "adults": 0,
      "children": 0,
      "totalGuests": 0,
      "driverName": "",
      "clientPhone": "",
      "startDate": "",
      "endDate": "",
      "totalDays": 0
    },
    "subcollections": {
      "destinations": [
        { "name": "", "price": 0, "province": "", "date": "", "orderIndex": 0 }
      ],
      "expenses": [
        { "name": "", "price": 0, "date": "", "orderIndex": 0 }
      ],
      "meals": [
        { "name": "", "price": 0, "date": "", "orderIndex": 0 }
      ],
      "allowances": [
        { "name": "", "price": 0, "date": "", "orderIndex": 0 }
      ],
      "summary": {
        "totalTabs": 0,
        "advancePayment": 0,
        "totalAfterAdvance": 0,
        "companyTip": 0,
        "totalAfterTip": 0,
        "collectionsForCompany": 0,
        "totalAfterCollections": 0,
        "finalTotal": 0
      }
    }
  }
]
```

